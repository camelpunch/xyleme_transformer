<?xml version="1.0" encoding="UTF-8"?>
<IA xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:type="IA/Definitions/IADef.xml"
    xy:guid="a7c5c442-df8f-4625-8bb0-3a4d514153f9" xmlns:xy="http://xyleme.com/xylink">
  <CoverPage>
    <Title>Ambari 1.7.0 Documentation Suite</Title>
    <SubTitle>Ambari 1.7.0</SubTitle>
    <Notice>
      <Title>Copyright</Title>
      <ParaBlock xy:guid="48f9146a-1500-4b9b-b8da-e6798e8eb678">
        <RichText>This work by
          <Href UrlTarget="http://hortonworks.com">Hortonworks, Inc.</Href>
          is licensed under a<Href UrlTarget="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
            Attribution-ShareAlike 3.0 Unported License</Href>.
        </RichText>
      </ParaBlock>
      <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                      xy:guid="20139641-ae7d-4230-b076-cecbdef01629"/>
    </Notice>
  </CoverPage>
  <Credits>
    <CopyrightBlock xy:guid="b93c0fb1-5c1c-4ab8-86e1-3953c9412f77">
      <RichText>The Hortonworks Data Platform, powered by Apache Hadoop, is a massively scalable and 100% open source
        platform for storing, processing and analyzing large volumes of data. It is designed to deal with data from many
        sources and formats in a very quick, easy and cost-effective manner. The Hortonworks Data Platform consists of
        the essential set of Apache Hadoop projects including MapReduce, Hadoop Distributed File System (HDFS),
        HCatalog, Pig, Hive, HBase, Zookeeper and Ambari. Hortonworks is the major contributor of code and patches to
        many of these projects. These projects have been integrated and tested as part of the Hortonworks Data Platform
        release process and installation and configuration tools have also been included.
      </RichText>
      <RichText>Unlike other providers of platforms built using Apache Hadoop, Hortonworks contributes 100% of our code
        back to the Apache Software Foundation. The Hortonworks Data Platform is Apache-licensed and completely open
        source. We sell only expert technical support,
        <Href UrlTarget="http://hortonworks.com/hadoop-training/">training</Href>
        and partner enablement services.
        <Emph>All of our technology is, and will remain, free and open source.
        </Emph>
      </RichText>
      <RichText>For more information on Hortonworks technology, Please visit the
        <Href UrlTarget="http://hortonworks.com/products/hdp/">Hortonworks Data Platform</Href>
        page. For more information on Hortonworks services, please visit either the
        <Href UrlTarget="http://hortonworks.com/hadoop-support/">Support</Href>
        or
        <Href UrlTarget="http://hortonworks.com/hadoop-training">Training</Href>
        page. Feel free to
        <Href UrlTarget="http://hortonworks.com/about-us/contact-us/">Contact Us</Href>
        directly to discuss your specific needs.
      </RichText>
    </CopyrightBlock>
    <CopyrightDate>Copyright Â© 2012, 2014 Hortonworks, Inc. Some rights reserved.</CopyrightDate>
  </Credits>
  <Lessons>
    <Lesson xy:guid="9ae2645b-c469-4eff-8b6f-49a01d8a4884">
      <Title>Ambari User's Guide</Title>
      <Topic xy:guid="5ed795d7-60ee-45f1-b2af-ed6b16cd9c5a">
        <Title>Overview</Title>
        <ParaBlock xy:guid="9c1b9976-41ae-4f8a-bb8c-6d9a3e8c4b20">
          <RichText>Hadoop is a large-scale, distributed data storage and processing infrastructure using clusters of
            commodity hosts networked together. Monitoring and managing such complex distributed systems is a
            non-trivial task. To help you manage the complexity, Apache Ambari collects a wide range of information from
            the cluster's nodes and services and presents it to you in an easy-to-read and use, centralized web
            interface, Ambari Web.

            Ambari Web displays information such as service-specific summaries, graphs, and alerts. You use Ambari Web
            to create and manage your HDP cluster and to perform basic operational tasks such as starting and stopping
            services, adding hosts to your cluster, and updating service configurations. You also use Ambari Web to
            perform administrative tasks for your cluster, such as managing users and groups and deploying Ambari Views.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="79682e24-8cfc-49c2-bdd3-b87df97dc875">
        <Title>Architecture</Title>
        <ParaBlock xy:guid="eba1d9b7-5163-449f-b220-fa3fd5626125">
          <RichText>The Ambari Server serves as the collection point for data from across your cluster. Each host has a
            copy of the Ambari Agent - either installed automatically by the Install wizard or manually - which allows
            the Ambari Server to control each host. In addition, each host has a copy of Ganglia Monitor (<InLineCode>
              gmond</InLineCode>), which collects metric information that is passed to the Ganglia Connector, and then
            on to the Ambari Server.
          </RichText>
          <Figure xy:guid="c7244dcc-2e22-4a01-b7c7-1f9d117e5167">
            <MediaObject xy:guid="2d62b40f-9ce6-4106-aefc-4613636924ad">
              <Title>Ambari Server Architecture</Title>
              <Renditions>
                <Print thumbWidth="50" uri="01-RawContent/Ambari/architecture_no_gang.png"/>
                <Web thumbWidth="25" uri="01-RawContent/Ambari/architecture_no_gang.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
        </ParaBlock>
        <Topic xy:guid="021249b1-914f-4b61-b493-bc0f93b5159e">
          <Title>Sessions</Title>
          <ParaBlock xy:guid="3e05d4dd-2a71-4bc2-b21a-f06554d03a22">
            <RichText>Ambari Web is a client-side JavaScript application, which calls the Ambari REST API (accessible
              from the Ambari Server) to access cluster information and perform cluster operations. After authenticating
              to Ambari Web, the application authenticates to the Ambari Server. Communication between the browser and
              server occurs asynchronously via the REST API.
            </RichText>
            <RichText>
              Ambari Web sessions do not time out. The Ambari Server application constantly accesses the Ambari REST
              API, which resets the session timeout. During any period of Ambari Web inactivity, the Ambari Web user
              interface (UI) refreshes automatically. You must explicitly sign out of the Ambari Web UI to destroy the
              Ambari session with the server.
            </RichText>
            <Figure xy:guid="fa56ee7d-b314-486a-ad72-b388acf81026">
              <MediaObject xy:guid="296b58c3-edd2-427f-87e8-c38fea482699">
                <Renditions>
                  <Print thumbWidth="50" uri="01-RawContent/Ambari/signout.png"/>
                  <Web thumbWidth="25" uri="01-RawContent/Ambari/signout.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="38a30991-3a39-483c-b7b0-a6676a1737fc">
        <Title>Accessing Ambari Web</Title>
        <ParaBlock xy:guid="726f4d49-d6b9-4f1b-a3d5-c96fa53a4a20">
          <RichText>Typically, you start the Ambari Server and Ambari Web as part of the installation process. If Ambari
            Server is stopped, you can start it using a command line editor on the Ambari Server host machine. Enter the
            following command:
          </RichText>
          <RichText>
            <InLineTypeThis>ambari-server start</InLineTypeThis>
          </RichText>
          <RichText>
            To access Ambari Web, open a supported browser and enter the Ambari Web URL:
          </RichText>
          <RichText>
            <InLineApplicationPrompt>http://&lt;your.ambari.server&gt;:8080</InLineApplicationPrompt>
          </RichText>
          <RichText>
            Enter your user name and password. If this is the first time Ambari Web is accessed, use the default values,
            <InLineCode>admin/admin</InLineCode>.

            These values can be changed, and new users provisioned, using the
            <InLineMenuSelection>Manage Ambari</InLineMenuSelection>
            option.
          </RichText>
          <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="d232f618-ec45-4bfb-8178-ce4a3868081a">
            <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                         xy:guid="3031235b-bb4c-42bf-90fa-64e452e51516">
              <Renditions>
                <Print thumbWidth="50" uri="01-RawContent/Ambari/manage_ambari_option_full_width_arrow.png"/>
                <Web thumbWidth="50" uri="01-RawContent/Ambari/manage_ambari_option_full_width_arrow.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <RichText>
            For more information about managing users and other administrative tasks, see<Xref
                  InsideTargetRef="c016ce20-4136-4813-941b-dfa8ec05b5aa">Administering Ambari</Xref>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="09419997-e1b4-4788-a11a-5b02cdfedd90">
        <Title>Monitoring and Managing your HDP Cluster with Ambari</Title>
        <ParaBlock xy:guid="5991f7ed-8076-4459-8728-30f4094f46b3">
          <RichText>This topic describes how to use Ambari Web features to monitor and manage your HDP cluster. To
            navigate, select one of the following feature tabs located at the top of the Ambari main window. The
            selected tab appears white.
          </RichText>
          <Figure xy:guid="b42b3550-271d-41c9-85f5-967509b1278a">
            <MediaObject xy:guid="6ee78c59-85c6-468e-9283-f2b56af38e28">
              <Renditions>
                <Print thumbWidth="50" uri="01-RawContent/Ambari/navheader3.png"/>
                <Web thumbWidth="25" uri="01-RawContent/Ambari/navheader3.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <List ListMarker="Bullet" xy:guid="b1e9f445-5d36-4bca-abe0-c9c773ccf177">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7db492c4-fef5-4686-b19d-acf0a1bd39a9">Viewing</Xref>
                  <Xref InsideTargetRef="7db492c4-fef5-4686-b19d-acf0a1bd39a9">Metrics on the Dashboard</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a395d3b3-f835-4033-8176-d5ccee6830e5">Monitoring and Managing Services</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e98ea9e6-e031-46ef-bde7-6680d0bdf153">Managing Hosts</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="3725b276-e557-4c69-858d-3cda866960f5">Administering the Cluster</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="7db492c4-fef5-4686-b19d-acf0a1bd39a9">
        <Title>Viewing Metrics on the Dashboard</Title>
        <ParaBlock xy:guid="5c8a5b4e-b002-4108-92e2-3f7e5fa60526">
          <RichText>Ambari Web displays the
            <Emph>Dashboard</Emph>
            page as the home page. Use the
            <Emph>Dashboard</Emph>
            to view the operating status of your cluster in the following three ways:
          </RichText>
          <List ListMarker="Bullet" xy:guid="e3fbb17c-871b-4fab-8d87-6d27cada2db0">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="61c72883-e9b3-49d0-9ada-e74d91bceec2">Scanning System Metrics</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="ac23e281-be1d-4955-86c1-33c1adb97a5c">Scanning Status</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="fb656590-d257-4e91-b2cc-67c98c962c11">Viewing Heatmaps</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="61c72883-e9b3-49d0-9ada-e74d91bceec2">
          <Title>Scanning System Metrics</Title>
          <ParaBlock xy:guid="e9cd4532-0443-45c5-8384-c237b1757d49">
            <RichText>View
              <Emph>Metrics</Emph>
              that indicate the operating status of your cluster on the Ambari Dashboard. Each metrics widget displays
              status information for a single service in your HDP cluster. The Ambari Dashboard displays all metrics for
              the HDFS, YARN, HBase, and Storm services, and cluster-wide metrics by default.
            </RichText>
            <CustomNote xy:guid="a4012b48-26dd-4000-9ee3-6e03530ac8de">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="afeea22f-eef8-456f-9aa5-bedf3f0246e4"/>
              <SimpleBlock>
                <RichText>Metrics data for Storm is buffered and sent as a batch to Ambari every five minutes. After
                  adding the Storm service, anticipate a five-minute delay for Storm metrics to appear.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <RichText>You can add and remove individual widgets, and rearrange the dashboard by dragging and dropping
              each widget to a new location in the dashboard.
            </RichText>
            <Figure xy:guid="0946c4b7-edac-4f92-9caf-b95d69e28aa7">
              <MediaObject xy:guid="1a02ccb3-3377-4412-8dfb-ea6fde19892f">
                <Renditions>
                  <Print thumbWidth="50" uri="01-RawContent/Ambari/allwidgets2.png"/>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/allwidgets2.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
            <RichText>Status information appears as simple pie and bar charts, more complex charts showing usage and
              load, sets of links to additional data sources, and values for operating parameters such as uptime and
              average RPC queue wait times. Most widgets display a single fact by default. For example, HDFS Disk Usage
              displays a load chart and a percentage figure. The Ambari Dashboard includes metrics for the following
              services:
            </RichText>
            <Table align="" border="true" width="100" xy:guid="8e2ab5a9-134b-4cb5-b084-dff8e7cb9676">
              <TblTitle>Ambari Service Metrics and Descriptions</TblTitle>
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Metric:</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Description:</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText/>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS Disk Usage</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The Percentage of DFS used, which is a combination of DFS and non-DFS used.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Data Nodes Live</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The number of DataNodes live, as reported from the NameNode.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NameNode Heap</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The percentage of NameNode JVM Heap used.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NameNode RPC</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The average RPC queue latency.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NameNode CPU WIO</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The percentage of CPU Wait I/O.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NameNode Uptime</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The NameNode uptime calculation.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>YARNHDP 2.0 and 2.1 Stacks</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText/>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ResourceManager Heap</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The percentage of ResourceManager JVM Heap used.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ResourceManager Uptime</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The ResourceManager uptime calculation.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NodeManagers Live</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The number of DataNodes live, as reported from the ResourceManager.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>YARN Memory</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The percentage of available YARN memory (used vs. total available).</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText/>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase Master Heap</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The percentage of NameNode JVM Heap used.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase Ave Load</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The average load on the HBase server.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase Master Uptime</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The HBase Master uptime calculation.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Region in Transition</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The number of HBase regions in transition.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>StormHDP 2.1 Stack</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText/>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Supervisors Live</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The number of Supervisors live, as reported from the Nimbus server.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>MapReduceHDP 1.3 Stack</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText/>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>JobTracker Heap</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The percentage of JobTracker JVM Heap used.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>TaskTrackers Live</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The number of TaskTrackers live, as reported from the JobTracker.</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
          <Topic xy:guid="ab84bde1-4530-4468-8a9a-32f82e3efa40">
            <Title>Drilling Into Metrics for a Service</Title>
            <ParaBlock xy:guid="c56060dd-cba1-4f7e-9b02-42476bb86c50">
              <List ListMarker="Bullet" xy:guid="04107d8c-7957-4aac-941c-5fecf827bdb1">
                <ItemBlock>
                  <Item>
                    <ItemPara>To see more detailed information about a service, hover your cursor over a Metrics
                      widget.
                    </ItemPara>
                    <RichText>More detailed information about the service displays, as shown in the following example:
                    </RichText>
                    <Figure xy:guid="8e81410a-7b68-4e1a-803b-d97fec2dcecd">
                      <MediaObject xy:guid="0fa516a7-7172-4e6a-9c44-5a745efb5f56">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/reversedwidget2.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>To remove a widget from the mashup, click the white X.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>To edit the display of information in a widget, click the pencil icon. For more
                      information about editing a widget, see<Xref
                              InsideTargetRef="65141f6f-a2ae-44a9-86d8-851eb918b178">Customizing Metrics Display</Xref>.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="e4af6825-8ee6-420f-bf7c-906c83ede50f">
            <Title>Viewing Cluster-Wide Metrics</Title>
            <ParaBlock xy:guid="a36293b4-0be6-43fa-8cf2-e2eb9aa8f5e7">
              <RichText>Cluster-wide metrics display information that represents your whole cluster. The Ambari
                Dashboard shows the following cluster-wide metrics:
              </RichText>
              <Figure xy:guid="88248407-5935-448b-ad23-9784575cfa56">
                <MediaObject xy:guid="b05112f2-b0d5-4363-8c6f-5ed0e42de37d">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/cluster_wide_metrics_2.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <Table align="" border="true" width="100" xy:guid="d539ef99-7767-4577-8148-d36e7e2fcb33">
                <TblTitle>Ambari Cluster-Wide Metrics and Descriptions</TblTitle>
                <TblGroup>
                  <TblCol width=""/>
                  <TblCol width=""/>
                  <TblHeader>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Metric:</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Description:</RichText>
                      </Cell>
                    </TableRow>
                  </TblHeader>
                  <TblBody>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Memory Usage</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>The cluster-wide memory utilization, including memory cached, swapped, used, shared.
                        </RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Network Usage</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>The cluster-wide network utilization, including in-and-out.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>CPU Usage</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Cluster-wide CPU information, including system, user and wait IO.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Cluster Load</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Cluster-wide Load information, including total number of nodes. total number of CPUs,
                          number of running processes and 1-min Load.
                        </RichText>
                      </Cell>
                    </TableRow>
                  </TblBody>
                  <TblFooter/>
                </TblGroup>
              </Table>
              <List ListMarker="Bullet" xy:guid="34480857-05b6-4171-b6d5-9185699a1885">
                <ItemBlock>
                  <Item>
                    <ItemPara>To remove a widget from the dashboard, click the white X.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Hover your cursor over each cluster-wide metric to magnify the chart or itemize the widget
                      display.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>To remove or add metric items from each cluster-wide metric widget, select the item on the
                      widget legend.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>To see a larger view of the chart, select the magnifying glass icon.</ItemPara>
                    <RichText>Ambari displays a larger version of the widget in a pop-out window, as shown in the
                      following example:
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
              <Figure xy:guid="98af0252-c0a3-4fe7-8c1f-37d02e6cb4fe">
                <MediaObject xy:guid="5354bebc-cb8c-49fd-9685-1f8f5e7d512a">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/popoutchart.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <RichText>Use the pop-up window in the same ways that you use cluster-wide metric widgets on the
                dashboard.
              </RichText>
              <RichText>To close the widget pop-up window, choose OK.</RichText>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="0e15ce55-dae4-41fc-9caa-f0a05ab5c51a">
            <Title>Adding a Widget to the Dashboard</Title>
            <ParaBlock xy:guid="10660ca5-0936-46bb-8080-70f10a234a68">
              <RichText>To replace a widget that has been removed from the dashboard:</RichText>
              <List ListMarker="Numeric" xy:guid="614d5f71-2780-4357-8ed6-0543dc9f4e22">
                <ItemBlock>
                  <Item>
                    <ItemPara>Select the Metrics drop-down, as shown in the following example:</ItemPara>
                    <Figure xy:guid="c703c7cb-ffd7-436e-a90b-1a136b39d97d">
                      <MediaObject xy:guid="797a2725-9449-4449-9427-10133a4fafa8">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/add_a_widget.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Choose Add.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Select a metric, such as Region in Transition.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose Apply.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="70e6e69d-aef8-4fae-b0fb-dc3689c75b18">
            <Title>Resetting the Dashboard</Title>
            <ParaBlock xy:guid="8a236bb4-959f-4b7c-92cd-a3b179a02246">
              <RichText>To reset all widgets on the dashboard to display default settings:</RichText>
              <List ListMarker="Numeric" xy:guid="8ffda3f0-3927-4741-87d7-318b49733849">
                <ItemBlock>
                  <Item>
                    <ItemPara>Select the Metrics drop-down, as shown in the following example:</ItemPara>
                    <Figure xy:guid="668597b3-464c-4169-bf19-5d4dcc20c042">
                      <MediaObject xy:guid="5c14d36e-5474-4281-a183-ff49e08c44a4">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/edit_widget_dashboard.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Choose Edit.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose Reset all widgets to default.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="fbf70d03-43c1-45ef-a235-77da9f156a44">
            <Title>Viewing Metrics in Ganglia</Title>
            <ParaBlock xy:guid="b79439a5-5c18-4938-ab93-2fe0b21f11d5">
              <RichText>To view metrics for your cluster using the Ganglia UI:</RichText>
              <List ListMarker="Numeric" xy:guid="2a59e780-c12a-4d2d-8786-de92c3e7c4af">
                <ItemBlock>
                  <Item>
                    <ItemPara>Select the Metrics drop-down:</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose Edit.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose View Metrics in Ganglia.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="65141f6f-a2ae-44a9-86d8-851eb918b178">
            <Title>Customizing Metrics Display</Title>
            <ParaBlock xy:guid="e799162d-7bd2-42e5-95d0-2d266e2c1c0e">
              <RichText>To customize the way a service widget displays metrics information:</RichText>
              <List ListMarker="Numeric" xy:guid="450e3d86-baeb-4e92-bccd-602ad7b541c8">
                <ItemBlock>
                  <Item>
                    <ItemPara>Hover your cursor over a service widget.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Select the pencil-shaped, edit icon that appears in the upper-right corner.</ItemPara>
                    <RichText>The Customize Widget pop-up window displays properties that you can edit, as shown in the
                      following example.
                    </RichText>
                    <Figure xy:guid="6e417bb7-7a13-42a5-9ff7-ca96c59bdd49">
                      <MediaObject xy:guid="de4bd721-6a18-41f5-9ef0-e91fa6635287">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/customizewidget.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Follow the instructions in the Customize Widget pop-up to customize widget appearance.
                    </ItemPara>
                    <RichText>In this example, you can adjust the thresholds at which the HDFS Capacity bar chart
                      changes color, from green to orange to red.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>To save your changes and close the editor, choose<InLineMenuSelection>
                      Apply</InLineMenuSelection>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>To close the editor without saving any changes, choose<InLineMenuSelection>
                      Cancel</InLineMenuSelection>.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <CustomNote xy:guid="0417242f-5c44-417a-9225-04be2cc79a71">
                <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="edb7934c-70da-43fa-af74-e271e9761e6e"/>
                <SimpleBlock>
                  <RichText>Not all widgets support editing.</RichText>
                </SimpleBlock>
              </CustomNote>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="27d241cb-1221-4a7e-8f50-b1a40190dd60">
            <Title>Viewing More Metrics for your HDP Stack</Title>
            <ParaBlock xy:guid="e92df58f-fd43-41e9-aea2-954e4a2a81cf">
              <RichText>The HDFS Links and HBase Links widgets list HDP components for which links to more metrics
                information, such as thread stacks, logs and native component UIs are available. For example, you can
                link to NameNode, Secondary NameNode, and DataNode components for HDFS, using the links shown in the
                following example:
              </RichText>
              <Figure xy:guid="ffd4d059-2afb-47c1-9017-8bc75d26f6dc">
                <MediaObject xy:guid="1f3f228a-4f42-4f87-b238-60b635a32ea4">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/more_widget_links.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <RichText>Choose the
                <InLineMenuSelection>More</InLineMenuSelection>
                drop-down to select from the list of links available for each service. The Ambari Dashboard includes
                additional links to metrics for the following services:
              </RichText>
              <Table align="" border="true" width="100" xy:guid="2597502f-dd89-4f9e-a366-fffdb3c707a6">
                <TblTitle>Links to More Metrics for HDP Services</TblTitle>
                <TblGroup>
                  <TblCol width=""/>
                  <TblCol width=""/>
                  <TblCol width=""/>
                  <TblHeader>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Service:</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Metric:</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Description:</RichText>
                      </Cell>
                    </TableRow>
                  </TblHeader>
                  <TblBody>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>HDFS</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>NameNode UI</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the NameNode UI.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>NameNode Logs</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the NameNode logs.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>NameNode JMX</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the NameNode JMX servlet.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Thread Stacks</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the NameNode thread stack traces.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>HBase</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>HBase Master UI</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the HBase Master UI.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>HBase Logs</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the HBase logs.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>ZooKeeper Info</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to ZooKeeper information.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>HBase Master JPX</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the HBase Master JMX servlet.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Debug Dump</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to debug information.</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText/>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Thread Stacks</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Links to the HBase Master thread stack traces.</RichText>
                      </Cell>
                    </TableRow>
                  </TblBody>
                  <TblFooter/>
                </TblGroup>
              </Table>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="fb656590-d257-4e91-b2cc-67c98c962c11">
          <Title>Viewing Heatmaps</Title>
          <ParaBlock xy:guid="6b384d18-9040-4268-a7f3-95da6bf676ec">
            <RichText>
              <Emph>Heatmaps</Emph>
              provides a graphical representation of your overall cluster utilization using simple color coding.
            </RichText>
            <Figure xy:guid="579ebee8-2243-4d38-84e3-cc65af05898d">
              <MediaObject xy:guid="dff14deb-46b7-48a4-8ee0-76870f9c4382">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/secondlargeheatmap2.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
            <RichText>A colored block represents each host in your cluster. To see more information about a specific
              host, hover over the block representing the host in which you are interested. A pop-up window displays
              metrics about HDP components installed on that host. Colors displayed in the block represent usage in a
              unit appropriate for the selected set of metrics. If any data necessary to determine state is not
              available, the block displays "Invalid Data". Changing the default maximum values for the heatmap lets you
              fine tune the representation. Use the Select Metric drop-down to select the metric type.
            </RichText>
            <Figure xy:guid="4caf4f46-d871-44d3-8950-bd06ddbd8fbb">
              <MediaObject xy:guid="6d402d2f-6f53-485e-9b64-62d595594368">
                <Renditions>
                  <Web thumbWidth="75" uri="01-RawContent/Ambari/heatmapspopup2.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
            <RichText>
              <Emph>Heatmaps</Emph>
              supports the following metrics:
            </RichText>
            <Table align="" border="0" width="100" xy:guid="5e830725-ed16-4d20-8bf9-b48d43d07c0b">
              <TblGroup>
                <TblCol width="333px"/>
                <TblCol width="371px"/>
                <TblHeader/>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Metric</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Uses</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Host/Disk Space Used %</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>disk.disk_free and disk.disk_total</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Host/Memory Used %</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>memory.mem_free and memory.mem_total</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Host/CPU Wait I/O %</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>cpu.cpu_wio</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS/Bytes Read</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.datanode.bytes_read</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS/Bytes Written</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.datanode.bytes_written</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS/Garbage Collection Time</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>jvm.gcTimeMillis</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS/JVM Heap MemoryUsed</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>jvm.memHeapUsedM</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>YARN/Garbage Collection Time</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>jvm.gcTimeMillis</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>YARN / JVM Heap Memory Used</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>jvm.memHeapUsedM</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>YARN / Memory used %</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>UsedMemoryMB and AvailableMemoryMB</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase/RegionServer read request count</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase.regionserver.readRequestsCount</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase/RegionServer write request count</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase.regionserver.writeRequestsCount</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase/RegionServer compaction queue size</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase.regionserver.compactionQueueSize</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase/RegionServer regions</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase.regionserver.regions</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase/RegionServer memstore sizes</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase.regionserver.memstoreSizeMB</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="ac23e281-be1d-4955-86c1-33c1adb97a5c">
          <Title>Scanning Status</Title>
          <ParaBlock xy:guid="f2c12f3d-6e4e-4815-9a0c-75aa525eb287">
            <RichText>Notice the color of the dot appearing next to each component name in a list of components,
              services or hosts. The dot color and blinking action indicates operating status of each component,
              service, or host. For example, in the<Xref InsideTargetRef="cd8177dd-d8f0-4b93-8473-503d6711e546">Summary
                View</Xref>, notice green dot next to each service name. The following colors and actions indicate
              service status:
            </RichText>
            <Table align="" border="true" width="100" xy:guid="8b3f8769-29ba-4c49-96ac-6b3ab39e02ae">
              <TblTitle>Status Indicators</TblTitle>
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Color</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Status</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Solid Green</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>All masters are running</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Blinking Green</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Starting up</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Solid Red</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>At least one master is down</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Blinking Red</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Stopping</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <RichText>Click the service name to open the
              <Emph>Services</Emph>
              screen, where you can see more detailed information on each service.
            </RichText>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="e98ea9e6-e031-46ef-bde7-6680d0bdf153">
        <Title>Managing Hosts</Title>
        <ParaBlock xy:guid="360181d9-f50a-4d40-8590-9939da9d8141">
          <RichText>Use Ambari Hosts to manage multiple HDP components such as DataNodes, NameNodes, TaskTrackers and
            RegionServers, running on hosts throughout your cluster. For example, you can restart all DataNode
            components, optionally controlling that task with rolling restarts. Ambari Hosts supports filtering your
            selection of host components, based on operating status, host health, and defined host groupings.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="c4a195fa-6eec-41a3-a699-14e950d7893b">
          <Title>Working with Hosts</Title>
          <ParaBlock xy:guid="1abecad9-8b1d-4e9d-959b-6cf6dde4853b">
            <RichText>Use Hosts to view hosts in your cluster on which Hadoop services run. Use options on
              <Emph>Actions</Emph>
              to perform actions on one or more hosts in your cluster.
            </RichText>
            <RichText>View individual hosts, listed by fully-qualified domain name, on the Hosts landing page.
            </RichText>
            <Figure xy:guid="62aa9fe7-cf41-4d0d-b003-fafdd06f8822">
              <MediaObject xy:guid="77035880-754e-4450-91e6-4e1fe8c1a1d4">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/hosts_home.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="9415d66f-de3f-444a-ba0a-53058a5c968b">
          <Title>Determining Host Status</Title>
          <ParaBlock xy:guid="48d16b32-bf9d-4341-be2f-4d2ee8fd61da">
            <RichText>A colored dot beside each host name indicates operating status of each host, as follows:
            </RichText>
            <List ListMarker="Bullet" xy:guid="f19bd285-42c2-4c61-ab35-ebd670f34721">
              <ItemBlock>
                <Item>
                  <ItemPara>Red - At least one master component on that host is down. Hover to see a tooltip that lists
                    affected components.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Orange - At least one slave component on that host is down. Hover to see a tooltip that
                    lists affected components.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Yellow - Ambari Server has not received a heartbeat from that host for more than 3
                    minutes.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Green - Normal running state.</ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>A red condition flag overrides an orange condition flag, which overrides a yellow condition flag.
              In other words, a host having a master component down may also have other issues. The following example
              shows three hosts, one having a master component down, one having a slave component down, and one healthy.
              Warning indicators appear next to hosts having a component down.
            </RichText>
            <Figure xy:guid="65ab3130-3f39-40a2-b891-ac8d30c75e95">
              <MediaObject xy:guid="ff697c90-6c18-4b93-890f-abb426102b91">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/hosts_3status_8wrngs.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="54951beb-facd-46c2-9ee9-8d21e9f83057">
          <Title>Filtering the Hosts List</Title>
          <ParaBlock xy:guid="6a694010-8ac7-4e7e-84d1-09dfe97d45d7">
            <RichText>Use Filters to limit listed hosts to only those having a specific operating status. The number of
              hosts in your cluster having a listed operating status appears after each status name, in parenthesis. For
              example, the following cluster has one host having healthy status and three hosts having Maintenance Mode
              turned on.
            </RichText>
            <Figure xy:guid="83a078fc-a84f-4279-a1cd-c7a8fc763fd2">
              <MediaObject xy:guid="0b7c9e26-fd82-4223-ae22-5feb1f87492e">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/hosts_filter_Baikal_icons.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
            <RichText>For example, to limit the list of hosts appearing on Hosts home to only those with Healthy status,
              select Filters, then choose the Healthy option. In this case, one host name appears on Hosts home.
              Alternatively, to limit the list of hosts appearing on Hosts home to only those having Maintenance Mode
              on, select Filters, then choose the Maintenance Mode option. In this case, three host names appear on
              Hosts home.
            </RichText>
            <RichText>Use the general filter tool to apply specific search and sort criteria that limits the list of
              hosts appearing on the Hosts page.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="9e3e1828-47b8-4fd7-a1bd-1cdb0d70ee23">
          <Title>Performing Host-Level Actions</Title>
          <ParaBlock xy:guid="038b3e40-902d-42a9-9a5d-1b66e986a7f4">
            <RichText>Use Actions to act on one, or multiple hosts in your cluster. Actions performed on multiple hosts
              are also known as bulk operations.
            </RichText>
            <RichText>Actions comprises three menus that list the following options types:</RichText>
            <List ListMarker="Bullet" xy:guid="460ce05a-3e5d-43e0-b170-91229c1b4a56">
              <ItemBlock>
                <Item>
                  <ItemPara>Hosts - lists selected, filtered or all hosts options, based on your selections made using
                    Hosts home and Filters.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Objects - lists component objects that match your host selection criteria.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Operations - lists all operations available for the component objects you selected.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>For example, to restart DataNodes on one host:</RichText>
            <List ListMarker="Numeric" xy:guid="c1f845e3-fae6-4970-bcb5-0ecda05f381d">
              <ItemBlock>
                <Item>
                  <ItemPara>In Hosts, select a host running at least one DataNode.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>In Actions, choose<InLineMenuSelection>Selected Hosts &gt; DataNodes &gt;
                    Restart</InLineMenuSelection>, as shown in the following image.
                  </ItemPara>
                  <Figure xy:guid="e1dba58b-da27-44dc-a001-e2d444efb93c">
                    <MediaObject xy:guid="62769b45-796e-4e0f-bb4e-44fcc53dc8b6">
                      <Renditions>
                        <Web thumbWidth="50" uri="01-RawContent/Ambari/Host_datanode_restart.png"/>
                      </Renditions>
                    </MediaObject>
                  </Figure>
                </Item>
                <Item>
                  <ItemPara>Choose OK to confirm starting the selected operation.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Optionally, use
                    <Xref InsideTargetRef="23aca095-e95c-4345-ad8a-c90ca83a80ec">Monitoring Background Operations</Xref>
                    to follow, diagnose or troubleshoot the restart operation.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="9cb21557-3948-4efa-b3cb-1c65f5b0ad31">
          <Title>Viewing Components on a Host</Title>
          <ParaBlock xy:guid="2971d467-0664-494a-a107-0b93cd257ffd">
            <RichText>To manage components running on a specific host, choose a FQDN on the Hosts page. For example,
              choose c6403.ambari.apache.org in the default example shown. Summary-Components lists all components
              installed on that host.
            </RichText>
            <Figure xy:guid="12123e0a-781d-49ac-850f-615adb6ebf77">
              <MediaObject xy:guid="9a84722e-86b1-471d-8782-90920ba6c305">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/Components_on_host3.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
            <RichText>Choose options in<InLineMenuSelection>Host Actions</InLineMenuSelection>, to start, stop, restart,
              delete, or turn on maintenance mode for all components installed on the selected host.
            </RichText>
            <RichText>Alternatively, choose action options from the drop-down menu next to an individual component on a
              host. The drop-down menu shows current operation status for each component, For example, you can
              decommission, restart, or stop the DataNode component (started) for HDFS, by selecting one of the options
              shown in the following example:
            </RichText>
            <Figure xy:guid="1807d61d-aff5-44df-a35c-8c57e704d948">
              <MediaObject xy:guid="ff4d50ae-9e75-4b78-ab5e-94e6995bea9d">
                <Renditions>
                  <Web thumbWidth="70" uri="01-RawContent/Ambari/host_components_actions.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="cf4ae865-b647-4713-9059-a3b681ee9dce">
          <Title>Decommissioning Masters and Slaves</Title>
          <ParaBlock xy:guid="9b3d55d9-5f60-4924-bdbe-8b0dbd60fbbd">
            <RichText>Decommissioning is a process that supports removing a component from the cluster. You must
              decommission a master or slave running on a host before removing the component or host from service.
              Decommissioning helps prevent potential loss of data or service disruption. Decommissioning is available
              for the following component types:
            </RichText>
            <List ListMarker="Bullet" xy:guid="e0767fa5-8a53-4d5f-b40f-900349408456">
              <ItemBlock>
                <Item>
                  <ItemPara>DataNodes</ItemPara>
                </Item>
                <Item>
                  <ItemPara>NodeManagers</ItemPara>
                </Item>
                <Item>
                  <ItemPara>TaskTrackers</ItemPara>
                </Item>
                <Item>
                  <ItemPara>RegionServers</ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>Decommissioning executes the following tasks:</RichText>
            <List ListMarker="Bullet" xy:guid="b8e64221-dda9-4154-9833-b6109b5dc703">
              <ItemBlock>
                <Item>
                  <ItemPara>For DataNodes, safely replicates the HDFS data to other DataNodes in the cluster.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>For NodeManagers and TaskTrackers, stops accepting new job requests from the masters and
                    stops the component.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>For RegionServers, turns on drain mode and stops the component.</ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="9cb774e3-2775-438f-ab89-c3b544c8a43d">
            <Title>How to Decommission a Component</Title>
            <ParaBlock xy:guid="024a731a-da4f-4cd6-b4ad-5a130e0541a1">
              <RichText>To decommission a component using Ambari Web, browse
                <Emph>Hosts</Emph>
                to find the host FQDN on which the component resides.
              </RichText>
              <RichText>Using<Emph>Actions</Emph>, select<Emph>HostsComponent Type</Emph>, then choose<Emph>
                Decommission</Emph>.
              </RichText>
              <RichText>For example:</RichText>
              <Figure xy:guid="d3df01fa-ff9c-4e08-82e0-7667b7e203a8">
                <MediaObject xy:guid="9dc45892-38f7-48b1-84fa-e25675dc298d">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/decommission_dnode.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <RichText>The UI shows "Decommissioning" status while steps process, then "Decommissioned" when
                complete.
              </RichText>
              <Figure xy:guid="ccee4ec2-efe2-42c0-87dc-1bfc61e3b191">
                <MediaObject xy:guid="6bb0f782-d231-4175-831c-9d075905ab7c">
                  <Renditions>
                    <Web thumbWidth="75" uri="01-RawContent/Ambari/decomissioning_masters.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="331ccce9-5932-4eaf-ae48-9a7fffcf7f1a">
            <Title>How to Delete a Component</Title>
            <ParaBlock xy:guid="6643bc8d-af14-42d8-9e8b-180ac6439b45">
              <RichText>To delete a component using Ambari Web, on
                <InLineMenuSelection>Hosts</InLineMenuSelection>
                choose the host FQDN on which the component resides.
              </RichText>
              <List ListMarker="Numeric" xy:guid="894b4301-f2c6-47b2-95f0-edd125a95c74">
                <ItemBlock>
                  <Item>
                    <ItemPara>In<InLineMenuSelection>Components</InLineMenuSelection>, find a decommissioned component.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Stop the component, if necessary.</ItemPara>
                    <CustomNote xy:guid="f646fb3f-c7fb-4ba9-82f8-3b478e7935ec">
                      <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="fab7fefd-3bb5-406f-8660-0b28aeed73bf"/>
                      <SimpleBlock>
                        <RichText>A decommissioned slave component may restart in the decommissioned state.</RichText>
                      </SimpleBlock>
                    </CustomNote>
                  </Item>
                  <Item>
                    <ItemPara>For a decommissioned component, choose
                      <Emph>Delete</Emph>
                      from the component drop-down menu.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Restart the Ganglia and Nagios services.</ItemPara>
                    <CustomNote xy:guid="a81b2eca-d604-42bc-a8e3-e9dca7361f2a">
                      <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="f8beafd9-4d94-44d7-a7a7-5992047415a7"/>
                      <SimpleBlock>
                        <RichText>Restarting services enables Ambari to recognize and monitor the correct number of
                          components.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                    <RichText>Deleting a slave component, such as a DataNode does not automatically inform a master
                      component, such as a NameNode to remove the slave component from its exclusion list. Adding a
                      deleted slave component back into the cluster presents the following issue; the added slave
                      remains decommissioned from the master's perspective. Restart the master component, as a
                      work-around.
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="1dabca85-b385-43b7-94af-ed5a3cad7a63">
          <Title>Deleting a Host from a Cluster</Title>
          <ParaBlock xy:guid="412fedff-07c2-4df1-b4e4-cd2063cdfd17">
            <RichText>Deleting a host removes the host from the cluster. Before deleting a host, you must complete the
              following prerequisites:
            </RichText>
            <List ListMarker="Bullet" xy:guid="66db1e49-b22d-46ea-9b2b-65823cefda0f">
              <ItemBlock>
                <Item>
                  <ItemPara>Stop all components running on the host.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Decommission any DataNodes running on the host.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Move from the host any master components, such as NameNode or ResourceManager, running on
                    the host.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Turn Off Maintenance Mode, if necessary, for the host.</ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="c678bef8-68fa-490e-94f7-95bdb727a069">
            <Title>How to Delete a Host from a Cluster</Title>
            <ParaBlock xy:guid="8c4fbf8c-f739-4b88-9a74-a4684ca4264b">
              <List ListMarker="Numeric" xy:guid="8bbae706-baa4-4fa4-9d36-e469f04ede2d">
                <ItemBlock>
                  <Item>
                    <ItemPara>In Hosts, click on a host name.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>On the Host-Details page, select Host Actions drop-down menu.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose Delete.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>If you have not completed prerequisite steps, a warning message similar to the following one
                appears:
              </RichText>
              <Figure xy:guid="5c2610e8-2e84-4599-9b3f-8f9faf4bbc23">
                <MediaObject xy:guid="20e70c5d-86c1-4d19-8a67-601971cd1c74">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/Unable_to_delete_host_msg.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="0ec3f7a2-f562-45be-a550-63d63861558d">
          <Title>Setting Maintenance Mode</Title>
          <ParaBlock xy:guid="d507a97c-329f-4854-a491-76ae3e1efb1e">
            <RichText>Maintenance Mode supports suppressing alerts and skipping bulk operations for specific services,
              components and hosts in an Ambari-managed cluster. You typically turn on Maintenance Mode when performing
              hardware or software maintenance, changing configuration settings, troubleshooting, decommissioning, or
              removing cluster nodes. You may place a service, component, or host object in Maintenance Mode before you
              perform necessary maintenance or troubleshooting tasks.
            </RichText>
            <RichText>Maintenance Mode affects a service, component, or host object in the following two ways:
            </RichText>
            <List ListMarker="Bullet" xy:guid="0d15ed57-24d1-433d-90d6-7fee04da43ab">
              <ItemBlock>
                <Item>
                  <ItemPara>Maintenance Mode suppresses alerts, warnings and status change indicators generated for the
                    object
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Maintenance Mode exempts an object from host-level or service-level bulk operations
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>Explicitly turning on Maintenance Mode for a service implicitly turns on Maintenance Mode for
              components and hosts that run the service. While Maintenance Mode On prevents bulk operations being
              performed on the service, component, or host, you may explicitly start and stop a service, component, or
              host having Maintenance Mode On.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="4cf51bf2-553a-48c8-92c0-e50b6009b2fc">
            <Title>Setting Maintenance Mode for Services, Components, and Hosts</Title>
            <ParaBlock xy:guid="4a067856-3ce8-4a4e-b663-99bbd7f6f451">
              <RichText>For example, examine using Maintenance Mode in a 3-node, Ambari-managed cluster installed using
                default options. This cluster has one data node, on host c6403. This example describes how to explicitly
                turn on Maintenance Mode for the HDFS service, alternative procedures for explicitly turning on
                Maintenance Mode for a host, and the implicit effects of turning on Maintenance Mode for a service, a
                component and a host.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="c35399f0-2cc2-4ff4-95b3-eb74e852a590">
              <Title>How to Turn On Maintenance Mode for a Service</Title>
              <ParaBlock xy:guid="a1b8ce2b-a3ce-4278-8121-56049c86bb86">
                <List ListMarker="Numeric" xy:guid="dfe57495-2823-4456-9047-9fb75ebdb103">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Using Services, select<InLineMenuSelection>HDFS</InLineMenuSelection>.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Select Service Actions, then choose<InLineTypeThis>Turn On Maintenance
                        Mode</InLineTypeThis>.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Choose OK to confirm.</ItemPara>
                      <RichText>
                        Notice, on Services Summary that Maintenance Mode turns on for the NameNode and SNameNode
                        components.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="962f148a-3dc5-48d6-b133-a8c7d3c5d0a0">
              <Title>How to Turn On Maintenance Mode for a Host</Title>
              <ParaBlock xy:guid="be44e828-679b-4ba6-8cc9-6d6b6add6e4a">
                <List ListMarker="Numeric" xy:guid="4f401b29-5a3c-4689-b6dd-a4cef7ae98d0">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Using Hosts, select c6401.ambari.apache.org.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Select<InLineMenuSelection>Host Actions</InLineMenuSelection>, then choose
                        <InLineMenuSelection>Turn On Maintenance Mode</InLineMenuSelection>.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Choose OK to confirm.</ItemPara>
                      <RichText>
                        Notice on Components, that Maintenance Mode turns on for all components.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="f7068f30-97e9-4f2b-8d8e-eb58e2236ffa">
              <Title>How to Turn On Maintenance Mode for a Host (alternative using filtering for hosts)</Title>
              <ParaBlock xy:guid="b5ee4bfe-e803-4f22-95e3-9bae32515794">
                <List ListMarker="Numeric" xy:guid="a183f3dc-b8c3-413e-855c-690195f2b345">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Using Hosts, select c6403.ambari.apache.org.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>In
                        <InLineMenuSelection>Actions &gt; Selected Hosts &gt; Hosts</InLineMenuSelection>
                        choose<InLineMenuSelection>Turn On Maintenance Mode</InLineMenuSelection>.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Choose
                        <InLineMenuSelection>OK</InLineMenuSelection>
                        to confirm.
                      </ItemPara>
                      <RichText>
                        Notice that Maintenance Mode turns on for host c6403.ambari.apache.org.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
                <RichText>
                  Your list of Hosts now shows Maintenance Mode On for hosts c6401 and c6403.
                </RichText>
                <Figure xy:guid="747ff904-3122-4bec-9619-144d386369f9">
                  <MediaObject xy:guid="15778f7c-2ae4-49cb-8403-8487bccbaf6b">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/MM_hosts_components.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <List ListMarker="Bullet" xy:guid="bebf5d10-92dd-4602-8612-edf80a49e230">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Hover your cursor over each Maintenance Mode icon appearing in the Hosts list.
                      </ItemPara>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>Notice that hosts c6401 and c6403 have Maintenance Mode On.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Notice that on host c6401; Ganglia Monitor, HbaseMaster, HDFS client, NameNode,
                              and Zookeeper Server have Maintenance Mode turned On.
                            </ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Notice on host c6402, that HDFS client and Secondary NameNode have Maintenance
                              Mode On.
                            </ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Notice on host c6403, that 15 components have Maintenance Mode On.</ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                    </Item>
                    <Item>
                      <ItemPara>The following behavior also results:</ItemPara>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>Alerts are suppressed for the DataNode.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>DataNode is skipped from HDFS Start/Stop/Restart All, Rolling Restart.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>DataNode is skipped from all Bulk Operations except Turn Maintenance Mode
                              ON/OFF.
                            </ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>DataNode is skipped from Start All and / Stop All components.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>DataNode is skipped from a host-level restart/restart all/stop all/start.
                            </ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="6e589d4e-8bf4-4995-841b-753a3a745912">
              <Title>Maintenance Mode Use Cases</Title>
              <ParaBlock xy:guid="ad4c2ab7-8ca3-4f29-8611-9f06436e6a70">
                <RichText>Four common Maintenance Mode Use Cases follow:</RichText>
                <List ListMarker="Numeric" xy:guid="292a2544-a7e7-4d28-ab3a-7e3956e0d258">
                  <ItemBlock>
                    <Item>
                      <ItemPara>You want to perform hardware, firmware, or OS maintenance on a host.</ItemPara>
                      <RichText>
                        You want to:
                      </RichText>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>Prevent alerts generated by all components on this host.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Be able to stop, start, and restart each component on the host.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Prevent host-level or service-level bulk operations from starting, stopping, or
                              restarting components on this host.
                            </ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                      <RichText>
                        To achieve these goals, turn On Maintenance Mode explicitly for the host. Putting a host in
                        Maintenance Mode implicitly puts all components on that host in Maintenance Mode.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>You want to test a service configuration change. You will stop, start, and restart the
                        service using a rolling restart to test whether restarting picks up the change.
                      </ItemPara>
                      <RichText>
                        You want:
                      </RichText>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>No alerts generated by any components in this service.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>To prevent host-level or service-level bulk operations from starting, stopping, or
                              restarting components in this service.
                            </ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                      <RichText>
                        To achieve these goals, turn on Maintenance Mode explicitly for the service. Putting a service
                        in Maintenance Mode implicitly turns on Maintenance Mode for all components in the service.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>You turn off a service completely.</ItemPara>
                      <RichText>
                        You want:
                      </RichText>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>The service to generate no warnings.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>To ensure that no components start, stop, or restart due to host-level actions or
                              bulk operations.
                            </ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                      <RichText>
                        To achieve these goals, turn On Maintenance Mode explicitly for the service. Putting a service
                        in Maintenance Mode implicitly turns on Maintenance Mode for all components in the service.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>A host component is generating alerts.</ItemPara>
                      <RichText>
                        You want to:
                      </RichText>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>Check the component.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Assess warnings and alerts generated for the component.</ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Prevent alerts generated by the component while you check its condition.
                            </ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                    </Item>
                  </ItemBlock>
                </List>
                <RichText>
                  To achieve these goals, turn on Maintenance Mode explicitly for the host component. Putting a host
                  component in Maintenance Mode prevents host-level and service-level bulk operations from starting or
                  restarting the component. You can restart the component explicitly while Maintenance Mode is on.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="715af2ad-c644-4a4d-a0e2-8a43059f3ae5">
          <Title>Adding Hosts to a Cluster</Title>
          <ParaBlock xy:guid="6b93b388-2267-4612-90ac-f0388755145a">
            <RichText>To add new hosts to your cluster, browse to the Hosts page and select
              <InLineMenuSelection>Actions &gt;</InLineMenuSelection>
              <InLineMenuSelection>+Add New Hosts</InLineMenuSelection>. The
              <InLineMenuSelection>Add Host Wizard</InLineMenuSelection>
              provides a sequence of prompts similar to those in the Ambari Install Wizard. Follow the prompts,
              providing information similar to that provided to define the first set of hosts in your cluster.
            </RichText>
            <Figure xy:guid="e22b4ec7-dac8-427d-a6eb-c6ab33cc011f">
              <MediaObject xy:guid="43837753-3ed5-44e1-a52d-222588b8d8a2">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/addhosts.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="a395d3b3-f835-4033-8176-d5ccee6830e5">
        <Title>Managing Services</Title>
        <ParaBlock xy:guid="4d461a5f-c79a-4c21-8da2-1751bc5de451">
          <RichText>Use
            <InLineMenuSelection>Services</InLineMenuSelection>
            to monitor and manage selected services running in your Hadoop cluster.
          </RichText>
          <RichText>All services installed in your cluster are listed in the leftmost
            <InLineMenuSelection>Services</InLineMenuSelection>
            panel.
          </RichText>
          <Figure xy:guid="cf11a7d4-3ef6-4b6b-8f1c-bc805197e0fc">
            <MediaObject xy:guid="dc29ed02-79a1-4bb3-9146-a1e9221675a3">
              <Renditions>
                <Web thumbWidth="50" uri="01-RawContent/Ambari/Services_hdp22_amb170.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <RichText>Services supports the following tasks:</RichText>
          <List ListMarker="Bullet" xy:guid="ed2b8de9-fa62-415f-86ea-f6b03890b7f8">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="1b6faf72-d530-448d-b7da-1c863aaf8e2c">Starting and Stopping All Services</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="229fb7c2-31ed-4a90-aba6-9d00ce5f32ce">Selecting a Service</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="cd8177dd-d8f0-4b93-8473-503d6711e546">Viewing Summary, Alert, and Health
                    Information
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="f6634232-8199-4010-b67d-c18563e7fa11">Editing Service Config Properties</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="33b1ba5b-14d6-4fd8-a405-fde772168b2b">Rolling Restarts</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="4c1204bd-2364-41e7-bca6-fd415f8f696e">Using Quick Links</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="275969b0-5b20-4fde-8837-8a527032f0c5">Analyzing Service Metrics</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="1b6faf72-d530-448d-b7da-1c863aaf8e2c">
          <Title>Starting and Stopping All Services</Title>
          <ParaBlock xy:guid="9a37261f-120d-4a9f-aee8-f79d9d723e6c">
            <RichText>To start or stop all listed services at once, select<InLineMenuSelection>
              Actions</InLineMenuSelection>, then choose
              <InLineMenuSelection>Start All</InLineMenuSelection>
              or<InLineMenuSelection>Stop All</InLineMenuSelection>, as shown in the following example:
            </RichText>
            <Figure xy:guid="c426efcf-6628-4096-b3e3-b7596d48f1c6">
              <MediaObject xy:guid="3926a07c-ce52-497a-8296-f955e872be06">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/services_stop_all.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="229fb7c2-31ed-4a90-aba6-9d00ce5f32ce">
          <Title>Selecting a Service</Title>
          <ParaBlock xy:guid="cc99b280-410d-4d1e-b825-6f0237862db7">
            <RichText>Selecting a service name from the list shows current summary, alert, and health information for
              the selected service. To refresh the monitoring panels and show information about a different service,
              select a different service name from the list.
            </RichText>
            <RichText>Notice the colored dot next to each service name, indicating service operating status and a small,
              red, numbered rectangle indicating any alerts generated for the service.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="19a49eb0-7d00-4f33-bb7b-ed805a5cd656">
            <Title>Adding a Service</Title>
            <ParaBlock xy:guid="a1f37033-effb-474f-a9b4-53be156d6a4d">
              <RichText>The Ambari install wizard installs all available Hadoop services by default. You may choose to
                deploy only some services initially, then add other services at later times. For example, many customers
                deploy only core Hadoop services initially.
                <InLineMenuSelection>Add Service</InLineMenuSelection>
                supports deploying additional services without interrupting operations in your Hadoop cluster. When you
                have deployed all available services,
                <InLineMenuSelection>Add Service</InLineMenuSelection>
                displays disabled.
              </RichText>
              <RichText>
                For example, if you are using HDP 2.2 Stack and did not install Falcon or Storm, you can use the
                <InLineMenuSelection>Add Service</InLineMenuSelection>
                capability to add those services to your cluster.
              </RichText>
              <CustomNote xy:guid="e885be6b-a63c-4e9c-b63a-14b5fd723229">
                <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="69030c0a-cd39-42f3-8231-a165aac77d3b"/>
                <SimpleBlock>
                  <RichText>After installing Storm via Ambari, you should configure the Storm service to run as a
                    supervised service.
                  </RichText>
                  <RichText>For more information, see<Xref InsideTargetRef="803898d1-8f94-4980-9b9f-9b110361a6a3">
                    Configuring Storm for Supervision</Xref>.
                  </RichText>
                </SimpleBlock>
              </CustomNote>
              <RichText>To add a service, select<InLineMenuSelection>Actions &gt; Add Service</InLineMenuSelection>,
                then complete the following procedure using the Add Service Wizard.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="fd778176-c966-47f0-9a58-5856f02dfddc">
              <Title>Adding a Service to your Hadoop cluster</Title>
              <ParaBlock xy:guid="3e74c109-33e5-4fcc-80f4-ed1cc4f41463">
                <RichText>This example shows the Falcon service selected for addition.</RichText>
                <List ListMarker="Numeric" xy:guid="a874e594-4e78-4075-a1f8-6c92fed7f62c">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Choose<InLineMenuSelection>Services</InLineMenuSelection>.
                      </ItemPara>
                      <RichText>
                        Choose an available service. Alternatively, choose all to add all available services to your
                        cluster. Then, choose Next. The Add Service wizard displays installed services highlighted green
                        and check-marked, not available for selection.
                      </RichText>
                      <Figure xy:guid="dbd2f2d8-4cc0-40ad-af95-10aa8da21017">
                        <MediaObject xy:guid="2502ac3f-853f-4f91-9abb-6fac28a51ab8">
                          <Renditions>
                            <Web thumbWidth="60" uri="01-RawContent/Ambari/SelectService75.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>In<InLineMenuSelection>Assign Masters</InLineMenuSelection>, confirm the default host
                        assignment. Alternatively, choose a different host machine to which master components for your
                        selected service will be added. Then, choose Next.
                      </ItemPara>
                      <RichText>
                        The Add Services Wizard indicates hosts on which the master components for a chosen service will
                        be installed. A service chosen for addition shows a grey check mark.

                        Using the drop-down, choose an alternate host name, if necessary.
                      </RichText>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>A green label located on the host to which its master components will be added,
                              or
                            </ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>An active drop-down list on which available host names appear.</ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                      <Figure xy:guid="e39d2f98-737c-4123-b00e-79c5e196bc8f">
                        <MediaObject xy:guid="6ef3325d-d58d-460a-8499-611d7fb25718">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/AssignMasters.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>In<InLineMenuSelection>Assign Slaves and Clients</InLineMenuSelection>, accept the
                        default assignment of slave and client components to hosts. Then, choose Next.
                      </ItemPara>
                      <RichText>
                        Alternatively, select hosts on which you want to install slave and client components. You must
                        select at least one host for the slave of each service being added.
                      </RichText>
                      <Table align="" border="true" width="100" xy:guid="0eae741d-88ca-4df9-a45a-b647ca09d961">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Service Added</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Host Role Required</RichText>
                              </Cell>
                            </TableRow>
                          </TblHeader>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>MapReduce</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>TaskTracker</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>YARN</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>NodeManager</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>HBase</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>RegionServer</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                        <Caption>Host Roles Required for Added Services</Caption>
                      </Table>
                      <RichText>The Add Service Wizard skips and disables the Assign Slaves and Clients step for a
                        service requiring no slave nor client assignment.
                      </RichText>
                      <Figure xy:guid="454db3fc-3a54-4acd-bd5b-21997606c5f9">
                        <MediaObject xy:guid="b455aebc-92b9-4afe-8b19-f6ad4077e6ad">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/AssignSlavesnClients.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>In<InLineMenuSelection>Customize Services</InLineMenuSelection>, accept the default
                        configuration properties.
                      </ItemPara>
                      <RichText>
                        Alternatively, edit the default values for configuration properties, if necessary. Choose
                        Override to create a configuration group for this service. Then, choose Next.
                      </RichText>
                      <Figure xy:guid="bddf21a7-3066-4e24-a670-0fbbdc8f374c">
                        <MediaObject xy:guid="e119eb94-b2c0-4fbb-91ce-1aebd2da25f9">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/CustomizeServices.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>In Review, make sure the configuration settings match your intentions. Then, choose
                        Deploy.
                      </ItemPara>
                      <Figure xy:guid="63c4bd38-5539-43ef-a3d8-0fe869f48aa1">
                        <MediaObject xy:guid="25052d70-bf76-44bf-9894-15bac56ea810">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/ReviewServiceConfig.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Monitor the progress of installing, starting, and testing the service. When the service
                        installs and starts successfully, choose Next.
                      </ItemPara>
                      <Figure xy:guid="58b01d39-efdd-4171-88f5-e83077887d32">
                        <MediaObject xy:guid="4231420e-e758-4db4-9614-1fd81b84821b">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/AddServiceISTsuccess.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Summary displays the results of installing the service. Choose Complete.</ItemPara>
                      <Figure xy:guid="f8a87dbf-6760-4544-84ee-d79e11198dee">
                        <MediaObject xy:guid="2098d7c0-0b6d-4205-9b85-b402e304b5b6">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/AddServiceSummary.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Restart the Nagios service and any other components having stale configurations.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
                <RichText>If you do not restart Nagios service after completing the Add Service Wizard, alerts and
                  notifications may not work properly.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="cd8177dd-d8f0-4b93-8473-503d6711e546">
          <Title>Viewing Summary, Alert, and Health Information</Title>
          <ParaBlock xy:guid="0a55fa65-65c6-4aab-bd72-1a6885a4be21">
            <RichText>After you select a service, the
              <InLineMenuSelection>Summary</InLineMenuSelection>
              tab displays basic information about the selected service.
            </RichText>
            <Figure xy:guid="ee50704f-9cab-44ac-b7dd-aa76318d8025">
              <MediaObject xy:guid="5073aa74-083b-44c7-8d75-f70371548a2a">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/services_summary.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
            <RichText>Select one of the
              <InLineMenuSelection>View Host</InLineMenuSelection>
              links, as shown in the following example, to view components and the host on which the selected service is
              running.
            </RichText>
            <Figure xy:guid="e0fc96ac-dec6-4c65-875a-e0e914e08237">
              <MediaObject xy:guid="8eca9b75-b068-4e21-8233-feb1677da7d9">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/view_hosts_links.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
          <Topic xy:guid="5809ca7d-a2a2-4305-89ee-58c1b140e84b">
            <Title>Alerts and Health Checks</Title>
            <ParaBlock xy:guid="bf5fc9d8-32f1-49aa-9be2-581766cefe4f">
              <RichText>View results of the health checks performed on your cluster by Nagios in<InLineMenuSelection>
                Alerts and Health Checks</InLineMenuSelection>. Alerts and Health Checks displays a list of each issue
                and its rating, sorted first by descending severity, then by descending time. To access more detailed
                information, select the native Nagios GUI link located at the upper right corner of the panel. Use the
                Nagios credentials you set up during installation to log in to Nagios.
              </RichText>
              <Figure xy:guid="2987facd-b5c9-4e64-95d8-e8d240ec5133">
                <MediaObject xy:guid="d3a6f4d4-7a4e-4ff4-aacf-c4fe433b766d">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/services_alerts_health_checks.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="f6634232-8199-4010-b67d-c18563e7fa11">
          <Title>Editing Service Config Properties</Title>
          <ParaBlock xy:guid="5cc434c2-a2aa-4c1e-b7ed-04e1cc8caa89">
            <RichText>Select a service, then select
              <InLineMenuSelection>Configs</InLineMenuSelection>
              to view and update configuration properties for the selected service. For example, select MapReduce2, then
              select Configs. Expand a config category to view configurable service properties. For example, select
              General to configure Default virtual memory for a job's map task.
            </RichText>
            <Figure xy:guid="66cc0044-6a94-4800-b4d2-28c48cfae0d7">
              <MediaObject xy:guid="ac22680b-2316-4167-8071-73c9757ff694">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/Configs_MR2_stale.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
          <Topic xy:guid="4eafb0f3-d3c7-4da7-bc54-c763c09dc7d5">
            <Title>Performing Service Actions</Title>
            <ParaBlock xy:guid="0c49bb26-61fe-4c68-8fe4-5103add6e383">
              <RichText>Manage a selected service on your cluster by performing service actions. In<InLineMenuSelection>
                Services</InLineMenuSelection>, select the
                <InLineMenuSelection>Service Actions</InLineMenuSelection>
                drop-down menu, then choose an option. Available options depend on the service you have selected. For
                example, HDFS service action options include:
              </RichText>
              <Figure xy:guid="7a102d8e-64ed-4395-8dfc-c764db0b51d9">
                <MediaObject xy:guid="7f577309-166d-4215-b89f-3a08a7b2612b">
                  <Renditions>
                    <Web thumbWidth="75" uri="01-RawContent/Ambari/Service_Actions_DataNode.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <RichText>Optionally, choose
                <InLineMenuSelection>Turn On Maintenance Mode</InLineMenuSelection>
                to suppress alerts generated by a service before performing a service action. Maintenance Mode
                suppresses alerts and status indicator changes generated by the service, while allowing you to start,
                stop, restart, move, or perform maintenance tasks on the service. For more information about how
                Maintenance Mode affects bulk operations for host components, see<Xref
                        InsideTargetRef="0ec3f7a2-f562-45be-a550-63d63861558d">Maintenance Mode</Xref>.
              </RichText>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="33b1ba5b-14d6-4fd8-a405-fde772168b2b">
            <Title>Rolling Restarts</Title>
            <ParaBlock xy:guid="5d95483f-df89-4873-8606-18ff678c726a">
              <RichText>When you restart multiple services, components, or hosts, use rolling restarts to distribute the
                task; minimizing cluster downtime and service disruption. A rolling restart stops, then starts multiple,
                running slave components such as DataNodes, TaskTrackers, NodeManagers, RegionServers, or Supervisors,
                using a batch sequence. You set rolling restart parameter values to control the number of, time between,
                tolerance for failures, and limits for restarts of many components across large clusters.
              </RichText>
              <RichText>To run a rolling restart:</RichText>
              <List ListMarker="Numeric" xy:guid="220d713a-7ec6-483c-9c3d-b2e352fb5f21">
                <ItemBlock>
                  <Item>
                    <ItemPara>Select a Service, then link to a lists of specific components or hosts that Require
                      Restart.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Select Restart, then choose a slave component option.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Review and set values for Rolling Restart Parameters.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Optionally, reset the flag to only restart components with changed configurations.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose Trigger Restart.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>Use
                <Xref InsideTargetRef="23aca095-e95c-4345-ad8a-c90ca83a80ec">Monitor Background Operations</Xref>
                to monitor progress of rolling restarts.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="7a05bf06-f76f-491b-a981-c76b35da1d0e">
              <Title>Setting Rolling Restart Parameters</Title>
              <ParaBlock xy:guid="3d89210c-1ea8-43cd-8f86-02a8f928144f">
                <RichText>When you choose to restart slave components, use parameters to control how restarts of
                  components roll. Parameter values based on ten percent of the total number of components in your
                  cluster are set as default values. For example, default settings for a rolling restart of components
                  in a 3-node cluster restarts one component at a time, waits two minutes between restarts, will proceed
                  if only one failure occurs, and restarts all existing components that run this service.
                </RichText>
                <RichText>
                  If you trigger a rolling restart of components, Restart components with stale configs defaults to
                  true. If you trigger a rolling restart of services, Restart services with stale configs defaults to
                  false.
                </RichText>
                <Figure xy:guid="f4ce8533-40af-4d66-9470-64fc4806bc3b">
                  <MediaObject xy:guid="d3d532c8-de5c-409e-83e3-f6c9c745bf3b">
                    <Renditions>
                      <Web thumbWidth="70" uri="01-RawContent/Ambari/RlgRestart_DataNodes.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <RichText>Rolling restart parameter values must satisfy the following criteria:</RichText>
                <Table align="" border="true" width="100" xy:guid="e3c0b858-41c4-434a-b195-dd3e9e0deb0a">
                  <TblTitle>Validation Rules for Rolling Restart Parameters</TblTitle>
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Parameter</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Required</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Value</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Description</RichText>
                        </Cell>
                      </TableRow>
                    </TblHeader>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Batch Size</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Must be an integer &gt; 0</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Number of components to include in each restart batch.</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Wait Time</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Must be an integer &gt; = 0</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="i" isInHeaderColumn="0" rowspan="1">
                          <RichText>Time (in seconds) to wait between queuing each batch of components.</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Tolerate up to x failures</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Must be an integer &gt; = 0</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Total number of restart failures to tolerate, across all batches, before halting the
                            restarts and not queuing batches.
                          </RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="8730e5ae-3420-42cd-af7e-45e5e1617302">
              <Title>Aborting a Rolling Restart</Title>
              <ParaBlock xy:guid="20777c81-85cf-4e39-b210-3a2369ea289c">
                <RichText>To abort future restart operations in the batch, choose Abort Rolling Restart.</RichText>
                <Figure xy:guid="7c57b0ce-7804-4a05-93dc-9de17f2d91e0">
                  <MediaObject xy:guid="22b89eb3-2043-4b63-a646-47457c475c88">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/abort_rllng_restart_option.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                 xy:guid="6e282dea-0efc-431c-a59d-081e6344f5ec">
            <Title>Enabling NameNode High Availability</Title>
            <ParaBlock xy:guid="602da5b4-77d8-41bf-aa11-f83c6b26b8c0">
              <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                          xy:guid="380269ca-7a2d-4b43-a096-9149328dee5d">
                <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                      xy:guid="feaa1f83-c9a8-4bbf-830f-bb77ee622b16"/>
                <SimpleBlock>
                  <RichText>This feature is available with HDP Stack (2.0 or later)</RichText>
                </SimpleBlock>
              </CustomNote>
              <RichText>
                To ensure that a NameNode in your cluster is always available if the primary NameNode host fails, enable
                and set up NameNode High Availability on your cluster using Ambari Web.

                In Ambari Web, browse to<InLineMenuSelection>Services &gt; HDFS &gt; Summary</InLineMenuSelection>,
                select
                <InLineMenuSelection>Service Actions</InLineMenuSelection>
                and then choose<InLineMenuSelection>Enable NameNode HA</InLineMenuSelection>. Follow the steps in the
                Enable NameNode HA Wizard.

                For more information about using the Enable NameNode HA Wizard to set up NameNode High Availability, see
                <Xref InsideTargetRef="96b6ea9c-9bf5-4a1b-a4fd-85eec215621e">Configuring NameNode High
                  Availability</Xref>.
              </RichText>
            </ParaBlock>
          </Topic>
          <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                 xy:guid="6f237f5a-8a27-4dd2-8ef9-302a08561e33">
            <Title>Enabling Resource Manager High Availability</Title>
            <ParaBlock xy:guid="499f683f-6b73-4bb2-8760-db0613bf0a68">
              <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                          xy:guid="d0be24c1-d87a-4522-9ddf-5d281a850235">
                <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                      xy:guid="f742a8d3-ecbf-4dfe-abdf-b27179a76109"/>
                <SimpleBlock>
                  <RichText>This feature is available with HDP Stack (2.1 or later)</RichText>
                </SimpleBlock>
              </CustomNote>
              <RichText>To ensure that a ResourceManager in your cluster is always available if the primary
                ResourceManager host fails, enable and set up ResourceManager High Availability on your cluster using
                Ambari Web.

                In Ambari Web, browse to<InLineMenuSelection>Services &gt; YARN &gt; Summary</InLineMenuSelection>,
                select Service Actions and then choose Enable ResourceManager HA. Follow the steps in the Enable
                ResourceManager HA Wizard.

                For more information about using the Enable ResourceManager HA Wizard to set up ResourceManager High
                Availability, see<Xref InsideTargetRef="edbf1cf0-b3cd-42fb-959c-fdb13bc5e02f">Configuring
                  ResourceManager High Availability</Xref>.
              </RichText>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="23aca095-e95c-4345-ad8a-c90ca83a80ec">
            <Title>Monitoring Background Operations</Title>
            <ParaBlock xy:guid="b7017bff-fb9c-420c-aecc-ca95705ddd6f">
              <RichText>Optionally, use Background Operations to monitor progress and completion of bulk operations such
                as rolling restarts.
              </RichText>
              <RichText>
                Background Operations opens by default when you run a job that executes bulk operations.
              </RichText>
              <List ListMarker="Numeric" xy:guid="660d636b-6580-42ca-ba39-e73f3ac950d2">
                <ItemBlock>
                  <Item>
                    <ItemPara>Select the right-arrow for each operation to show restart operation progress on each
                      host.
                    </ItemPara>
                    <Figure xy:guid="50dba73f-4baf-42dc-ad32-683dd0974254">
                      <MediaObject xy:guid="d21cef20-33bf-4e9b-b1f2-b07ae82dd053">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/RlgRestart_DNds_NdMgrs.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>After restarts complete, Select the right-arrow, or a host name, to view log files and any
                      error messages generated on the selected host.
                    </ItemPara>
                    <Figure xy:guid="bb6b4b5f-82e7-4ad5-a905-554e50d50876">
                      <MediaObject xy:guid="81f2c408-6a73-4e42-9037-c8085f906b7d">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/Background_Ops_hosts.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Select links at the upper-right to copy or open text files containing log and error
                      information.
                    </ItemPara>
                    <Figure xy:guid="c400f072-537e-47b9-9f2d-518119a74245">
                      <MediaObject xy:guid="c4c53a38-bed3-46aa-848b-5078352dad05">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/Background_Ops_logs.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>Optionally, select the option to not show the bulk operations dialog.</RichText>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="4c1204bd-2364-41e7-bca6-fd415f8f696e">
            <Title>Using Quick Links</Title>
            <ParaBlock xy:guid="dd1b4af8-d026-4283-8113-f76b1a1591e5">
              <RichText>Select
                <InLineMenuSelection>Quick Links</InLineMenuSelection>
                options to access additional sources of information about a selected service. For example, HDFS Quick
                Links options include the native NameNode GUI, NameNode logs, the NameNode JMX output, and thread stacks
                for the HDFS service. Quick Links are not available for every service.
              </RichText>
              <Figure xy:guid="650d169b-ddb0-4795-888d-9c4192631c6e">
                <MediaObject xy:guid="9679a87a-ba48-4b15-8452-18c913de066e">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/quicklinks.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="275969b0-5b20-4fde-8837-8a527032f0c5">
            <Title>Analyzing Service Metrics</Title>
            <ParaBlock xy:guid="5feb5073-a0b8-4bfe-ae3b-30fec7ded871">
              <RichText>Review visualizations in
                <InLineMenuSelection>Metrics</InLineMenuSelection>
                that chart common metrics for a selected service.
                <InLineMenuSelection>Services &gt; Summary</InLineMenuSelection>
                displays metrics widgets for HDFS, HBase, Storm services. For more information about using metrics
                widgets, see<Xref InsideTargetRef="61c72883-e9b3-49d0-9ada-e74d91bceec2">Scanning System Metrics</Xref>.
                To see more metrics information, select the link located at the upper right of the Metrics panel that
                opens the native Ganglia GUI.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="1de8b189-0acb-4719-9dca-153004cdf4fe">
          <Title>Managing Configurations</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="6d8f9c9e-22e5-4628-ab9a-fe798a789a68">
            <RichText>Use Ambari Web to manage your HDP component configurations. Select any of the following topics:
            </RichText>
            <List ListMarker="Bullet" xy:guid="225206c5-0034-46a4-ae83-e89362f07fb0">
              <ItemBlock>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="03c39d95-af1d-4f7c-bc13-9790c002a53a">Configuring Services</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="0c1ccfaa-3cec-4542-aeee-815e651a15c2">Using Host Config Groups</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="bf3b7cb1-32dd-4b4a-8e12-ffcc44be2771">Customizing Log Settings</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="024243f8-734e-4882-a936-132de0d2111b">Downloading Client Configs</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="c448b293-0e9b-42a1-bfef-076dd1fef3df">Service Configuration Versions</Xref>
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                 xy:guid="03c39d95-af1d-4f7c-bc13-9790c002a53a">
            <Title>Configuring Services</Title>
            <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                       xy:guid="7d075681-617b-41fe-8b38-9e165eba831b">
              <RichText>Select a service, then select
                <InLineMenuSelection>Configs</InLineMenuSelection>
                to view and update configuration properties for the selected service. For example, select MapReduce2,
                then select Configs. Expand a config category to view configurable service properties.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="b6fefec5-a997-4f80-8d77-ab64b84bd559">
              <Title>Updating Service Properties</Title>
              <ParaBlock xy:guid="5d1db39d-2b1d-4345-afc2-1edbb5e7bb53">
                <List ListMarker="Numeric" xy:guid="3b551e15-5e55-418b-aaa5-b9cbbe889f6a">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Expand a configuration category.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Edit values for one or more properties that have the Override option.</ItemPara>
                      <RichText>
                        Edited values, also called stale configs, show an Undo option.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Choose Save.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="9512cbe0-5240-4574-9a49-82fb2015b0ab">
              <Title>Restarting components</Title>
              <ParaBlock xy:guid="9690aa6f-2bee-4330-9de2-9866cd1a1778">
                <RichText>After editing and saving a service configuration, Restart indicates components that you must
                  restart.

                  Select the Components or Hosts links to view details about components or hosts requiring a restart.

                  Then, choose an option appearing in Restart. For example, options to restart YARN components include:
                </RichText>
                <Figure xy:guid="4e317fe5-2ad4-4605-8778-7d3cc513f4cc">
                  <MediaObject xy:guid="525d7945-f082-49e6-9658-262755db29e9">
                    <Renditions>
                      <Web thumbWidth="70" uri="01-RawContent/Ambari/restart_options.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="0c1ccfaa-3cec-4542-aeee-815e651a15c2">
            <Title>Using Host Config Groups</Title>
            <ParaBlock xy:guid="a01dfa40-b4fb-41ad-b1ce-173a92a0167a">
              <RichText>Ambari initially assigns all hosts in your cluster to one, default configuration group for each
                service you install. For example, after deploying a three-node cluster with default configuration
                settings, each host belongs to one configuration group that has default configuration settings for the
                HDFS service. In Configs, select<InLineMenuSelection>Manage Config Groups</InLineMenuSelection>, to
                create new groups, re-assign hosts, and override default settings for host components you assign to each
                group.
              </RichText>
              <Figure xy:guid="6b459867-786d-4380-9081-b9bbadf86607">
                <MediaObject xy:guid="1b8be28f-e9a8-49aa-8599-ca4d70fbd341">
                  <Renditions>
                    <Web thumbWidth="50" uri="01-RawContent/Ambari/MngCnfgGrps.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <RichText>To create a Configuration Group:</RichText>
              <List ListMarker="Numeric" xy:guid="649f97db-857e-48cb-a4e8-e32bbfa6a957">
                <ItemBlock>
                  <Item>
                    <ItemPara>Choose<InLineMenuSelection>Add New Configuration Group</InLineMenuSelection>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Name and describe the group, then choose Save.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Select a Config Group, then choose Add Hosts to Config Group.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Select Components and choose from available Hosts to add hosts to the new group.
                    </ItemPara>
                    <RichText>
                      Select Configuration Group Hosts enforces host membership in each group, based on installed
                      components for the selected service.
                    </RichText>
                    <Figure xy:guid="b4908b76-8bcf-47c5-9a27-ec73b05c3207">
                      <MediaObject xy:guid="7504dd9f-5cd0-4e1b-8d42-5875a409e118">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/SelectCnfgGrpHosts.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Choose OK.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>In Manage Configuration Groups, choose Save.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>
                To edit settings for a configuration group:
              </RichText>
              <List ListMarker="Numeric" xy:guid="a3cbbd39-b5a1-4301-989d-b833fad98688">
                <ItemBlock>
                  <Item>
                    <ItemPara>In Configs, choose a Group.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Select a Config Group, then expand components to expose settings that allow Override.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Provide a non-default value, then choose Override or Save.</ItemPara>
                    <RichText>Configuration groups enforce configuration properties that allow override, based on
                      installed components for the selected service and group.
                    </RichText>
                    <Figure xy:guid="dd75ef1c-b8c0-4e6f-8a34-e2755a4bbbcd">
                      <MediaObject xy:guid="fc8b392a-ad5c-4266-8db6-f58687f673f4">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/EditCnfgGrpProperty.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Override prompts you to choose one of the following options:</ItemPara>
                    <Figure xy:guid="6241ebde-03c4-445f-bc18-412989915517">
                      <MediaObject xy:guid="0a4be784-27e7-4323-bf05-087e8353512a">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/override_config.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Select an existing configuration group (to which the property value override
                            provided in step 3 will apply), or
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Create a new configuration group (which will include default properties, plus the
                            property override provided in step 3).
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Then, choose<InLineMenuSelection>OK</InLineMenuSelection>.
                          </ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>In Configs, choose Save.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="bf3b7cb1-32dd-4b4a-8e12-ffcc44be2771">
            <Title>Customizing Log Settings</Title>
            <ParaBlock xy:guid="39da109a-b60a-470f-a318-d5ac1e0eb762">
              <RichText>Ambari Web displays default logging properties in<InLineMenuSelection>Service Configs &gt;
                Custom log 4j Properties</InLineMenuSelection>. Log 4j properties control logging activities for the
                selected service.
              </RichText>
              <Figure xy:guid="dcd4979e-13db-4360-b342-8d326b933537">
                <MediaObject xy:guid="edc8eb3e-eb9d-4c08-8b1f-c4995a0eecf8">
                  <Renditions>
                    <Web thumbWidth="60" uri="01-RawContent/Ambari/edit_log4jprops.png"/>
                  </Renditions>
                </MediaObject>
              </Figure>
              <RichText>
                Restarting components in the service pushes the configuration properties displayed in Custom log 4j
                Properties to each host running components for that service. If you have customized logging properties
                that define how activities for each service are logged, you will see refresh indicators next to each
                service name after upgrading to Ambari 1.5.0 or higher. Make sure that logging properties displayed in
                Custom log 4j Properties include any customization. Optionally, you can create configuration groups that
                include custom logging properties. For more information about saving and overriding configuration
                settings, see<Xref InsideTargetRef="03c39d95-af1d-4f7c-bc13-9790c002a53a">Configuring Services</Xref>.
              </RichText>
            </ParaBlock>
          </Topic>
          <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                 xy:guid="024243f8-734e-4882-a936-132de0d2111b">
            <Title>Downloading Client Configs</Title>
            <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                       xy:guid="a8b31321-6b11-46e2-86de-fcac2e3f75de">
              <RichText>For Services that include client components (for example Hadoop Client or Hive Client), you can
                download the client configuration files associated with that client from Ambari.
              </RichText>
              <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="c9f885e4-a94a-4b44-9660-a9c9827dba5e">
                <ItemBlock>
                  <Item>
                    <ItemPara>In Ambari Web, browse to the Service with the client for which you want the
                      configurations.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose<InLineMenuSelection>Service Actions</InLineMenuSelection>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Choose<InLineMenuSelection>Download Client Configs</InLineMenuSelection>. You are prompted
                      for a location to save the client configs bundle.
                    </ItemPara>
                    <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                            xy:guid="0987fbbc-5d17-470f-bb43-17cfcb0ff578">
                      <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                   xy:guid="551e8886-555b-4574-a3cc-37597f3b819e">
                        <Renditions>
                          <Web thumbWidth="50" uri="01-RawContent/Ambari/Dwnld_clnt_cnfgs.png"/>
                        </Renditions>
                      </MediaObject>
                    </Figure>
                  </Item>
                  <Item>
                    <ItemPara>Save the bundle.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                 xy:guid="c448b293-0e9b-42a1-bfef-076dd1fef3df">
            <Title>Service Configuration Versions</Title>
            <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                       xy:guid="a02acf86-ebad-444d-af29-c8fa9c1938f3">
              <RichText>Ambari provides the ability to manage configurations associated with a Service. You can make
                changes to configurations, see a history of changes, compare + revert changes and push configuration
                changes to the cluster hosts.
              </RichText>
              <List ListMarker="Bullet" xy:guid="609986ee-3538-49c9-ab6a-ba3971299a2f">
                <ItemBlock>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="32d5e0fe-390f-4382-a31f-4aa0eabe81a0">Basic Concepts</Xref>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="56bf9d96-e835-4ea0-8084-b3013c74f267">Terminology</Xref>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="fb2a6656-b1b0-4a6e-8a16-6ef8e7e7d391">Saving a Change</Xref>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="94bce554-5cb9-48e3-b0de-d139d5278f31">Viewing History</Xref>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="796ae133-58ae-4103-9de9-b5b05e8eef0e">Comparing Versions</Xref>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="e2b71304-1b66-49b5-ad1e-c9edc13f2e97">Reverting a Change</Xref>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Xref InsideTargetRef="374297e8-ae0e-4336-969f-592281d2f6ac">Versioning and Host Config Groups
                      </Xref>
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="32d5e0fe-390f-4382-a31f-4aa0eabe81a0">
              <Title>Basic Concepts</Title>
              <ParaBlock xy:guid="6c3f9cad-3b2f-4dd0-8d6c-a4b72480d860">
                <RichText>Itâs important to understand how service configurations are organized and stored in Ambari.
                  Properties are grouped into Configuration Types (config types). A set of config types makes up the set
                  of configurations for a service.

                  For example, the HDFS Service includes the following config types: hdfs-site, core-site, hdfs-log4j,
                  hadoop-env, hadoop-policy. If you browse to<InLineMenuSelection>Services &gt; HDFS &gt;
                    Configs</InLineMenuSelection>, the configuration properties for these config types are available for
                  edit.

                  Versioning of configurations is performed at the service-level. Therefore, when you modify a
                  configuration property in a service, Ambari will create a Service Config Version. The figure below
                  shows V1 and V2 of a Service Configuration Version with a change to a property in Config Type A. After
                  making the property change to Config Type A in V1, V2 is created.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="70182779-6379-43e6-a31c-42e61f95bb11">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="bc173e2a-8ab8-4d5b-afae-7b78e7ddf4bb">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Svc_Cnfg_Vrsn_Cncpt.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="56bf9d96-e835-4ea0-8084-b3013c74f267">
              <Title>Terminology</Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="ccc4717c-092d-49a8-a1e4-a458482d81a4">
                <RichText>The following table lists configuration versioning terms and concepts that you should know.
                </RichText>
                <Table align="" border="true" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="4df0530c-9e5d-4bb5-b8ad-e5525b165d4b">
                  <TblGroup>
                    <TblCol width="35"/>
                    <TblCol width="65"/>
                    <TblHeader>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Term</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Description</RichText>
                        </Cell>
                      </TableRow>
                    </TblHeader>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Configuration Property</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Configuration property managed by Ambari, such as NameNode heapsize or replication
                            factor.
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Configuration Type (Config Type)</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Group of configuration properties. For example: hdfs-site is a Config Type.
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Service Configurations</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Set of configuration types for a particular service. For example: hdfs-site and
                            core-site Config Types are part of the HDFS Service Configuration.
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Change Notes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Optional notes to save with a service configuration change.</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Service Config Version (SCV)</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Particular version of configurations for a specific service. Ambari saves a history
                            of service configuration versions.
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Host Config Group (HCG)</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Set of configuration properties to apply to a specific set of hosts. Each service
                            has a default Host Config Group, and custom config groups can be created on top of the
                            default configuration group to target property overrides to one or more hosts in the
                            cluster. See Managing Configuration Groups for more information.
                          </RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="fb2a6656-b1b0-4a6e-8a16-6ef8e7e7d391">
              <Title>Saving a Change</Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="aca51cfd-656e-42bc-90a3-ba8b10e893d6">
                <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                      xy:guid="5924ee37-e6bf-4dcd-bfd6-92d8a4032481">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Make the configuration property change.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Choose Save.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>You are prompted to enter notes that describe the change.</ItemPara>
                      <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="056bea7e-48a0-4800-9098-ab64c6b1ea5c">
                        <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                     xy:guid="fd06d96f-82ac-425b-9ba2-d7caf6cfcc7b">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/Save_Config_Changes.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Click Save to confirm your change. Cancel will not save but instead returns you to the
                        configuration page to continuing editing.
                      </ItemPara>
                      <RichText>
                        To revert the changes you made and not save, choose Discard.

                        To return to the configuration page and continue editing without saving changes, choose Cancel.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="94bce554-5cb9-48e3-b0de-d139d5278f31">
              <Title>Viewing History</Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="dfe47901-da62-41d9-b6e3-ff8e35688c8c">
                <RichText>Service Config Version history is available from Ambari Web in two places: On the Dashboard
                  page under the Config History tab; and on each Service page under the Configs tab.

                  The
                  <InLineMenuSelection>Dashboard &gt; Config History</InLineMenuSelection>
                  tab shows a list of all versions across services with each version number and the date and time the
                  version was created. You can also see which user authored the change with the notes entered during
                  save. Using this table, you can filter, sort and search across versions.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="962e7779-c7d1-4328-85a4-a4110e6ad61e">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="1463585f-be45-429e-bbb3-e9265d41a947">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Cnfig_Hstry_1.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </ParaBlock>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="ecdc5dfa-22df-40f4-8e40-5078d90aae4f">
                <RichText>The most recent configuration changes are shown on the
                  <InLineMenuSelection>Service &gt; Configs</InLineMenuSelection>
                  tab. Users can navigate the version scrollbar left-right to see earlier versions. This provides a
                  quick way to access the most recent changes to a service configuration.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="059d711c-bf17-499f-acaa-2eb5b084230f">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="a83004fb-0919-457a-ad8c-cc480ea55c15">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Cnfig_Hstry_2.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <RichText>Click on any version in the scrollbar to view, and hover to display an option menu which
                  allows you compare versions and perform a revert. Performing a revert makes any config version that
                  you select the current version.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="35bcea92-2976-4cc1-a89d-a7ee4984a6df">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="e6e3b61a-f900-4a1d-8d98-c1faa1f36aa5">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Cnfig_Hstry_3.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="796ae133-58ae-4103-9de9-b5b05e8eef0e">
              <Title>Comparing Versions</Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="33dca42a-741a-4ead-bb33-9e4c300e6d80">
                <RichText>When navigating the version scroll area on the
                  <InLineMenuSelection>Services &gt; Configs</InLineMenuSelection>
                  tab, you can hover over a version to display options to view, compare or revert.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="953d90c9-023d-4064-9dc4-026d39872bbf">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="d94cbb55-68bf-43a2-81e9-d52939fd4d89">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Cmpare_vrsns_1.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                      xy:guid="29cac43f-6acf-4c1c-a513-96eb47262516">
                  <ListPreamble>To perform a compare between two service configuration versions:</ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Navigate to a specific configuration version. For example âV6â.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using the version scrollbar, find the version would you like to compare against âV6â.
                        For example, if you want to compare V6 to V2, find V2 in the scrollbar.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Hover over the version to display the option menu. Click âCompareâ.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Ambari displays a comparison of V6 to V2, with an option to revert to V2.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Ambari also filters the display by only âChanged propertiesâ. This option is available
                        under the Filter control.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="051eaeef-9f12-492c-ac8f-015fa9eff440">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="26c50906-3497-4b26-9d85-0384000e6049">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Cmpare_vrsns_2.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="e2b71304-1b66-49b5-ad1e-c9edc13f2e97">
              <Title>Reverting a Change</Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="2d8d1747-ffcd-4241-a10d-b86126f9e687">
                <RichText>You can revert to an older service configuration version by using the âMake Currentâ feature.
                  The âMake Currentâ will actually create a new service configuration version with the configuration
                  properties from the version you are reverting -- it is effectively a âcloneâ. After initiating the
                  Make Current operation, you are prompted to enter notes for the new version (i.e. the clone) and save.
                  The notes text will include text about the version being cloned.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="9bd72e5e-1476-4892-901e-fbe8264ff871">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="4f6ba67f-1ab7-4a7c-a9f5-e361103b7cba">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/revert_change_1.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <RichText>There are multiple methods to revert to a previous configuration version:</RichText>
                <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                      xy:guid="8b86b6f6-8c84-4a30-bb28-1682f53ac57e">
                  <ItemBlock>
                    <Item>
                      <ItemPara>View a specific version and click the âMake V* Currentâ button.</ItemPara>
                      <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="2b870d8f-a33f-45c3-824d-65b76261b6a7">
                        <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                     xy:guid="b3be2376-399e-43b5-a1f6-2247f64332a3">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/revert_change_tabl_1.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Use the version navigation dropdown and click the âMake Currentâ button.</ItemPara>
                      <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="d93f1e45-37d0-4e5f-b4f1-3e17e2385af2">
                        <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                     xy:guid="e2c549a5-2947-4805-8733-fad99f4f2bc3">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/revert_change_tabl_2.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Hover on a version in the version scrollbar and click the âMake Currentâ button.
                      </ItemPara>
                      <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="25494c1f-5a71-4f93-98e3-933f258018db">
                        <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                     xy:guid="a28a8238-3222-474f-845e-5e2a0e6cc0a5">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/revert_change_tabl_3.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                    <Item>
                      <ItemPara>Perform a comparison and click the âMake V* Currentâ button.</ItemPara>
                      <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="14e454ed-46a8-4417-938e-3052074ba5a5">
                        <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                     xy:guid="1b0fe827-ee03-46fe-9452-1c9dc28322d2">
                          <Renditions>
                            <Web thumbWidth="50" uri="01-RawContent/Ambari/revert_change_tabl_4.png"/>
                          </Renditions>
                        </MediaObject>
                      </Figure>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="374297e8-ae0e-4336-969f-592281d2f6ac">
              <Title>Versioning and Host Config Groups</Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="8158511d-aadc-4418-976b-c5f96cbdd477">
                <RichText>Service configuration versions are scoped to a host config group. For example, changes made in
                  the default group can be compared and reverted in that config group. Same with custom config groups.
                </RichText>
              </ParaBlock>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="9c2da9e5-7905-43a4-867f-0e41948cf573">
                <RichText>The following example describes a flow where you have multiple host config groups and create
                  service configuration versions in each config group.
                </RichText>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="bb810581-8921-4a92-afc9-1d333134f43c">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="1a429ac1-e8ae-4217-9888-1bc9e9ce1805">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Svc_Config_Vrsn-01.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="c65071cf-12d8-44ae-8e83-436f946e25cd">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="e202adc6-a5a9-44e3-b5bb-84c4042341db">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Svc_Config_Vrsn-02.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="94fb29db-e083-43e2-8007-d7221c964e07">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="508ce3ae-4577-4709-8f20-ea0a1f0fabac">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Svc_Config_Vrsn-03.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="b6f12d17-8c56-4854-a198-7ee2766a62e5">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="360d0a00-5b35-4b67-ac53-2269870bd397">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Svc_Config_Vrsn-04.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="9b13d707-d13e-45a1-8553-36ea708d4faf">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="795d8c9c-e261-422c-a4cf-fd8f143366a9">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/Svc_Config_Vrsn-05.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <List ListMarker="NoBullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                      xy:guid="9a42c13f-88e3-43be-b2ac-f176988a4978">
                  <ItemBlock>
                    <Item>
                      <ItemPara/>
                    </Item>
                    <Item>
                      <ItemPara/>
                    </Item>
                    <Item>
                      <ItemPara/>
                    </Item>
                    <Item>
                      <ItemPara/>
                    </Item>
                    <Item>
                      <ItemPara/>
                    </Item>
                    <Item>
                      <ItemPara/>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="3725b276-e557-4c69-858d-3cda866960f5">
        <Title>Administering the Cluster</Title>
        <ParaBlock xy:guid="1585dbbc-5cfa-4125-bd43-1651aa925ced">
          <RichText>Use
            <InLineMenuSelection>Admin</InLineMenuSelection>
            options to view repositories and service accounts for your cluster and to enable or disable Kerberos
            security for your cluster.
          </RichText>
          <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="55f5a808-6bbf-4c8f-9bd2-18b8435cebd2">
            <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                         xy:guid="0a9b70b4-9271-4dc8-a2ad-ce279b3bad41">
              <Renditions>
                <Web thumbWidth="50" uri="01-RawContent/Ambari/Amb_Admin_optns_170.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <RichText>For more information about administering your cluster, see<Xref
                  InsideTargetRef="c016ce20-4136-4813-941b-dfa8ec05b5aa">Administering Ambari</Xref>.
          </RichText>
        </ParaBlock>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="0cf8106e-364a-46d5-85aa-38dd0476a7e2">
          <Title>Viewing Cluster Stack Version and Repository URLs</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="fb3e78d7-1d63-4202-b0ad-47295576185c">
            <RichText>To view the version of each Service version installed in your HDP cluster and the base repository
              path, choose<InLineMenuSelection>Admin &gt; Repositories</InLineMenuSelection>. Version and repository
              information for the HDP 2.2 Stack is shown in the following example:
            </RichText>
            <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="1f639a69-a89b-41b8-8777-807ce0b76ac6">
              <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                           xy:guid="2faecad4-69ee-4611-9fce-ba191aa95c05">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/Repo_versions_22_stack.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="08e48919-3a20-466e-973d-eee19a06d57e">
          <Title>Viewing Service Users and Groups</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="df93e3df-56db-48cd-a416-9a313e359c18">
            <RichText>To view Service Accounts defined in your HDP cluster, choose<InLineMenuSelection>Admin &gt;
              Serrvice Accounts</InLineMenuSelection>. Default Service User and Group information for the HDP 2.2 Stack
              is shown in the following example:
            </RichText>
            <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="c6c68bea-c1c4-49de-8170-f3556ed9eba0">
              <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                           xy:guid="73acab86-d39d-4a7c-acc2-bcee96025918">
                <Renditions>
                  <Web thumbWidth="50" uri="01-RawContent/Ambari/Service_Accounts_22_Stack.png"/>
                </Renditions>
              </MediaObject>
            </Figure>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="ba76787e-cc76-4fc4-adff-b45a11cef6fd">
          <Title>Enabling Kerberos Security</Title>
          <ParaBlock xy:guid="0f735ede-1f43-484b-854f-20f541b134f1">
            <RichText>Ambari supports the Kerberos protocol which allows nodes in your cluster to prove their
              identities, or authenticate, in a secure manner. To enable Kerberos security you must:
            </RichText>
            <List ListMarker="Numeric" xy:guid="1151133a-3057-4cc3-8664-3254e1644c35">
              <ItemBlock>
                <Item>
                  <ItemPara>Set up Kerberos for your cluster. For more information on setting up Kerberos, see<Xref
                          InsideTargetRef="4a8722b7-505e-4aa1-9256-9fff03c0d000">Preparing Kerberos for Hadoop</Xref>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Choose
                    <InLineMenuSelection>Enable Security</InLineMenuSelection>
                    and follow the Enable Security Wizard.
                  </ItemPara>
                  <Figure xy:guid="64050d7e-050c-4711-bba3-35c2c931cd00">
                    <MediaObject xy:guid="335dace7-0658-44f3-afd3-808e6cdbdb0e">
                      <Renditions>
                        <Web thumbWidth="80" uri="01-RawContent/Ambari/newkerb_2x.png"/>
                      </Renditions>
                    </MediaObject>
                  </Figure>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="9200c433-12d8-4055-b458-ae8808920ff8">
        <Title>Monitoring and Alerts</Title>
        <ParaBlock xy:guid="f6b857ae-5117-4042-80dc-5b4bb7d28f55">
          <RichText>Nagios is an open source network monitoring system designed to monitor all aspects of your Hadoop
            cluster (such as hosts, services, and so forth) over the network. It can monitor many facets of your
            installation, ranging from operating system attributes like CPU and memory usage to the status of
            applications, files, and more.
          </RichText>
          <RichText>Nagios is primarily used for the following kinds of tasks:</RichText>
          <List ListMarker="Bullet" xy:guid="5760b8f9-9a66-4bf5-9697-45906da3e554">
            <ItemBlock>
              <Item>
                <ItemPara>Getting instant information about your organization's Hadoop infrastructure</ItemPara>
              </Item>
              <Item>
                <ItemPara>Detecting and repairing problems, and mitigating future issues, before they affect end-users
                  and customers
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Leveraging Nagiosâ event monitoring capabilities to receive alerts for potential problem
                  areas
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Analyzing specific trends; for example: what is the CPU usage for a particular Hadoop service
                  weekdays between 2 p.m. and 5 p.m?
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>For more information, see the Nagios website at<Href UrlTarget="http://www.nagios.org">
            http://www.nagios.org</Href>.
          </RichText>
          <CustomNote xy:guid="798fd815-5d80-4aeb-93b5-66921164c497">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="69cf6abf-9623-4024-979b-a2bc60e08d32"/>
            <SimpleBlock>
              <RichText>Nagios is an optional component of Ambari. During cluster install you can choose to install and
                configure Nagios. When selected, out-of-the-box Ambari provides a set of Nagios plug-ins specially
                designed for monitoring important aspects of your Hadoop cluster, based on your Stack selection.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="4a81c823-8559-4b90-9015-7fbf39b1b7a0">
        <Title>Basic Nagios Architecture</Title>
        <ParaBlock xy:guid="237fc5a5-e2dc-494e-a7dd-ff9592829d2d">
          <RichText>Using the open source monitoring system Nagios, Ambari gathers information on the status of both of
            the hosts and the services that run on them.
          </RichText>
          <List ListMarker="Bullet" xy:guid="dc0c71a4-415f-40f6-8612-3c35b609d5e7">
            <ItemBlock>
              <Item>
                <ItemPara><Emph>Host and System Information</Emph>: Ambari monitors basic host and system information
                  such as CPU utilization, disk I/O bandwidth and operations per second, average memory and swap space
                  utilization, and average network latency.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara><Emph>Service Information</Emph>: Ambari monitors the health and performance status of each
                  service by presenting information generated by that service. Because services that run in master/slave
                  configurations (HDFS, MapReduce, and HBase) are fault tolerant in regard to service slaves, master
                  information is presented individually, whereas slave information is presented largely in aggregate.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara><Emph>Alert Information</Emph>: Using Nagios with Hadoop-specific plug-ins and configurations,
                  Ambari Web can issue alerts based on service states defined on the following basic levels:
                </ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>OK</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Warning</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Critical</ItemPara>
                      <RichText>
                        The thresholds for these alerts can be tuned using configuration files, and new alerts can be
                        added. For more details on Nagios architecture, see the Nagios Overview at at<Href
                              UrlTarget="http://www.nagios.org">http://www.nagios.org</Href>.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="621ddc71-a848-489c-9286-acf9f5caefcd">
        <Title>Installing Nagios</Title>
        <ParaBlock xy:guid="6a719e50-77d3-479a-a7f5-ded7bd4c0c49">
          <RichText>The Ambari Installation Wizard gives you the option of installing and configuring Nagios, including
            the out-of-the-box plug-ins for Hadoop-specific alerts. The Nagios server, Nagios plug-ins, and the
            web-based user interface are installed on the Nagios server host, as specified during the installation
            procedure.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="afd46a44-a34a-48bd-ae68-e12918c31f22">
        <Title>Configuration File Locations</Title>
        <ParaBlock xy:guid="8918527c-6788-42e9-ae0e-54f8b89f8630">
          <RichText>All Hadoop-specific configurations are added to Nagios through files prefixed with âhadoop-â located
            in the
            <InLineCode>/etc/nagios/objects</InLineCode>
            directory of the Nagios Server host. The default general Nagios configuration file,
            <InLineCode>nagios.cfg</InLineCode>
            (in<InLineCode>/etc/nagios</InLineCode>), is set up to pick up the new Hadoop specific configurations from
            this directory.
          </RichText>
          <RichText>
            Hadoop-specific plug-ins are stored in the Nagios plug-ins directory,<InLineCode>
            /usr/lib64/nagios/plug-ins/</InLineCode>.
          </RichText>
          <RichText>
            By default, the Nagios server runs as a user named ânagiosâ which is in a group also named ânagiosâ. The
            user and group can be customized during the Ambari Cluster Install (<InLineMenuSelection>Cluster Install
            Wizard &gt; Customize Services &gt; Misc</InLineMenuSelection>). After you install Nagios, use Ambari Web to
            start and stop the Nagios server.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="f203efa1-d112-4f5b-94a7-41a73fc7dad1">
        <Title>Configuring Nagios Alerts For Hadoop Services</Title>
        <ParaBlock xy:guid="528a1324-abd6-46b0-ad02-6615453f4865">
          <RichText>For each alert, the out-of-the-box Hadoop Nagios configuration file defines default values for the
            following Nagios directives:
          </RichText>
          <List ListMarker="Bullet" xy:guid="dcac5d0a-8368-4d08-b58a-ea43a237b6bb">
            <ItemBlock>
              <Item>
                <ItemPara>Warning threshold</ItemPara>
                <RichText>
                  The value that produces a warning alert.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Critical threshold</ItemPara>
                <RichText>
                  The value that produces a critical alert.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Check interval</ItemPara>
                <RichText>
                  The number of minutes between regularly scheduled checks on the host, if the check does not change the
                  state.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Retry interval</ItemPara>
                <RichText>
                  The number of minutes between âretriesâ, when a service changes state, Nagios can confirm that state
                  change by retrying the check multiple times. This retry interval can be different than the original
                  check interval.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Maximum number of check attempts</ItemPara>
                <RichText>
                  The maximum number of retry attempts. Usually when the state of a service changes, this change is
                  considered âsoftâ until multiple retries confirm it. Once the state change is confirmed, it is
                  considered âhardâ. Ambari Web displays hard states for all the Nagios Hadoop specific checks.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="7a990a51-50a7-4b82-99a4-4588403a91d9">
        <Title>Nagios Alerts For Hadoop Services</Title>
        <ParaBlock xy:guid="4561e2d9-c4a3-468a-ab27-1e62e6784fa9">
          <RichText>This topic provides more information about Hadoop alerts provided by Ambari. All these alerts are
            displayed in Ambari Web and in the native Nagios web interface.
          </RichText>
          <RichText>Ambari provides two types of alerts configured out-of-the-box:</RichText>
          <List ListMarker="Bullet" xy:guid="16709ba2-8959-4a8b-bd7d-8159bfea2d60">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Emph>Host-level Alerts</Emph>
                </ItemPara>
                <RichText>
                  These alerts refer to a specific host and specific component running on that host. These alerts check
                  a component and system-level metrics to determine health of the host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Service-level Alerts</Emph>
                </ItemPara>
                <RichText>
                  These alerts refer to a Hadoop Service and do not refer to a specific host. These alerts check one or
                  more components of a service as well as system-level metrics to determine overall health of a Hadoop
                  Service.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="80c71c28-0f0d-401e-947c-fbe04b863daf">
          <Title>HDFS Service Alerts</Title>
          <ParaBlock xy:guid="fdcd8b86-7ebe-4e5a-a5bc-c783f1fad7c0">
            <RichText>These alerts are used to monitor the HDFS service.</RichText>
          </ParaBlock>
          <Topic xy:guid="9f7610e1-b77b-4ade-a999-a774bcf95a5f">
            <Title>Blocks health</Title>
            <ParaBlock xy:guid="acfaaffd-c95e-4a8a-b531-8c0608a3d785">
              <RichText>This service-level alert is triggered if the number of corrupt or missing blocks exceeds the
                configured critical threshold. This alert uses the
                <InLineCode>check_hdfs_blocks</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="6bce79a7-beaf-41eb-bc66-e555a223404b">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="77417d30-e70a-4122-83e3-d590b9d26c22">
                <List ListMarker="Bullet" xy:guid="730f4273-6dbb-434c-828f-5a704c2f3678">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Some DataNodes are down and the replicas that are missing blocks are only on those
                        DataNodes.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The corrupt/missing blocks are from files with a replication factor of 1. New replicas
                        cannot be created because the only replica of the block is missing.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="bca9a9a9-c66d-4cf6-8da8-01317cd29f2a">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="606da4a5-1af5-4a2d-a2c6-48e420d038bc">
                <List ListMarker="Bullet" xy:guid="67dab926-6aae-4799-b7b7-0da0d2235de6">
                  <ItemBlock>
                    <Item>
                      <ItemPara>For critical data, use a replication factor of 3.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Bring up the failed DataNodes with missing or corrupt blocks.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Identify the files associated with the missing or corrupt blocks by running the Hadoop
                        <InLineCode>fsck</InLineCode>
                        command.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Delete the corrupt files and recover them from backup, if it exists.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="9ae69414-b2e0-4bf1-babb-2416179c1a3f">
            <Title>NameNode process</Title>
            <ParaBlock xy:guid="94311bc2-1492-433b-9319-35fabe1d0513">
              <RichText>This host-level alert is triggered if the NameNode process cannot be confirmed to be up and
                listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
              </RichText>
            </ParaBlock>
            <Topic xy:guid="b80a5c34-af40-4d8b-8b3a-58913a820e6b">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="e84a1220-9b90-4f9d-b73e-a5c264b285b6">
                <List ListMarker="Bullet" xy:guid="04dca403-ef0f-40d1-8067-5c372f0fc950">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The NameNode process is down on the HDFS master host.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The NameNode process is up and running but not listening on the correct network port.
                        The default port is 8201.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios server cannot connect to the HDFS master through the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="25f46fb8-fcdf-4587-b6ab-685b4bb9b9d0">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="a4baf9f7-6060-49ca-a85a-3b5746c49391">
                <List ListMarker="Bullet" xy:guid="b8fb23f3-dee6-46a1-832a-0b2376032225">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for any errors in the logs, located at<InLineCode>
                        /var/log/hadoop/hdfs/</InLineCode>. Then restart the NameNode host/process using the
                        <InLineMenuSelection>HMC Manage Services</InLineMenuSelection>
                        tab.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the NameNode process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the NameNode.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="50ff8940-b6d3-44cc-a205-102a6c74bf1f">
            <Title>DataNode space</Title>
            <ParaBlock xy:guid="6572d4ca-391d-454c-b2d7-0c93391379a7">
              <RichText>This host-level alert is triggered if storage capacity if full on the DataNode (90% critical).
                It uses the
                <InLineCode>check_datanode_storage.php</InLineCode>
                plug-in which checks the DataNode JMX Servlet for the
                <InLineCode>Capacity</InLineCode>
                and
                <InLineCode>Remaining</InLineCode>
                properties.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="9b0c742b-53a5-47e7-8d75-a21eda784e3b">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="437a3fd3-11ad-4695-b0d6-c9ab8b9e35f1">
                <List ListMarker="Bullet" xy:guid="ae35cc67-859e-4b1f-8a29-f3be196c518a">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Cluster storage is full.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>If cluster storage is not full, DataNode is full.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="ed5b358a-4960-4fdd-947f-d0ab36cd0858">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="791a5796-1612-4291-8732-ddebcc780b4f">
                <List ListMarker="Bullet" xy:guid="a5261438-30f6-4296-81dc-ab48130ce6f5">
                  <ItemBlock>
                    <Item>
                      <ItemPara>If the cluster has available storage, use Balancer to distribute the data to relatively
                        less-used datanodes.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>If the cluster is full, delete unnecessary data or add additional storage by adding
                        either more DataNodes or more or larger disks to the DataNodes. After adding more storage run
                        Balancer.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="691a9225-6456-482e-bebc-559f75f8fc39">
            <Title>DataNode process</Title>
            <ParaBlock xy:guid="87ca3b31-a141-47da-b9c3-f88eeaf4f143">
              <RichText>This host-level alert is triggered if the individual DataNode processes cannot be established to
                be up and listening on the network for the configured critical threshold, given in seconds. It uses the
                Nagios
                <InLineCode>check_tcp</InLineCode>
                plugin.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="41fd8dee-3e93-4c60-96a7-ca5ad09b57a0">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="b3df154b-86a0-4fc5-9ffa-e08223693e58">
                <List ListMarker="Bullet" xy:guid="4cf77f0f-3c71-48da-a36f-3e7ef691a87b">
                  <ItemBlock>
                    <Item>
                      <ItemPara>DataNode process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>DataNode is not down, but is not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Nagios server cannot connect to the DataNodes.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="0552e58b-3c92-4408-a41b-deb4b8a600b0">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="6e7d66c5-e5b2-4142-bc4c-6ac8e8b6bce8">
                <List ListMarker="Bullet" xy:guid="fa01e811-184c-46cf-b6bf-f1c2ae63e7df">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for dead DataNodes in Ambari Web.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the DataNode logs, located at<InLineCode>
                        /var/log/hadoop/hdfs</InLineCode>. Then, restart the DataNode, if necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the DataNode process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the DataNode.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="d034cf25-4f73-46ed-b719-b2a5bc7ad2b2">
            <Title>NameNode host CPU utilization</Title>
            <ParaBlock xy:guid="f1697f9c-28a1-419c-995c-e3c1f8044b85">
              <RichText>This host-level alert is triggered if CPU utilization of the NameNode exceeds certain thresholds
                (200% warning, 250% critical). It uses the
                <InLineCode>check_cpu.php</InLineCode>
                plug-in which checks the NameNode JMX Servlet for the
                <Emph>SystemCPULoad</Emph>
                property. This information is only available if you are running JDK 1.7.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="9b5430ed-51c9-4e33-9ef0-5e3b8ab5dca3">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="1a7f2aca-c939-47c7-a36f-ba846d7dc20e">
                <List ListMarker="Bullet" xy:guid="8f5e6e11-3d6c-4cb2-bf13-6865a52053c4">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Unusually high CPU utilization: Can be caused by a very unusual job/query workload; but
                        this is generally due to an issue in the daemon.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="2f3138b7-6d07-474c-b08c-b603f406b2ec">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="04c76d8f-3ea6-41e5-bce6-5e2476a8173c">
                <List ListMarker="Bullet" xy:guid="10df10ad-80e7-4e22-908e-1f7dae0ac41b">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Use the
                        <InLineCode>top</InLineCode>
                        command to determine which processes are consuming excess CPU.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Reset the offending process.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="1b7155b6-0fa8-48ce-b684-d30dc2a46fdd">
            <Title>NameNode edit logs directory status</Title>
            <ParaBlock xy:guid="9dc014af-2279-4132-be71-4833981eb89f">
              <RichText>This host-level alert is triggered if the NameNode cannot write to one of its configured edit
                log directories.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="ebc47325-7ec1-43fb-a865-8bfe5e26e51f">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="2d71dc68-63f3-4cff-9ff1-9e586f5f03b8">
                <List ListMarker="Bullet" xy:guid="ced8bef5-75ae-4b6a-9cb8-3a102a6cbbc3">
                  <ItemBlock>
                    <Item>
                      <ItemPara>At least one of the multiple edit log directories is mounted over NFS and has become
                        unreachable.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The permissions on at least one of the multiple edit log directories is set to
                        Read-only.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="19756ba6-7099-4dfc-a858-1051fc3d119b">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="0a85ddf6-1125-4629-bebd-0f42bd9ff0f1">
                <List ListMarker="Bullet" xy:guid="456098e5-a710-45ab-9638-3af26ec4a19c">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check permissions on all edit log directories.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use the
                        <InLineCode>dfs.name.dir</InLineCode>
                        parameter in the
                        <InLineCode>hdfs-site.xml</InLineCode>
                        file on the NameNode to identify the locations of all the edit log directories for the NameNode.
                        Check whether the NameNode can reach all those locations.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="3be34089-df48-4e7d-bdd5-430279031e84">
            <Title>NameNode Web UI</Title>
            <ParaBlock xy:guid="2e574a64-8370-4228-94dc-5bb5c0a79a88">
              <RichText>This host-level alert is triggered if the NameNode Web UI is unreachable.</RichText>
            </ParaBlock>
            <Topic xy:guid="fe71293a-6085-4c2d-8370-9e0e8ce0fcfd">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="9712a126-3804-4f29-a84e-b9bbb19dc8ab">
                <List ListMarker="Bullet" xy:guid="88226127-5be7-4d19-9e8b-31a433e0b3f0">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The NameNode Web UI is unreachable from the Nagios Server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The NameNode process is not running.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="f1cab04c-cee1-4cb6-8274-5d55817b9280">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="1f4b0c09-1777-4af1-9de1-18df1801cab6">
                <List ListMarker="Bullet" xy:guid="97fac09b-b217-4b68-893a-221f18f3c0cf">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check whether the NameNode process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check whether the Nagios Server can ping the NameNode server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using a browser, check whether the Nagios Server can reach the NameNode Web UI.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="804c14db-30f5-451f-99f5-91291c3a5bef">
            <Title>Percent DataNodes with space available</Title>
            <ParaBlock xy:guid="554c34c1-1d15-4bbe-82e3-c2ea5502dbb5">
              <RichText>This service-level alert is triggered if the storage if full on a certain percentage of
                DataNodes (10% warn, 30% critical). It uses the
                <InLineCode>check_aggregate.php</InLineCode>
                plug-in which aggregates the result from the
                <InLineCode>check_datanode_storage.php</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="25bfa915-6a1f-48ee-8b8c-c7d1f3d7d691">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="20a65a39-f726-454b-9343-7ded4952f896">
                <List ListMarker="Bullet" xy:guid="95043f17-df3c-4f51-98ed-492f67b87d78">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Cluster storage is full.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>If cluster storage is not full, DataNode is full.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="9ab31a5a-c20c-4457-a5cd-ad587919a4dc">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="21111f42-b86a-4a42-b876-de138a4a1bfb">
                <List ListMarker="Bullet" xy:guid="fa71d40f-cba2-4f8a-829b-a75ceba312ce">
                  <ItemBlock>
                    <Item>
                      <ItemPara>If cluster still has storage, use Balancer to distribute the data to relatively
                        less-used DataNodes.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>If the cluster is full, delete unnecessary data or add additional storage by adding
                        either more DataNodes or more or larger disks to the DataNodes. After adding more storage run
                        Balancer.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="db47973f-61be-44fb-b8da-ee0aca7763e5">
            <Title>Percent DataNodes live</Title>
            <ParaBlock xy:guid="e0ee0e3c-9fd6-4bcd-b48a-4718bd526b05">
              <RichText>This alert is triggered if the number of down DataNodes in the cluster is greater than the
                configured critical threshold. It uses the
                <InLineCode>check_aggregate</InLineCode>
                plug-in to aggregate the results of
                <InLineCode>Data node process</InLineCode>
                checks.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="174f6d77-4582-4e40-94ca-de68f5389f2a">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="dcd1f86d-3a0c-4c33-a7a4-d842fc23d844">
                <List ListMarker="Bullet" xy:guid="8e700060-be2d-41f3-9596-212c98c2d308">
                  <ItemBlock>
                    <Item>
                      <ItemPara>DataNodes are down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>DataNodes are not down but are not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Nagios server cannot connect to one or more DataNodes.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="d4bf8fd6-e0d1-419e-a251-a18c78663ed8">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="d0a7fe50-e3e1-4d67-8d89-eecd61ec5dfa">
                <List ListMarker="Bullet" xy:guid="8693b89b-450a-4f15-84f7-d95afd9764a5">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for dead DataNodes in Ambari Web.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the DataNode logs, located at<InLineCode>
                        /var/log/hadoop/hdfs</InLineCode>. Then, restart the DataNode hosts/processes.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the DataNode process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the DataNodes.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="ecb16a55-1394-4b53-b1e2-ddcc4cfcd108">
            <Title>NameNode RPC latency</Title>
            <ParaBlock xy:guid="596e7782-243b-4578-ae87-198beb46fd75">
              <RichText>This host-level alert is triggered if the NameNode operations RPC latency exceeds the configured
                critical threshold. Typically an increase in the RPC processing time increases the RPC queue length,
                causing the average queue wait time to increase for NameNode operations. It uses the Nagios
                <InLineCode>check_rpcq_latency</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="a73c3d2f-df12-4e88-a378-309a77ac9a86">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="e78741ba-bf12-40d3-8843-a49f7964974f">
                <List ListMarker="Bullet" xy:guid="08597326-1b7b-4918-bee6-11873425f912">
                  <ItemBlock>
                    <Item>
                      <ItemPara>A job or an application is performing too many NameNode operations.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="f59645cc-e500-4a9a-aecb-4b012432d069">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="3d625183-96e2-4d42-9d15-8691b6e01c00">
                <List ListMarker="Bullet" xy:guid="a21de35a-2719-4b46-8054-247bd903de4c">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Review the job or the application for potential bugs causing it to perform too many
                        NameNode operations.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="ba4514f8-f077-43df-a61b-aa64183b301f">
            <Title>HDFS capacity utilization</Title>
            <ParaBlock xy:guid="5a6933e1-27bc-4318-a850-e668b94a71d9">
              <RichText>This service-level alert is triggered if the HDFS capacity utilization exceeds the configured
                critical threshold (80% warn, 90% critical). It uses the
                <InLineCode>check_hdfs_capacity.php</InLineCode>
                plug-in which checks the
                <InLineCode>NameNode JMX Servlet</InLineCode>
                for the
                <InLineCode>CapacityUsed</InLineCode>
                and
                <InLineCode>CapacityRemaining</InLineCode>
                properties.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="d6613893-9a7a-465a-b1d3-19dad0fdfd7b">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="91dfe26b-39b4-43a7-8a2e-795ba8b2e6d6">
                <List ListMarker="Bullet" xy:guid="c1fdd4fd-b31a-4af1-8b8c-aee8653b01e1">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Cluster storage is full.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="fefcf3ab-fa67-44e0-ae68-4aa7051f53a6">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="6ae02106-77d1-4807-bfe7-70d4e595510a">
                <List ListMarker="Bullet" xy:guid="4f724b16-b991-49f7-a40c-6369157a671f">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Delete unnecessary data.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Archive unused data.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Add more DataNodes.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Add more or larger disks to the DataNodes.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>After adding more storage, run Balancer.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="38170f33-1185-40f8-bd1d-fc53614b7cfd">
          <Title>NameNode HA Alerts (Hadoop 2 only)</Title>
          <ParaBlock xy:guid="f24f7aad-e827-4066-a968-49dbc722a43d">
            <RichText>These alerts are available only when you are using Hadoop 2.x and you have enabled NameNode HA.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="c50cf43b-8b3e-494d-84bd-a3dedd08dafb">
            <Title>JournalNode process</Title>
            <ParaBlock xy:guid="f75f1d55-7db8-4a56-9c22-1065742bf244">
              <RichText>This host-level alert is triggered if the individual JournalNode process cannot be established
                to be up and listening on the network for the configured critical threshold, given in seconds. It uses
                the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="da137e59-55dc-4293-9faf-d0dc05ab02c4">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="b70730d2-7cf5-4d3d-8fd2-0a122d1d3c28">
                <List ListMarker="Bullet" xy:guid="9bb223a0-f96b-4a2c-be30-54a456b4171a">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The JournalNode process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The JournalNode is not down, but is not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios server cannot connect to the JournalNode.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="a59e380a-5f93-4240-8af8-67895d860b7c">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="2ea5531c-6db4-41b5-9e41-8494a99599dc">
                <List ListMarker="Bullet" xy:guid="fc3994db-d984-4088-ae4b-51b3feb55063">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the JournalNode process is dead.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the JournalNode host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="354c49b1-2a97-4618-8ede-610d16871fd4">
            <Title>NameNode HA Healthy process</Title>
            <ParaBlock xy:guid="be8c65cd-70ec-4cd6-ad0f-f204503a1aa2">
              <RichText>This service-level alert is triggered if either the Active NameNode or Standby NameNode are not
                running.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="ec77b3bb-8f17-4eca-b95c-a1e06f6595a6">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="27c4af87-32ef-42af-b144-df240a20dffd">
                <List ListMarker="Bullet" xy:guid="839d98f0-c787-42b5-ba6c-bb39024c2bce">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The Active, Standby or both NameNode processes are down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios Server cannot connect to one or both NameNode hosts.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="73bca524-2127-43dd-be51-66aa3886e43b">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="65264c57-2866-40e8-8290-c9bb0f35ca22">
                <List ListMarker="Bullet" xy:guid="a4565e6e-559a-4de7-b110-8fd7d070bec9">
                  <ItemBlock>
                    <Item>
                      <ItemPara>On each host running NameNode, check for any errors in the logs, located at<InLineCode>
                        /var/log/hadoop/hdfs/</InLineCode>. Then, restart the NameNode host/process using Ambari Web.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>On each host running NameNode, run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the NameNode process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the hosts running NameNode.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="3fc5fe55-ac05-4701-b000-652e8eb011cd">
          <Title>YARN Alerts (Hadoop 2 only)</Title>
          <ParaBlock xy:guid="32786432-c967-427f-975c-052174eed055">
            <RichText>
              These alerts are used to monitor YARN.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="f63459a1-2ccf-4421-b96a-68cfb8eab119">
            <Title>ResourceManager process</Title>
            <ParaBlock xy:guid="734c793f-19e6-4202-a05c-a428fa5cdbdd">
              <RichText>This host-level alert is triggered if the individual ResourceManager process cannot be
                established to be up and listening on the network for the configured critical threshold, given in
                seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="afd3352a-ab9e-4521-ac22-635cd115d53e">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="babcc881-de18-4a61-af06-d765eaa239cd">
                <List ListMarker="Bullet" xy:guid="900b6aa3-5505-46e0-b90f-f695847e2f9b">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The ResourceManager process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The ResourceManager is not down, but is not listening to the correct network
                        port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Nagios Server cannot connect to the ResourceManager.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="2222357c-755b-4425-8752-36b4133e1eac">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="c199d220-783b-4bc8-8ea6-228831434ed8">
                <List ListMarker="Bullet" xy:guid="78d69022-a7fc-481b-9b3f-71c6edf8337e">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for a dead ResourceManager.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the ResourceManager logs, located at<InLineCode>
                        /var/log/hadoop/yarn</InLineCode>. Then, restart the ResourceManager, if necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios Server and the ResourceManager host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="d8dc21b4-534e-4fb4-ba66-955580a34d66">
            <Title>Percent NodeManagers live</Title>
            <ParaBlock xy:guid="f69d5728-cf8d-4ca8-bfea-16fc29346973">
              <RichText>This alert is triggered if the number of down NodeManagers in the cluster is greater than the
                configured critical threshold. It uses the
                <InLineCode>check_aggregate</InLineCode>
                plug-in to aggregate the results of DataNode process alert checks.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="175e7393-4cbd-433c-aae1-71daa051e77f">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="76a311b6-f3e7-4a0b-8d3e-55ee255f2716">
                <List ListMarker="Bullet" xy:guid="c43c2d05-ce1f-4031-9a94-245740d1be32">
                  <ItemBlock>
                    <Item>
                      <ItemPara>NodeManagers are down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>NodeManagers are not down but are not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Nagios server cannot connect to one or more NodeManagers.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="7b039fc2-0abf-4858-9d13-8a28f9392eea">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="a2679581-17ff-4672-8184-30d39044585d">
                <List ListMarker="Bullet" xy:guid="39de62b7-c4d0-457d-9605-82b21f7acfbb">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for dead NodeManagers.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the NodeManager logs, located at<InLineCode>
                        /var/log/hadoop/yarn</InLineCode>. Then, restart the NodeManagers hosts/processes, as necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the NodeManager process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios Server and the NodeManagers host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="cd5857f0-5851-4f3a-9e22-0aa825953386">
            <Title>ResourceManager Web UI</Title>
            <ParaBlock xy:guid="8277ea1a-69e5-4e09-94b1-ac3ae11b6b0f">
              <RichText>This host-level alert is triggered if the ResourceManager Web UI is unreachable.</RichText>
            </ParaBlock>
            <Topic xy:guid="3ee00827-9665-4757-a54a-198eb1384b55">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="b51eb743-a861-4364-8e23-bcedc51f118c">
                <List ListMarker="Bullet" xy:guid="a124688e-523a-4d60-b7ec-e144ca2416f0">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The ResourceManager Web UI is unreachable from the Nagios Server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The ResourceManager process is not running.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="cd9d240b-febe-4096-b68a-122ef6944472">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="7017e7f7-6a88-4d09-85bd-eeb14f12172c">
                <List ListMarker="Bullet" xy:guid="b32c7386-e5b4-4b6b-b4d1-99c1308b0a83">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the ResourceManager process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check whether the Nagios Server can ping the ResourceManager server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using a browser, check whether the Nagios Server can reach the ResourceManager Web UI.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="88330e13-e067-4ef2-973b-26332b706d61">
            <Title>ResourceManager RPC latency</Title>
            <ParaBlock xy:guid="038fcd12-8fe2-4a97-a99b-1c7028f61b3d">
              <RichText>This host-level alert is triggered if the ResourceManager operations RPC latency exceeds the
                configured critical threshold. Typically an increase in the RPC processing time increases the RPC queue
                length, causing the average queue wait time to increase for ResourceManager operations. It uses the
                Nagios
                <InLineCode>check_rpcq_latency</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="2d4507d8-daf6-41e5-a8ec-263b0bf20939">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="4f729456-de8b-4c3e-b878-68f5e7460a86">
                <List ListMarker="Bullet" xy:guid="4b7f97fb-840a-4a58-b918-8eb62d6166a3">
                  <ItemBlock>
                    <Item>
                      <ItemPara>A job or an application is performing too many ResourceManager operations.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="5815a7fa-2407-4a2b-bb21-d628e67244be">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="22439fd0-ce15-492a-8131-27147e4a1a95">
                <List ListMarker="Bullet" xy:guid="9cc6b928-3d81-45ce-a920-38b9a52ec8de">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Review the job or the application for potential bugs causing it to perform too many
                        ResourceManager operations.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="34527254-3eba-414b-96e5-a1b80971a0dc">
            <Title>ResourceManager CPU utilization</Title>
            <ParaBlock xy:guid="2a867d8d-e85a-4586-ae70-3c69b32eda1f">
              <RichText>This host-level alert is triggered if CPU utilization of the ResourceManager exceeds certain
                thresholds (200% warning, 250% critical). It uses the
                <InLineCode>check_cpu.php</InLineCode>
                plug-in which checks the ResourceManager JMX Servlet for the
                <InLineCode>SystemCPULoad</InLineCode>
                property. This information is only available if you are running JDK 1.7.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="013c113d-f8ef-4b80-ae43-9283aaa12d92">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="9962688d-8069-48a1-a8b4-f8b8a36da24d">
                <List ListMarker="Bullet" xy:guid="4dc57dbd-29e6-4417-8e7a-bde5a33cb874">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Unusually high CPU utilization: Can be caused by a very unusual job/query workload, but
                        this is generally the sign of an issue in the daemon.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="6a8629f5-aac7-4c0c-8dd6-05e0662b1787">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="2b570e0e-ea13-4968-9f01-af0b3f6efea7">
                <List ListMarker="Bullet" xy:guid="65653229-bbfb-43b4-a2a8-bd11f72cfdf0">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Use the
                        <InLineCode>top</InLineCode>
                        command to determine which processes are consuming excess CPU.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Reset the offending process.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="20c4e8f8-2221-40d7-828e-09853efb2a7e">
            <Title>NodeManager process</Title>
            <ParaBlock xy:guid="018dde9d-959f-4753-b72f-c97b8df13a4e">
              <RichText>This host-level alert is triggered if the NodeManager process cannot be established to be up and
                listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="b24ec018-158d-4091-bd85-4b75c591a632">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="b78c9422-7fb8-495e-b350-77173f18834c">
                <List ListMarker="Bullet" xy:guid="ef05316f-a5ed-4e58-8c50-4f31c0033da3">
                  <ItemBlock>
                    <Item>
                      <ItemPara>NodeManager process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>NodeManager is not down but is not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Nagios Server cannot connect to the NodeManager</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="65cf2289-e070-4409-8c2c-4f681d159446">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="d9115523-6add-4489-9c1e-a74e96d33eba">
                <List ListMarker="Bullet" xy:guid="5218e73f-910e-41d9-bc1e-db1de35493dd">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the NodeManager is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the NodeManager logs (<InLineCode>
                        /var/log/hadoop/yarn</InLineCode>) and restart the NodeManager, if necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios Server and the NodeManager host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="9c563ca7-d539-47f0-8e70-d1ea444ea7d7">
            <Title>NodeManager health</Title>
            <ParaBlock xy:guid="5c40274d-6bf8-4baa-be0b-a6c525822fb0">
              <RichText>This host-level alert checks the node health property available from the NodeManager
                component.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="43641740-c016-4434-9e6f-0b2cdb36f0af">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="634df0b9-5d74-4bab-ab08-68ef18e432e5">
                <List ListMarker="Bullet" xy:guid="20f4c553-50c2-468b-a065-99b57b09203c">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Node Health Check script reports issues or is not configured.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="9a8bbf2c-0a00-4b1f-ae1c-4db0a3e26bae">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="9306db71-f77d-4045-9dac-9d7c2235509b">
                <List ListMarker="Bullet" xy:guid="54adc776-d076-480c-9847-db01f127d572">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check in the NodeManager logs (<InLineCode>/var/log/hadoop/yarn</InLineCode>) for health
                        check errors and restart the NodeManager, and restart if necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check in the ResourceManager UI logs (<InLineCode>/var/log/hadoop/yarn</InLineCode>) for
                        health check errors.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="9c5bd125-7b4e-4e1b-9587-bbf462f8e76d">
          <Title>MapReduce2 Alerts (Hadoop 2 only)</Title>
          <ParaBlock xy:guid="660bb7be-135a-496b-b9f6-ea7971df06b9">
            <RichText>These alerts are used to monitor MR2.</RichText>
          </ParaBlock>
          <Topic xy:guid="d818a453-b9d9-42d0-b52a-091955b14f96">
            <Title>HistoryServer Web UI</Title>
            <ParaBlock xy:guid="fc8cd346-1a30-4411-8b73-3bf664030141">
              <RichText>This host-level alert is triggered if the HistoryServer Web UI is unreachable.</RichText>
            </ParaBlock>
            <Topic xy:guid="9f18764b-6aad-4277-9a6b-a30b5ff9d4e0">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="f4c6d7fa-7d82-42a4-8d7f-acab3a02e4a1">
                <List ListMarker="Bullet" xy:guid="fb08c7f3-6a13-4e44-ad6d-d9140c42c721">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The HistoryServer Web UI is unreachable from the Nagios Server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The HistoryServer process is not running.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="4cf0119a-a7d6-487b-ad25-e5b8e666179e">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="71205dc0-1cbd-41b2-bd97-4c85c4c6b549">
                <List ListMarker="Bullet" xy:guid="5f1479d8-4d30-4835-b9ec-af48fc7c5d69">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the HistoryServer process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check whether the Nagios Server can ping the HistoryServer server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using a browser, check whether the Nagios Server can reach the HistoryServer Web UI.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="86faf332-fdd4-4324-827d-6d8f6b4833c8">
            <Title>HistoryServer RPC latency</Title>
            <ParaBlock xy:guid="611a16a6-8688-4b45-8c6d-420c38062eb5">
              <RichText>This host-level alert is triggered if the HistoryServer operations RPC latency exceeds the
                configured critical threshold. Typically an increase in the RPC processing time increases the RPC queue
                length, causing the average queue wait time to increase for NameNode operations. It uses the Nagios
                <InLineCode>check_rpcq_latency</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="9f98cd97-69d1-41ff-ad3f-c448eab4c790">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="ad6f3560-76a4-49d5-9397-b12e0bad6fef">
                <List ListMarker="Bullet" xy:guid="c5ce2c49-778c-4f1b-a90b-281ad8de7cb0">
                  <ItemBlock>
                    <Item>
                      <ItemPara>A job or an application is performing too many HistoryServer operations.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="2ff92818-2ef5-4330-91db-b70fd6ad5d27">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="94d02935-3974-45c1-a0e0-ed3b45f80c54">
                <List ListMarker="Bullet" xy:guid="7c9413a1-c022-4eb6-a4e6-7c0a913c8a43">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Review the job or the application for potential bugs causing it to perform too many
                        HistoryServer operations.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="6f1c158e-d305-4d66-b9aa-ecccc8b4b31b">
            <Title>HistoryServer CPU utilization</Title>
            <ParaBlock xy:guid="9b556c0a-cf42-4cce-afd8-ee1d02ffcafe">
              <RichText>This host-level alert is triggered if the percent of CPU utilization on the HistoryServer
                exceeds the configured critical threshold. This alert uses the Nagios
                <InLineCode>check_snmp_load</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="b2834b0e-6d6c-414f-b713-a27bc455fe14">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="02cfb99a-87f1-4402-88e8-763c098c188d">
                <List ListMarker="Bullet" xy:guid="bc67ff23-e8fe-4ea0-a4ac-bc750037e7f4">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Unusually high CPU utilization: Can be caused by a very unusual job/query workload, but
                        this is generally the sign of an issue in the daemon.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>A down SNMP daemon on the HistoryServer node, producing an unknown status.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="fe1d2152-3705-4f69-9877-18f911e11322">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="46207946-0afa-44a3-be95-42f2d6b5e66e">
                <List ListMarker="Bullet" xy:guid="f9ca857e-2a9b-4748-a3a2-4cf116207f56">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Use the
                        <InLineCode>top</InLineCode>
                        command to determine which processes are consuming excess CPU.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Reset the offending process.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check the status of the SNMP daemon.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="30a667b5-784d-45ca-9012-1d1bbc5331d5">
            <Title>HistoryServer process</Title>
            <ParaBlock xy:guid="77b5749c-6176-4743-b84a-43f088fc5f07">
              <RichText>This host-level alert is triggered if the HistoryServer process cannot be established to be up
                and listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="8ca83ce3-6bf4-48ae-9145-d6a321c698b4">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="16e620a3-d3a2-40ad-a4af-44792140576a">
                <List ListMarker="Bullet" xy:guid="fc0e4dce-43cb-4b83-8479-0040167e1ecb">
                  <ItemBlock>
                    <Item>
                      <ItemPara>HistoryServer process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>HistoryServer is not down but is not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Nagios Server cannot connect to the HistoryServer.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="4b3822c2-236b-4efb-af66-b6c63f6b76bb">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="383ee2c5-ab58-4764-8769-1d23bfa014d1">
                <List ListMarker="Bullet" xy:guid="b87ab049-ff07-4233-ab31-535f88dd7133">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the HistoryServer is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the HistoryServer logs, located at<InLineCode>
                        /var/log/hadoop/mapred.</InLineCode>Then, restart the HistoryServer, if necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios Server and the HistoryServer host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="a82b966d-d341-4d54-86e6-25b9cb336e48">
          <Title>MapReduce Service Alerts (Hadoop 1 only)</Title>
          <ParaBlock xy:guid="95f4afb2-f8f7-4904-9503-f8c8c0163b94">
            <RichText>These alerts are used to monitor the MapReduce service.</RichText>
          </ParaBlock>
          <Topic xy:guid="d6e25dd2-fd84-4df6-97a5-be71151713da">
            <Title>JobTracker RPC latency alert</Title>
            <ParaBlock xy:guid="28cf7209-e1c3-41ee-9b62-30d931c09367">
              <RichText>This host-level alert is triggered if the JobTracker operations RPC latency exceeds the
                configured critical threshold. Typically an increase in the RPC processing time increases the RPC queue
                length, causing the average queue wait time to increase for JobTracker operations. This alert uses the
                Nagios
                <InLineCode>check_rpcq_latency</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="0760226b-bb14-4cda-9a81-79217f494e88">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="99879493-2840-4da7-aef9-d92cd7b7d782">
                <List ListMarker="Bullet" xy:guid="0ca9a324-d8a3-4aea-be67-6bf24c50ee9e">
                  <ItemBlock>
                    <Item>
                      <ItemPara>A job or an application is performing too many JobTracker operations.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="19e601c2-17f4-4bd4-9f4d-3087a33c6f4d">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="9e579bf7-05d5-4354-8ac7-8a3ef132eb8c">
                <List ListMarker="Bullet" xy:guid="e3a3ea93-231a-4884-8f93-54d789120e9d">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Review the job or the application for potential bugs causing it to perform too many
                        JobTracker operations.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="997dba4b-1e91-4e16-9bf9-80dc0b577912">
            <Title>JobTracker process</Title>
            <ParaBlock xy:guid="2d196c09-2e7d-4b6c-b7a7-d2c8c6a90361">
              <RichText>This host-level alert is triggered if the individual JobTracker process cannot be confirmed to
                be up and listening on the network for the configured critical threshold, given in seconds. It uses the
                Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="9b751448-a7bb-4003-908e-8214a9df97f0">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="b736f3b3-ad0e-4a38-8179-e9eada2eaac7">
                <List ListMarker="Bullet" xy:guid="4158af30-285b-491b-9b8b-000db02642d6">
                  <ItemBlock>
                    <Item>
                      <ItemPara>JobTracker process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>JobTracker is not down but is not listening to the correct network port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios server cannot connect to the JobTracker</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="10d132ab-fc90-495a-b082-d20c5d2d7e05">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="e3be4358-b2b5-485e-b40c-7a2dc377a110">
                <List ListMarker="Bullet" xy:guid="294989f7-3dc6-43ec-ab61-e50dcb9a1a17">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the JobTracker process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check for any errors in the JobTracker logs, located at<InLineCode>
                        /var/log/hadoop/mapred</InLineCode>. Then, restart the JobTracker, if necessary
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios Server and the JobTracker host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="1358cd7f-0cda-4e74-8ea1-4f0e0ff056f3">
            <Title>JobTracker Web UI</Title>
            <ParaBlock xy:guid="f38a9f64-03cb-4336-80c0-82a660927810">
              <RichText>This Host-level alert is triggered if the JobTracker Web UI is unreachable.</RichText>
            </ParaBlock>
            <Topic xy:guid="a30a44e9-abc5-4912-98e6-64bc369f6b13">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="1dfb149e-f5cb-407a-bae4-7871f3f3f19d">
                <List ListMarker="Bullet" xy:guid="9bff6572-c626-4d64-aa09-48dfd1e874eb">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The JobTracker Web UI is unreachable from the Nagios Server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The JobTracker process is not running.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="1fb04444-be8e-4cad-ba90-a2e2b8b0ceee">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="3d6106af-230b-42a3-9a1a-07ca8a504d2c">
                <List ListMarker="Bullet" xy:guid="259717ba-6f10-47ba-aef0-3ef5df29f970">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the JobTracker process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check whether the Nagios Server can ping the JobTracker server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using a browser, check whether the Nagios Server can reach the JobTracker Web UI.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="0262eb6f-f913-4870-ac4a-3513d918429f">
            <Title>JobTracker CPU utilization</Title>
            <ParaBlock xy:guid="a1231857-a5de-4087-9973-74f7cd2865f9">
              <RichText>This host-level alert is triggered if CPU utilization of the JobTracker exceeds certain
                thresholds (200% warning, 250% critical). It uses the
                <InLineCode>check_cpu.php</InLineCode>
                plug-in which checks the JobTracker JMX Servlet for the
                <InLineCode>SystemCPULoad</InLineCode>
                property. This information is only available if you are running JDK 1.7.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="09baebd2-28d2-4b8c-be95-9a58765627da">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="db06edc1-1993-4eb3-af29-8faf8e9769f2">
                <List ListMarker="Bullet" xy:guid="4e014519-2390-4bec-88c0-c37ad220f8f2">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Unusually high CPU utilization: Can be caused by a very unusual job/query workload, but
                        this is generally the sign of an issue in the daemon.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="97b74b9b-9b8a-4296-8485-8cc9430f1c0d">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="fe059ceb-93bf-4acd-bca1-edf8bcceb0e1">
                <List ListMarker="Bullet" xy:guid="943e985e-164f-445b-a26f-0cdee648f4d0">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Use the
                        <InLineCode>top</InLineCode>
                        command to determine which processes are consuming excess CPU.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Reset the offending processor.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="8525e4ad-40c3-4381-b92b-2a205ca681b4">
            <Title>HistoryServer Web UI</Title>
            <ParaBlock xy:guid="cd6285c8-c24a-4e34-b1f3-d4dfadb372d3">
              <RichText>This host-level alert is triggered if the HistoryServer Web UI is unreachable.</RichText>
            </ParaBlock>
            <Topic xy:guid="3343f1bf-2acd-4869-8d9f-709ecace48e1">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="dd998a24-13d4-41ab-839f-c51f0dbc9235">
                <List ListMarker="Bullet" xy:guid="6be1698f-bb2b-47ba-b88c-d6c04a42f954">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The HistoryServer Web UI is unreachable from the Nagios Server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The HistoryServer process is not running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using a browser, check whether the Nagios Server can reach the HistoryServer Web UI.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="28a9e8dd-5dad-4026-8867-4360847b02d9">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="86454c74-0c2d-4346-afc6-cb31c6597e93">
                <List ListMarker="Bullet" xy:guid="d9665e5d-f818-49a7-b931-d473b78165aa">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the HistoryServer process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check whether the Nagios Server can ping the HistoryServer server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check the status of the SNMP daemon.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="8cde54d0-1ac3-4fa2-9d3c-d9b72b464cc7">
            <Title>HistoryServer process</Title>
            <ParaBlock xy:guid="aebbe18e-7ef3-4b93-a09e-1d816995ef01">
              <RichText>This host-level alert is triggered if the HistoryServer process cannot be established to be up
                and listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="62f42ab5-8718-428c-be89-0cacc6f1ae36">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="3c7cd94a-0016-43ed-8753-53874cb697a0">
                <List ListMarker="Bullet" xy:guid="306cdc61-06cb-46e6-9a72-5453e09c6626">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The HistoryServer process is down or not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The HistoryServer is not down but is not listening to the correct network
                        port/address.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios Server cannot connect to the HistoryServer.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="9439e9fe-3567-4bc0-8420-5502801f3964">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="13ff3bff-9e8b-45b7-b5d2-3d475a04db5a">
                <List ListMarker="Bullet" xy:guid="17bb1284-c707-40f7-9441-4e5784264a96">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for any errors in the HistoryServer logs located at<InLineCode>
                        /var/log/hadoop/mapred</InLineCode>. Then, restart the HistoryServer, if necessary.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios Server and the HistoryServer host.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="58657766-7bbf-417a-9ccb-b9080a9a291b">
          <Title>HBase Service Alerts</Title>
          <ParaBlock xy:guid="1dc33c32-650d-4d8c-871f-4ced8b57a216">
            <RichText>These alerts are used to monitor the HBase service.</RichText>
          </ParaBlock>
          <Topic xy:guid="ebad99e0-40b9-4400-bc2e-c0420b0b6965">
            <Title>Percent RegionServers live</Title>
            <ParaBlock xy:guid="47db5afe-b131-4c7a-bd86-71e8fa2d6e83">
              <RichText>This service-level alert is triggered if the configured percentage of Region Server processes
                cannot be determined to be up and listening on the network for the configured critical threshold. The
                default setting is 10% to produce a WARN alert and 30% to produce a CRITICAL alert. It uses the
                <InLineCode>check_aggregate</InLineCode>
                plug-in to aggregate the results of
                <InLineCode>RegionServer process down</InLineCode>
                checks.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="eab0a7cc-5639-4ad3-af39-fe60c2003d12">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="dd08ab64-fdb3-46e2-ac28-a2cea6376e35">
                <List ListMarker="Bullet" xy:guid="c65d88f9-d9f0-40f0-aa7e-25535e2767b7">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Misconfiguration or less-than-ideal configuration caused the RegionServers to crash.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Cascading failures brought on by some workload caused the RegionServers to crash.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The RegionServers shut themselves down because there were problems in the dependent
                        services, ZooKeeper, or HDFS.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>GC paused the RegionServer for too long and the RegionServers lost contact with
                        ZooKeeper.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="b0126851-53b7-4dea-b7a5-0c5fe21360d6">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="2473bcb5-d274-466c-b1fb-c86800d2c218">
                <List ListMarker="Bullet" xy:guid="29f6607a-0044-46c7-85c4-2f82d432fd89">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the dependent services to make sure they are operating correctly.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Look at the RegionServer log files, usually located at
                        <InLineCode>/var/log/hbase/*.log</InLineCode>
                        for further information.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Look at the configuration files located at
                        <InLineCode>/etc/hbase/conf.</InLineCode>
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>If the failure was associated with a particular workload, try to better understand the
                        workload.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Restart the RegionServers.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="f195ef7e-d4a3-4d61-a0aa-76191bcf790f">
            <Title>HBase Master process</Title>
            <ParaBlock xy:guid="35a8f758-d002-42db-9c01-34fb704b1ed7">
              <RichText>This alert is triggered if the HBase master processes cannot be confirmed to be up and listening
                on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="e2001766-3107-4a9e-b018-dbd9acfd6ac5">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="77a72bdc-d09c-41fa-a27a-8529d12cc382">
                <List ListMarker="Bullet" xy:guid="b98b57d1-d4b5-4052-ba91-7739f73c621c">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The HBase master process is down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The HBase master has shut itself down because there were problems in the dependent
                        services, ZooKeeper, or HDFS.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios server cannot connect to the HBase master through the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="6b5f78b7-f0aa-4ccc-acc3-80eaf6d6c7ea">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="d780743d-c5f7-4f20-b219-c8bafda7d0d0">
                <List ListMarker="Bullet" xy:guid="89bcf420-061c-4109-85d7-d14278ff5889">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the dependent services.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Look at the master log files, usually located at
                        <InLineCode>/var/log/hbase/*.log,</InLineCode>
                        for further information.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Look at the configuration files in
                        <InLineCode>/etc/hbase/conf.</InLineCode>
                      </ItemPara>
                      <RichText>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the HBase master.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Restart the master.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="0233a2d1-4464-42c4-ac80-784de2c22c8c">
            <Title>HBase Master Web UI</Title>
            <ParaBlock xy:guid="94290d05-8ded-46eb-a991-3e7a6eb8136f">
              <RichText>This host-level alert is triggered if the HBase Master Web UI is unreachable.</RichText>
            </ParaBlock>
            <Topic xy:guid="93713be0-3b93-4d7b-9a49-0bb9be10f96e">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="06f05376-c8df-416d-b281-d401c6972797">
                <List ListMarker="Bullet" xy:guid="1d4b3e5f-e2af-48b4-9694-4b7a50987fa5">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The HBase Master Web UI is unreachable from the Nagios Server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The HBase Master process is not running.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="816ff09b-b799-4913-86ec-576e76af084d">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="834f4bb2-2f5c-42d1-8165-2c4636d63184">
                <List ListMarker="Bullet" xy:guid="1f861265-7de1-4742-be97-8265b7c474b9">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check if the Master process is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check whether the Nagios Server can ping the HBase Master server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Using a browser, check whether the Nagios Server can reach the HBase Master Web UI.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="7a809671-ca50-487d-a4be-1fb9dfdc1197">
            <Title>HBase Master CPU utilization</Title>
            <ParaBlock xy:guid="0e900daa-4db4-4ca4-9ffe-59044bb8b0f2">
              <RichText>This host-level alert is triggered if CPU utilization of the HBase Master exceeds certain
                thresholds (200% warning, 250% critical). It uses the
                <InLineCode>check_cpu.php</InLineCode>
                plug-in which checks the HBase Master JMX Servlet for the
                <InLineCode>SystemCPULoad</InLineCode>
                property. This information is only available if you are running JDK 1.7.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="dad3af8c-13e9-4139-8fb9-7a5e0399630e">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="72c24b92-60f6-42c2-af3e-d02ca0d3e6be">
                <List ListMarker="Bullet" xy:guid="690439c4-0e17-4844-b1bd-45eeac30c101">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Unusually high CPU utilization. Can be caused by a very unusual job/query workload, but
                        this is generally the sign of an issue in the daemon.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="d1a3e883-9605-43ad-87ae-8b79c4875297">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="9b197515-8828-417f-828a-181a1daf5038">
                <List ListMarker="Bullet" xy:guid="c8622761-3b7a-4ab7-ae32-267ba4c5608b">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Use the
                        <InLineCode>top</InLineCode>
                        command to determine which processes are consuming excess CPU.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Reset the offending process.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="e495f42d-b5c3-4757-9641-a5ceba86bc97">
            <Title>RegionServer process</Title>
            <ParaBlock xy:guid="5559ea99-2a7e-4ca7-aa9e-27fd3b5e331b">
              <RichText>This host-level alert is triggered if the RegionServer processes cannot be confirmed to be up
                and listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="76fd2d0b-3ded-451d-9598-d1e65136e8c7">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="c6617e76-f73c-4894-b734-171f53b24695">
                <List ListMarker="Bullet" xy:guid="ec3cdf3d-9b75-4b0e-84b8-6c96728ea3ee">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The RegionServer process is down on the host.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The RegionServer process is up and running but not listening on the correct network port
                        (default 60030).
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios server cannot connect to the RegionServer through the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="32331302-0457-4e75-967a-6a168eb2c59c">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="359e8925-58b2-4c15-a61f-49d152c477bf">
                <List ListMarker="Bullet" xy:guid="67c3b4c4-9b52-404b-a4a2-864c9d930243">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for any errors in the logs, located at<InLineCode>/var/log/hbase/</InLineCode>.
                        Then, restart the RegionServer process using Ambari Web.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the RegionServer process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the NagiosServer and the RegionServer.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="9c56c86f-8b6c-4fe8-b008-3f2cf306255b">
          <Title>Hive Alerts</Title>
          <ParaBlock xy:guid="7c65f71a-bca3-4ab4-a037-097d187072b4">
            <RichText>These alerts are used to monitor the Hive service.</RichText>
          </ParaBlock>
          <Topic xy:guid="5ea9eee8-a925-4fc4-aa9f-c981d35117cc">
            <Title>Hive-Metastore status</Title>
            <ParaBlock xy:guid="6984af8b-aaee-4c68-9ecf-c13d62cdf233">
              <RichText>This host-level alert is triggered if the Hive Metastore process cannot be determined to be up
                and listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="619858b5-db84-425e-b97a-67dffb67cca1">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="02b009b3-cb02-4a8b-928c-3dff060ebb6b">
                <List ListMarker="Bullet" xy:guid="7e705bc1-f2a9-45a9-b9c8-19b1e86c9cb6">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The Hive Metastore service is down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The database used by the Hive Metastore is down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Hive Metastore host is not reachable over the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="18588054-0b74-4fd4-98f8-b8d79f8084a6">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="6fa96ec2-2342-4099-9b7a-e725ad095e6a">
                <List ListMarker="Bullet" xy:guid="dd09b59b-16b1-49a7-99c2-4aca821ae559">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Using<Emph>Ambari Web</Emph>, stop the Hive service and then restart it.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the Hive Metastore server.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="7aa24ab7-2a58-47e3-abf5-e9e93e497f1b">
          <Title>WebHCat Alerts</Title>
          <ParaBlock xy:guid="089b833e-3fe3-4c0f-b16b-11d929bf62c1">
            <RichText>These alerts are used to monitor the WebHCat service.</RichText>
          </ParaBlock>
          <Topic xy:guid="7c07e132-a240-414a-b20e-9199ffda433d">
            <Title>WebHCat Server status</Title>
            <ParaBlock xy:guid="e820d0d9-a883-4766-8782-387d47577df2">
              <RichText>This host-level alert is triggered if the WebHCat server cannot be determined to be up and
                responding to client requests.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="33d7f366-d526-4520-8f88-304d3730c3bc">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="4e5719c9-54f3-4053-a3ce-48edc6e54c2b">
                <List ListMarker="Bullet" xy:guid="8a3358a4-e008-4a84-bec4-514714dbd046">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The WebHCat server is down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The WebHCat server is hung and not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The WebHCat server is not reachable over the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="d7d75a61-e598-4ba7-84d1-7461d50a5929">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="a954348a-c0f2-4b14-930f-4fa08f0b729c">
                <List ListMarker="Bullet" xy:guid="fe6a9679-ef51-4e46-bc2c-2a4988f7c21d">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Restart the WebHCat server using Ambari Web.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="66fcb82d-70c9-4558-af60-444826ecb909">
          <Title>Oozie Alerts</Title>
          <ParaBlock xy:guid="dd29be9a-6896-4632-afbf-33406c64d941">
            <RichText>These alerts are used to monitor the Oozie service.</RichText>
          </ParaBlock>
          <Topic xy:guid="2a856772-3a17-4771-a948-48641f0d428e">
            <Title>Oozie status</Title>
            <ParaBlock xy:guid="a64df029-be74-4b38-bc60-97458898e083">
              <RichText>This host-level alert is triggered if the Oozie server cannot be determined to be up and
                responding to client requests.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="07266442-efaf-45b9-8dd6-462f4104f914">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="8c9bb77c-5b14-4bde-b1b4-e080d91c1972">
                <List ListMarker="Bullet" xy:guid="37372ba4-7a9d-4814-99a3-2debd1528e50">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The Oozie server is down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Oozie server is hung and not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Oozie server is not reachable over the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="3e7ab3a3-6a80-461a-bab2-9def890d8bd3">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="fa7999e0-ad80-451d-89b4-88e56162ced5">
                <List ListMarker="Bullet" xy:guid="faadabd0-c7c7-416f-bed8-13cc4f43f948">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Restart the Oozie service using Ambari Web.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="a39653fe-a5bf-443b-b726-0b7c731652e8">
          <Title>Ganglia Alerts</Title>
          <ParaBlock xy:guid="45097afb-9867-41f0-a901-8a5fc374648e">
            <RichText>These alerts are used to monitor the Ganglia service.</RichText>
          </ParaBlock>
          <Topic xy:guid="1b887b7f-251f-4e16-b701-4fa9abb1b56b">
            <Title>Ganglia Server status</Title>
            <ParaBlock xy:guid="5978b729-b256-4d90-9cf4-e77545b61ac7">
              <RichText>This host-level alert determines if the Ganglia server is running and listening on the network
                port. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="8337b3cd-fbc1-4da8-a6cb-7927f8b6e897">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="2af415d0-9e9a-4e45-adb8-120638d5abb1">
                <List ListMarker="Bullet" xy:guid="a0169e7b-b5df-4568-8474-ca673f0c3cc2">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The Ganglia server process is down.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Ganglia server process is hung and not responding.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The network connection between the Nagios and Ganglia servers is down.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="dbf6824d-e7f0-4d50-8521-6cf208669da6">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="828998d1-f4d8-438d-8593-9acf7f68e16a">
                <List ListMarker="Bullet" xy:guid="144b8a50-49ee-4bba-ae5e-e90815b79706">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the Ganglia server,
                        <InLineCode>gmetad</InLineCode>
                        related log, located at
                        <InLineCode>/var/log/messages</InLineCode>
                        for any errors.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Restart the Ganglia server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check if
                        <InLineCode>ping</InLineCode>
                        works between Nagios and Ganglia servers.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="f9964592-5fb5-4684-8472-6fb919528cdf">
            <Title>Ganglia Monitor process</Title>
            <ParaBlock xy:guid="0082c41a-246e-4b7a-88c4-b50c64811acc">
              <RichText>These host-level alerts check if the Ganglia monitor daemons,
                <InLineCode>gmond,</InLineCode>
                on the Ganglia server are running and listening on the network port. This alert uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
              <RichText>Ganglia Monitoring daemons run for the following collections:</RichText>
              <List ListMarker="Bullet" xy:guid="cb0be0e6-aa4f-483b-aa3a-d3c8088bb1ef">
                <ItemBlock>
                  <Item>
                    <ItemPara>Slaves</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>NameNode</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>HBase Master</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>JobTracker (Hadoop 1 only)</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>ResourceManager (Hadoop 2 only)</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>HistoryServer (Hadoop 2 only)</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
            <Topic xy:guid="bb33ffef-9123-41d8-9524-7c0968d8bcc2">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="acffa971-0620-4e37-a144-d6f7b4b6b463">
                <List ListMarker="Bullet" xy:guid="13b2630a-0406-43f4-9c16-d9f989c35114">
                  <ItemBlock>
                    <Item>
                      <ItemPara>A
                        <InLineCode>gmond</InLineCode>
                        process is down.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>A
                        <InLineCode>gmond</InLineCode>
                        process is hung and not responding.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The network connection is down between the Nagios and Ganglia servers.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="4f400ce1-9ea9-40b9-a8c2-ac204c27a72a">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="99cd0037-e3c7-4529-a190-c11060bc6117">
                <List ListMarker="Bullet" xy:guid="b786719f-8c63-4b49-9b19-262e03158f7e">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the
                        <InLineCode>gmond</InLineCode>
                        related log, located at
                        <InLineCode>/var/log/messages</InLineCode>
                        for any errors.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check if
                        <InLineCode>ping</InLineCode>
                        works between Nagios and Ganglia servers.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="c555a0c0-d563-4074-b0a0-eb48fafc2acc">
          <Title>Nagios Alerts</Title>
          <ParaBlock xy:guid="f3445411-89d6-4dca-ac7a-42854f8003d0">
            <RichText>These alerts are used to monitor the Nagios service.</RichText>
          </ParaBlock>
          <Topic xy:guid="94eceab1-aef2-46a2-850e-562a4074b227">
            <Title>Nagios status log freshness</Title>
            <ParaBlock xy:guid="f57e8647-f1b3-4cb0-b5d0-7fbe7fce52e0">
              <RichText>This host-level alert determines if the Nagios server is updating its status log regularly.
                Ambari depends on the status log located at
                <InLineCode>/var/nagios/status.dat</InLineCode>
                to receive all the Nagios alerts.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="a151ab7d-d999-440e-b80a-cec0ce9519a4">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="92379e97-d5f4-4df8-ab55-908153d653ee">
                <List ListMarker="Bullet" xy:guid="cdff9fb9-e103-4c18-bee8-27b76840e3bf">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The Nagios server is hanging and therefore not scheduling new alerts.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The file
                        <InLineCode>/var/nagios/status.dat</InLineCode>
                        does not have appropriate write permissions for the Nagios user.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="06db4367-75d5-4ff4-8fb7-212aaeb22c3f">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="311a8bee-1ff5-4786-8af1-268c5dc7d37a">
                <List ListMarker="Bullet" xy:guid="bc6c2a45-327e-4cf2-a328-422d922aeced">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Restart the Nagios server.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check the permissions on<InLineCode>/var/nagios/status.dat</InLineCode>.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check
                        <InLineCode>/var/log/messages</InLineCode>
                        for any related errors.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="513dc90a-ef34-4496-9196-bff0dff42555">
          <Title>ZooKeeper Alerts</Title>
          <ParaBlock xy:guid="3dae0d86-0748-49fb-b986-3686f28383c4">
            <RichText>These alerts are used to monitor the Zookeeper service.</RichText>
          </ParaBlock>
          <Topic xy:guid="7e8deefa-88e3-49c7-a424-64009d32db93">
            <Title>Percent ZooKeeper servers live</Title>
            <ParaBlock xy:guid="9b2478f7-e298-4afa-985d-a43d10d7cca2">
              <RichText>This service-level alert is triggered if the configured percentage of ZooKeeper processes cannot
                be determined to be up and listening on the network for the configured critical threshold, given in
                seconds. It uses the
                <InLineCode>check_aggregate</InLineCode>
                plug-in to aggregate the results of
                <InLineCode>Zookeeper process</InLineCode>
                checks.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="81a1d335-2e15-4d40-bedc-1d9e20ea5457">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="c5df766e-92a0-4a2c-95bd-5d812f9848e5">
                <List ListMarker="Bullet" xy:guid="b0e8c3b2-a714-4633-8823-6902758c8943">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The majority of your ZooKeeper servers are down and not responding.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="5354e618-264d-4c98-acef-39779b578519">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="888991e9-3934-4216-b897-baa4298eac30">
                <List ListMarker="Bullet" xy:guid="ff3857f6-f04e-48b9-a809-e6deef793d8e">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the dependent services to make sure they are operating correctly.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Check the ZooKeeper log files located at
                        <InLineCode>/var/log/hadoop/zookeeper.log</InLineCode>
                        for further information.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>If the failure was associated with a particular workload, try to better understand the
                        workload.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Restart the ZooKeeper servers, using Ambari Web.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="1b9884a0-469c-487c-864a-a3d68208cc7d">
            <Title>Zookeeper Server process</Title>
            <ParaBlock xy:guid="3802ad65-77a0-4a89-b623-e25f3bf74a72">
              <RichText>This host-level alert is triggered if the ZooKeeper server process cannot be determined to be up
                and listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="3fc24596-b870-4bdb-aea0-674277280980">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="a584c999-fbe6-4f71-a4fb-3f0fa25de871">
                <List ListMarker="Bullet" xy:guid="068c1c57-4196-413e-b83b-51e52b18f7e6">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The ZooKeeper server process is down on the host.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The ZooKeeper server process is up and running but not listening on the correct network
                        port (default 2181).
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Nagios server cannot connect to the ZooKeeper server through the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="ed2d970b-4d15-4f76-a535-1f785bf6c128">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="c758e15e-9727-48f2-9ee8-ae91c7549bb1">
                <List ListMarker="Bullet" xy:guid="3b56be42-9429-44d8-ad0d-7925bba45b77">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for any errors in the ZooKeeper logs located at<InLineCode>
                        /var/log/hbase/</InLineCode>. Then, restart the ZooKeeper process using Ambari Web.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Run the
                        <InLineCode>netstat-tuplpn</InLineCode>
                        command to check if the ZooKeeper server process is bound to the correct network port.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Nagios server and the ZooKeeper server.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
        <Topic xy:guid="789e9899-12c4-4e08-ab8a-e52b51435877">
          <Title>Ambari Alerts</Title>
          <ParaBlock xy:guid="60013197-02d0-4fa8-aec9-3a33318df3aa">
            <RichText>This alert is used to monitor the Ambari Agent service.</RichText>
          </ParaBlock>
          <Topic xy:guid="c484a0aa-029a-4701-8eac-b805167205c5">
            <Title>Ambari Agent process</Title>
            <ParaBlock xy:guid="c600a851-0076-472c-9371-7aed737d90f8">
              <RichText>This host-level alert is triggered if the Ambari Agent process cannot be confirmed to be up and
                listening on the network for the configured critical threshold, given in seconds. It uses the Nagios
                <InLineCode>check_tcp</InLineCode>
                plug-in.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="bd0d2313-2a92-4135-97d0-a5455110139b">
              <Title>Potential causes</Title>
              <ParaBlock xy:guid="86ab2d93-cc65-41d2-950b-b6ee12a99511">
                <List ListMarker="Bullet" xy:guid="e3447e51-b1ac-429a-a1db-ba38e2bd8099">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The Ambari Agent process is down on the host.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Ambari Agent process is up and running but heartbeating to the Ambari Server.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Ambari Agent process is up and running but is unreachable through the network from
                        the Nagios Server.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>The Ambari Agent cannot connect to the Ambari Server through the network.</ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
            <Topic xy:guid="1c12edf6-3f6b-493d-90e1-2446fc8ebc68">
              <Title>Possible remedies</Title>
              <ParaBlock xy:guid="ae455240-0fee-4dc8-9f8e-26804ed88b52">
                <List ListMarker="Bullet" xy:guid="6f75e5e1-58f9-4d04-b3cd-d44e398f74bc">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check for any errors in the logs located at<InLineCode>
                        /var/log/ambari-agent/ambari-agent.log</InLineCode>. Then, restart the Ambari Agent process.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineCode>ping</InLineCode>
                        to check the network connection between the Ambari Agent host and the Ambari Servers.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="4e6fd966-21d0-4dee-8175-06ba6c6ed517">
      <Title>Installing HDP Using Ambari</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="7a48120c-674d-4cc6-bc2a-a57122fd4066">
        <ParaBlock xy:guid="b0965e79-ae13-4131-a2df-eea561be4957">
          <RichText>This section describes the information and materials you should get ready to install a HDP cluster
            using Ambari. Ambari provides an end-to-end management and monitoring solution for your HDP cluster. Using
            the Ambari Web UI and REST APIs, you can deploy, operate, manage configuration changes, and monitor services
            for all nodes in your cluster from a central point.
          </RichText>
          <List ListMarker="Bullet" xy:guid="df78156b-a5de-48ec-883e-3fafbad035b2">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="06bea357-b482-4449-ba95-0744384f3146">Determine Stack Compatibility</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="847d0ef5-fa6e-4e75-bdb5-a4ec20141189">Meet Minimum System Requirements</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="50c9d54d-6862-497c-9e26-bdb3be3180e1">Collect Information</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b5f4ad84-c530-47b5-a963-ef871697c278">Prepare the Environment</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Optional: Configure Local Repositories
                    for Ambari
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="06bea357-b482-4449-ba95-0744384f3146">
        <Title>Determine Stack Compatibility</Title>
        <ParaBlock xy:guid="b4ad1771-d95e-4fc4-8c3c-5f4b67aabf7c">
          <RichText>Use this table to determine whether your Ambari and HDP stack versions are compatible.</RichText>
          <Table align="" border="true" width="" xy:guid="14cc5306-cf1e-45e8-9cff-238b4f6e478d">
            <TblGroup>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>HDP 2.2
                      <Footnote>
                        <RichText>Ambari 1.7x does not install Accumulo, Hue, Ranger, or Solr services for the HDP 2.2
                          Stack.
                        </RichText>
                      </Footnote>
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>HDP 2.1
                      <Footnote>
                        <RichText>Ambari 1.7x does not install Accumulo, Hue, Knox, or Solr services for the HDP 2.1
                          Stack.
                        </RichText>
                      </Footnote>
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>HDP 2.0
                      <Footnote>
                        <RichText>Ambari 1.7x does not install Hue for the HDP 2.0 Stack.</RichText>
                      </Footnote>
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>HDP1.3</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.7.0</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.6.1</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.6.0</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.5.1</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.5.0</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.4.4.23</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.4.3.38</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.4.2.104</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.4.1.61</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.4.1.25</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>1.2.5.17</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>x</RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
          <RichText>For more information about Installing Accumulo, Hue, Knox, Ranger, and Solr services, see<Href
                  UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/HDP_Man_Install_v22/index.html#Item1.1">
            Installing HDP Manually</Href>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="847d0ef5-fa6e-4e75-bdb5-a4ec20141189">
        <Title>Meet Minimum System Requirements</Title>
        <ParaBlock xy:guid="1a1418cc-cf6b-453f-a12b-df3d9667fbf7">
          <RichText>To run Hadoop, your system must meet the following minimum requirements:</RichText>
          <List ListMarker="Bullet" xy:guid="08eda22b-3e69-4a3c-b550-7e079d3d5119">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="27a5555d-a678-4ecf-a524-b4d31230c087">Hardware Recommendations</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5f6ff954-2e7e-4900-b94b-b4728f977ebe">Operating S</Xref>
                  <Xref InsideTargetRef="5f6ff954-2e7e-4900-b94b-b4728f977ebe">ystems Requirements</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="0e5f4540-a5d4-4802-8104-84388d0addc3">Browser Requirements</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="2552631c-22d0-42d6-963f-c9453a62e537">Software Requirements</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c81d7e9a-dc5d-4ab4-a12c-34428c1f13dc">JDK Requirements</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="f35b0203-6267-4533-9e88-652452ece5f5">Database Requirements</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e00c3b09-113c-4972-ad44-b1d221c11d6b">Recommended Maximum Open File
                    Descriptors
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="27a5555d-a678-4ecf-a524-b4d31230c087">
          <Title>Hardware Recommendations</Title>
          <ParaBlock xy:guid="9df3864a-fa6e-4b32-aff6-b73e11d0f25a">
            <RichText>There is no single hardware requirement set for installing Hadoop.</RichText>
            <RichText>For more information about hardware components that may affect your installation, see<Href
                    UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/Cluster_Plan_Gd_v22/index.html#Item1.8">
              Hardware Recommendations For Apache Hadoop</Href>.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="5f6ff954-2e7e-4900-b94b-b4728f977ebe">
          <Title>Operating Systems Requirements</Title>
          <ParaBlock xy:guid="2dde81c1-c722-46e4-a8f0-b8c04fe5da0a">
            <RichText>The following, 64-bit operating systems are supported:</RichText>
            <List ListMarker="Bullet" xy:guid="ec86dc65-730f-4412-80b9-9041ea368f10">
              <ItemBlock>
                <Item>
                  <ItemPara>Red Hat Enterprise Linux (RHEL) v6.x</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Red Hat Enterprise Linux (RHEL) v5.x (deprecated)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>CentOS v6.x</ItemPara>
                </Item>
                <Item>
                  <ItemPara>CentOS v5.x (deprecated)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Oracle Linux v6.x</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Oracle Linux v5.x (deprecated)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>SUSE Linux Enterprise Server (SLES) v11, SP1 and SP3</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Ubuntu Precise v12.04</ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                        xy:guid="167bdecf-0f83-4037-babf-ef8305efdcea">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="105602b9-fc69-400a-8c06-827151f70bf5"/>
              <SimpleBlock>
                <RichText>If you plan to install HDP Stack on SLES 11 SP3, be sure to refer to Configuring Repositories
                  in the HDP documentation for the HDP repositories specific for SLES 11 SP3. Or, if you plan to perform
                  a Local Repository install, be sure to use the SLES 11 SP3 repositories.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <CustomNote xy:guid="6b92756c-0644-43e0-827e-ec11487ebc48">
              <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                    xy:guid="b3336f84-d076-4655-aa22-9acfe97b8e8d"/>
              <SimpleBlock>
                <RichText>The installer pulls many packages from the base OS repositories. If you do not have a complete
                  set of base OS repositories available to all your machines at the time of installation you may run
                  into issues.
                </RichText>
                <RichText>If you encounter problems with base OS repositories being unavailable, please contact your
                  system administrator to arrange for these additional repositories to be proxied or mirrored. For more
                  information see<Xref InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Optional: Configure the
                    Local Repositories</Xref>.
                </RichText>
              </SimpleBlock>
            </CustomNote>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="0e5f4540-a5d4-4802-8104-84388d0addc3">
          <Title>Browser Requirements</Title>
          <ParaBlock xy:guid="391e3051-af4d-4843-9b34-1295c7cd8c69">
            <RichText>The Ambari Install Wizard runs as a browser-based Web application. You must have a machine capable
              of running a graphical browser to use this tool.
              The minimum required browser versions are:
            </RichText>
            <List ListMarker="Bullet" xy:guid="898e0779-9873-4076-8b06-3710e44f7637">
              <ItemBlock>
                <Item>
                  <ItemPara>Windows (Vista, 7)</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Internet Explorer 9.0</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Firefox 18</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Google Chrome 26</ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Mac OS X (10.6 or later)</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Firefox 18</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Safari 5</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Google Chrome 26</ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Linux (RHEL, CentOS, SLES, Oracle Linux, UBUNTU)</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Firefox 18</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Google Chrome 26</ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
            <RichText>On any platform, we recommend updating your browser to the latest, stable version.</RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="2552631c-22d0-42d6-963f-c9453a62e537">
          <Title>Software Requirements</Title>
          <ParaBlock xy:guid="c1ad6645-86ff-4154-af4c-223999fc9f26">
            <RichText>On each of your hosts:</RichText>
            <List ListMarker="Bullet" xy:guid="07059160-7435-4152-b467-e3298edc6eca">
              <ItemBlock>
                <Item>
                  <ItemPara>yum and rpm (RHEL/CentOS/Oracle Linux)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>zypper and php_curl (SLES)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>apt (Ubuntu)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>scp, curl, unzip, tar, and wget</ItemPara>
                </Item>
                <Item>
                  <ItemPara>OpenSSL (v1.01, build 16 or later)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>python (v2.6 or later)</ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <CustomNote xy:guid="98e785be-3e41-4132-a38f-6255563a8c3c">
              <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                    xy:guid="7c854e49-aada-42ac-9752-c6e305dfe857"/>
              <SimpleBlock>
                <RichText>The Python version shipped with SUSE 11, 2.6.0-8.12.2, has a critical bug that may cause the
                  Ambari Agent to fail within the first 24 hours. If you are installing on SUSE 11, please update all
                  your hosts to Python version 2.6.8-0.15.1.
                </RichText>
              </SimpleBlock>
            </CustomNote>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="c81d7e9a-dc5d-4ab4-a12c-34428c1f13dc">
          <Title>JDK Requirements</Title>
          <ParaBlock xy:guid="b146fd47-9071-400b-bc3f-964faf6ac198">
            <RichText>The following Java runtime environments are supported:</RichText>
            <List ListMarker="Bullet" xy:guid="a6fdbdf9-3f77-4723-9c6d-44b7468d90cd">
              <ItemBlock>
                <Item>
                  <ItemPara>Oracle JDK 1.7_67 64-bit (default)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Oracle JDK 1.6_31 64-bit (DEPRECATED)</ItemPara>
                </Item>
                <Item>
                  <ItemPara>OpenJDK 7 64-bit (not supported on SLES)
                    To install OpenJDK 7 for RHEL, run the following command on all hosts:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>yum install java-1.7.0-openjdk</InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="f35b0203-6267-4533-9e88-652452ece5f5">
          <Title>Database Requirements</Title>
          <ParaBlock xy:guid="bc1fece1-74e7-45c3-8d4f-be58685739d9">
            <RichText>Ambari requires a relational database to store information about the cluster configuration and
              topology. If you install HDP Stack with Hive or Oozie, they also require a relational database. The
              following table outlines these database requirements:
            </RichText>
            <Table align="" border="true" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                   xy:guid="043335c6-5ac1-4ddd-85ee-398785ad1517">
              <TblGroup>
                <TblCol width="13"/>
                <TblCol width="87"/>
                <TblHeader/>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Component</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Description</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>By default, will install an instance of PostgreSQL on the Ambari Server host.
                        Optionally, to use an existing instance of PostgreSQL, MySQL or Oracle. For further information,
                        see<Xref InsideTargetRef="6db1b3ae-7e80-4a7c-a73d-20f11379078f">Using Non-Default Databases for
                          Ambari</Xref>.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Hive</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>By default (on RHEL/CentOS/Oracle Linux 6), Ambari will install an instance of MySQL on
                        the Hive Metastore host. Otherwise, you need to use an existing instance of PostgreSQL, MySQL or
                        Oracle. See
                        <Xref InsideTargetRef="5010f1c4-fc32-44cd-94f5-fe557eefcd6d">Using Non-Default Databases for
                          Hive
                        </Xref>
                        for more information.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Oozie</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>By default, Ambari will install an instance of Derby on the Oozie Server host.
                        Optionally, to use an existing instance of PostgreSQL, MySQL or Oracle, see
                        <Xref InsideTargetRef="b9803b8c-5f91-40d5-bdc4-da481581efbf">Using Non-Default Databases for
                          Oozie
                        </Xref>
                        for more information.
                      </RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="e6918a87-8963-44d3-9eca-2afc68ecf681">
            <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                        xy:guid="065dca56-d4a9-46c4-b845-3dad2dba5806">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="24e1db6e-ff91-47fa-9a86-6a8ada49b206"/>
              <SimpleBlock>
                <RichText>For the Ambari database, if you use an existing Oracle database, make sure the Oracle listener
                  runs on a port other than 8080 to avoid conflict with the default Ambari port.
                </RichText>
              </SimpleBlock>
            </CustomNote>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="e00c3b09-113c-4972-ad44-b1d221c11d6b">
          <Title>Check the Maximum Open File Descriptors</Title>
          <ParaBlock xy:guid="97f813bf-ff87-4425-8b29-bed0d89e8544">
            <RichText>The recommended maximum number of open file descriptors is 10000, or more.
              To check the current value set for the maximum number of open file descriptors, execute the following
              shell commands on each host:
              <InLineTypeThis>ulimit -Sn
                ulimit -Hn
              </InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="50c9d54d-6862-497c-9e26-bdb3be3180e1">
        <Title>Collect Information</Title>
        <ParaBlock xy:guid="35002082-7282-430b-a42b-602b07084454">
          <RichText>Before deploying an HDP cluster, you should collect the following information:</RichText>
          <List ListMarker="Bullet" xy:guid="76f48e13-d6e7-4c49-9876-3b893f2297bb">
            <ItemBlock>
              <Item>
                <ItemPara>The fully qualified domain name (FQDN) of each host in your system.
                  The Ambari install wizardÂ supports using IP addresses. You can use
                  <InLineTypeThis>hostname -f</InLineTypeThis>
                  to check or verify the FQDN of a host.
                </ItemPara>
                <CustomNote xy:guid="75254a23-6c60-49f7-b5ab-4cf60d843eb0">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="186385f6-6c00-4612-87bc-04a7ff2fe493"/>
                  <SimpleBlock>
                    <RichText>Deploying all HDP components on a single host is possible, but is appropriate only for
                      initial evaluation purposes. Typically, you set up at least three hosts; one master host and two
                      slaves, as a minimum cluster. For more information about deploying HDP components, see the
                      descriptions for
                      <Href UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/Getting_Started_v22/index.html#Item1.4">
                        a
                      </Href>
                      <Href UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/Getting_Started_v22/index.html#Item1.4">
                        Typical Hadoop Cluster</Href>.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>A list of components you want to set up on each host.</ItemPara>
              </Item>
              <Item>
                <ItemPara>The base directories you want to use as mount points for storing:</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>NameNode data</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>DataNodes data</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Secondary NameNode data</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Oozie data</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>MapReduce data (Hadoop version 1.x)</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>YARN data (Hadoop version 2.x)</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>ZooKeeper data, if you install ZooKeeper</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Various log, pid, and db files, depending on your install type</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="830d8d9b-9bac-4d3a-b1c2-23d7b5c7ed44">
                  <Icon thumbWidth="50" uri="Icons/Important.png"
                        xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="6db24d5f-a891-4d7f-8b92-52226f3b23c8"/>
                  <SimpleBlock>
                    <RichText>You must use base directories that provide persistent storage locations for your HDP
                      components and your Hadoop data. Installing HDP components in locations that may be removed from a
                      host may result in cluster failure or data loss.
                      For example: Do Not use
                      <InLineCode>/tmp</InLineCode>
                      in a base directory path.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="b5f4ad84-c530-47b5-a963-ef871697c278">
        <Title>Prepare the Environment</Title>
        <ParaBlock xy:guid="f9e4dc20-de2b-497c-865a-0666c0f5e4d6">
          <RichText>To deploy your Hadoop instance, you need to prepare your deployment environment:</RichText>
          <List ListMarker="Bullet" xy:guid="4a66fadf-1369-48cd-bdf5-001aa5197924">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a45c8e9e-e707-48bc-ba61-9d31349b17de">Check Existing Package Versions</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="88addfc9-ec6c-4dcb-b2dd-75b4331d2809">Set up Password-less SSH</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="9b90a5d6-c93b-4fc5-99dc-846c33632143">Set up Service User Accounts</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5ec591f7-ecd5-4e03-a1f4-5bfbd23c89ce">Enable NTP on the Cluster</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="96c2019f-12bd-46db-b00c-c7e93e1acf0f">Check DNS</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="1ae25403-3cb6-435d-a1af-0592f866e255">Configure iptables</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="eaf82ef6-fbb9-42b6-bb25-ff033772a8a2">Disable SELinux, PackageKit and Check
                    umask Value
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="a45c8e9e-e707-48bc-ba61-9d31349b17de">
          <Title>Check Existing Package Versions</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="ea047e42-89e9-48fb-b524-f17948b3f3ac">
            <RichText>During installation, Ambari overwrites current versions of some packages required by Ambari to
              manage a Hadoop cluster. Package versions other than those that Ambari installs can cause problems running
              the installer. Remove any package versions that do not match the following ones:
            </RichText>
            <Tabs xy:schema-version="Core/Definitions/Tabs.xsd#core-3.9-0"
                  xy:guid="042fb9a5-785e-40ac-b7e6-ac2d61fb3c19">
              <Properties Orientation="Horizontal"/>
              <Tab>
                <Label>RHEL/CentOS/Oracle Linux 6</Label>
                <Content>
                  <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                         xy:guid="1ffa1962-b749-4429-8f16-a1f28459e1d8">
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader/>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Component - Description</Emph>
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Files and Versions</Emph>
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Server Database</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>postgresql 8.4.13-1.el6_3, postgresql-libs 8.4.13-1.el6_3, postgresql-server
                              8.4.13-1.el6_3
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the
                              Ambari Server to execute commands.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>None</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server - The host that runs the Nagios server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios 3.5.0-99, nagios-devel 3.5.0-99, nagios-www 3.5.0-99, nagios-plugins
                              1.4.9-1
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ganglia-gmetad 3.5.0-99, ganglia-devel 3.5.0-99, libganglia 3.5.0-99, ganglia-web
                              3.5.7-99, rrdtool 1.4.5-1.el6
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                              Ganglia Collector.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ganglia-gmond 3.5.0-99, libganglia 3.5.0-99</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                </Content>
              </Tab>
              <Tab>
                <Label>SLES 11</Label>
                <Content>
                  <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                         xy:guid="bf3d8711-f925-4548-a0d5-99c7763962f8">
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader/>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Component - Description</Emph>
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Files and Versions</Emph>
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Server Database</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>postgresql 8.3.5-1, postgresql-server 8.3.5-1, postgresql-libs 8.3.5-1</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the
                              Ambari Server to execute commands.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>None</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server - The host that runs the Nagios server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios 3.5.0-99, nagios-devel 3.5.0-99, nagios-www 3.5.0-99, nagios-plugins
                              1.4.9-1
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ganglia-gmetad 3.5.0-99 ganglia-devel 3.5.0-99 libganglia 3.5.0-99 ganglia-web
                              3.5.7-99 rrdtool 1.4.5-4.5.1
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                              Ganglia Collector.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ganglia-gmond 3.5.0-99, libganglia 3.5.0-99</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                </Content>
              </Tab>
              <Tab>
                <Label>UBUNTU 12</Label>
                <Content>
                  <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                         xy:guid="ab3bd017-0a87-4e1c-a6e0-f8750432054d">
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader/>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Component - Description</Emph>
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Files and Versions</Emph>
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Server Database</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText><Italic></Italic>libpq5 postgresql postgresql-9.1 postgresql-client-9.1
                              postgresql-client-common postgresql-common ssl-cert
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the
                              Ambari Server to execute commands.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zlibc_0.9k-4.1_amd64</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server - The host that runs the Nagios Server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios3</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>gmetad ganglia-webfrontend ganglia-monitor-python rrdcached</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                              Ganglia Collector.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>gmetad ganglia-webfrontend ganglia-monitor-python rrdcached</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                </Content>
              </Tab>
              <Tab>
                <Label>RHEL/CentOS/Oracle Linux 5</Label>
                <Content>
                  <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                         xy:guid="dd4d0dc8-d483-430e-a14a-ad133b40048c">
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader/>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Component - Description</Emph>
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>
                              <Emph>Files and Versions</Emph>
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Server Database</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>libffi 3.0.5-1.el5, python26 2.6.8-2.el5, python26-libs 2.6.8-2.el5, postgresql
                              8.4.13-1.el6_3, postgresql-libs 8.4.13-1.el6_3, postgresql-server 8.4.13-1.el6_3
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the
                              Ambari Server to execute commands.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>libffi 3.0.5-1.el5, python26 2.6.8-2.el5, python26-libs 2.6.8-2.el5</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server - The host that runs the Nagios server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios 3.5.0-99, nagios-devel 3.5.0-99, nagios-www 3.5.0-99, nagios-plugins
                              1.4.9-1
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ganglia-gmetad 3.5.0-99, ganglia-devel 3.5.0-99, libganglia 3.5.0-99, ganglia-web
                              3.5.7-99, rrdtool 1.4.5-1.el5
                            </RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                              Ganglia Collector.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ganglia-gmond 3.5.0-99, libganglia 3.5.0-99</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                </Content>
              </Tab>
            </Tabs>
          </ParaBlock>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="aeff7332-598d-4e34-a439-1f324c66f928">
            <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                   xy:guid="1ffa1962-b749-4429-8f16-a1f28459e1d8">
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader/>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Component - Description</Emph>
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Files and Versions</Emph>
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Server Database</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>postgresql 8.4.13-1.el6_3, postgresql-libs 8.4.13-1.el6_3, postgresql-server
                        8.4.13-1.el6_3
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the Ambari
                        Server to execute commands.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>None</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server - The host that runs the Nagios server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios 3.5.0-99, nagios-devel 3.5.0-99, nagios-www 3.5.0-99, nagios-plugins 1.4.9-1
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ganglia-gmetad 3.5.0-99, ganglia-devel 3.5.0-99, libganglia 3.5.0-99, ganglia-web
                        3.5.7-99, rrdtool 1.4.5-1.el6
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                        Ganglia Collector.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ganglia-gmond 3.5.0-99, libganglia 3.5.0-99</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                   xy:guid="bf3d8711-f925-4548-a0d5-99c7763962f8">
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader/>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Component - Description</Emph>
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Files and Versions</Emph>
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Server Database</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>postgresql 8.3.5-1, postgresql-server 8.3.5-1, postgresql-libs 8.3.5-1</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the Ambari
                        Server to execute commands.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>None</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server - The host that runs the Nagios server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios 3.5.0-99, nagios-devel 3.5.0-99, nagios-www 3.5.0-99, nagios-plugins 1.4.9-1
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ganglia-gmetad 3.5.0-99 ganglia-devel 3.5.0-99 libganglia 3.5.0-99 ganglia-web 3.5.7-99
                        rrdtool 1.4.5-4.5.1
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                        Ganglia Collector.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ganglia-gmond 3.5.0-99, libganglia 3.5.0-99</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                   xy:guid="ab3bd017-0a87-4e1c-a6e0-f8750432054d">
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader/>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Component - Description</Emph>
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Files and Versions</Emph>
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Server Database</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText><Italic></Italic>libpq5 postgresql postgresql-9.1 postgresql-client-9.1
                        postgresql-client-common postgresql-common ssl-cert
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the Ambari
                        Server to execute commands.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>zlibc_0.9k-4.1_amd64</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server - The host that runs the Nagios Server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios3</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>gmetad ganglia-webfrontend ganglia-monitor-python rrdcached</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                        Ganglia Collector.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>gmetad ganglia-webfrontend ganglia-monitor-python rrdcached</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                   xy:guid="dd4d0dc8-d483-430e-a14a-ad133b40048c">
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader/>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Component - Description</Emph>
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>
                        <Emph>Files and Versions</Emph>
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Server Database</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>libffi 3.0.5-1.el5, python26 2.6.8-2.el5, python26-libs 2.6.8-2.el5, postgresql
                        8.4.13-1.el6_3, postgresql-libs 8.4.13-1.el6_3, postgresql-server 8.4.13-1.el6_3
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ambari Agent - Installed on each host in your cluster. Communicates with the Ambari
                        Server to execute commands.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>libffi 3.0.5-1.el5, python26 2.6.8-2.el5, python26-libs 2.6.8-2.el5</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server - The host that runs the Nagios server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios 3.5.0-99, nagios-devel 3.5.0-99, nagios-www 3.5.0-99, nagios-plugins 1.4.9-1
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server - The host that runs the Ganglia Server.</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ganglia-gmetad 3.5.0-99, ganglia-devel 3.5.0-99, libganglia 3.5.0-99, ganglia-web
                        3.5.7-99, rrdtool 1.4.5-1.el5
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Monitor - Installed on each host in the cluster. Sends metrics data to the
                        Ganglia Collector.
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ganglia-gmond 3.5.0-99, libganglia 3.5.0-99</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                            xy:guid="de62d8c0-432c-4432-a1b2-f6ccb6b51e62">
              <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                             xy:guid="e2e727b7-20e5-415f-8f2c-f0a1948ec589">
                <TargetOutput xy:guid="72223bef-3bde-4c68-aa69-5b36b48843da">Guide</TargetOutput>
              </TargetOutputs>
            </FilterMetadata>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="88addfc9-ec6c-4dcb-b2dd-75b4331d2809">
          <Title>Set Up Password-less SSH</Title>
          <ParaBlock xy:guid="abebfa59-df68-4a2e-9a6e-37f550b0011f">
            <RichText>To have Ambari Server automatically install Ambari Agents on all your cluster hosts, you must set
              up password-less SSH connections between the Ambari Server host and all other hosts in the cluster. The
              Ambari Server host uses SSH public key authentication to remotely access and install the Ambari Agent.
            </RichText>
            <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                        xy:guid="1b6d09d6-7159-45fa-bf63-f5a4a13fe3c7">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="2593a758-8148-4171-9704-daf0e9806806"/>
              <SimpleBlock>
                <RichText>You can choose to manually install the Agents on each cluster host. In this case, you do not
                  need to generate and distribute SSH keys.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <List ListMarker="Numeric" xy:guid="189b9270-9879-4ffd-a291-e5b3e845afc9">
              <ItemBlock>
                <Item>
                  <ItemPara>Generate public and private SSH keys on the Ambari Server host.</ItemPara>
                  <RichText>
                    <InLineTypeThis>ssh-keygen</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Copy the SSH Public Key (id_rsa.pub) to the root account on your target hosts.</ItemPara>
                  <RichText>
                    <InLineTypeThis>.ssh/id_rsa
                      .ssh/id_rsa.pub
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Add the SSH Public Key to the authorized_keys file on your target hosts.</ItemPara>
                  <RichText>
                    <InLineTypeThis>cat id_rsa.pub &gt;&gt; authorized_keys</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Depending on your version of SSH, you may need to set permissions on the .ssh directory (to
                    700) and the authorized_keys file in that directory (to 600) on the target hosts.
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>chmod 700 ~/.ssh
                      chmod 600 ~/.ssh/authorized_keys
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>From the Ambari Server, make sure you can connect to each host in the cluster using SSH,
                    without having to enter a password.
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>ssh root@</InLineTypeThis>
                    <SyntaxArg>&lt;remote.target.host&gt;</SyntaxArg>
                    <InLineVariableText>
                    </InLineVariableText>where
                    <SyntaxArg>&lt;remote.target.host&gt;</SyntaxArg>
                    has the value of each host name in your cluster.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If the following warning message displays during your first connection:
                    <InLineApplicationPrompt>Are you sure you want to continue connecting (yes/no)?
                    </InLineApplicationPrompt>
                    Enter<InLineTypeThis>Yes</InLineTypeThis>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Retain a copy of the SSH Private Key on the machine from which you will run the web-based
                    Ambari Install Wizard.
                  </ItemPara>
                  <CustomNote xy:guid="daf4f261-7e6b-4e85-b5e4-5cc0a64d264f">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="bfa8afae-f7d1-4000-bd9b-45dc060cd8f6"/>
                    <SimpleBlock>
                      <RichText>It is possible to use a non-root SSH account, if that account can execute
                        <InLineCode>sudo</InLineCode>
                        without entering a password.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="9b90a5d6-c93b-4fc5-99dc-846c33632143">
          <Title>Set up Service User Accounts</Title>
          <ParaBlock xy:guid="775af15f-35c7-4674-be8a-b03d6c3e626e">
            <RichText>The Ambari install wizard creates one administrator-level user account for Ambari, admin. The
              credentials for the admin account are username/password = admin/admin. For more information about creating
              additional users and groups for your HDP cluster, see
              <Xref InsideTargetRef="b61c95af-59c7-4714-8745-eabbbd3056c2">Users and Groups Overview</Xref>
              in<Italic>Managing Users and Groups</Italic>.

              Each HDP service requires a service user account. The Ambari Install wizard creates new and preserves any
              existing service user accounts, and uses these accounts when configuring Hadoop services. Service user
              account creation applies to service user accounts on the local operating system and to LDAP/AD accounts.
            </RichText>
            <RichText>For more information about customizing service user accounts for each HDP service, see one of the
              following topics:
            </RichText>
            <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                  xy:guid="f863be43-827d-47e6-996d-1890b2819f81">
              <ItemBlock>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="eeda7cc9-867e-4485-90cd-9d9c35001c55">Customizing Services for HDP 2.x
                      Stack
                    </Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="6c6f06e3-5645-41fa-9d90-b081b0c7dd2f">Customizing Services for HDP 1.x
                      Stack
                    </Xref>
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="5ec591f7-ecd5-4e03-a1f4-5bfbd23c89ce">
          <Title>Enable NTP on the Cluster and on the Browser Host</Title>
          <ParaBlock xy:guid="8282351a-8514-492c-928c-6fbc2c3e8b96">
            <RichText>The clocks of all the nodes in your cluster and the machine that runs the browser through which
              you access the Ambari Web interface must be able to synchronize with each other.

              Install a network ttime protocol daem on each host:
              <InLineTypeThis>yum install ntpd
              </InLineTypeThis>
              To check that the NTP service is on, run the following command on each host:
              <InLineTypeThis>chkconfig âlist ntpd</InLineTypeThis>
              To turn on the NTP service, run the following command on each host:
              <InLineTypeThis>chkconfig ntpd</InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="96c2019f-12bd-46db-b00c-c7e93e1acf0f">
          <Title>Check DNS</Title>
          <ParaBlock xy:guid="1d0a69ee-b430-488c-97d0-0d4a4f5606f4">
            <RichText>All hosts in your system must be configured for both forward and and reverse DNS.</RichText>
            <RichText>If you are unable to configure DNS in this way, you must edit the /etc/hosts file on every host in
              your cluster to contain the IP address and Fully Qualified Domain Name of each of your hosts. The
              following instructions cover a basic /etc/hosts setup for generic Linux hosts. Different versions and
              flavors of Linux might require slightly different commands. Please refer to the documentation for the
              operating system(s) deployed in your environment.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="acc86ba1-920b-474f-8a61-c66f69710fe4">
            <Title>Edit the Host File</Title>
            <ParaBlock xy:guid="0b08beaf-83ea-4d2c-8f76-04dcd8f7756f">
              <List ListMarker="Numeric" xy:guid="00909c25-480d-464e-a856-cd29e3c2fda0">
                <ItemBlock>
                  <Item>
                    <ItemPara>Using a text editor, open the hosts file on every host in your cluster. For example:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>vi /etc/hosts</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Add a line for each host in your cluster. The line should consist of the IP address and
                      the FQDN.
                      For example:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>1.2.3.4</InLineTypeThis>
                      <SyntaxArg>&lt;fully.qualified.domain.name&gt;</SyntaxArg>
                    </RichText>
                    <CustomNote xy:guid="9f2cb805-4076-4f65-8a8f-7f293297027d">
                      <Icon thumbWidth="50" uri="Icons/Important.png" xy:guid="f909f326-ef4b-4079-b043-06d1d5860f2a"/>
                      <SimpleBlock>
                        <RichText>Do<Emph>not</Emph>remove the following two lines from your hosts file. Removing or
                          editing the following lines may cause various programs that require network functionality to
                          fail.
                        </RichText>
                        <RichText>
                          <InLineTypeThis>127.0.0.1 localhost.localdomain localhost
                            ::1 localhost6.localdomain6 localhost6
                          </InLineTypeThis>
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="f29062f4-8c82-46aa-98f5-35cb6eaf120e">
            <Title>Set the Hostname</Title>
            <ParaBlock xy:guid="eceddf14-0487-4ef3-ab4b-ec234137e732">
              <List ListMarker="Numeric" xy:guid="313d6ac0-35a7-4cb5-b304-f4cd6faaf8b7">
                <ItemBlock>
                  <Item>
                    <ItemPara>Use the "hostname" command to set the hostname on each host in your cluster.
                      For example:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>hostname</InLineTypeThis>
                      <SyntaxArg>&lt;fully.qualified.domain.name&gt;</SyntaxArg>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Confirm that the hostname is set by running the following command:</ItemPara>
                    <RichText>
                      <InLineTypeThis>hostname -f</InLineTypeThis>
                    </RichText>
                    <RichText>This should return the
                      <SyntaxArg>&lt;fully.qualified.domain.name&gt;</SyntaxArg>
                      you just set.
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="cff9a779-cc58-4e04-aa61-c742cdd37e59">
            <Title>Edit the Network Configuration File</Title>
            <ParaBlock xy:guid="e7291ff7-8503-40ed-add6-6d09b66df059">
              <List ListMarker="Numeric" xy:guid="a154a37c-dfb8-429a-8c2b-72553e856a73">
                <ItemBlock>
                  <Item>
                    <ItemPara>Using a text editor, open the network configuration file on every host and set the desired
                      network configuration for each host. For example:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>vi /etc/sysconfig/network</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Modify the HOSTNAME property to set the fully qualified domain name.</ItemPara>
                    <RichText>
                      <InLineTypeThis>NETWORKING=yes
                        NETWORKING_IPV6=yes
                        HOSTNAME=
                      </InLineTypeThis>
                      <SyntaxArg>&lt;fully.qualified.domain.name&gt;</SyntaxArg>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="1ae25403-3cb6-435d-a1af-0592f866e255">
          <Title>Configuring iptables</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="0336e6b3-a649-4d7b-9597-4aafeed13e33">
            <RichText>For Ambari to communicate during setup with the hosts it deploys to and manages, certain ports
              must be open and available. The easiest way to do this is to temporarily disable iptables, as follows:

              <InLineTypeThis>chkconfig iptables off
                /etc/init.d/iptables stop
              </InLineTypeThis>

              You can restart iptables after setup is complete. If the security protocols in your environment prevent
              disabling iptables, you can proceed with iptables enabled, if all required ports are open and available.
              For more information about required ports, see<Xref
                      InsideTargetRef="85947452-af53-46f1-96fa-133675313860">Configuring Network Port Numbers</Xref>.

              Ambari checks whether iptables is running during the Ambari Server setup process. If iptables is running,
              a warning displays, reminding you to check that required ports are open and available. The Host Confirm
              step in the Cluster Install Wizard also issues a warning for each host that has iptables running.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="eaf82ef6-fbb9-42b6-bb25-ff033772a8a2">
          <Title>Disable SELinux and PackageKit and check the umask Value</Title>
          <ParaBlock xy:guid="144e7552-69e7-45b5-8e13-0132cebd1cfc">
            <List ListMarker="Numeric" xy:guid="54082804-ff67-4130-96a1-407d97aae15b">
              <ItemBlock>
                <Item>
                  <ItemPara>You must temporarily disable SELinux for the Ambari setup to function.
                    On each host in your cluster,
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>setenforce 0</InLineTypeThis>
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="02337dd2-dec3-4330-8b77-e2a7dea74eea">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="52178930-6039-46e4-ae46-ce2f3fe66666"/>
                    <SimpleBlock>
                      <RichText>To permanently disable SELinux
                        set
                        <InLineCode>SELINUX=disabled</InLineCode>
                        in
                        <InLineCode>/etc/selinux/config</InLineCode>
                        This ensures that SELinux does not turn itself on after you reboot the machine .
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>On an installation host running RHEL/CentOS with PackageKit installed,
                    open
                    <InLineCode>/etc/yum/pluginconf.d/refresh-packagekit.conf</InLineCode>
                    using a text editor.
                    Make the following change:
                    <InLineApplicationPrompt></InLineApplicationPrompt>
                    <InLineTypeThis>enabled=0</InLineTypeThis>
                  </ItemPara>
                  <CustomNote xy:guid="d6f7bb24-925a-495b-8f45-7d8701342812">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="347746df-4a82-4f61-88df-1b00f38b6cc6"/>
                    <SimpleBlock>
                      <RichText>PackageKit is not enabled by default on SLES or Ubuntu systems. Unless you have
                        specifically enabled PackageKit, you may skip this step for a SLES or Ubuntu installation host.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>UMASK (User Mask or User file creation MASK) is the default permission or base permission
                    given when a new file or folder is created on a Linux machine. Most Linux distros set 022 as the
                    default umask. For a HDP cluster, make sure that umask is set to 022.
                    To set umask 022, run the following command as root on all hosts,
                    <InLineTypeThis>vi /etc/profile
                    </InLineTypeThis>then, append the following line:
                    <InLineTypeThis>
                      umask 022
                    </InLineTypeThis>
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">
        <Title>Using a Local Repository</Title>
        <ParaBlock xy:guid="7de1734b-a91b-40fc-ab5f-e9cbf935a0a6">
          <RichText>If your cluster is behind a fire wall that prevents or limits Internet access, you can install
            Ambari and a Stack using local repositories. This section describes how to:
          </RichText>
          <List ListMarker="Bullet" xy:guid="e5e27066-162c-4f60-be7a-2b8668ff7316">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="71ea1556-a492-46b4-a6e5-029237e1dcd7">Obtain the repositories</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Set up a local repository having:</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>
                        <Xref InsideTargetRef="9cdb6241-6556-4788-ba58-df868d965d92">No Internet Access</Xref>
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Xref InsideTargetRef="36521169-8297-4445-ae11-311be55e6492">Temporary Internet Access</Xref>
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="71cef54a-0d59-4593-b2f9-a049abda1436">Prepare the Ambari repository
                    configuration file
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="71ea1556-a492-46b4-a6e5-029237e1dcd7">
          <Title>Obtaining the Repositories</Title>
          <ParaBlock xy:guid="302216c0-c5bf-43fa-80fc-cbbbb282c337">
            <RichText>This section describes how to obtain:</RichText>
            <List ListMarker="Bullet" xy:guid="6108c212-b92e-4703-8fa3-be3c1fd0e31c">
              <ItemBlock>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="db19b022-0fb5-4c77-b8fb-bde987c5234d">Ambari Repositories</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="3e43081a-a937-4d51-92cc-1fbf15645713">HDP Repositories</Xref>
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="db19b022-0fb5-4c77-b8fb-bde987c5234d">
            <Title>Ambari Repositories</Title>
            <ParaBlock xy:guid="b2731405-5a35-497c-b560-76776d227917">
              <RichText>If you do not have Internet access for setting up the Ambari repository, use the link
                appropriate for your OS family to download a tarball that contains the software.
              </RichText>
              <Tabs xy:guid="09349a65-261a-4661-aeb3-9aba982bc9d2">
                <Title>Ambari 1.7.0 Tarball Links:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos6/ambari-1.7.0-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/suse11/ambari-1.7.0-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>UBUNTU 12</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/ubuntu12/ambari-1.7.0-ubuntu12.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos5/ambari-1.7.0-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="31c26f1c-9c08-450d-896d-fd0f7079b603">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos6/ambari-1.7.0-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/suse11/ambari-1.7.0-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>UBUNTU 12</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/ubuntu12/ambari-1.7.0-ubuntu12.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos5/ambari-1.7.0-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="c3f48230-0940-4423-a8ec-38ae669f1360">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="f4a5aafb-c1ab-4e6a-a11f-cb26d9726fb5">
                    <TargetOutput xy:guid="6c03ce64-0ade-4c5d-b108-3c4ae0392be7">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <RichText>If you have temporary Internet access for setting up the Ambari repository, use the link
                appropriate for your OS family to download a repository that contains the software.
              </RichText>
              <Tabs xy:schema-version="Core/Definitions/Tabs.xsd#core-3.9-0"
                    xy:guid="ba18d566-8423-4cbf-8866-0592a5db2bf9">
                <Title>Ambari 1.7.0 Repository File Links:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo -O
                        /etc/yum.repos.d/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                        /etc/zypp/repos.d/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>UBUNTU 12</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list -O
                        /etc/apt/sources.list/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo -O
                        /etc/yum.repos.d/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="89c6d751-924a-4d24-aec3-3bce82640d21">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo -O
                        /etc/yum.repos.d/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                        /etc/zypp/repos.d/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>UBUNTU 12</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list -O
                        /etc/apt/sources.list/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo -O
                        /etc/yum.repos.d/ambari.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="7f3129b1-8313-47d7-925d-c1eb283c4310">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="1a9b5bb4-8cc4-4e49-b507-e6736374dcbb">
                    <TargetOutput xy:guid="e19c4d92-0ce5-4511-bfc2-1c799ca8fa68">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="3e43081a-a937-4d51-92cc-1fbf15645713">
            <Title>HDP Stack Repositories</Title>
            <ParaBlock xy:guid="4905f4c6-33e2-4d34-84db-aa94e258c7e2">
              <RichText>If you do not have Internet access to set up the Stack repositories, use the link appropriate
                for your OS family to download a tarball that contains the HDP Stack version you plan to install.
              </RichText>
              <Tabs xy:schema-version="Core/Definitions/Tabs.xsd#core-3.9-0"
                    xy:guid="f3c308a4-eeac-4d78-83a9-8c7d0ee7eec6">
                <Title>HDP 2.2 tarballs:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-2.2.0.0-centos6-rpm.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/centos6/HDP-UTILS-1.1.0.20-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11SP3</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11sp3/HDP-2.2.0.0-suse11sp3-rpm.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/suse11sp3/HDP-UTILS-1.1.0.20-suse11sp3.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>UBUNTU 12</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/ubuntu12/HDP-2.2.0.0-ubuntu12-deb.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/ubuntu12/HDP-UTILS-1.1.0.20-ubuntu12.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-2.2.0.0-centos5-rpm.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/centos5/HDP-UTILS-1.1.0.20-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="a3ec2657-04a8-460f-a7a4-2050d8b03f4e">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-2.2.0.0-centos6-rpm.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/centos6/HDP-UTILS-1.1.0.20-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11SP3</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11sp3/HDP-2.2.0.0-suse11sp3-rpm.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/suse11sp3/HDP-UTILS-1.1.0.20-suse11sp3.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>UBUNTU 12</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/ubuntu12/HDP-2.2.0.0-ubuntu12-deb.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/ubuntu12/HDP-UTILS-1.1.0.20-ubuntu12.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-2.2.0.0-centos5-rpm.tar.gz

                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.20/repos/centos5/HDP-UTILS-1.1.0.20-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="ab3ef6ce-4691-4ef0-a4f7-a3623696a18d">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="85c15188-c7c0-44fb-b285-ab34072b5b91">
                    <TargetOutput xy:guid="db76bb47-f112-4964-89da-aeaa268b86e4">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <Tabs xy:guid="f4c30b76-c4dd-4190-bd5a-c804c6375de8">
                <Title>HDP 2.1 tarballs:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-2.1.5.0-centos6-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos6/HDP-UTILS-1.1.0.17-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/sles11sp1/HDP-2.1.5.0-sles11sp1-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/suse11/HDP-UTILS-1.1.0.17-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>UBUNTU 12</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/ubuntu12/HDP-2.1.5.0-ubuntu12-tars-tarball.tar.gz
                        wget -nv http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.18/repos/ubuntu12/
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-2.1.3.0-centos5-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos5/HDP-UTILS-1.1.0.17-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="3fd368a2-42a3-4ce1-969f-57c5cbb8a43c">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-2.1.5.0-centos6-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos6/HDP-UTILS-1.1.0.17-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/sles11sp1/HDP-2.1.5.0-sles11sp1-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/suse11/HDP-UTILS-1.1.0.17-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>UBUNTU 12</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/ubuntu12/HDP-2.1.5.0-ubuntu12-tars-tarball.tar.gz
                        wget -nv http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.18/repos/ubuntu12/hdp.list
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="23dc9d15-347e-4cab-9bb4-8dc9ff35e382">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="e3431c39-6017-4e3d-a6db-209ff3239a25">
                    <TargetOutput xy:guid="78c2a5d6-110f-41d7-bdd0-1d47ad19ab31">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <Tabs xy:guid="6cfab23a-a5e0-47b5-9bbf-4a6e3d0fa95b">
                <Title>HDP 2.0 tarballs:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-2.0.12.0-centos6-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos6/HDP-UTILS-1.1.0.17-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/HDP-2.0.12.0-suse11-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/suse11/HDP-UTILS-1.1.0.17-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-2.0.12.0-centos5-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos5/HDP-UTILS-1.1.0.17-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="643c23e7-81f1-4815-9fbb-365f61fc8afd">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-2.0.12.0-centos6-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos6/HDP-UTILS-1.1.0.17-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/HDP-2.0.12.0-suse11-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/suse11/HDP-UTILS-1.1.0.17-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-2.0.12.0-centos5-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.17/repos/centos5/HDP-UTILS-1.1.0.17-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="13e7131d-85af-494e-9056-b2e8c4aedd64">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="6c1f0e03-60fc-49f8-98a5-0a276b497765">
                    <TargetOutput xy:guid="5c28d43a-c952-4dee-81bc-542dd33bd160">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <Tabs xy:guid="93d9c129-4321-440a-9856-a71c05d76667">
                <Title>HDP 1.3 tarballs:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-1.3.9.0-centos6-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.16/repos/centos6/HDP-UTILS-1.1.0.16-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/HDP-1.3.9.0-suse11-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.16/repos/suse11/HDP-UTILS-1.1.0.16-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-1.3.9.0-centos5-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.16/repos/centos5/HDP-UTILS-1.1.0.16-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:guid="924d9f71-b8b3-46a8-ade9-e020e919c51b">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/HDP-1.3.9.0-centos6-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.16/repos/centos6/HDP-UTILS-1.1.0.16-centos6.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/HDP-1.3.9.0-suse11-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.16/repos/suse11/HDP-UTILS-1.1.0.16-suse11.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/HDP-1.3.9.0-centos5-rpm.tar.gz
                        wget -nv
                        http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.16/repos/centos5/HDP-UTILS-1.1.0.16-centos5.tar.gz
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="970925e5-ab26-4e73-a48a-2c19f148674c">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="d9168a3a-5db5-4c2e-8f2d-b4dfd6dba8f6">
                    <TargetOutput xy:guid="677247f5-ae32-46ee-99ab-606a12d3b8ad">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <RichText>If you have temporary Internet access for setting up the Stack repositories, use the link
                appropriate for your OS family to download a repository that contains the HDP Stack version you plan to
                install.
              </RichText>
              <Tabs xy:guid="2d277b44-5156-4940-80b3-887ac9c44eed">
                <Title>HDP 2.2 repository file links:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/centos6/2.x/GA/2.2.0.0/hdp.repo
                        -O /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11SP3</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/GA/2.2.0.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>UBUNTU 12</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/ubuntu12/2.x/GA/2.2.0.0/hdp.list
                        -O /etc/apt/sources.list.d/HDP.list
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/centos5/2.x/GA/2.2.0.0/hdp.repo
                        -O /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:guid="8f6a8a45-56f2-4635-a271-1ca9c34597ea">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/centos6/2.x/GA/2.2.0.0/hdp.repo
                        -O /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11SP3</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/GA/2.2.0.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>UBUNTU 12</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/ubuntu12/2.x/GA/2.2.0.0/hdp.list
                        -O /etc/apt/sources.list.d/HDP.list
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/centos5/2.x/GA/2.2.0.0/hdp.repo
                        -O /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:guid="2de20cd7-6d81-4f8b-9e8c-74ebeb0e8bea">
                  <TargetOutputs xy:guid="a8e284f0-24c9-4a43-9b04-807dde041ade">
                    <TargetOutput xy:guid="17169125-7475-4487-9f1e-33a4f3b045a5">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <Tabs xy:guid="ac71b5ee-5cd2-4d87-b1bd-e3db2f523e02">
                <Title>HDP 2.1 repository file links:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.1.5.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11SP3</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/updates/2.1.5.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>UBUNTU 12</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/ubuntu12/2.1.5.0/hdp.list
                        /etc/apt/sources.list.d/HDP.list
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/2.x/updates/2.1.5.0/hdp.repo -O
                        /etc/yum.repos.d/hdp.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:guid="cc22dc4c-7c79-48ca-acfe-6ceedd812994">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.1.5.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11SP3</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/updates/2.1.5.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>UBUNTU 12</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv http://public-repo-1.hortonworks.com/HDP/ubuntu12/2.1.5.0/hdp.list
                        /etc/apt/sources.list.d/HDP.list
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/2.x/updates/2.1.5.0/hdp.repo -O
                        /etc/yum.repos.d/hdp.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="e83d6fb8-94d3-4d96-ad8d-15cdaa628ed4">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="04900a73-b379-4cde-8c46-b92d7ccf83bd">
                    <TargetOutput xy:guid="43bb4a11-c1cb-4d2f-ab93-3964bd0cc4a4">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <Tabs xy:guid="35bcdb64-be93-4047-bd45-682276078fbf">
                <Title>HDP 2.0 repository file links:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.12.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/2.x/updates/2.0.12.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/2.x/updates/2.0.12.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:guid="1d848704-2dfc-4cfa-a45d-ef13778972c6">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.12.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/2.x/updates/2.0.12.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/2.x/updates/2.0.12.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="43e58e7e-8f6a-4453-b7f8-01c61475decf">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="dbbca769-3437-4df1-a408-9ed1554b6c7a">
                    <TargetOutput xy:guid="b70eced6-d9c9-4757-954d-8d5d57c7597a">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
              <Tabs xy:guid="3565f23b-0b22-43b8-8ec6-34f64d5a402a">
                <Title>HDP 1.3 repository file links:</Title>
                <Properties Orientation="Horizontal"/>
                <Tab>
                  <Label>RHEL/CentOS/Oracle Linux 6</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/1.x/updates/1.3.7.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>SLES 11</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/1.x/updates/1.3.7.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
                <Tab>
                  <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
                  <Content>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/1.x/updates/1.3.7.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Content>
                </Tab>
              </Tabs>
              <List ListMarker="NoBullet" xy:guid="8b3cdb6a-77ad-4bfa-9bf9-a0f2b4f2d280">
                <ItemBlock>
                  <Item>
                    <ItemPara>RHEL/CentOS/Oracle Linux 6</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos6/1.x/updates/1.3.7.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>SLES 11</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/suse11/1.x/updates/1.3.7.0/hdp.repo -O
                        /etc/zypp/repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ItemPara>
                    <RichText>
                      <InLineTypeThis>wget -nv
                        http://public-repo-1.hortonworks.com/HDP/centos5/1.x/updates/1.3.7.0/hdp.repo -O
                        /etc/yum.repos.d/HDP.repo
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
                <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                                xy:guid="5ae0b9e1-64dd-4452-af0d-d5db1429fa73">
                  <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                                 xy:guid="207b0769-423e-4a29-be00-3b19e73ee94f">
                    <TargetOutput xy:guid="b90c1e5d-2b97-4df6-9b04-588195772d18">Guide</TargetOutput>
                  </TargetOutputs>
                </FilterMetadata>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="9cdb6241-6556-4788-ba58-df868d965d92">
          <Title>Setting Up a Local Repository</Title>
          <ParaBlock xy:guid="e067e380-2c6e-4bd4-8262-d8b2a2e62c44">
            <RichText>Based on your Internet access, choose one of the following options:</RichText>
            <List ListMarker="Bullet" xy:guid="10586f74-195f-4ed6-be4a-f714f896cf65">
              <ItemBlock>
                <Item>
                  <ItemPara>No Internet Access</ItemPara>
                  <RichText>This option involves downloading the repository tarball, moving the tarball to the selected
                    mirror server in your cluster, and extracting to create the repository.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Temporary Internet Access</ItemPara>
                  <RichText>This option involves using your temporary Internet access to sync (using reposync) the
                    software packages to your selected mirror server and creating the repository.
                  </RichText>
                  <RichText>Both options proceed in a similar, straightforward way. Setting up for each option presents
                    some key differences, as described in the following sections:
                  </RichText>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>
                          <Xref InsideTargetRef="cc2d0307-f181-498d-bd7e-515d7b8df5dd">Getting Started Setting Up a
                            Local Repository
                          </Xref>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Xref InsideTargetRef="9cdb6241-6556-4788-ba58-df868d965d92">Setting Up a Local Repository
                            with No Internet Access
                          </Xref>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Xref InsideTargetRef="36521169-8297-4445-ae11-311be55e6492">Setting Up a Local Repository
                            with Temporary Internet Access
                          </Xref>
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="cc2d0307-f181-498d-bd7e-515d7b8df5dd">
            <Title>Getting Started Setting Up a Local Repository</Title>
            <ParaBlock xy:guid="59fe2410-85c6-42f1-9291-fd3c7f93ceb3">
              <RichText>To get started setting up your local repository, complete the following prerequisites:
              </RichText>
              <List ListMarker="Bullet" xy:guid="96dc2267-9d6a-4c99-aa23-659ca02df6b1">
                <ItemBlock>
                  <Item>
                    <ItemPara>Select an existing server in, or accessible to the cluster, that runs a supported
                      operating system
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Enable network access from all hosts in your cluster to the mirror server</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Ensure the mirror server has a package manager installed such as yum (RHEL / CentOS /
                      Oracle Linux), zypper (SLES), or apt-get (Ubuntu)
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Emph>Optional:</Emph>
                      If your repository has temporary Internet access, and you are using RHEL/CentOS/Oracle Linux as
                      your OS, install yum utilities:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>yum install yum-utils createrepo</InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
              <List ListMarker="Numeric" xy:guid="4fd77766-de2a-4e58-9569-a48ecb6a9239">
                <ItemBlock>
                  <Item>
                    <ItemPara>Create an HTTP server.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>On the mirror server, install an HTTP server (such as Apache httpd) using the
                            instructions provided
                            <Href UrlTarget="http://httpd.apache.org/download.cgi">here</Href>
                            .
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Activate this web server.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Ensure that any firewall settings allow inbound HTTP access from your cluster nodes
                            to your mirror server.
                          </ItemPara>
                          <CustomNote xy:guid="12b967da-93f4-4c97-99e5-b696885f8445">
                            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ba0289b3-cb5e-40dd-a4f9-105f3f562a05"/>
                            <SimpleBlock>
                              <RichText>If you are using Amazon EC2, make sure that SELinux is disabled.</RichText>
                            </SimpleBlock>
                          </CustomNote>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>On your mirror server, create a directory for your web server.</ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>For example, from a shell window, type:</ItemPara>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                                  â¨
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>mkdir -p /var/www/html/</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara><Emph>For SLES</Emph>:
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>mkdir -p /srv/www/htdocs/rpms</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <Emph>For Ubuntu:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>mkdir -p /var/www/html/</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>If you are using a symlink, enable the
                            <InLineCode>followsymlinks</InLineCode>
                            on your web server.
                          </ItemPara>
                          <CustomNote xy:guid="89d9cb04-f715-4ade-9874-2b66a8ce95b2">
                            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="858dcac5-76bf-4227-b900-f639a06c8ecc"/>
                            <SimpleBlock>
                              <RichText>After you have completed the steps in<Xref
                                      InsideTargetRef="cc2d0307-f181-498d-bd7e-515d7b8df5dd">Getting Started Setting up
                                a Local Repository</Xref>, move on to specific setup for your repository internet access
                                type.
                              </RichText>
                            </SimpleBlock>
                          </CustomNote>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="14d43287-b3d1-49a3-9712-a9d0efbe56fe">
            <Title>Setting Up a Local Repository with No Internet Access</Title>
            <ParaBlock xy:guid="90e62e3d-aa8a-47c8-aff3-07a2dbdc4abc">
              <RichText>After completing the
                <Xref InsideTargetRef="cc2d0307-f181-498d-bd7e-515d7b8df5dd">Getting Started Setting up a Local
                  Repository
                </Xref>
                procedure, finish setting up your repository by completing the following steps:
              </RichText>
              <List ListMarker="Numeric" xy:guid="47d5a90c-b997-42c3-adba-7ab4a8accbaa">
                <ItemBlock>
                  <Item>
                    <ItemPara>Obtain the tarball for the repository you would like to create. For options, see<Xref
                            InsideTargetRef="71ea1556-a492-46b4-a6e5-029237e1dcd7">Obtaining the Repositories</Xref>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Copy the repository tarballs to the web server directory and untar.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Browse to the web server directory you created.</ItemPara>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                                  â¨
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>cd /var/www/html/</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <Emph>For SLES:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>cd /srv/www/htdocs/rpms</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <Emph>For Ubuntu:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>cd /var/www/html/</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>Untar the repository tarballs to the following locations:
                            where<SyntaxArg>&lt;web.server&gt;</SyntaxArg>,<SyntaxArg>
                              &lt;web.server.directory&gt;</SyntaxArg>,<SyntaxArg>&lt;OS&gt;</SyntaxArg>,<SyntaxArg>&lt;version&gt;</SyntaxArg>
                            , and
                            <SyntaxArg>&lt;latest.version&gt;</SyntaxArg>
                            represent the name, home directory, operating system type, version, and most recent release
                            version, respectively.
                          </ItemPara>
                          <Table align="" border="false" width="100" xy:guid="fb7fefe0-6a01-4fb8-961f-6b65859861fe">
                            <TblGroup>
                              <TblCol width="13"/>
                              <TblCol width="87"/>
                              <TblHeader>
                                <TableRow>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Repository Content</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Repository Location</RichText>
                                  </Cell>
                                </TableRow>
                              </TblHeader>
                              <TblBody>
                                <TableRow>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Ambari Repository</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Untar under
                                      <SyntaxArg>&lt;web.server.directory&gt;</SyntaxArg>
                                    </RichText>
                                  </Cell>
                                </TableRow>
                                <TableRow>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>HDP Stack Repositories</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Create directory and untar under<SyntaxArg>
                                      &lt;web.server.directory&gt;</SyntaxArg>/hdp
                                    </RichText>
                                  </Cell>
                                </TableRow>
                              </TblBody>
                              <TblFooter/>
                            </TblGroup>
                            <Caption>Untar Locations for a Local Repository - No Internet Access</Caption>
                          </Table>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Confirm you can browse to the newly created local repositories.</ItemPara>
                    <Table align="" border="false" width="100" xy:guid="0fa28d4b-09af-43ec-9e37-effb3c0eb054">
                      <TblGroup>
                        <TblCol width="13"/>
                        <TblCol width="87"/>
                        <TblHeader>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>Repository</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>URL</RichText>
                            </Cell>
                          </TableRow>
                        </TblHeader>
                        <TblBody>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>Ambari Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>http://&lt;web.server&gt;/ambari/&lt;OS&gt;/2.x/updates/1.7.0</RichText>
                            </Cell>
                          </TableRow>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>HDP Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>http://&lt;web.server&gt;<SyntaxArg>/</SyntaxArg>hdp/HDP/&lt;OS&gt;/2.x/updates/&lt;latest.version&gt;
                              </RichText>
                            </Cell>
                          </TableRow>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>HDP-UTILS Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>
                                http://&lt;web-server&gt;/hdp/HDP-UTILS-&lt;version&gt;/repos/&lt;OS&gt;</RichText>
                            </Cell>
                          </TableRow>
                        </TblBody>
                        <TblFooter/>
                      </TblGroup>
                      <Caption>URLs for a Local Repository - No Internet Access</Caption>
                    </Table>
                    <CustomNote xy:guid="2428a5f8-f211-43a0-bce8-88015e035e2a">
                      <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                            xy:guid="7e60728e-95b3-4137-97cc-d3e24c304ea9"/>
                      <SimpleBlock>
                        <RichText>Be sure to record these Base URLs. You will need them when installing Ambari and the
                          cluster.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                  </Item>
                  <Item>
                    <ItemPara>Optional: If you have multiple repositories configured in your environment, deploy the
                      following plug-in on all the nodes in your cluster.
                    </ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Install the plug-in.</ItemPara>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <Emph>For RHEL and CentOS 6:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>yum install yum-plugin-priorities</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <Emph>For RHEL and CentOS 5:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>yum install yum-priorities</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>Edit the
                            <InLineCode>/etc/yum/pluginconf.d/priorities.conf</InLineCode>
                            file to add the following:
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>[main]
                              enabled=1
                              gpgcheck=0
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="36521169-8297-4445-ae11-311be55e6492">
            <Title>Setting up a Local Repository With Temporary Internet Access</Title>
            <ParaBlock xy:guid="759a4185-b1f9-40ed-9140-cce3221660e0">
              <RichText>After completing the
                <Xref InsideTargetRef="9cdb6241-6556-4788-ba58-df868d965d92">Getting Started Setting up a Local
                  Repository
                </Xref>
                procedure, finish setting up your repository by completing the following steps:
              </RichText>
              <List ListMarker="Numeric" xy:guid="cf33ac77-8881-4cc9-9e40-076f6df8c2b2">
                <ItemBlock>
                  <Item>
                    <ItemPara>Put the repository configuration files for Ambari and the Stack in place on the host. For
                      options, see<Xref InsideTargetRef="71ea1556-a492-46b4-a6e5-029237e1dcd7">Obtaining the
                        Repositories</Xref>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Confirm availability of the repositories.</ItemPara>
                    <SubList ListMarker="NoBullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>
                            <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>yum repolist</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>For SLES:</Emph>
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>zypper repos</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>For Ubuntu:</Emph>
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>dpkg</InLineTypeThis>
                            <InLineTypeThis>-list</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Synchronize the repository contents to your mirror server.</ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Browse to the web server directory:</ItemPara>
                          <SubList ListMarker="NoBullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>cd /var/www/html</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <Emph>For SLES:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>cd /srv/www/htdocs/rpms</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>For Ambari, create
                            <InLineCode>ambari</InLineCode>
                            directory and reposync.
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>mkdir -p ambari/&lt;OS&gt;
                              cd ambari/&lt;OS&gt;
                              reposync -r Updates-ambari-1.7.0
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>For HDP Stack Repositories, create
                            <InLineCode>hdp</InLineCode>
                            directory and reposync.
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>mkdir -p hdp/&lt;OS&gt;
                              cd hdp/&lt;OS&gt;
                              reposync -r HDP-&lt;latest.version&gt;
                              reposync -r HDP-UTILS-&lt;version&gt;</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Generate the repository metadata.</ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>For Ambari:</ItemPara>
                          <RichText>
                            <InLineTypeThis>createrepo &lt;web.server.directory&gt;/ambari/&lt;OS&gt;/Updates-ambari-1.7.0</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>For HDP Stack Repositories:</ItemPara>
                          <RichText>
                            <InLineTypeThis>createrepo &lt;web.server.directory&gt;/hdp/&lt;OS&gt;/HDP-&lt;latest.version&gt;
                              createrepo
                              &lt;web.server.directory&gt;/hdp/&lt;OS&gt;/HDP-UTILS-&lt;version&gt;</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Confirm that you can browse to the newly created repository.</ItemPara>
                    <Table align="" border="false" width="100" xy:guid="c239d7fe-7066-4f1d-a044-67b80c898b88">
                      <TblGroup>
                        <TblCol width="28"/>
                        <TblCol width="72"/>
                        <TblHeader>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>Repository</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>URL</RichText>
                            </Cell>
                          </TableRow>
                        </TblHeader>
                        <TblBody>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>Ambari Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>http://&lt;web.server&gt;/ambari/&lt;OS&gt;/Updates-ambari-1.7.0</RichText>
                            </Cell>
                          </TableRow>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>HDP Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>http://&lt;web.server&gt;/hdp/&lt;OS&gt;/HDP-&lt;latest.version&gt;</RichText>
                            </Cell>
                          </TableRow>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>HDP-UTILS Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>http://&lt;web.server&gt;/hdp/&lt;OS&gt;/HDP-UTILS-&lt;version&gt;</RichText>
                            </Cell>
                          </TableRow>
                        </TblBody>
                        <TblFooter/>
                      </TblGroup>
                      <Caption>URLs for the New Repository</Caption>
                    </Table>
                    <CustomNote xy:guid="7cd98dcd-c043-4767-8cdb-3857ffeb7163">
                      <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                            xy:guid="7d60839d-79b4-4e17-95a9-09a90ac7e7de"/>
                      <SimpleBlock>
                        <RichText>Be sure to record these Base URLs. You will need them when installing Ambari and the
                          Cluster.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                  </Item>
                  <Item>
                    <ItemPara>Optional. If you have multiple repositories configured in your environment, deploy the
                      following plug-in on all the nodes in your cluster.
                    </ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Install the plug-in.</ItemPara>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <Emph>For RHEL and CentOS 6:</Emph>
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>yum install yum-plugin-priorities</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>Edit the
                            <InLineCode>/etc/yum/pluginconf.d/priorities.conf</InLineCode>
                            file to add the following:
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>[main]
                              enabled=1
                              gpgcheck=0
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="71cef54a-0d59-4593-b2f9-a049abda1436">
            <Title>Preparing The Ambari Repository Configuration File</Title>
            <ParaBlock xy:guid="00db11a6-7d7e-4f4a-a533-11fcb10c1f32">
              <List ListMarker="Numeric" xy:guid="157d07dd-339f-43c0-a3a2-1e7e758592f8">
                <ItemBlock>
                  <Item>
                    <ItemPara>Download the
                      <InLineCode>ambari.repo</InLineCode>
                      file from the mirror server you created in the preceding sections or from the public repository.
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>From your mirror server:</ItemPara>
                          <RichText>
                            <InLineTypeThis>http://</InLineTypeThis>&lt;web_server&gt;<InLineTypeThis>
                            /ambari/</InLineTypeThis>&lt;OS&gt;
                            <InLineTypeThis>/1.x/updates/1.7.0/ambari.repo</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>From the public repository:</ItemPara>
                          <RichText>
                            <InLineTypeThis>http://public-repo-1.hortonworks.com/ambari/</InLineTypeThis>&lt;OS&gt;
                            <InLineTypeThis>/1.x/updates/1.7.0/ambari.repo</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Edit the ambari.repo file using the Ambari repository Base URL obtained when setting up
                      your local repository. Refer to step 3 in<Xref
                              InsideTargetRef="14d43287-b3d1-49a3-9712-a9d0efbe56fe">Setting Up a Local Repository with
                        No Internet Access</Xref>, or step 5 in<Xref
                              InsideTargetRef="36521169-8297-4445-ae11-311be55e6492">Setting Up a Local Repository with
                        Temporary Internet Access</Xref>, if necessary.
                    </ItemPara>
                    <Table align="" border="false" width="100" xy:guid="af00e250-c90a-4112-a8d8-96664fd70512">
                      <TblGroup>
                        <TblCol width="26"/>
                        <TblCol width="74"/>
                        <TblHeader>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>Repository</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>URL</RichText>
                            </Cell>
                          </TableRow>
                        </TblHeader>
                        <TblBody>
                          <TableRow>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>Ambari Base URL</RichText>
                            </Cell>
                            <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                              <RichText>http://&lt;web-server&gt;/ambari/&lt;OS&gt;/1.x/updates/1.7.0</RichText>
                            </Cell>
                          </TableRow>
                        </TblBody>
                        <TblFooter/>
                      </TblGroup>
                      <Caption>Base URLs for a Local Repository</Caption>
                    </Table>
                  </Item>
                  <Item>
                    <ItemPara>If this an Ambari updates release, disable the GA repository definition.</ItemPara>
                    <RichText>
                      <Emph>[ambari-1.x]</Emph>
                      <InLineCode>name=Ambari 1.x
                        baseurl=http://public-repo-1.hortonworks.com/ambari/centos6/1.x/GA
                        gpgcheck=1
                        gpgkey=http://public-repo-1.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
                        enabled=0
                        priority=1
                      </InLineCode>
                      <Emph>
                        [Updates-ambari-1.7.0]
                      </Emph>
                      <InLineCode>name=ambari-1.7.0 - Updates
                        baseurl= &lt;this.is.the.AMBARI.base.url&gt;
                        gpgcheck=1
                        gpgkey=http://public-repo-1.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
                        enabled=1
                        priority=1
                      </InLineCode>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Place the ambari.repo file on the machine you plan to use for the Ambari Server.
                    </ItemPara>
                    <SubList ListMarker="NoBullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>
                            <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>/etc/yum.repos.d/ambari.repo</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>For SLES:</Emph>
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>/etc/zypp/repos.d/ambari.repo</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>For Ubuntu:</Emph>
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>/etc/apt-get install/list.d/ambari.list</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>Edit the
                            <InLineCode>/etc/yum/pluginconf.d/priorities.conf</InLineCode>
                            file to add the following:
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>[main]
                              enabled=1
                              gpgcheck=0
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Proceed to
                      <Xref InsideTargetRef="77031023-81db-4b1c-9434-2b68372a9920">Installing Ambari Server</Xref>
                      to install and setup Ambari Server.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="ae4f3065-4bd1-4d55-a431-92a3d4b47690">
        <Title>
          Download the Ambari Repo
        </Title>
        <ParaBlock xy:guid="04d1f8e1-aa76-4ba4-a0b0-67c7e4c66e6a">
          <RichText>Select one of the following tabs that shows the OS family running on your installation host.
          </RichText>
          <Tabs xy:schema-version="Core/Definitions/Tabs.xsd#core-3.9-0" xy:guid="8709cb50-0c10-4e5a-be20-3327182d21e9">
            <Properties Orientation="Horizontal"/>
            <Tab>
              <Label>RHEL/CentOS/Oracle Linux 6</Label>
              <Content>
                <RichText>
                  On a server host that has Internet access, use a command line editor to perform the following steps:
                </RichText>
                <List ListMarker="Numeric" xy:guid="4ec6dc98-c334-42d3-b72d-c62473ae9d05">
                  <ListPreamble>RHEL/CentOS/Oracle Linux 6</ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                        <InLineTypeThis>sudo</InLineTypeThis>
                        as
                        <InLineTypeThis>su</InLineTypeThis>
                        if your environment requires such access. For example, type:
                      </ItemPara>
                      <RichText>
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        <InLineTypeThis>ssh</InLineTypeThis>
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        is your user name and
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        is the fully qualified domain name of your server host.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.</ItemPara>
                      <RichText>
                        <InLineTypeThis>wget -nv
                          http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo -O
                          /etc/yum.repos.d/ambari.repo
                        </InLineTypeThis>
                      </RichText>
                      <CustomNote xy:guid="cc5e1a6c-f994-4e19-bee8-16b723bfe2b0">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="f7452c2b-522d-41e2-a201-aedb7ab420f0"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.repo</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm that the repository is configured by checking the repo list.</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum repolist</InLineTypeThis>
                        You should see values similar to the following for Ambari repositories in the list.
                      </RichText>
                      <RichText>
                        Version values vary, depending on the installation.
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="fdce6860-5c3c-40c0-a10f-6e7173037aae">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo id</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo name</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>status</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI.1.7.0-1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>5</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-6 - Base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>6,518</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>extras</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-6 - Extras</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>15</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-6 - Updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>209</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs the default PostgreSQL Ambari database.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Enter
                        <InLineTypeThis>y</InLineTypeThis>
                        when prompted to to confirm transaction and dependency checks.
                      </ItemPara>
                      <RichText>A successful installation displays output similar to the following:
                        <InLineApplicationPrompt>Installing : postgresql-libs-8.4.20-1.el6_5.x86_64 1/4
                          Installing : postgresql-8.4.20-1.el6_5.x86_64 2/4
                          Installing : postgresql-server-8.4.20-1.el6_5.x86_64 3/4
                          Installing : ambari-server-1.7.0-135.noarch 4/4
                          Verifying : postgresql-server-8.4.20-1.el6_5.x86_64 1/4
                          Verifying : postgresql-libs-8.4.20-1.el6_5.x86_64 2/4
                          Verifying : ambari-server-1.7.0-135.noarch 3/4
                          Verifying : postgresql-8.4.20-1.el6_5.x86_64 4/4

                          Installed:
                          ambari-server.noarch 0:1.7.0-135

                          Dependency Installed:
                          postgresql.x86_64 0:8.4.20-1.el6_5 postgresql-libs.x86_64 0:8.4.20-1.el6_5
                          postgresql-server.x86_64 0:8.4.20-1.el6_5

                          Complete!
                        </InLineApplicationPrompt>
                      </RichText>
                      <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                  xy:guid="a7666674-b7eb-4131-a373-ff9422d9df53">
                        <Icon thumbWidth="50" uri="Icons/Note.png"
                              xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="b300b067-bc6f-4702-aff8-2728faf39a8a"/>
                        <SimpleBlock>
                          <RichText>Accept the warning about trusting the Hortonworks GPG Key. That key will be
                            automatically downloaded and used to validate packages from Hortonworks. You will see the
                            following message:

                            <InLineApplicationPrompt>Importing GPG key 0x07513CAD:
                              Userid: "Jenkins (HDP Builds) &lt;jenkin@hortonworks.com&gt;"
                              From :
                              http://s3.amazonaws.com/dev.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
                            </InLineApplicationPrompt>
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>SLES 11</Label>
              <Content>
                <RichText>On a server host that has Internet access, use a command line editor to perform the following
                  steps:
                </RichText>
                <List ListMarker="Numeric" xy:guid="55d2213d-6e1d-4b66-a8f6-49d52d44809c">
                  <ListPreamble>SLES 11</ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                        <InLineTypeThis>sudo</InLineTypeThis>
                        as
                        <InLineTypeThis>su</InLineTypeThis>
                        if your environment requires such access. For example, type:
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        <InLineTypeThis>ssh</InLineTypeThis>
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        is your user name and
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        is the fully qualified domain name of your server host.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.
                        <InLineTypeThis>wget -nv
                          http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                          /etc/zypp/repos.d/ambari.repo
                        </InLineTypeThis>
                      </ItemPara>
                      <CustomNote xy:guid="73e63d1f-914c-4950-b6bb-52270b5bebf7">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="b98e6d2e-9362-49b0-8dbb-dd47fad2d70d"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.repo</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm the downloaded repository is configured by checking the repo list.</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper repos</InLineTypeThis>
                        You should see the Ambari repositories in the list.
                      </RichText>
                      <RichText>
                        Version values vary, depending on the installation.
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="e8db9b9e-027e-4aea-afa4-fd0cea6a3c95">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width="43"/>
                          <TblCol width="15"/>
                          <TblCol width="17"/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Alias</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Name</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Enabled</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Refresh</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI.1.7.0-1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>No</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>http-demeter.uni-regensburg.de-c997c8f9</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>SUSE-Linux-Enterprise-Software-Development-Kit-11-SP1 11.1.1-1.57</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>opensuse</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>OpenSuse</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper install ambari-server</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Enter
                        <InLineTypeThis>y</InLineTypeThis>
                        when prompted to to confirm transaction and dependency checks.
                      </ItemPara>
                      <RichText>
                        <InLineApplicationPrompt>A successful installation displays output similar to the following:
                          Retrieving package postgresql-libs-8.3.5-1.12.x86_64 (1/4), 172.0 KiB (571.0 KiB unpacked)
                          Retrieving: postgresql-libs-8.3.5-1.12.x86_64.rpm [done (47.3 KiB/s)]
                          Installing: postgresql-libs-8.3.5-1.12 [done]
                          Retrieving package postgresql-8.3.5-1.12.x86_64 (2/4), 1.0 MiB (4.2 MiB unpacked)
                          Retrieving: postgresql-8.3.5-1.12.x86_64.rpm [done (148.8 KiB/s)]
                          Installing: postgresql-8.3.5-1.12 [done]
                          Retrieving package postgresql-server-8.3.5-1.12.x86_64 (3/4), 3.0 MiB (12.6 MiB unpacked)
                          Retrieving: postgresql-server-8.3.5-1.12.x86_64.rpm [done (452.5 KiB/s)]
                          Installing: postgresql-server-8.3.5-1.12 [done]
                          Updating etc/sysconfig/postgresql...
                          Retrieving package ambari-server-1.7.0-135.noarch (4/4), 99.0 MiB (126.3 MiB unpacked)
                          Retrieving: ambari-server-1.7.0-135.noarch.rpm [done (3.0 MiB/s)]
                          Installing: ambari-server-1.7.0-135 [done]
                          ambari-server 0:off 1:off 2:off 3:on 4:off 5:on 6:off
                        </InLineApplicationPrompt>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>UBUNTU 12</Label>
              <Content>
                <RichText>On a server host that has Internet access, use a command line editor to perform the following
                  steps:
                </RichText>
                <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                      xy:guid="e1806e61-20bb-4f99-a69a-50b522f2d8b5">
                  <ListPreamble>UBUNTU 12</ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                        <InLineTypeThis>sudo</InLineTypeThis>
                        as
                        <InLineTypeThis>su</InLineTypeThis>
                        if your environment requires such access. For example, type:
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        <InLineTypeThis>ssh</InLineTypeThis>
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        is your user name and
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        is the fully qualified domain name of your server host.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.
                        <InLineTypeThis>wget -nv
                          http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list -O
                          /etc/apt/sources.list.d/ambari.list

                          apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD

                          apt-get update
                        </InLineTypeThis>
                      </ItemPara>
                      <CustomNote xy:guid="d064b549-aa3d-4321-96b9-8ca5bc968eef">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="da65ef0b-df27-4ee0-aaa7-dbf226b0bc3e"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.list</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm that Ambari packages downloaded successfully by checking the package name
                        list.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-cache pkgnames
                        </InLineTypeThis>
                        You should see the Ambari packages in the list.
                      </RichText>
                      <RichText>
                        Version values vary, depending on the installation.
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="320b7856-4e35-446d-baf2-bf2a3b3cb5bb">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Alias</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Name</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI-dev-2.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 2.x</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-get install ambari-server</InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
              <Content>
                <RichText>
                  On a server host that has Internet access, use a command line editor to perform the following steps:
                </RichText>
                <List ListMarker="Numeric" xy:guid="08873f1d-e584-403f-85ab-4d6036cea83b">
                  <ListPreamble>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                        <InLineTypeThis>sudo</InLineTypeThis>
                        as
                        <InLineTypeThis>su</InLineTypeThis>
                        if your environment requires such access. For example, type:
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        <InLineTypeThis>ssh</InLineTypeThis>
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <SyntaxArg>&lt;username&gt;</SyntaxArg>
                        is your user name and
                        <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                        is the fully qualified domain name of your server host.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.
                        <InLineTypeThis>
                          wget -nv http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo -O
                          /etc/yum.repos.d/ambari.repo
                        </InLineTypeThis>
                      </ItemPara>
                      <CustomNote xy:guid="8f0a9d88-e827-43cd-a797-7f4e87a9a23a">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="18f9ac1a-ee47-491d-91f1-c7a8d91888fc"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.repo</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm the repository is configured by checking the repo list.</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum repolist</InLineTypeThis>
                        You should see the Ambari repositories in the list.
                      </RichText>
                      <RichText>
                        <InLineApplicationPrompt>AMBARI.1.7.0-1.x | 951 B 00:00
                          AMBARI.1.7.0-1.x/primary | 1.6 kB 00:00
                          AMBARI.1.7.0-1.x 5/5
                          epel | 3.7 kB 00:00
                          epel/primary_db | 3.9 MB 00:01
                        </InLineApplicationPrompt>
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="1ac406b7-d0e6-4357-bc58-ee07e68520e0">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo Id</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo Name</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>status</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI.1.7.0-1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>5</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-5 - Base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>3,667</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>epel</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Extra Packages for Enterprise Linux 5 - x86_64</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>7,614</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>puppet</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Puppet</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>433</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-5 - Updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>118</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                        <InLineApplicationPrompt></InLineApplicationPrompt>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
          </Tabs>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="0d28ddc0-dfa6-4f3a-b638-3883300a19a1">
          <RichText>
            Follow instructions in the section for the operating system that runs on your installation host.
            Use a command line editor to perform each instruction.
          </RichText>
          <List ListMarker="Numeric" xy:guid="4ec6dc98-c334-42d3-b72d-c62473ae9d05">
            <ListPreamble>RHEL/CentOS/Oracle Linux 6</ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                  <InLineTypeThis>sudo</InLineTypeThis>
                  as
                  <InLineTypeThis>su</InLineTypeThis>
                  if your environment requires such access. For example, type:
                </ItemPara>
                <RichText>
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  <InLineTypeThis>ssh</InLineTypeThis>
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  is your user name and
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  is the fully qualified domain name of your server host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.</ItemPara>
                <RichText>
                  <InLineTypeThis>wget -nv
                    http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo -O
                    /etc/yum.repos.d/ambari.repo
                  </InLineTypeThis>
                </RichText>
                <CustomNote xy:guid="cc5e1a6c-f994-4e19-bee8-16b723bfe2b0">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="f7452c2b-522d-41e2-a201-aedb7ab420f0"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.repo</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm that the repository is configured by checking the repo list.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum repolist</InLineTypeThis>
                  You should see values similar to the following for Ambari repositories in the list.
                </RichText>
                <RichText>
                  Version values vary, depending on the installation.
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="fdce6860-5c3c-40c0-a10f-6e7173037aae">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo id</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo name</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>status</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI.1.7.0-1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>5</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-6 - Base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>6,518</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>extras</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-6 - Extras</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>15</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-6 - Updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>209</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs the default PostgreSQL Ambari database.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Enter
                  <InLineTypeThis>y</InLineTypeThis>
                  when prompted to to confirm transaction and dependency checks.
                </ItemPara>
                <RichText>A successful installation displays output similar to the following:
                  <InLineApplicationPrompt>Installing : postgresql-libs-8.4.20-1.el6_5.x86_64 1/4
                    Installing : postgresql-8.4.20-1.el6_5.x86_64 2/4
                    Installing : postgresql-server-8.4.20-1.el6_5.x86_64 3/4
                    Installing : ambari-server-1.7.0-135.noarch 4/4
                    Verifying : postgresql-server-8.4.20-1.el6_5.x86_64 1/4
                    Verifying : postgresql-libs-8.4.20-1.el6_5.x86_64 2/4
                    Verifying : ambari-server-1.7.0-135.noarch 3/4
                    Verifying : postgresql-8.4.20-1.el6_5.x86_64 4/4

                    Installed:
                    ambari-server.noarch 0:1.7.0-135

                    Dependency Installed:
                    postgresql.x86_64 0:8.4.20-1.el6_5 postgresql-libs.x86_64 0:8.4.20-1.el6_5
                    postgresql-server.x86_64 0:8.4.20-1.el6_5

                    Complete!
                  </InLineApplicationPrompt>
                </RichText>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="a7666674-b7eb-4131-a373-ff9422d9df53">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="b300b067-bc6f-4702-aff8-2728faf39a8a"/>
                  <SimpleBlock>
                    <RichText>Accept the warning about trusting the Hortonworks GPG Key. That key will be automatically
                      downloaded and used to validate packages from Hortonworks. You will see the following message:

                      <InLineApplicationPrompt>Importing GPG key 0x07513CAD:
                        Userid: "Jenkins (HDP Builds) &lt;jenkin@hortonworks.com&gt;"
                        From :
                        http://s3.amazonaws.com/dev.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
                      </InLineApplicationPrompt>
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
            </ItemBlock>
          </List>
          <List ListMarker="Numeric" xy:guid="55d2213d-6e1d-4b66-a8f6-49d52d44809c">
            <ListPreamble>SLES 11</ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                  <InLineTypeThis>sudo</InLineTypeThis>
                  as
                  <InLineTypeThis>su</InLineTypeThis>
                  if your environment requires such access. For example, type:
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  <InLineTypeThis>ssh</InLineTypeThis>
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  is your user name and
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  is the fully qualified domain name of your server host.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.
                  <InLineTypeThis>wget -nv
                    http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                    /etc/zypp/repos.d/ambari.repo
                  </InLineTypeThis>
                </ItemPara>
                <CustomNote xy:guid="73e63d1f-914c-4950-b6bb-52270b5bebf7">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="b98e6d2e-9362-49b0-8dbb-dd47fad2d70d"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.repo</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm the downloaded repository is configured by checking the repo list.</ItemPara>
                <RichText>
                  <InLineTypeThis>zypper repos</InLineTypeThis>
                  You should see the Ambari repositories in the list.
                </RichText>
                <RichText>
                  Version values vary, depending on the installation.
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="e8db9b9e-027e-4aea-afa4-fd0cea6a3c95">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width="43"/>
                    <TblCol width="15"/>
                    <TblCol width="17"/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Alias</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Name</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Enabled</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Refresh</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI.1.7.0-1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>No</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>http-demeter.uni-regensburg.de-c997c8f9</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>SUSE-Linux-Enterprise-Software-Development-Kit-11-SP1 11.1.1-1.57</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>opensuse</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>OpenSuse</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                <RichText>
                  <InLineTypeThis>zypper install ambari-server</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Enter
                  <InLineTypeThis>y</InLineTypeThis>
                  when prompted to to confirm transaction and dependency checks.
                </ItemPara>
                <RichText>
                  <InLineApplicationPrompt>A successful installation displays output similar to the following:
                    Retrieving package postgresql-libs-8.3.5-1.12.x86_64 (1/4), 172.0 KiB (571.0 KiB unpacked)
                    Retrieving: postgresql-libs-8.3.5-1.12.x86_64.rpm [done (47.3 KiB/s)]
                    Installing: postgresql-libs-8.3.5-1.12 [done]
                    Retrieving package postgresql-8.3.5-1.12.x86_64 (2/4), 1.0 MiB (4.2 MiB unpacked)
                    Retrieving: postgresql-8.3.5-1.12.x86_64.rpm [done (148.8 KiB/s)]
                    Installing: postgresql-8.3.5-1.12 [done]
                    Retrieving package postgresql-server-8.3.5-1.12.x86_64 (3/4), 3.0 MiB (12.6 MiB unpacked)
                    Retrieving: postgresql-server-8.3.5-1.12.x86_64.rpm [done (452.5 KiB/s)]
                    Installing: postgresql-server-8.3.5-1.12 [done]
                    Updating etc/sysconfig/postgresql...
                    Retrieving package ambari-server-1.7.0-135.noarch (4/4), 99.0 MiB (126.3 MiB unpacked)
                    Retrieving: ambari-server-1.7.0-135.noarch.rpm [done (3.0 MiB/s)]
                    Installing: ambari-server-1.7.0-135 [done]
                    ambari-server 0:off 1:off 2:off 3:on 4:off 5:on 6:off
                  </InLineApplicationPrompt>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="e1806e61-20bb-4f99-a69a-50b522f2d8b5">
            <ListPreamble>UBUNTU 12</ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                  <InLineTypeThis>sudo</InLineTypeThis>
                  as
                  <InLineTypeThis>su</InLineTypeThis>
                  if your environment requires such access. For example, type:
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  <InLineTypeThis>ssh</InLineTypeThis>
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  is your user name and
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  is the fully qualified domain name of your server host.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.
                  <InLineTypeThis>wget -nv
                    http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list -O
                    /etc/apt/sources.list.d/ambari.list

                    apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD

                    apt-get update
                  </InLineTypeThis>
                </ItemPara>
                <CustomNote xy:guid="d064b549-aa3d-4321-96b9-8ca5bc968eef">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="da65ef0b-df27-4ee0-aaa7-dbf226b0bc3e"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.list</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm that Ambari packages downloaded successfully by checking the package name list.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>apt-cache pkgnames
                  </InLineTypeThis>
                  You should see the Ambari packages in the list.
                </RichText>
                <RichText>
                  Version values vary, depending on the installation.
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="320b7856-4e35-446d-baf2-bf2a3b3cb5bb">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Alias</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Name</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI-dev-2.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 2.x</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                <RichText>
                  <InLineTypeThis>apt-get install ambari-server</InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <List ListMarker="Numeric" xy:guid="08873f1d-e584-403f-85ab-4d6036cea83b">
            <ListPreamble>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineTypeThis>root</InLineTypeThis>. You may
                  <InLineTypeThis>sudo</InLineTypeThis>
                  as
                  <InLineTypeThis>su</InLineTypeThis>
                  if your environment requires such access. For example, type:
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  <InLineTypeThis>ssh</InLineTypeThis>
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  is your user name and
                  <SyntaxArg>&lt;hostname.FQDN&gt;</SyntaxArg>
                  is the fully qualified domain name of your server host.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.
                  <InLineTypeThis>
                    wget -nv http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo -O
                    /etc/yum.repos.d/ambari.repo
                  </InLineTypeThis>
                </ItemPara>
                <CustomNote xy:guid="8f0a9d88-e827-43cd-a797-7f4e87a9a23a">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="18f9ac1a-ee47-491d-91f1-c7a8d91888fc"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.repo</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm the repository is configured by checking the repo list.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum repolist</InLineTypeThis>
                  You should see the Ambari repositories in the list.
                </RichText>
                <RichText>
                  <InLineApplicationPrompt>AMBARI.1.7.0-1.x | 951 B 00:00
                    AMBARI.1.7.0-1.x/primary | 1.6 kB 00:00
                    AMBARI.1.7.0-1.x 5/5
                    epel | 3.7 kB 00:00
                    epel/primary_db | 3.9 MB 00:01
                  </InLineApplicationPrompt>
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="1ac406b7-d0e6-4357-bc58-ee07e68520e0">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo Id</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo Name</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>status</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI.1.7.0-1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>5</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-5 - Base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>3,667</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>epel</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Extra Packages for Enterprise Linux 5 - x86_64</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>7,614</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>puppet</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Puppet</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>433</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-5 - Updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>118</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                  <InLineApplicationPrompt></InLineApplicationPrompt>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                          xy:guid="041ef5e7-7784-4bb7-bbbc-02046b60c8c1">
            <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                           xy:guid="3e8ef1f3-116d-4a98-8417-44aded7b2f25">
              <TargetOutput xy:guid="41ce9dfe-3a4d-48f6-b462-c0c765e63978">Guide</TargetOutput>
            </TargetOutputs>
          </FilterMetadata>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="697a4b7b-f3e9-4180-989e-31456f395411">
          <CustomNote xy:guid="5223f3ef-b670-4b47-93ab-3c09947bd9b9">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="da428fe4-6be8-494d-bf51-1d7154763653"/>
            <SimpleBlock>
              <RichText>When deploying HDP on a cluster having limited or no Internet access, you should provide access
                to the bits using an alternative method.
              </RichText>
              <List ListMarker="Bullet" xy:guid="b5a4f645-160f-4f22-9bf7-07c698362c38">
                <ItemBlock>
                  <Item>
                    <ItemPara>For more information about setting up local repositories, see<Xref
                            InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Optional: Configure Local
                      Repositories</Xref>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>For more information about obtaining JCE policy archives for secure authentication, see
                      <Xref InsideTargetRef="ec1f472e-3232-4a81-acc5-b3ef236f4737">Deploying JCE Policy Archives on the
                        Ambari Server</Xref>.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>
                Ambari Server by default uses an embedded PostgreSQL database. When you install the Ambari Server, the
                PostgreSQL packages and dependencies must be available for install. These packages are typically
                available as part of your Operating System repositories. Please confirm you have the appropriate
                repositories available for the postgresql-server packages.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="77031023-81db-4b1c-9434-2b68372a9920">
        <Title>Set Up the Ambari Server</Title>
        <ParaBlock xy:guid="3a5a2cb4-bbd0-4cf7-a65e-49c5165ebb34">
          <RichText>The
            <InLineCode>ambari-server</InLineCode>
            command manages the setup process. Run the following command on the Ambari server host:
            You may append
            <Xref InsideTargetRef="0edea938-0643-4e85-8906-3b02146100ba">Setup Options</Xref>
            to the command.

            <InLineTypeThis>ambari-server setup</InLineTypeThis>

            Respond to the following prompts:
          </RichText>
          <List ListMarker="Numeric" xy:guid="9c3adc3e-c1c5-4815-84ed-ebddd365725e">
            <ItemBlock>
              <Item>
                <ItemPara>If you have
                  <Italic>not</Italic>
                  temporarily disabled SELinux, you may get a warning. Accept the default (<InLineCode>y</InLineCode>),
                  and continue.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>By default, Ambari Server runs under<InLineCode>root</InLineCode>. Accept the default (n) at
                  the
                  <InLineMenuSelection>Customize user account for ambari-server daemon</InLineMenuSelection>
                  prompt, to proceed as<InLineCode>root</InLineCode>.
                  If you want to create a different user to run the Ambari Server, or to assign a previously created
                  user, select
                  <InLineCode>y</InLineCode>
                  at the
                  <InLineMenuSelection>Customize user account for ambari-server daemon</InLineMenuSelection>
                  prompt, then provide a user name.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>If you have not temporarily disabled
                  <InLineCode>iptables</InLineCode>
                  you may get a warning. Enter
                  <InLineCode>y</InLineCode>
                  to continue.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Select a JDK version to download. Enter 1 to download Oracle JDK 1.7.</ItemPara>
                <CustomNote xy:guid="2f863bcd-5b61-4db3-ad90-70b0bc6cf64d">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="4cd12050-7273-4f06-be0c-d78b9ae9d53d"/>
                  <SimpleBlock>
                    <RichText>By default, Ambari Server setup downloads and installs Oracle JDK 1.7 and the accompanying
                      Java Cryptography Extension (JCE) Policy Files. If you plan to use a different version of the JDK,
                      see
                      <Xref InsideTargetRef="0edea938-0643-4e85-8906-3b02146100ba">Setup Options</Xref>
                      for more information.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Accept the Oracle JDK license when prompted. You must accept this license to download the
                  necessary JDK from Oracle. The JDK is installed during the deploy phase.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Select
                  <InLineTypeThis>n</InLineTypeThis>
                  at
                  <InLineMenuSelection>Enter advanced database configuration</InLineMenuSelection>
                  to use the default, embedded PostgreSQL database for Ambari. The default PostgreSQL database name is
                  <InLineCode>ambari</InLineCode>. The default user name and password are<InLineCode>
                    ambari/bigdata</InLineCode>.
                  Otherwise, to use an existing PostgreSQL, MySQL or Oracle database with Ambari, select<InLineTypeThis>
                    y</InLineTypeThis>.
                </ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>If you are using an existing PostgreSQL, MySQL, or Oracle database instance, use one of
                        the following prompts:
                      </ItemPara>
                      <CustomNote xy:guid="56771eb7-3b55-4a06-b7f9-5c76e1ab6fc8">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="3f139fd6-7336-4201-b40d-4e25c961affc"/>
                        <SimpleBlock>
                          <RichText>You must prepare a non-default database instance, using the steps detailed in<Xref
                                  InsideTargetRef="6db1b3ae-7e80-4a7c-a73d-20f11379078f">Using Non-Default
                            Databases-Ambari</Xref>, before running setup and entering advanced database configuration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>To use an existing Oracle 11g r2 instance, and select your own database name, user name,
                        and password for that database, enter<InLineCode>2</InLineCode>.
                      </ItemPara>
                      <RichText>Select the database you want to use and provide any information requested at the
                        prompts, including host name, port, Service Name or SID, user name, and password.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>To use an existing MySQL 5.x database, and select your own database name, user name, and
                        password for that database, enter<InLineCode>3</InLineCode>.
                      </ItemPara>
                      <RichText>Select the database you want to use and provide any information requested at the
                        prompts, including host name, port, database name, user name, and password.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>To use an existing PostgreSQL 9.x database, and select your own database name, user
                        name, and password for that database, enter<InLineCode>4</InLineCode>.
                      </ItemPara>
                      <RichText>Select the database you want to use and provide any information requested at the
                        prompts, including host name, port, database name, user name, and password.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>At Proceed with configuring remote database connection properties [y/n] choose<InLineTypeThis>
                  y</InLineTypeThis>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Setup completes.</ItemPara>
                <CustomNote xy:guid="f2586e18-600e-430f-b0ff-c217eb92495a">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ba179f39-7de7-429c-aedf-2fa8d1ecaec7"/>
                  <SimpleBlock>
                    <RichText>If your host accesses the Internet through a proxy server, you must configure Ambari
                      Server to use this proxy server. See
                      <Xref InsideTargetRef="0c356526-e74c-4420-a686-8b9bc17dd0c1">How to Set Up an Internet Proxy
                        Server for Ambari
                      </Xref>
                      for more information.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="0edea938-0643-4e85-8906-3b02146100ba">
          <Title>Setup Options</Title>
          <ParaBlock xy:guid="8220d7bf-8224-4a0e-9178-1237b2aa1b59">
            <RichText>The following table describes options frequently used for Ambari Server setup.</RichText>
            <Table align="" border="false" width="100" xy:guid="7f7b61eb-fad6-44d4-9823-9cbfb101d46f">
              <TblGroup>
                <TblCol width="13"/>
                <TblCol width="87"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Option</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Description</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>-j (or --java-home)</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Specifies the JAVA_HOME path to use on the Ambari Server and all hosts in the cluster.
                        By default when you do not specify this option, Ambari Server setup downloads the Oracle JDK 1.7
                        binary and accompanying Java Cryptography Extension (JCE) Policy Files to
                        /var/lib/ambari-server/resources. Ambari Server then installs the JDK to /usr/jdk64.

                        Use this option when you plan to use a JDK other than the default Oracle JDK 1.7. See
                        <Xref InsideTargetRef="c81d7e9a-dc5d-4ab4-a12c-34428c1f13dc">JDK Requirements</Xref>
                        for more information on the supported JDKs. If you are using an alternate JDK, you must manually
                        install the JDK on all hosts and specify the Java Home path during Ambari Server setup. If you
                        plan to use Kerberos, you must also install the JCE on all hosts.

                        This path must be valid on all hosts.
                        For example:
                        <InLineCode>ambari-server setup âj /usr/java/default</InLineCode>
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>--jdbc-driver</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Should be the path to the JDBC driver JAR file. Use this option to specify the location
                        of the JDBC driver JAR and to make that JAR available to Ambari Server for distribution to
                        cluster hosts during configuration. Use this option with the --jdbc-db option to specify the
                        database type.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>--jdbc-db</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Specifies the database type. Valid values are: [postgres | mysql | oracle] Use this
                        option with the --jdbc-driver option to specify the location of the JDBC driver JAR file.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>-s (or --silent)</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Setup runs silently. Accepts all default prompt values.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>-v (or --verbose)</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Prints verbose info and warning messages to the console during Setup.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>-g (or --debug)</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Start Ambari Server in debug mode</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <RichText>
              <Emph>Next Steps</Emph>
            </RichText>
            <RichText>
              <Xref InsideTargetRef="e59488d8-be73-492b-948d-5d8cc16429df">Start the Ambari Server</Xref>
            </RichText>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="e59488d8-be73-492b-948d-5d8cc16429df">
        <Title>Start the Ambari Server</Title>
        <ParaBlock xy:guid="f203fb7f-e3c5-417f-bd8d-23b52add8ceb">
          <List ListMarker="Bullet" xy:guid="2a43a00c-6bbf-4864-8f37-3300c4e59bb5">
            <ItemBlock>
              <Item>
                <ItemPara>Run the following command on the Ambari Server host:</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server start</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>To check the Ambari Server processes:</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server status</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>To stop the Ambari Server:</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server stop</InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="48737899-8ed9-4b1f-a688-6a96d4ad6a50">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="283d5682-36ba-4f51-9910-112e7a15eb23"/>
            <SimpleBlock>
              <RichText>If you plan to use an existing database instance for Hive/HCatalog or for Oozie, you must
                complete the preparations described in
                <Xref InsideTargetRef="b9803b8c-5f91-40d5-bdc4-da481581efbf">Using Non-Default Databases-Oozie</Xref>
                <Emph>before</Emph>
                installing your Hadoop cluster.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>
            <Emph>Next Steps</Emph>
          </RichText>
          <RichText>
            <Xref InsideTargetRef="eb879df1-7042-4733-9221-4f2a7035d3e3">Install, configure and deploy an HDP cluster
            </Xref>
          </RichText>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="eb879df1-7042-4733-9221-4f2a7035d3e3">
      <Title>Install, Configure and Deploy a HDP Cluster</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="a0f2b377-e3d0-4c23-bdc6-4bad5e519b84">
        <ParaBlock xy:guid="6d521c4f-f006-44a4-b158-fbded5055496">
          <RichText>This section describes how to use the Ambari install wizard running in your browser to install,
            configure, and deploy your cluster.
          </RichText>
          <List ListMarker="Bullet" xy:guid="0ad86cb5-51b9-4857-8dba-3c9fe930c9bf">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="13630fcb-440e-4e40-8392-ebcef86e9998">Log In to Apache Ambari</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="63454c1d-0873-4d81-b26e-b0901fe1b9ae">Name Your Cluster</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="955326d7-d6cf-4f0e-850b-4fb69b6bdc67">Select Stack</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="2db43b02-dfa3-41d2-8119-477b0f155ed6">Install Options</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="22984912-bf44-4b20-a804-8eed2033a8fb">Confirm Hosts</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="97d6e6ed-5f78-43ee-9b30-5a87e7bb37f4">Choose Services</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a7effb31-eab4-4ed4-a0a9-00e24aa8fa42">Assign Masters</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b4839e64-9f2f-4ee8-89c3-cc0d87322bb5">Assign Slaves and Clients</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b3006969-a1ed-4a39-8fba-64a8295dbbd7">Customize Services</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="f69250a6-a5c4-41a9-a1ce-ef5aa2f91b3b">Review</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="ba4db19d-f9b4-4d40-99f0-dc01564f4b21">Install, Start and Test</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="3e303bad-752a-4f5d-9616-be9542881920">Complete</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="13630fcb-440e-4e40-8392-ebcef86e9998">
        <Title>Log In to Apache Ambari</Title>
        <ParaBlock xy:guid="051fbd52-0999-4717-a613-ab045cc52963">
          <RichText>After starting the Ambari service, open Ambari Web using a web browser.</RichText>
          <List ListMarker="Numeric" xy:guid="7ce05a0b-d18f-4972-ab1c-5fa3406ac564">
            <ItemBlock>
              <Item>
                <ItemPara>Point your browser to
                  <InLineCode>http://</InLineCode>
                  <SyntaxArg>&lt;your.ambari.server&gt;</SyntaxArg>
                  <InLineCode>:8080</InLineCode>,<InLineCode></InLineCode>where
                  <SyntaxArg>&lt;your.ambari.server&gt;</SyntaxArg>
                  is the name of your ambari server host. For example, a default Ambari server host is located at
                  http://c6401.ambari.apache.org:8080.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Log in to the Ambari Server using the default user name/password: admin/admin. You can change
                  these credentials later.
                </ItemPara>
                <RichText>For a new cluster, the Ambari install wizard displays a Welcome page from which you<Xref
                        InsideTargetRef="2f2795fb-36cd-45e0-8950-be9fac3a2a2f">launch the Ambari Install wizard</Xref>.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="2f2795fb-36cd-45e0-8950-be9fac3a2a2f">
        <Title>Launching the Ambari Install Wizard</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="c0fe7f8d-8691-42df-b541-c138784f7d87">
          <RichText>From the Ambari Welcome page, choose Launch Install Wizard.</RichText>
          <Figure xy:guid="0f8c8ce9-103e-44f0-aef9-15c00d8dcfb5">
            <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                         xy:guid="e7241901-f8d0-409f-a6c8-9c675ed66ce2">
              <Renditions>
                <Print thumbWidth="50" uri="System Admin Guides/Ambari/170Install/170AmbariWelcome.png"/>
                <Web thumbWidth="50" uri="System Admin Guides/Ambari/170Install/170AmbariWelcome.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="63454c1d-0873-4d81-b26e-b0901fe1b9ae">
        <Title>Name Your Cluster</Title>
        <ParaBlock xy:guid="fc0637f2-0839-4923-b346-e2666629f89a">
          <List ListMarker="Numeric" xy:guid="c5f66d4c-fd55-4363-bfae-bbf2605a9bb1">
            <ItemBlock>
              <Item>
                <ItemPara>In<InLineTypeThis>Name your cluster</InLineTypeThis>, type a name for the cluster you want to
                  create. Use no white spaces or special characters in the name.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Choose<InLineTypeThis>Next</InLineTypeThis>.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="955326d7-d6cf-4f0e-850b-4fb69b6bdc67">
        <Title>Select Stack</Title>
        <ParaBlock xy:guid="7468fe2e-ff97-4f0f-823d-a08b25df4084">
          <RichText>The Service Stack (the Stack) is a coordinated and tested set of HDP components. Use a radio button
            to select the Stack version you want to install. To install an HDP 2x stack, select the HDP 2.2, HDP 2.1, or
            HDP 2.0 radio button.
          </RichText>
          <Figure xy:guid="6d505420-0301-4283-9823-6bf3b7a4c6ea">
            <MediaObject xy:guid="da59a30f-c218-4480-97ba-8c117ff2f358">
              <Renditions>
                <Print thumbWidth="50" uri="System Admin Guides/Ambari/170Install/Stack22_select.png"/>
                <Web thumbWidth="125" uri="System Admin Guides/Ambari/170Install/Stack22_select.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <RichText>Expand Advanced Repository Options to select the Base URL of a repository from which Stack software
            packages download. Ambari sets the default Base URL for each repository, depending on the Internet
            connectivity available to the Ambari server host, as follows:
          </RichText>
          <List ListMarker="Bullet" xy:guid="9801fd51-ba2d-4396-948d-a022930c5042">
            <ItemBlock>
              <Item>
                <ItemPara>For an Ambari Server host having Internet connectivity, Ambari sets the repository Base URL
                  for the latest patch release for the HDP Stack version. For an Ambari Server having NO Internet
                  connectivity, the repository Base URL defaults to the latest patch release version available at the
                  time of Ambari release.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>You can override the repository Base URL for the HDP Stack with an earlier patch release if
                  you want to install a specific patch release for a given HDP Stack version. For example, the HDP 2.1
                  Stack will default to the HDP 2.1 Stack patch release 7, or HDP-2.1.7. If you want to install HDP 2.1
                  Stack patch release 2, or HDP-2.1.2 instead, obtain the Base URL from the HDP Stack documentation,
                  then enter that location in Base URL.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>If you are using a local repository, see
                  <Xref InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Optional: Configure Ambari for Local
                    Repositories
                  </Xref>
                  for information about configuring a local repository location, then enter that location as the Base
                  URL instead of the default, public-hosted HDP Stack repositories.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <Figure xy:guid="c2481936-ca79-473f-8141-c9c6a3c0f206">
            <MediaObject xy:guid="0c7f44b1-67f5-4405-94b4-6070cc9dc135">
              <Renditions>
                <Web thumbWidth="50" uri="System Admin Guides/Ambari/170Install/AdvRepo170.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <CustomNote xy:guid="f3e3faae-f0b0-43af-9f04-582e3df9ce89">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="5092187b-cec7-40ef-b0d1-5e2ba911f022"/>
            <SimpleBlock>
              <RichText>The UI displays repository Base URLs based on Operating System Family (OS Family). Be sure to
                set the correct OS Family based on the Operating System you are running. The following table maps the OS
                Family to the Operating Systems.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <Table align="" border="false" width="100" xy:guid="e52fb3bc-cd6b-47c2-b160-0c5940a07970">
            <TblTitle>Operating Systems mapped to each OS Family</TblTitle>
            <TblGroup>
              <TblCol width="25"/>
              <TblCol width="75"/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>
                      <Emph>OS Family</Emph>
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>
                      <Emph>Operating Systems</Emph>
                    </RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>redhat6</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Red Hat 6, CentOS 6, Oracle Linux 6</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>suse11</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>SUSE Linux Enterprise Server 11</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>ubuntu12</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ubuntu Precise 12.04</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>redhat5</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Red Hat 5, CentOS 5, Oracle Linux 5</RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="2db43b02-dfa3-41d2-8119-477b0f155ed6">
        <Title>Install Options</Title>
        <ParaBlock xy:guid="ed94f0da-b735-4fdf-b61e-982b9c68f1c4">
          <RichText>In order to build up the cluster, the install wizard prompts you for general information about how
            you want to set it up. You need to supply the FQDN of each of your hosts. The wizard also needs to access
            the private key file you created inÂ <Xref InsideTargetRef="88addfc9-ec6c-4dcb-b2dd-75b4331d2809">Set Up
              Password-less SSH</Xref>. Using the host names and key file information, the wizard can locate, access,
            and interact securely with all hosts in the cluster.
          </RichText>
          <List ListMarker="Numeric" xy:guid="09c12c8d-a47e-4a56-896d-3da6bc848f35">
            <ItemBlock>
              <Item>
                <ItemPara>Use the
                  <InLineTypeThis>Target Hosts</InLineTypeThis>
                  text box to enter your list of host names, one per line. You can use ranges inside brackets to
                  indicate larger sets of hosts. For example, for host01.domain through host10.domain use
                  <InLineCode>host[01-10].domain</InLineCode>
                </ItemPara>
                <CustomNote xy:guid="e47c5570-91d2-4c9c-8af4-5779619dd17c">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="477b875a-a2b4-46e4-825a-cea13bb08e51"/>
                  <SimpleBlock>
                    <RichText>If you are deploying on EC2, use the
                      <Emph>internal Private DNS</Emph>
                      host names.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>If you want to let Ambari automatically install the Ambari Agent on all your hosts using SSH,
                  select
                  <InLineMenuSelection>Provide your SSH Private Key</InLineMenuSelection>
                  and either use the
                  <InLineTypeThis>Choose File</InLineTypeThis>
                  button in the
                  <InLineTypeThis>Host Registration Information</InLineTypeThis>
                  section to find the private key file that matches the public key you installed earlier on all your
                  hosts or cut and paste the key into the text box manually.
                </ItemPara>
                <CustomNote xy:guid="5679bb62-2a55-4625-b3e4-7a07ddc691ce">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="94b2d2fd-74fb-4eb5-be76-c37ac7e59700"/>
                  <SimpleBlock>
                    <RichText>If you are using IE 9, the
                      <Emph>Choose File</Emph>
                      button may not appear. Use the text box to cut and paste your private key manually.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <RichText>Fill in the user name for the SSH key you have selected. If you do not want to use
                  <InLineCode>root</InLineCode>
                  , you must provide the user name for an account that can execute
                  <InLineCode>sudo</InLineCode>
                  without entering a password.
                </RichText>
              </Item>
              <Item>
                <ItemPara>If you do not want Ambari to automatically install the Ambari Agents, select<InLineTypeThis>
                  Perform manual registration</InLineTypeThis>. For further information, see<Xref
                        InsideTargetRef="ce168039-28fd-49cd-ba4b-455ce949b471">Installing Ambari Agents Manually</Xref>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Choose
                  <InLineTypeThis>Register and Confirm</InLineTypeThis>
                  to continue.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="22984912-bf44-4b20-a804-8eed2033a8fb">
        <Title>Confirm Hosts</Title>
        <ParaBlock xy:guid="a28d1075-551c-4c6b-b09a-2fad4ceb60c1">
          <RichText>
            <InLineTypeThis>Confirm Hosts</InLineTypeThis>
            prompts you to confirm that Ambari has located the correct hosts for your cluster and to check those hosts
            to make sure they have the correct directories, packages, and processes required to continue the install.
          </RichText>
          <RichText>If any hosts were selected in error, you can remove them by selecting the appropriate checkboxes and
            clicking the grey
            <InLineMenuSelection>Remove</InLineMenuSelection>
            <InLineTypeThis>Selected</InLineTypeThis>
            button. To remove a single host, click the small white
            <InLineTypeThis>Remove</InLineTypeThis>
            <Emph></Emph>
            button in the Action column.
          </RichText>
          <RichText>At the bottom of the screen, you may notice a yellow box that indicates some warnings were
            encountered during the check process. For example, your host may have already had a copy of
            <InLineCode>wget</InLineCode>
            or<InLineCode>curl</InLineCode>. Choose
            <InLineTypeThis>Click here to see the warnings</InLineTypeThis>
            <InLineMenuSelection></InLineMenuSelection>to see a list of what was checked and what caused the warning.
            The warnings page also provides access to a python script that can help you clear any issues you may
            encounter and let you run<InLineTypeThis>Rerun Checks</InLineTypeThis>.
          </RichText>
          <CustomNote xy:guid="3107ed77-63b0-47eb-afe5-d950557fd695">
            <Icon name="important" thumbWidth="50" uri="Icons/Note.png" xy:guid="aeb4236c-2023-4c0d-b540-3b7878513d37"/>
            <SimpleBlock>
              <RichText>If you are deploying HDP using Ambari 1.4 or later on RHEL 6.5 you will likely see Ambari Agents
                fail to register with Ambari Server during the âConfirm Hostsâ step in the Cluster Install wizard. Click
                the âFailedâ link on the Wizard page to display the Agent logs. The following log entry indicates the
                SSL connection between the Agent and Server failed during registration:
                <InLineApplicationPrompt>INFO 2014-04-02 04:25:22,669 NetUtil.py:55
                  - Failed to connect to https://&lt;ambari-server&gt;:8440/cert/ca due to [Errno 1] _ssl.c:492:
                  error:100AE081:elliptic curve routines:EC_GROUP_new_by_curve_name:unknown group
                </InLineApplicationPrompt>
              </RichText>
              <RichText>
                For more information about this issue, see the<Xref
                      InsideTargetRef="51adbb3c-07ba-479f-82e9-7eb9f0e2fe02">Ambari Troubleshooting Guide</Xref>.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>When you are satisfied with the list of hosts, choose<InLineTypeThis>Next</InLineTypeThis>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="97d6e6ed-5f78-43ee-9b30-5a87e7bb37f4">
        <Title>Choose Services</Title>
        <ParaBlock xy:guid="a3525a9f-4e6d-4024-a059-2b21257aff46">
          <RichText>Based on the Stack chosen during Select Stack, you are presented with the choice of Services to
            install into the cluster. HDP Stack comprises many services. You may choose to install any other available
            services now, or to
            <Xref InsideTargetRef="19a49eb0-7d00-4f33-bb7b-ed805a5cd656">add services</Xref>
            later. The install wizard selects all available services for installation by default.
          </RichText>
          <List ListMarker="Numeric" xy:guid="76ecd3cd-0678-4307-89ba-3c0d03362063">
            <ItemBlock>
              <Item>
                <ItemPara>Choose
                  <InLineTypeThis>none</InLineTypeThis>
                  to clear all selections, or choose
                  <InLineTypeThis>all</InLineTypeThis>
                  to select all listed services.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Choose or clear individual checkboxes to define a set of services to install now.</ItemPara>
                <CustomNote xy:guid="96900b3c-d73a-4273-97dd-5beab1b43998">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ff155dae-35f4-4cc2-bc09-5ed9b69b3e6b"/>
                  <SimpleBlock>
                    <RichText>To use Ambari for monitoring your cluster, you must select
                      <InLineTypeThis>Nagios</InLineTypeThis>
                      and
                      <InLineTypeThis>Ganglia</InLineTypeThis>
                      <Emph>.</Emph>
                      Not selecting these services generates a warning message when you complete this section. If you
                      monitor your cluster using other tools, ignore the warning.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>After selecting the services to install now, choose<InLineTypeThis>Next</InLineTypeThis>.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="a7effb31-eab4-4ed4-a0a9-00e24aa8fa42">
        <Title>Assign Masters</Title>
        <ParaBlock xy:guid="c9aa3741-dcf8-42a8-a88d-7beeb6584aff">
          <RichText>The Ambari install wizard assigns the master components for selected services to appropriate hosts
            in your cluster and displays the assignments in Assign Masters. The left column shows services and current
            hosts. The right column shows current master component assignments by host, indicating the number of CPU
            cores and amount of RAM installed on each host.
          </RichText>
          <List ListMarker="Numeric" xy:guid="50a8cea5-17df-4d42-988f-893572e9c8ed">
            <ItemBlock>
              <Item>
                <ItemPara>To change the host assignment for a service, select a host name from the drop-down menu for
                  that service.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>To remove a ZooKeeper instance, click the green minus icon next to the host address you want
                  to remove.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>When you are satisfied with the assignments, choose<InLineTypeThis>Next</InLineTypeThis>.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="b4839e64-9f2f-4ee8-89c3-cc0d87322bb5">
        <Title>Assign Slaves and Clients</Title>
        <ParaBlock xy:guid="e9e85b01-6fdc-4fe7-8150-2741097d9c03">
          <RichText>The Ambari installation wizard assigns the slave components (DataNodes, NodeManagers, and
            RegionServers) to appropriate hosts in your cluster. It also attempts to select hosts for installing the
            appropriate set of clients.
          </RichText>
          <List ListMarker="Numeric" xy:guid="0f240f20-b03c-49b4-a685-310aaa996759">
            <ItemBlock>
              <Item>
                <ItemPara>Use
                  <Emph>all</Emph>
                  or
                  <Emph>none</Emph>
                  to select all of the hosts in the column or none of the hosts, respectively.
                </ItemPara>
                <RichText>If a host has a red asterisk next to it, that host is also running one or more master
                  components. Hover your mouse over the asterisk to see which master components are on that host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Fine-tune your selections by using the checkboxes next to specific hosts.</ItemPara>
                <CustomNote xy:guid="3ad2f706-a210-4667-9351-74397974c581">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="d663778b-ac9f-4f1c-b6cb-061629d15fd4"/>
                  <SimpleBlock>
                    <RichText>As an option you can start the HBase REST server manually after the install process is
                      complete. It can be started on any host that has the HBase Master or the Region Server installed.
                      If you attempt to start it on the same host as the Ambari server, however, you need to start it
                      with the -p option, as its default port is 8080 and that conflicts with the Ambari Web default
                      port.
                      <InLineTypeThis>/usr/lib/hbase/bin/hbase-daemon.sh start rest -p</InLineTypeThis>
                      <SyntaxArg>&lt;custom_port_number&gt;</SyntaxArg>
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>When you are satisfied with your assignments, choose<InLineTypeThis>Next</InLineTypeThis>.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="b3006969-a1ed-4a39-8fba-64a8295dbbd7">
        <Title>Customize Services</Title>
        <ParaBlock xy:guid="76a682d2-9220-4575-a9d8-b59b866f4588">
          <RichText>
            <InLineTypeThis>Customize Services</InLineTypeThis>
            presents you with a set of tabs that let you manage configuration settings for HDP components. The wizard
            sets reasonable defaults for each of the options here, but you can use this set of tabs to tweak those
            settings. You are strongly encouraged to do so, as your requirements may be slightly different. Pay
            particular attention to the directories suggested by the installer.
          </RichText>
          <CustomNote xy:guid="f242722f-d817-4bc5-884d-9210f60d457b">
            <Icon thumbWidth="50" uri="Icons/Warning.png" xy:guid="f619a35f-e24d-4928-96d6-a575298b0519"/>
            <SimpleBlock>
              <RichText>To prevent out-of-memory errors during the install, at the Customize Services step in the
                Cluster Install wizard browse to<InLineCode>Hive &gt; hive-site.xml</InLineCode>, then modify the
                following configuration settings:
              </RichText>
              <Table align="" border="true" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                     xy:guid="44b0b736-9763-45cf-b7a5-098ed0bdad90">
                <TblGroup>
                  <TblCol width="23"/>
                  <TblCol width="27"/>
                  <TblCol width=""/>
                  <TblCol width=""/>
                  <TblHeader>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Property Name</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Purpose</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Default Value</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Required Value</RichText>
                      </Cell>
                    </TableRow>
                  </TblHeader>
                  <TblBody>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>fs.hdfs.impl.disable.cache</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Disable HDFS filesystem cache</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>false</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>true</RichText>
                      </Cell>
                    </TableRow>
                    <TableRow>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>fs.file.impl.disable.cache</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>Disable local filesystem cache</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>false</RichText>
                      </Cell>
                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                        <RichText>true</RichText>
                      </Cell>
                    </TableRow>
                  </TblBody>
                  <TblFooter/>
                </TblGroup>
              </Table>
            </SimpleBlock>
          </CustomNote>
          <CustomNote xy:guid="a9fdfc76-0e12-40c6-a41a-af15d7bd3584">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ba09bdd5-7e73-431f-b781-96ce0095b786"/>
            <SimpleBlock>
              <RichText>For the
                <InLineCode>HDFSServicesConfigsGeneral</InLineCode>
                configuration property, make sure to enter an integer value, in bytes, that sets the HDFS maximum edit
                log size for checkpointing. A typical value is 500000000.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>Hover your cursor over each of the properties to see a brief description of what it does. The number
            of tabs you see is based on the type of installation you have decided to do. A typical installation has at
            least ten groups of configuration properties and other related options, such as database settings for
            Hive/HCat and Oozie, admin name/password, and alert email for Nagios.
          </RichText>
          <RichText>The install wizard sets reasonable defaults for all properties. You must provide database passwords
            for the Hive, Nagios, and Oozie services, the Master Secret for Knox, and a valid email address to which
            system alerts will be sent. Select each service that displays a number highlighted red. Then, fill in the
            required field on the Service Config tab. Repeat this until the red flags disappear.

            For example, Choose Hive. Expand the Hive Metastore section, if necessary. In Database Password, provide a
            password, then retype to confirm it, in the fields marked red and "This is required."
          </RichText>
          <RichText>For more information about customizing specific services for a particular HDP Stack, see<Href
                  UrlTarget="http://docs.hortonworks.com/HDPDocuments/Ambari-1.7.0.0/Ambari_Reference_Guide_v170/index.html#Item2.1">
            Customizing HDP Services</Href>.

            After you complete Customizing Services, choose<InLineTypeThis>Next</InLineTypeThis>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="f69250a6-a5c4-41a9-a1ce-ef5aa2f91b3b">
        <Title>Review</Title>
        <ParaBlock xy:guid="cb99fa5d-dfb7-4548-9a02-a63f8746d10d">
          <RichText>The assignments you have made are displayed. Check to make sure everything is correct. If you need
            to make changes, use the left navigation bar to return to the appropriate screen.
          </RichText>
          <RichText>To print your information for later reference, choose<InLineTypeThis>Print</InLineTypeThis>.
          </RichText>
          <RichText>When you are satisfied with your choices, choose<InLineTypeThis>Deploy</InLineTypeThis>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="ba4db19d-f9b4-4d40-99f0-dc01564f4b21">
        <Title>Install, Start and Test</Title>
        <ParaBlock xy:guid="f5c55d05-22c6-4fe8-bd03-5d2c309825e7">
          <RichText>The progress of the install displays on the screen. Ambari installs, starts, and runs a simple test
            on each component. Overall status of the process displays in progress bar at the top of the screen and
            host-by-host status displays in the main section. Do not refresh your browser during this process.
            Refreshing the browser may interrupt the progress indicators.
          </RichText>
          <RichText>To see specific information on what tasks have been completed per host, click the link in the
            <InLineTypeThis>Message</InLineTypeThis>
            column for the appropriate host. In the
            <InLineMenuSelection>Tasks</InLineMenuSelection>
            pop-up, click the individual task to see the related log files. You can select filter conditions by using
            the
            <InLineTypeThis>Show</InLineTypeThis>
            drop-down list. To see a larger version of the log contents, click the
            <InLineTypeThis>Open</InLineTypeThis>
            icon or to copy the contents to the clipboard, use the
            <InLineTypeThis>Copy</InLineTypeThis>
            icon.
          </RichText>
          <RichText>When
            <InLineApplicationPrompt>Successfully installed and started the services</InLineApplicationPrompt>
            appears, choose<InLineTypeThis>Next</InLineTypeThis>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="3e303bad-752a-4f5d-9616-be9542881920">
        <Title>Complete</Title>
        <ParaBlock xy:guid="00221245-0981-454b-8ceb-28ee93e332c8">
          <RichText>The Summary page provides you a summary list of the accomplished tasks. Choose<InLineTypeThis>
            Complete</InLineTypeThis>. Ambari Web GUI displays.
          </RichText>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="6197167c-3143-443d-81d9-7788726f9b1d">
      <Title>Upgrading Ambari</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="e13b71e3-2eb1-4625-a2ef-68f868765a79">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="f4154574-2761-4885-acec-2ddb8faf3b15">
          <RichText>This section describes how to upgrade Ambari Server to 1.7.0, including how to upgrade the HDP stack
            to 2.2 and how to upgrade an older Ambari Server version to 1.2.5.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="57af99ac-4d29-4d2f-ab59-49bd0de14c97">
        <Title>Upgrading Ambari Server to 1.7.0</Title>
        <ParaBlock xy:guid="7a3d9250-85bc-4088-8b1e-e22e4254a7cf">
          <RichText>This procedure upgrades Ambari Server from version 1.2.5 and above to 1.7.0. If your current Ambari
            Server version is 1.2.4 or below, you must
            <Xref InsideTargetRef="3a224c6c-b15e-4318-b71e-68db9103ec5d">upgrade the Ambari Server version to 1.2.5
            </Xref>
            before upgrading to version 1.7.0. Upgrading the Ambari Server version does not change the underlying Hadoop
            Stack.
          </RichText>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="934a44e1-7c0b-408e-b121-5a0c866864a2">
            <Icon thumbWidth="50" uri="Icons/Important.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="be860b94-e353-4d83-b3b8-4fb062ebd079"/>
            <SimpleBlock>
              <RichText>Before Upgrading Ambari to 1.7.0, make sure that you perform the following actions:</RichText>
              <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="789680ad-9e01-48ca-bbb3-1dd019cff8ce">
                <ItemBlock>
                  <Item>
                    <ItemPara>You
                      <Emph>
                        <Italic>must</Italic>
                      </Emph>
                      have root, administrative, or root-equivalent authorization on the Ambari server host and all
                      servers in the cluster.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>You
                      <Emph>
                        <Italic>must</Italic>
                      </Emph>
                      know the location of the Nagios server before you begin the upgrade process.
                      For example, to find the Nagios server using Ambari 1.6.0 or higher:
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Browse
                            <InLineTypeThis>Ambari Web</InLineTypeThis>
                            &gt;
                            <InLineTypeThis>Services</InLineTypeThis>
                            &gt;
                            <InLineTypeThis>Summary</InLineTypeThis>
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Select the
                            <InLineTypeThis>Nagios Server</InLineTypeThis>
                            link
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Scroll down to view summary information about the Nagios server host</ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>If you are using Ambari with Oracle, you
                      <Emph>
                        <Italic>must</Italic>
                      </Emph>
                      create an Ambari user in the Oracle database and grant that user all required permissions.
                      Specifically, you must alter the Ambari database user and grant the SEQUENCE permission.
                      For more information about creating users and granting required user permissions, see<Xref
                              InsideTargetRef="e9b1e9fd-5904-46a7-a36c-3d3b96925f6a">Using Ambari with Oracle</Xref>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>If you plan to upgrade your Stack, back up the configuration properties for your current
                      Hadoop services.
                      For more information about upgrading the Stack and locating the configuration files for your
                      current services, see one of the following topics:
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>
                            <Xref InsideTargetRef="c30073a7-f386-4d8a-9619-8dde14e3e4d1">Upgrade from HDP 2.1 to HDP
                              2.2, Getting Ready to Upgrade
                            </Xref>
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Xref InsideTargetRef="24d144de-9940-47d5-a9ea-e4480d3ddb02">Upgrade from HDP 2.0 to HDP
                              2.2, Getting Ready to Upgrade
                            </Xref>
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Xref InsideTargetRef="2c87cbec-f2e9-4c82-96c6-de295bbd589f">Upgrade from HDP 1.3 to HDP
                              2.2, Getting Ready to Upgrade
                            </Xref>
                          </ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </SimpleBlock>
          </CustomNote>
          <List ListMarker="Numeric" StartAtNumber="" xy:guid="9f0234f4-843d-483c-af19-a0bcf557f679">
            <ItemBlock>
              <Item>
                <ItemPara>Stop the Nagios and Ganglia services.
                  In<InLineMenuSelection>Ambari Web</InLineMenuSelection>:
                </ItemPara>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Browse to
                        <InLineMenuSelection>Services</InLineMenuSelection>
                        and select the Nagios service.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineMenuSelection>Service Actions</InLineMenuSelection>
                        to stop the Nagios service.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Wait for the Nagios service to stop.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Browse to
                        <InLineMenuSelection>Services</InLineMenuSelection>
                        and select the Ganglia service.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineMenuSelection>Service Actions</InLineMenuSelection>
                        to stop the Ganglia service.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Wait for the Ganglia service to stop.</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Stop the Ambari Server. On the Ambari Server host,</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server stop</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Stop all Ambari Agents. On each Ambari Agent host,</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent stop</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Fetch the new Ambari repo using
                  <InLineCode>wget</InLineCode>
                  and replace the old repository file with the new repository file on all hosts in your cluster.
                </ItemPara>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="d35c7f99-881b-499f-ac40-fd118b61e9f0">
                  <Icon thumbWidth="50" uri="Icons/Important.png"
                        xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="f234033e-a538-4029-8544-f9c946bb1f1d"/>
                  <SimpleBlock>
                    <RichText>Check your current directory before you download the new repository file to make sure that
                      there are no previous versions of the ambari.repo file. If you do not, and a previous version
                      exists, the new download will be saved with a numeric extension, such as ambari.repo.1. Make sure
                      that the version you copy is the new version.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <RichText>
                  Select the repository appropriate for your environment from the following list:
                </RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>
                        <Emph>For RHEL/CentOS 6/Oracle Linux 6:</Emph>
                      </ItemPara>
                      <Code>wget -nv http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo
                        -O /etc/yum.repos.d/ambari.repo
                      </Code>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Emph>For SLES 11:</Emph>
                      </ItemPara>
                      <Code>wget -nv http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                        /etc/zypp/repos.d/ambari.repo
                      </Code>
                    </Item>
                    <Item>
                      <ItemPara>For Ubuntu 12:</ItemPara>
                      <Code>wget -nv http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list
                        -O /etc/apt/sources/list.d/ambari.list
                      </Code>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Emph>For RHEL/CentOS 5/Oracle Linux 5:</Emph>
                        (DEPRECATED)
                      </ItemPara>
                      <Code>wget -nv http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo
                        -O /etc/yum.repos.d/ambari.repo
                      </Code>
                    </Item>
                  </ItemBlock>
                </SubList>
                <CustomNote xy:guid="74e608db-c6c2-4a2b-bdb6-348a9d2e3f03">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="9bae9c05-a403-44d7-845b-23a56cee9f19"/>
                  <SimpleBlock>
                    <RichText>If your cluster does not have access to the Internet, set up a local repository with this
                      data before you continue. See
                      <Xref InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Configure the Local Repositories
                      </Xref>
                      for more information.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Upgrade Ambari Server.</ItemPara>
                <CustomNote xy:guid="1d63eee6-785f-4a81-8337-30b5f580ecdc">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="991ee892-5180-47a3-9fea-cd4f166594bc"/>
                  <SimpleBlock>
                    <RichText>Ambari Server does not automatically turn off<InLineCode>iptables</InLineCode>. Check that
                      your installation setup does not depend on
                      <InLineMenuSelection>iptables</InLineMenuSelection>
                      being disabled. After upgrading the server, you must either disable
                      <InLineMenuSelection>iptables</InLineMenuSelection>
                      manually or make sure that you have appropriate ports available on all cluster hosts. For more
                      information about ports, see<Xref InsideTargetRef="85947452-af53-46f1-96fa-133675313860">
                        Configuring Network Port Numbers</Xref>.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <RichText>At the Ambari Server host:</RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>
                        <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>yum clean all
                          yum upgrade ambari-server ambari-log4j
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Emph>For SLES:</Emph>
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper clean
                          zypper up ambari-server ambari-log4j
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Emph>For Ubuntu:</Emph>
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-get clean all
                          apt-get install ambari-server ambari-log4j
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Check for upgrade success by noting progress during the Ambari server installation process you
                  started in Step 5.
                </ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>As the process runs, the console displays output similar, although not identical, to the
                        following:
                      </ItemPara>
                      <Code>Setting up Upgrade Process
                        Resolving Dependencies
                        --&gt; Running transaction check
                        ---&gt; Package ambari-server.x86_64 0:1.2.2.3-1 will be updated
                        ---&gt; Package ambari-server.x86_64 0:1.2.2.4-1 will be updated ...
                        ---&gt; Package ambari-server.x86_64 0:1.2.2.5-1 will be an update ...
                      </Code>
                    </Item>
                    <Item>
                      <ItemPara>If the upgrade fails, the console displays output similar to the following:</ItemPara>
                      <Code>Setting up Upgrade Process
                        No Packages marked for Update
                      </Code>
                    </Item>
                    <Item>
                      <ItemPara>A successful upgrade displays the following output:</ItemPara>
                      <Code>Updated: ambari-log4j.noarch 0:1.7.0.111-1 ambari-server.noarch 0:1.7.0-111 Complete!</Code>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Upgrade the Ambari Server schema.</ItemPara>
                <RichText>On the Ambari Server host:
                  <InLineTypeThis>
                    ambari-server upgrade
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Upgrade the Ambari Agent on all hosts.</ItemPara>
                <RichText>
                  At each Ambari Agent host:
                </RichText>
                <SubList ListMarker="NoBullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>
                        <Emph>For RHEL/CentOS/Oracle Linux:</Emph>
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>yum upgrade ambari-agent ambari-log4j</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Emph>For SLES:</Emph>
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper up ambari-agent ambari-log4j</InLineTypeThis>
                      </RichText>
                      <CustomNote xy:guid="ad86a53a-c504-412b-ac96-af87adf07689">
                        <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="723266a9-4fc5-4cc5-9776-e5a35d097d83"/>
                        <SimpleBlock>
                          <RichText>Ignore the warning that begins with "There are some running programs that use files
                            deleted by recent upgrade".
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>
                        <Emph>For Ubuntu:</Emph>
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-get update
                          apt-get install ambari-agent ambari-log4j
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>On each Agent host, check for a file named<InLineCode>/etc/ambari-agent/conf.save</InLineCode>
                  . If that folder exists, rename it back to
                  <InLineTypeThis>/etc/ambari-agent</InLineTypeThis>
                  <InLineCode>/conf</InLineCode>.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>mv /etc/ambari-agent/conf.save /etc/ambari-agent/conf</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>After the upgrade process completes, check each host to make sure the new 1.7.0 files have
                  been installed:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>rpm -qa | grep ambari</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the Ambari Server. At the Ambari Server host,</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server start</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the Ambari Agents on all hosts. At each Ambari Agent host,</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent start</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Open Ambari Web.
                </ItemPara>
                <RichText>Point your browser to http://&lt;your.ambari.server&gt;:8080

                  where &lt;your.ambari.server&gt; is the name of your ambari server host. For example,
                  c6401.ambari.apache.org.
                </RichText>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="1c4da3ee-5321-4cd0-bf3a-408003a86e31">
                  <Icon thumbWidth="50" uri="Icons/Important.png"
                        xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="c48fc814-0c5e-4175-8fdc-932d59a8deac"/>
                  <SimpleBlock>
                    <RichText>Refresh your browser so that it loads the new version of the Ambari Web code. If you have
                      problems, clear your browser cache manually, then restart Ambari Server.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Log in, using the Ambari administrator credentials that you have set up.</ItemPara>
                <RichText>
                  For example, the default name/password is<InLineCode>admin/admin</InLineCode>.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the Nagios and Ganglia services.</ItemPara>
                <RichText>
                  In Ambari Web,
                </RichText>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Browse to
                        <InLineMenuSelection>Services</InLineMenuSelection>
                        and select each service.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Use
                        <InLineMenuSelection>Service Actions</InLineMenuSelection>
                        to start the service.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>If you have customized logging properties, you will see a Restart indicator next to each
                  service name after upgrading to Ambari 1.7.0.
                </ItemPara>
                <CustomNote xy:guid="c80facae-dfca-4718-81ee-b76eb735660b">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="18dcacab-e309-428a-a1de-4ac8e7bbb63a"/>
                  <SimpleBlock>
                    <RichText>Restarting a service pushes the configuration properties displayed in
                      <InLineMenuSelection>Custom log4j.properties</InLineMenuSelection>
                      to each host running components for that service.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <RichText>
                  To preserve any custom logging properties after upgrading, for each service:
                </RichText>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Replace default logging properties with your custom logging properties, using
                        <InLineMenuSelection>Service Configs &gt; Custom
                          log4j.properties</InLineMenuSelection>.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Restart all components in any services for which you have customized logging
                        properties.
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Review the HDP-UTILS repository Base URL setting.</ItemPara>
                <CustomNote xy:guid="6bc82d19-8cb8-4cae-a119-79f6bfeaf270">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ea2b4b84-050c-42ef-b0ed-51481025afb6"/>
                  <SimpleBlock>
                    <RichText>As of Ambari 1.7.0, the HDP-UTILS repository Base URL is no longer set in the ambari.repo
                      file. Browse to
                      <InLineTypeThis>Ambari Web</InLineTypeThis>
                      &gt;
                      <InLineTypeThis>Admin</InLineTypeThis>
                      &gt;<InLineTypeThis>Repositories</InLineTypeThis>, and confirm the value of the HDP-UTILS
                      repository Base URL is correct for your environment. If you are using a local repository for
                      HDP-UTILS, be sure to confirm the Base URL is correct for your locally hosted HDP-UTILS
                      repository.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Review your Ambari LDAP authentication settings.</ItemPara>
                <RichText>
                  If you have configured Ambari for LDAP authentication, you must re-run "ambari-server setup-ldap". For
                  further information, see<Xref InsideTargetRef="b810db92-97de-4d4e-a905-239e2b8a2a04">Set Up LDAP or
                  Active Directory Authentication</Xref>.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="c30073a7-f386-4d8a-9619-8dde14e3e4d1">
        <Title>Upgrading the HDP Stack from 2.1 to 2.2</Title>
        <ParaBlock xy:guid="44dc87f8-efd6-4f49-921a-978522bb8157">
          <RichText>The HDP Stack is the coordinated set of Hadoop components that you have installed on hosts in your
            cluster. Your set of Hadoop components and hosts is unique to your cluster. Before upgrading the Stack on
            your cluster, review all Hadoop services and hosts in your cluster. For example, use the Hosts and Services
            views in Ambari Web, which summarize and list the components installed on each Ambari host, to determine the
            components installed on each host. For more information about using Ambari to view components in your
            cluster, see<Xref InsideTargetRef="c4a195fa-6eec-41a3-a699-14e950d7893b">Working with Hosts</Xref>, and<Xref
                    InsideTargetRef="9cb21557-3948-4efa-b3cb-1c65f5b0ad31">Viewing Components on a Host</Xref>.

            Upgrading the HDP Stack is a three-step procedure:
          </RichText>
          <List ListMarker="Numeric" xy:guid="3354d129-f226-4cd2-88fa-15e4a50961ad">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="322bc47c-0c63-4ec5-94a8-44cda871c440">Prepare the 2.1 Stack for Upgrade</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5f38074c-4647-4ddf-9b62-9f77ff25e7db">Upgrade the 2.1 Stack to 2.2</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="dc97be02-1c3a-4a22-ac35-11113b3ec4a5">Complete the Upgrade of the 2.1 Stack to
                    2.2
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="9650b445-51ae-4b37-a063-fee9c8476bc9">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="78e281b7-8ac1-450d-9772-cbb570ae1624"/>
            <SimpleBlock>
              <RichText>If you plan to<Xref InsideTargetRef="938c5120-aa38-4cc6-afc7-b7c18ce1f239">upgrade your existing
                JDK</Xref>, do so after upgrading Ambari, before upgrading the Stack. The upgrade steps require that you
                remove HDP v2.1 components and install HDP v2.2 components.

                As noted in that section, you should remove and install on each host, only the components on each host
                that you want to run on the HDP 2.2 stack. For example, if you want to run Storm or Falcon components on
                the HDP 2.2 stack, you will install those components and then configure their properties during the
                upgrade procedure.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
        <ParaBlock xy:guid="7a62bc2f-c224-44b5-81d4-ca7e63333db7">
          <RichText>In preparation for future HDP 2.2 releases to support rolling upgrades, the HDP RPM package version
            naming convention has changed to include the HDP 2.2 product version in file and directory names. HDP 2.2
            marks the first release where HDP rpms, debs, and directories contain versions in the names to permit
            side-by-side installations of later HDP releases. To transition between previous releases and HDP 2.2,
            Hortonworks provides hdp-select, a script that symlinks your directories to
            <InLineCode>hdp/current</InLineCode>
            and lets you maintain using the same binary and configuration paths that you were using before.

            The following instructions have you remove your older version HDP components, install hdp-select, and
            install HDP 2.2 components to prepare for rolling upgrade.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="322bc47c-0c63-4ec5-94a8-44cda871c440">
          <Title>Prepare the 2.1 Stack for Upgrade</Title>
          <ParaBlock xy:guid="0e3098a6-c835-4ae7-b610-9bb34511d56a">
            <RichText>To prepare for upgrading the HDP Stack, perform the following tasks:</RichText>
            <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                  xy:guid="08dcd439-2674-4aa6-bf50-0cb1dd05daeb">
              <ItemBlock>
                <Item>
                  <ItemPara>Disable Security.</ItemPara>
                  <CustomNote xy:guid="7d0939c5-f837-4633-9c35-6c6331a70027">
                    <Icon thumbWidth="50" uri="Icons/Important.png" xy:guid="661cf7fd-8998-4769-b348-a0cdefecaebe"/>
                    <SimpleBlock>
                      <RichText>If your Stack has Kerberos Security turned on, turn it off before performing the
                        upgrade. On<InLineTypeThis>Ambari Web UI</InLineTypeThis>&gt;
                        <InLineTypeThis>Admin</InLineTypeThis>
                        &gt;<InLineTypeThis>Security</InLineTypeThis>,<InLineTypeThis></InLineTypeThis>click
                        <InLineTypeThis>Disable Security</InLineTypeThis>. You can turn Kerberos Security on again after
                        performing the upgrade.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Checkpoint user metadata and capture the HDFS operational state.</ItemPara>
                  <RichText>

                    This step supports rollback and restore of the original state of HDFS data, if necessary.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Backup Hive and Oozie metastore databases.
                  </ItemPara>
                  <RichText>
                    This step supports rollback and restore of the original state of Hive and Oozie data, if necessary.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Stop all HDP and Ambari services.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Make sure to finish all current jobs running on the system before upgrading the stack.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                        xy:guid="77ddbdcd-ae06-4285-8417-0967a2595f68">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="34abd454-a648-4b46-8007-8a7455c3e4f5"/>
              <SimpleBlock>
                <RichText>Libraries will change during the upgrade. Any jobs remaining active that use the older version
                  libraries will probably fail during the upgrade.
                </RichText>
              </SimpleBlock>
            </CustomNote>
          </ParaBlock>
          <ParaBlock xy:guid="a8751125-564a-4b17-98cd-54ecf7a28e0c">
            <List ListMarker="Numeric" xy:guid="b404260f-9fd9-43b2-bc66-845fe33884bf">
              <ItemBlock>
                <Item>
                  <ItemPara>Use
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Service Actions</InLineTypeThis>
                    <InLineMenuSelection></InLineMenuSelection>to stop all services except HDFS and ZooKeeper.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop any client programs that access HDFS.</ItemPara>
                  <RichText>
                    Perform steps 3 through 8 on the NameNode host. In a highly-available NameNode configuration,
                    execute the following procedure on the primary NameNode.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="ce964009-ceb9-430d-b493-809f664f3fb8">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="dec6bd6d-41fd-4021-bd56-ead19d68cf0f"/>
                    <SimpleBlock>
                      <RichText>To locate the primary NameNode in an Ambari-managed HDP cluster, browse
                        <InLineTypeThis>Ambari Web</InLineTypeThis>
                        &gt;
                        <InLineTypeThis>Services</InLineTypeThis>
                        &gt;<InLineTypeThis>HDFS</InLineTypeThis>. In Summary, click<InLineTypeThis>
                          NameNode</InLineTypeThis>.
                        <InLineTypeThis>Hosts</InLineTypeThis>
                        &gt;
                        <InLineTypeThis>Summary</InLineTypeThis>
                        displays the host name FQDN.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>If HDFS is in a non-finalized state from a prior upgrade operation, you must finalize HDFS
                    before upgrading further. Finalizing HDFS will remove all links to the metadata of the prior HDFS
                    version. Do this only if you do not want to rollback to that prior HDFS version.
                  </ItemPara>
                  <RichText>
                    On the NameNode host, as the HDFS user,

                    <InLineTypeThis>su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>
                      hdfs dfsadmin -finalizeUpgrade
                    </InLineTypeThis>
                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Check the NameNode directory to ensure that there is no snapshot of any prior HDFS
                    upgrade.
                  </ItemPara>
                  <RichText>
                    Specifically, using<InLineTypeThis>Ambari Web &gt; HDFS &gt; Configs &gt; NameNode</InLineTypeThis>,
                    examine the
                    <InLineCode>&lt;dfs.namenode.name.dir&gt;</InLineCode>
                    or the
                    <InLineCode>&lt;dfs.name.dir&gt;</InLineCode>
                    directory in the NameNode Directories property. Make sure that only a "\current" directory and no
                    "\previous" directory exists on the NameNode host.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Create the following logs and other files.</ItemPara>
                  <RichText>
                    Creating these logs allows you to check the integrity of the file system, post-upgrade.

                    As the HDFS user,
                    <InLineTypeThis>
                      su -l
                    </InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;
                    </SyntaxArg>
                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Run
                          <InLineCode>fsck</InLineCode>
                          with the following flags and send the results to a log.
                        </ItemPara>
                        <RichText>
                          The resulting file contains a complete block map of the file system. You use this log later to
                          confirm the upgrade.
                        </RichText>
                        <RichText>
                          <InLineTypeThis>hdfs fsck / -files -blocks -locations &gt; dfs-old-fsck-1.log</InLineTypeThis>
                          <InLineApplicationPrompt></InLineApplicationPrompt>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Optional: Capture the complete namespace of the file system.</ItemPara>
                        <RichText>
                          The following command does a recursive listing of the root file system:
                        </RichText>
                        <RichText>
                          <InLineTypeThis>hadoop dfs -ls -R / &gt; dfs-old-lsr-1.log</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Create a list of all the DataNodes in the cluster.</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            hdfs dfsadmin -report &gt; dfs-old-report-1.log
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Optional: Copy all unrecoverable data stored in HDFS to a local file system or to a
                          backup instance of HDFS.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara><Emph>Save the namespace</Emph>.
                  </ItemPara>
                  <RichText>
                    You must be the HDFS service user to do this and you must put the cluster in Safe Mode.
                  </RichText>
                  <RichText>
                    <InLineTypeThis>hdfs dfsadmin -safemode enter
                      hdfs dfsadmin -saveNamespace
                    </InLineTypeThis>
                  </RichText>
                  <CustomNote xy:guid="0d108bec-70c6-494c-9b34-58ed9323dcf9">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="4f9025a4-7f6c-465b-9540-3058d66d3c08"/>
                    <SimpleBlock>
                      <RichText>In a highly-available NameNode configuration, the command
                        <InLineCode>hdfs dfsadmin -saveNamespace</InLineCode>
                        sets a checkpoint in the first NameNode specified in the configuration, in<InLineCode>
                          dfs.ha.namenodes.[nameservice ID]</InLineCode>. You can also use the dfsadmin
                        <InLineCode>-fs</InLineCode>
                        option to specify which NameNode to connect.

                        For example, to force a checkpoint in namenode 2:
                        <InLineTypeThis>
                          hdfs dfsadmin -fs hdfs://namenode2-hostname:namenode2-port -saveNamespace
                        </InLineTypeThis>
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Copy the checkpoint files located in
                    <SyntaxArg>&lt;dfs.name.dir/current&gt;</SyntaxArg>
                    into a backup directory.
                  </ItemPara>
                  <RichText>
                    Find the directory, using Ambari Web &gt; HDFS &gt; Configs &gt; NameNode &gt; NameNode Directories
                    on your primary NameNode host.
                  </RichText>
                  <CustomNote xy:guid="51045481-793e-4543-9bfa-8b3e708a743e">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="9f57718c-d08f-4c23-9bdb-44aec327da90"/>
                    <SimpleBlock>
                      <RichText>In a highly-available NameNode configuration, the location of the checkpoint depends on
                        where the saveNamespace command is sent, as defined in the preceding step.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Store the layoutVersion for the NameNode.</ItemPara>
                  <RichText>
                    Make a copy of the file at
                    <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                    <InLineCode>/current/VERSION</InLineCode>, where<SyntaxArg>&lt;dfs.name.dir&gt; </SyntaxArg>is the
                    value of the config parameter NameNode directories. This file will be used later to verify that the
                    layout version is upgraded.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Stop HDFS.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop ZooKeeper.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <SyntaxArg>&lt;service.name&gt;</SyntaxArg>
                    &gt;<InLineTypeThis>Summary</InLineTypeThis>, review each service and make sure that all services in
                    the cluster are completely stopped.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>At the Hive Metastore database host, stop the Hive metastore
                    <Emph>
                      <Italic>service</Italic>
                    </Emph>
                    , if you have not done so already.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="736e1a6b-3cce-4357-a28b-a0b3a7f0c3bb">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="954ead86-8bc2-4222-ba63-8a9bda998807"/>
                    <SimpleBlock>
                      <RichText>Make sure that the Hive metastore
                        <Emph>
                          <Italic>database</Italic>
                        </Emph>
                        is running. For more information about Administering the Hive metastore database, see the<Href
                                UrlTarget="https://cwiki.apache.org/confluence/display/Hive/AdminManual+MetastoreAdmin">
                          Hive Metastore Administrator documentation</Href>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>If you are upgrading Hive and Oozie, back up the Hive and Oozie metastore databases on the
                    Hive and Oozie database host machines, respectively.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="eb03b00d-775d-4b31-928a-862ee49e7f67">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="e8ddad64-5964-4545-b6da-fd1ec2cc8a2f"/>
                    <SimpleBlock>
                      <RichText>Make sure that your Hive database is updated to the minimum recommended version.

                        <Emph>If you are using Hive with MySQL, we recommend upgrading your MySQL database to version
                          5.6.21 before upgrading the HDP Stack to v2.2.
                        </Emph>
                        For specific information, see<Xref InsideTargetRef="f35b0203-6267-4533-9e88-652452ece5f5">
                          Database Requirements</Xref>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Optional - Back up the Hive Metastore database.</ItemPara>
                        <CustomNote xy:guid="37297252-4b9f-4544-a5e7-1284e1767870">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="437ad559-0f7c-4701-93bb-c21ff65af20b"/>
                          <SimpleBlock>
                            <RichText>These instructions are provided for your convenience. Please check your database
                              documentation for the latest back up instructions.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <Table align="" border="true" width="100" xy:guid="70121a66-3fca-4353-9e0a-49ee2bd3f476">
                          <TblTitle>Hive Metastore Database Backup and Restore</TblTitle>
                          <TblGroup>
                            <TblCol width="12"/>
                            <TblCol width="51"/>
                            <TblCol width="37"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Database Type</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Backup</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Restore</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>MySQL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysqldump
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: mysqldump hive &gt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysql
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: mysql hive &lt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Postgres</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    pg_dump
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres pg_dump hive &gt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    psql
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres psql hive &lt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Oracle</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Connect to the Oracle database using sqlplus
                                    export the database: exp username/password@database full=yes file=output_file.dmp
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Import the database: imp username/password@database ile=input_file.dmp
                                  </RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Optional - Back up the Oozie Metastore database.</ItemPara>
                        <CustomNote xy:guid="511dcb55-45e4-48fd-bcea-edd71982863e">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="eb6432bd-c84d-4585-bcfc-6235d76f0a34"/>
                          <SimpleBlock>
                            <RichText>These instructions are provided for your convenience. Please check your database
                              documentation for the latest back up instructions.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <Table align="" border="true" width="100" xy:guid="1698928b-beac-4aad-889c-52792387d99b">
                          <TblTitle>Oozie Metastore Database Backup and Restore</TblTitle>
                          <TblGroup>
                            <TblCol width="13"/>
                            <TblCol width="52"/>
                            <TblCol width="35"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Database Type</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Backup</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Restore</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>MySQL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysqldump
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: mysqldump oozie &gt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysql
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: mysql oozie &lt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Postgres</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    pg_dump
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres pg_dump oozie &gt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    psql
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres psql oozie &lt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Backup Hue.
                    If you are using the embedded SQLite database, you must perform a backup of the database before you
                    upgrade Hue to prevent data loss. To make a backup copy of the database, stop Hue, then "dump" the
                    database content to a file, as follows:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>./etc/init.d/hue stop

                      su $HUE_USER
                      mkdir ~/hue_backup
                      cd /var/lib/hue
                      sqlite3 desktop.db .dump &gt; ~/hue_backup/desktop.bak

                    </InLineTypeThis>For other databases, follow your vendor-specific instructions to create a backup.
                    <InLineTypeThis></InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>On the Ambari Server host, stop Ambari Server and confirm that it is stopped.</ItemPara>
                  <RichText>
                    <InLineTypeThis>ambari-server stop</InLineTypeThis>
                    <InLineTypeThis>ambari-server status</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Stop all Ambari Agents.
                    On every host in your cluster known to Ambari,
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>ambari-agent stop</InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="5f38074c-4647-4ddf-9b62-9f77ff25e7db">
          <Title>Upgrade the 2.1 Stack to 2.2</Title>
          <ParaBlock xy:guid="633c6d76-2668-407e-aa2d-ea4308d9ed7e">
            <List ListMarker="Numeric" xy:guid="78db3fdd-ba2d-4e11-94c5-da12b3b59727">
              <ItemBlock>
                <Item>
                  <ItemPara>Upgrade the HDP repository on all hosts and replace the old repository file with the new
                    file:
                  </ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>
                          <Emph>For RHEL/CentOS/Oracle Linux 6:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/centos6/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/yum.repos.d/HDP.repo
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For SLES 11 SP3:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/zypp/repos.d/HDP.repo
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For SLES 11 SP1:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/sles11sp1/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/zypp/repos.d/HDP.repo
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For UBUNTU12:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/ubuntu1/2.x/GA/2.2.0.0/hdp.list -O
                          /etc/apt/sourceslist.d/HDP.list
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For RHEL/CentOS/Oracle Linux 5:</Emph>
                          (DEPRECATED)
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/centos5/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/yum.repos.d/HDP.repo
                        </Code>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="6e6b2e54-c08d-420e-8ae6-8bc795aa91bf">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="861d4652-12a0-4fb1-87f7-ece93ed8908d"/>
                    <SimpleBlock>
                      <RichText>Make sure to download the HDP.repo file under
                        <InLineCode>/etc/yum.repos.d</InLineCode>
                        on ALL hosts.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Update the Stack version in the Ambari Server database.</ItemPara>
                  <RichText>
                    On the Ambari Server host, use the following command to update the Stack version to HDP-2.2:
                  </RichText>
                  <RichText>
                    <InLineTypeThis>ambari-server upgradestack HDP-2.2</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Back up the files in following directories on the Oozie server host and make sure that all
                    files, including *site.xml files are copied.
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>mkdir oozie-conf-bak
                      cp -R /etc/oozie/conf/* oozie-conf-bak
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Remove the old oozie directories on all Oozie server and client hosts</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>
                          <InLineTypeThis>rm -rf /etc/oozie/conf</InLineTypeThis>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineTypeThis>rm -rf /usr/lib/oozie/</InLineTypeThis>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineTypeThis>rm -rf /var/lib/oozie/</InLineTypeThis>
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Upgrade the Stack on all Ambari Agent hosts.</ItemPara>
                  <CustomNote xy:guid="fad3dd2c-1f91-4969-abbd-798b2c6a4e5f">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="09d91f27-3232-4f6c-9309-ef22e453de93"/>
                    <SimpleBlock>
                      <RichText>For each host, identify the HDP components installed on that host. Use Ambari Web, as
                        described<Xref InsideTargetRef="9cb21557-3948-4efa-b3cb-1c65f5b0ad31">here</Xref>, to view
                        components on each host in your cluster. Based on the HDP components installed, edit the
                        following upgrade commands for each host to upgrade only those components residing on that host.

                        For example, if you know that a host has
                        <Emph>
                          <Italic>no</Italic>
                        </Emph>
                        HBase service or client packages installed, then you can edit the command to
                        <Emph>
                          <Italic>not</Italic>
                        </Emph>
                        include HBase, as follows:

                        <InLineCode>yum install "collectd*" "gccxml*" "pig*" "hdfs*" "sqoop*" "zookeeper*" "hive*"
                        </InLineCode>
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="4846ccb9-dc21-4ae2-a3ab-8f4f2110e2a6">
                    <Icon thumbWidth="50" uri="Icons/Important.png" xy:guid="d18e6f7f-44ae-46d1-b555-06afc1f04077"/>
                    <SimpleBlock>
                      <RichText>If you are writing to multiple systems using a script, do not use " " with the run
                        command. You can use " " with pdsh -y.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>For RHEL/CentOS/Oracle Linux:</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>On all hosts, clean the yum repository.</ItemPara>
                              <RichText>
                                <InLineTypeThis>yum clean all</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove all HDP 2.1 components that you want to upgrade.</ItemPara>
                              <RichText>
                                This command un-installs the HDP 2.1 component bits. It leaves the user data and
                                metadata, but removes your configurations.
                              </RichText>
                              <Code>yum erase "hadoop*" "webhcat*" "hcatalog*" "oozie*" "pig*" "hdfs*" "sqoop*"
                                "zookeeper*" "hbase*" "hive*" "tez*" "storm*" "falcon*" "flume*" "phoenix*" "accumulo*"
                                "mahout*" "hue*" "hdp_mon_nagios_addons"
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Remove your old hdp.repo and hdp-utils repo files.</ItemPara>
                              <RichText>
                                <InLineTypeThis>rm etc/yum/repos.d/hdp.repo hdp-utils.repo</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Install all HDP 2.2 components that you want to upgrade.</ItemPara>
                              <Code>yum install "hadoop_2_2_0_0_*" "oozie_2_2_0_0_*" "pig_2_2_0_0_*" "sqoop_2_2_0_0_*"
                                "zookeeper_2_2_0_0_*" "hbase_2_2_0_0_*" "hive_2_2_0_0_*" "tez_2_2_0_0_*"
                                "storm_2_2_0_0_*" "falcon_2_2_0_0_*" "flume_2_2_0_0_*" "phoenix_2_2_0_0_*"
                                "accumulo_2_2_0_0_*" "mahout_2_2_0_0_*"
                                rpm -e --nodeps hue-shell
                                yum install hue hue-common hue-beeswax hue-hcatalog hue-pig hue-oozie
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Verify that the components were upgraded.</ItemPara>
                              <RichText>
                                <InLineTypeThis>yum list installed | grep HDP-</InLineTypeThis>
                                <SyntaxArg>&lt;old.stack.version.number&gt;</SyntaxArg>
                              </RichText>
                              <RichText>
                                No component file names should appear in the returned list.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>For SLES:</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>On all hosts, clean the zypper repository.</ItemPara>
                              <RichText>
                                <InLineTypeThis>zypper clean --all</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove all HDP 2.1 components that you want to upgrade.</ItemPara>
                              <RichText>
                                This command un-installs the HDP 2.1 component bits. It leaves the user data and
                                metadata, but removes your configurations.
                              </RichText>
                              <Code>zypper remove "hadoop*" "webhcat*" "hcatalog*" "oozie*" "pig*" "hdfs*" "sqoop*"
                                "zookeeper*" "hbase*" "hive*" "tez*" "storm*" "falcon*" "flume*" "phoenix*" "accumulo*"
                                "mahout*" "hue*" "hdp_mon_nagios_addons"
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Remove your old hdp.repo and hdp-utils repo files.</ItemPara>
                              <RichText>
                                <InLineTypeThis>rm etc/zypp/repos.d/hdp.repo hdp-utils.repo</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Install all HDP 2.2 components that you want to upgrade.</ItemPara>
                              <RichText>
                                <InLineTypeThis>
                                </InLineTypeThis>
                              </RichText>
                              <Code>zypper install "hadoop\_2_2_0_0_*" "oozie\_2_2_0_0_*" "pig\_2_2_0_0_*"
                                "sqoop\_2_2_0_0_*" "zookeeper\_2_2_0_0_*" "hbase\_2_2_0_0_*" "hive\_2_2_0_0_*"
                                "tez\_2_2_0_0_*" "storm\_2_2_0_0_*" "falcon\_2_2_0_0_*" "flume\_2_2_0_0_*"
                                "phoenix\_2_2_0_0_*" "accumulo\_2_2_0_0_*" "mahout\_2_2_0_0_*"
                                rpm -e --nodeps hue-shell
                                zypper install hue hue-common hue-beeswax hue-hcatalog hue-pig hue-oozie
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Verify that the components were upgraded.</ItemPara>
                              <RichText>
                                <InLineTypeThis>rpm -qa | grep hdfs, &amp;&amp; rpm -qa | grep hive &amp;&amp; rpm -qa |
                                  grep hcatalog
                                </InLineTypeThis>
                              </RichText>
                              <RichText>
                                No component files names should appear in the returned list.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>If any components were not upgraded, upgrade them as follows:</ItemPara>
                              <RichText>
                                <InLineTypeThis>yast --update hdfs hcatalog hive</InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Symlink directories, using<InLineCode>hdp-select</InLineCode>.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="581d5a3d-c07b-45fb-b8cb-ef21daa8a9f7">
                    <Icon thumbWidth="50" uri="Icons/Warning.png" xy:guid="81976298-dc00-4032-928a-c299ee8d3377"/>
                    <SimpleBlock>
                      <RichText>To prevent version-specific directory issues for your scripts and updates, Hortonworks
                        provides<InLineCode>hdp-select</InLineCode>, a script that symlinks directories to hdp-current
                        and modifies paths for configuration directories.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    Check that the
                    <InLineCode>hdp-select</InLineCode>
                    package installed:
                    <InLineTypeThis>
                      rpm -qa | grep hdp-select
                    </InLineTypeThis>

                    You should see:
                    <InLineApplicationPrompt>hdp-select-2.2.0.0-2041.el6.noarch for the HDP 2.2 release.
                    </InLineApplicationPrompt>

                    If not, then run:
                    <InLineTypeThis>
                      yum install hdp-select
                    </InLineTypeThis>

                    Run
                    <InLineCode>hdp-select</InLineCode>
                    as root, on every node.
                    <InLineTypeThis>
                      hdp-select set all 2.2.0.0-&lt;</InLineTypeThis>
                    <SyntaxArg>$version</SyntaxArg>
                    <InLineTypeThis>&gt;
                    </InLineTypeThis>
                    where
                    <SyntaxArg>$version</SyntaxArg>
                    is the build number. For the HDP 2.2 release &lt;$version&gt; = 2041.
                    <InLineTypeThis></InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>On the Hive Metastore database host, stop the Hive Metastore
                    <Italic>
                      <Emph>service</Emph>
                    </Italic>
                    , if you have not done so already. Make sure that the Hive Metastore
                    <Italic>
                      <Emph>database</Emph>
                    </Italic>
                    is running.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Upgrade the Hive metastore database schema from v13 to v14, using the following
                    instructions:
                  </ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Set java home:</ItemPara>
                        <RichText>
                          <InLineTypeThis>export JAVA_HOME=/path/to/java</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy (rewrite) old Hive configurations to new conf dir:</ItemPara>
                        <RichText>
                          <InLineTypeThis>cp -R /etc/hive/conf.server/* /etc/hive/conf/</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy jdbc connector to
                          <InLineTypeThis>/usr/hdp/</InLineTypeThis>
                          <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                          <InLineTypeThis>/hive/lib</InLineTypeThis>, if it is not already in that location.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <SyntaxArg>&lt;HIVE_HOME&gt;</SyntaxArg>
                          <InLineTypeThis>/bin/schematool -upgradeSchema -dbType</InLineTypeThis>
                          <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>

                          where
                          <SyntaxArg>&lt;HIVE_HOME&gt;</SyntaxArg>
                          is the Hive installation directory.
                        </ItemPara>
                        <RichText>
                          For example, on the Hive Metastore host:

                          /usr/hdp/2.2.0.0-<SyntaxArg>&lt;$version&gt;</SyntaxArg>/hive/bin/schematool -upgradeSchema
                          -dbType
                          <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>

                          where
                          <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                          is the 2.2.0 build number and
                          <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>
                          is derby, mysql, oracle, or postgres.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="dc97be02-1c3a-4a22-ac35-11113b3ec4a5">
          <Title>Complete the Upgrade of the 2.1 Stack to 2.2</Title>
          <ParaBlock xy:guid="51a81d59-61dc-435f-8355-a2c10fa76a6c">
            <List ListMarker="Numeric" xy:guid="897b1d26-5bfd-4988-ae76-bb2bc105b653">
              <ItemBlock>
                <Item>
                  <ItemPara>Start Ambari Server.</ItemPara>
                  <RichText>On the Ambari Server host,
                    <InLineTypeThis>
                      ambari-server start
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Start all Ambari Agents.</ItemPara>
                  <RichText>
                    At each Ambari Agent host,
                    <InLineTypeThis>
                      ambari-agent start
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Update the repository Base URLs in Ambari Server for the HDP-2.2 stack.</ItemPara>
                  <RichText>
                    Browse to
                    <InLineMenuSelection>Ambari Web &gt; Admin &gt; Repositories,</InLineMenuSelection>
                    then set the values for the HDP and HDP-UTILS repository Base URLs. For more information about
                    viewing and editing repository Base URLs, see<Xref
                          InsideTargetRef="0cf8106e-364a-46d5-85aa-38dd0476a7e2">Viewing Cluster Stack Version and
                    Repository URLs</Xref>.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="cdee90af-7d27-42bb-bbab-dc545f2d303b">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="ad96fcb3-d127-41e8-a9f6-43dd6e11eb8d"/>
                    <SimpleBlock>
                      <RichText>For a remote, accessible, public repository, the HDP and HDP-UTILS Base URLs are the
                        same as the baseurl=values in the HDP.repo file downloaded in<Xref
                                InsideTargetRef="c30073a7-f386-4d8a-9619-8dde14e3e4d1">Upgrade the Stack</Xref>: Step 1.
                        For a local repository, use the local repository Base URL that you configured for the HDP Stack.
                        For links to download the HDP repository files for your version of the Stack, see<Xref
                                InsideTargetRef="3e43081a-a937-4d51-92cc-1fbf15645713">HDP Stack Repositories</Xref>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Using the Ambari Web UI, add the Tez service if if it has not been installed already. For
                    more information about adding a service, see<Xref
                            InsideTargetRef="19a49eb0-7d00-4f33-bb7b-ed805a5cd656">Adding a Service</Xref>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using the Ambari Web UI, add any new services that you want to run on the HDP 2.2 stack. You
                    must add a Service before editing configuration properties necessary to complete the upgrade.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using the
                    <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                    &gt;<InLineTypeThis>Services</InLineTypeThis>, start the ZooKeeper service.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Copy (rewrite) old hdfs configurations to new conf directory, on all Datanode and Namenode
                    hosts,
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>cp /etc/hadoop/conf.empty/hdfs-site.xml.rpmsave /etc/hadoop/conf/hdfs-site.xml;
                      cp /etc/hadoop/conf.empty/hadoop-env.sh.rpmsave /etc/hadoop/conf/hadoop-env.sh.xml;
                      cp /etc/hadoop/conf.empty/log4j.properties.rpmsave /etc/hadoop/conf/log4j.properties;
                      cp /etc/hadoop/conf.empty/core-site.xml.rpmsave /etc/hadoop/conf/core-site.xml
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If you are upgrading from an HA NameNode configuration, start all JournalNodes.</ItemPara>
                  <RichText>
                    At each JournalNode host, run the following command:

                    <InLineTypeThis>su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "/usr/hdp/2.2.0.0-</InLineTypeThis>
                    <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                    <InLineTypeThis>/hadoop/sbin/hadoop-daemon.sh start journalnode"

                    </InLineTypeThis>where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="1e9cddce-cb2e-4a0e-8063-8c4c44207c49">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="442b769e-f365-4803-b4e6-47f247542495"/>
                    <SimpleBlock>
                      <RichText>All JournalNodes must be running when performing the upgrade, rollback, or finalization
                        operations. If any JournalNodes are down when running any such operation, the operation will
                        fail.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Because the file system version has now changed, you must start the NameNode manually.
                    On the active NameNode host, as the HDFS user,
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "export HADOOP_LIBEXEC_DIR=/usr/hdp/2.2.0.0-</InLineTypeThis>
                    <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                    <InLineTypeThis>/hadoop/libexec &amp;&amp; /usr/hdp/2.2.0.0-</InLineTypeThis>
                    <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                    <InLineTypeThis>/hadoop/sbin/hadoop-daemon.sh start namenode -upgrade"

                    </InLineTypeThis>where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                  <RichText>
                    To check if the Upgrade is progressing, check that the "
                    <InLineCode>\previous</InLineCode>
                    " directory has been created in
                    <InLineCode>\NameNode</InLineCode>
                    and
                    <InLineCode>\JournalNode</InLineCode>
                    directories. The "<InLineCode>\previous</InLineCode>" directory contains a snapshot of the data
                    before upgrade.
                  </RichText>
                  <CustomNote xy:guid="ecc82e49-fab8-4b54-9cbf-a5295f40ce40">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="734f3a6d-bd18-42bc-b0b8-45e1350efe50"/>
                    <SimpleBlock>
                      <RichText>In a NameNode HA configuration, this NameNode does not enter the standby state as usual.
                        Rather, this NameNode immediately enters the active state, upgrades its local storage
                        directories, and upgrades the shared edit log. At this point, the standby NameNode in the HA
                        pair is
                        <Underline>still down, and not synchronized</Underline>
                        with the upgraded, active NameNode.
                      </RichText>
                      <RichText>To re-establish HA, you must synchronize the active and standby NameNodes. To do so,
                        bootstrap the standby NameNode by running the NameNode with the '-bootstrapStandby' flag. Do NOT
                        start the standby NameNode with the '-upgrade' flag.

                        At the Standby NameNode,
                      </RichText>
                      <RichText>
                        <InLineTypeThis>su -l</InLineTypeThis>
                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                        <InLineTypeThis>-c "hdfs namenode -bootstrapStandby -force"

                        </InLineTypeThis>where
                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                        is the HDFS Service user. For example, hdfs.
                      </RichText>
                      <RichText>
                        The bootstrapStandby command downloads the most recent fsimage from the active NameNode into the
                        <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                        directory on the standby NameNode. Optionally, you can access that directory to make sure the
                        fsimage has been successfully downloaded. After verifying, start the ZKFailoverController, then
                        start the standby NameNode using<InLineMenuSelection>Ambari Web &gt; Hosts &gt;
                        Components</InLineMenuSelection>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Start all DataNodes.</ItemPara>
                  <RichText>
                    At each DataNode, as the HDFS user,
                  </RichText>
                  <Code>su -l &lt;HDFS_USER&gt; -c "/usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/sbin/hadoop-daemon.sh
                    --config /etc/hadoop/conf start datanode"
                  </Code>
                  <RichText>
                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                    <InLineTypeThis>
                    </InLineTypeThis>
                    The NameNode sends an upgrade command to DataNodes after receiving block reports.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Update HDFS Configuration Properties for HDP 2.2</ItemPara>
                  <RichText>
                    Using<InLineTypeThis>Ambari Web UI &gt; Services &gt; HDFS &gt; Configs &gt;
                    core-site.xml</InLineTypeThis>:
                  </RichText>
                  <SubList ListMarker="Arrow">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Add</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="24361590-2296-46a8-8c0e-6c1f153184d8">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hadoop.http.authentication.simple.anonymous.allowed</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <RichText><InLineTypeThis>Using Ambari Web UI &gt; Services &gt; HDFS &gt; Configs &gt;
                    hdfs-site.xml</InLineTypeThis>:
                  </RichText>
                  <SubList ListMarker="Arrow">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Add</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="9c793ea2-93ca-475f-9953-f13fe459371b">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>dfs.namenode.startup.delay.block.deletion.sec</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>3600</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Modify</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="33cc6c90-9fb7-4c4e-a0b9-250c84d60cbc">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>dfs.datanode.max.transfer.threads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>4096</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Restart HDFS.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Open the Ambari Web GUI. If the browser in which Ambari is running has been open
                          throughout the process, clear the browser cache, then refresh the browser.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Choose<InLineMenuSelection>Ambari Web &gt; Services &gt; HDFS &gt; Service Actions
                          &gt; Restart All</InLineMenuSelection>.
                        </ItemPara>
                        <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                    xy:guid="f9006c63-8067-42e5-addb-cc9550059251">
                          <Icon thumbWidth="50" uri="Icons/Important.png"
                                xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                xy:guid="e875b9e3-0a76-4003-9c4b-989da99bd0f2"/>
                          <SimpleBlock>
                            <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                                  xy:guid="5a0b4bff-5f6e-4d4c-9540-490f97887d60">
                              <ListPreamble>In a cluster configured for NameNode High Availability, use the following
                                procedure to restart NameNodes. Using the following procedure preserves HA when
                                upgrading the cluster.
                              </ListPreamble>
                              <ItemBlock>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Services &gt; HDFS, choose Active NameNode.</ItemPara>
                                  <RichText>This shows the host name of the current, active NameNode.</RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Write down (or copy, or remember) the host name of the active NameNode.
                                  </ItemPara>
                                  <RichText>You need this host name for step 4.</RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Services &gt; HDFS &gt; Service Actions &gt; choose
                                    Stop.
                                  </ItemPara>
                                  <RichText>This stops all of the HDFS Components, including both NameNodes.</RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Hosts &gt; choose the host name you noted in Step 2,
                                    then start that NameNode component, using Host Actions &gt; Start.
                                  </ItemPara>
                                  <RichText>This causes the original, active NameNode to re-assume its role as the
                                    active NameNode.
                                  </RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Services &gt; HDFS &gt; Service Actions, choose
                                    Re-Start All.
                                  </ItemPara>
                                </Item>
                              </ItemBlock>
                            </List>
                          </SimpleBlock>
                        </CustomNote>
                      </Item>
                      <Item>
                        <ItemPara>Choose<InLineMenuSelection>Service Actions &gt; Run Service
                          Check</InLineMenuSelection>. Makes sure the service check passes.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>After the DataNodes are started, HDFS exits SafeMode. To monitor the status, run the
                    following command, on each DataNode:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>sudo su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "hdfs dfsadmin -safemode get"</InLineTypeThis>

                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.

                    When HDFS exits SafeMode, the following message displays:
                  </RichText>
                  <Code>Safe mode is OFF</Code>
                </Item>
                <Item>
                  <ItemPara>Make sure that the HDFS upgrade was successful.
                    Optionally, repeat step 5 in
                    <Xref InsideTargetRef="322bc47c-0c63-4ec5-94a8-44cda871c440">Prepare the 2.1 Stack for Upgrade
                    </Xref>
                    to create new versions of the logs and reports, substituting "-
                    <InLineCode>new</InLineCode>
                    " for "-
                    <InLineCode>old</InLineCode>
                    " in the file names as necessary.
                  </ItemPara>
                  <RichText/>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Compare the old and new versions of the following log files:</ItemPara>
                        <SubList ListMarker="Bullet">
                          <ItemBlock>
                            <Item>
                              <ItemPara>
                                <InLineCode>dfs-old-fsck-1.log</InLineCode>
                                versus<InLineCode>dfs-new-fsck-1.log</InLineCode>.
                              </ItemPara>
                              <RichText>
                                The files should be identical unless the hadoop fsck reporting format has changed in the
                                new version.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>
                                <InLineCode>dfs-old-lsr-1.log</InLineCode>
                                versus<InLineCode>dfs-new-lsr-1.log</InLineCode>.
                              </ItemPara>
                              <RichText>
                                The files should be identical unless the format of hadoop fs -lsr reporting or the data
                                structures have changed in the new version.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>
                                <InLineCode>dfs-old-report-1.log</InLineCode>
                                versus
                                <InLineCode>fs-new-report-1.log</InLineCode>
                              </ItemPara>
                              <RichText>
                                Make sure that all DataNodes in the cluster before upgrading are up and running.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Upgrade Application Timeline Server (ATS) components for YARN.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>If upgrading your HDP Stack version from 2.1.1 or 2.1.2, you must modify the following
                          YARN configuration property:
                        </ItemPara>
                        <RichText>
                          Browse to<InLineMenuSelection>Ambari Web &gt; Services &gt; YARN Configs &gt; Application
                          Timeline Server</InLineMenuSelection>, and set
                          yarn.timeline-service.store-class=org.apache.hadoop.yarn.server.timeline.LeveldbTimelineStore
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>If YARN is installed in your HDP 2.1 stack, and the ATS components are NOT, then you
                          must create and install ATS service and host components using the API.

                          Run the following commands on the server that will host the YARN ATS in your cluster. Be sure
                          to replace &lt;your_ATS_component_hostname&gt; with a host name appropriate for your
                          environment.
                        </ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Create the ATS Service Component.</ItemPara>
                              <Code>curl --user admin:admin -H "X-Requested-By: ambari" -i -X POST
                                http://localhost:8080/api/v1/clusters/&lt;your_cluster_name&gt;/services/YARN/components/APP_TIMELINE_SERVER
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Create the ATS Host Component.</ItemPara>
                              <Code>curl --user admin:admin -H "X-Requested-By: ambari" -i -X POST
                                http://localhost:8080/api/v1/clusters/&lt;your_cluster_name&gt;/hosts/&lt;your_ATS_component_hostname&gt;/host_components/APP_TIMELINE_SERVER
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Install the ATS Host Component.</ItemPara>
                              <Code>curl --user admin:admin -H "X-Requested-By: ambari" -i -X PUT -d '{"HostRoles": {
                                "state": "INSTALLED"}}' http://localhost:8080/api/v1/clusters/&lt;your_cluster_name&gt;/hosts/&lt;your_ATS_component_hostname&gt;/host_components/APP_TIMELINE_SERVER
                              </Code>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <RichText>
                  </RichText>
                  <CustomNote xy:guid="cd5bd080-2685-49ee-86c3-abe58f29cddd">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="8e8b2e96-2325-4a3b-9261-8cc76990eac5"/>
                    <SimpleBlock>
                      <RichText>curl commands use the default username/password = admin/admin. To run the curl commands
                        using non-default credentials, modify the --user option to use your Ambari administrator
                        credentials.

                        For example: -
                        <InLineTypeThis>-user</InLineTypeThis>
                        <SyntaxArg>&lt;ambari_admin_username&gt;</SyntaxArg>:<SyntaxArg>
                          &lt;ambari_admin_password&gt;</SyntaxArg>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Prepare MR2 and Yarn for work. Execute HDFS commands on any host.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Create mapreduce dir in hdfs.</ItemPara>
                        <RichText>
                          <InLineTypeThis>su -l</InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>-c "hdfs dfs -mkdir -p /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce/"
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy new mapreduce.tar.gz to HDFS mapreduce dir.</ItemPara>
                        <RichText>
                          <InLineTypeThis>su -l</InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>-c "hdfs dfs -copyFromLocal /usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/mapreduce.tar.gz
                            /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce/."
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Grant permissions for created mapreduce dir in hdfs.</ItemPara>
                        <Code>su -l &lt;HDFS_USER&gt; -c "hdfs dfs -chown -R &lt;HDFS_USER&gt;:&lt;HADOOP_GROUP&gt;
                          /hdp";
                          su -l &lt;HDFS_USER&gt; -c "hdfs dfs -chmod -R 555 /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce";
                          su -l &lt;HDFS_USER&gt; -c "hdfs dfs -chmod -R 444 /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce/mapreduce.tar.gz"
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>Update YARN Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          On ambari-server host,
                          <InLineTypeThis>cd /var/lib/ambari-server/resources/scripts</InLineTypeThis>
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>then run the following scripts:</ItemPara>
                              <RichText>
                                <InLineTypeThis>./configs.sh set localhost</InLineTypeThis>
                                <SyntaxArg>&lt;your.cluster.name&gt;</SyntaxArg>
                                <InLineTypeThis>capacity-scheduler "yarn.scheduler.capacity.resource-calculator"
                                  "org.apache.hadoop.yarn.util.resource.DefaultResourceCalculator";
                                  ./configs.sh set localhost
                                </InLineTypeThis>
                                <SyntaxArg>&lt;your.cluster.name&gt;</SyntaxArg>
                                <InLineTypeThis>capacity-scheduler "yarn.scheduler.capacity.root.accessible-node-labels"
                                  "*";
                                  ./configs.sh set localhost
                                </InLineTypeThis>
                                <SyntaxArg>&lt;your.cluster.name&gt;</SyntaxArg>
                                <InLineTypeThis>capacity-scheduler
                                  "yarn.scheduler.capacity.root.accessible-node-labels.default.capacity" "-1";
                                  ./configs.sh set localhost
                                </InLineTypeThis>
                                <SyntaxArg>&lt;your.cluster.name&gt;</SyntaxArg>
                                <InLineTypeThis>capacity-scheduler
                                  "yarn.scheduler.capacity.root.accessible-node-labels.default.maximum-capacity" "-1";
                                  ./configs.sh set localhost
                                </InLineTypeThis>
                                <SyntaxArg>&lt;your.cluster.name&gt;</SyntaxArg>
                                <InLineTypeThis>capacity-scheduler
                                  "yarn.scheduler.capacity.root.default-node-label-expression" ""
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Service</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Yarn</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Advanced</InLineTypeThis>
                          &gt;<InLineTypeThis>yarn-site</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="cb094064-2e5f-44ea-ad5f-099ed1327b8e">
                                <TblGroup>
                                  <TblCol width="42"/>
                                  <TblCol width="58"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.application.classpath</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>$HADOOP_CONF_DIR,/usr/hdp/current/hadoop-client/*,
                                          /usr/hdp/current/hadoop-client/lib/*,
                                          /usr/hdp/current/hadoop-hdfs-client/*,
                                          /usr/hdp/current/hadoop-hdfs-client/lib/*,
                                          /usr/hdp/current/hadoop-yarn-client/*
                                          ,/usr/hdp/current/hadoop-yarn-client/lib/*
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hadoop.registry.zk.quorum</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>&lt;!--List of hostname:port pairs defining the zookeeper quorum
                                          binding for the registry--&gt;</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hadoop.registry.rm.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.client.nodemanager-connect.max-wait-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>900000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.client.nodemanager-connect.retry-interval-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.node-labels.fs-store.retry-policy-spec</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2000, 500</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.node-labels.fs-store.root-dir</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/system/yarn/node-labels</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.node-labels.manager-class</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.hadoop.yarn.server.resourcemanager.nodelabels.MemoryRMNodeLabelsManager
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.bind-host</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.0.0.0</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>90</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.disk-health-checker.min-free-space-per-disk-mb
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.linux-container-executor.cgroups.hierarchy</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hadoop-yarn</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.linux-container-executor.cgroups.mount</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          yarn.nodemanager.linux-container-executor.cgroups.strict-resource-usage
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.linux-container-executor.resources-handler.class
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.hadoop.yarn.server.nodemanager.util.DefaultLCEResourcesHandler
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.log-aggregation.debug-enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.log-aggregation.num-log-files-per-app</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>30</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-1</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.recovery.dir</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/var/log/hadoop-yarn/nodemanager/recovery-state</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.recovery.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.resource.cpu-vcores</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.nodemanager.resource.percentage-physical-cpu-limit</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>100</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.bind-host</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.0.0.0</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.connect.max-wait.ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>900000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.connect.retry-interval.ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>30000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.fs.state-store.retry-policy-spec</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2000, 500</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.fs.state-store.uri</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Â &lt;enter a "space" as the property value&gt;</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.ha.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.recovery.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.state-store.max-completed-applications</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>${yarn.resourcemanager.max-completed-applications}</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.store.class</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.system-metrics-publisher.dispatcher.pool-size
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.system-metrics-publisher.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.webapp.delegation-token-auth-filter.enabled
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.work-preserving-recovery.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.work-preserving-recovery.scheduling-wait-ms
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.zk-acl</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>world:anyone:rwcda</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.zk-address</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>localhost:2181</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.zk-num-retries</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.zk-retry-interval-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.zk-state-store.parent-path</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/rmstore</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.resourcemanager.zk-timeout-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.bind-host</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.0.0.0</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.client.max-retries</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>30</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.client.retry-interval-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.http-authentication.simple.anonymous.allowed
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.http-authentication.type</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>simple</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.leveldb-timeline-store.read-cache-size
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>104857600</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          yarn.timeline-service.leveldb-timeline-store.start-time-read-cache-size
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          yarn.timeline-service.leveldb-timeline-store.start-time-write-cache-size
                                        </RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="50df39eb-d421-4b83-babb-3ee71f780d53">
                                <TblGroup>
                                  <TblCol width="28"/>
                                  <TblCol width="72"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.webapp.address</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText><SyntaxArg>&lt;PUT_THE_FQDN_OF_ATS_HOST_NAME_HERE&gt;</SyntaxArg>:8188
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.webapp.https.address</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText><SyntaxArg>&lt;PUT_THE_FQDN_OF_ATS_HOST_NAME_HERE&gt;</SyntaxArg>:8190
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.timeline-service.address</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText><SyntaxArg>&lt;PUT_THE_FQDN_OF_ATS_HOST_NAME_HERE&gt;</SyntaxArg>
                                          :10200
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Update MapReduce2 Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services &gt; MapReduce2</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;<InLineTypeThis>mapred-site.xml</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="c1bd37ba-b7ec-4b8a-905b-44ecda5ccca1">
                                <TblGroup>
                                  <TblCol width="29"/>
                                  <TblCol width="71"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.job.emit-timeline-data</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.jobhistory.bind-host</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.0.0.0</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.shuffle.fetch.retry.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.shuffle.fetch.retry.interval-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.shuffle.fetch.retry.timeout-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>30000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.application.framework.path</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/hdp/apps/${hdp.version}/mapreduce/mapreduce.tar.gz#mr-framework
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="a389af46-52f5-4904-8287-0b0cc738ff07">
                                <TblGroup>
                                  <TblCol width="26"/>
                                  <TblCol width="74"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.admin.map.child.java.opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true
                                          -Dhdp.version=${hdp.version}
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.admin.reduce.child.java.opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true
                                          -Dhdp.version=${hdp.version}
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.app.mapreduce.am.admin-command-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-Dhdp.version=${hdp.version}</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.app.mapreduce.am.command-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-Xmx546m -Dhdp.version=${hdp.version}</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.application.classpath</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>$PWD/mr-framework/hadoop/share/hadoop/mapreduce/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/mapreduce/lib/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/common/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/common/lib/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/yarn/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/yarn/lib/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/hdfs/*:
                                          $PWD/mr-framework/hadoop/share/hadoop/hdfs/lib/*:
                                          /usr/hdp/${hdp.version}/hadoop/lib/hadoop-lzo-0.6.0.${hdp.version}.jar:/etc/hadoop/conf/secure$
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.admin.user.env</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          LD_LIBRARY_PATH=/usr/hdp/${hdp.version}/hadoop/lib/native:/usr/hdp/${hdp.version}/hadoop/lib/native/Linux-amd64-64
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Update HBase Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>HBase</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;<InLineTypeThis>hbase-site.xml</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="f9c18014-db26-4560-8f22-11a1d1cee872">
                                <TblGroup>
                                  <TblCol width="47"/>
                                  <TblCol width="53"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hbase.hregion.majorcompaction.jitter</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.50</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="2f089ab1-a724-4310-a3f4-802d29c37410">
                                <TblGroup>
                                  <TblCol width="47"/>
                                  <TblCol width="53"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hbase.hregion.majorcompaction</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>604800000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hbase.hregion.memstore.block.multiplier</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>4</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Remove</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="b46be9b3-6a84-4a63-a450-deae7b4810ee">
                                <TblGroup>
                                  <TblCol width="47"/>
                                  <TblCol width="53"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hbase.hstore.flush.retries.number</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>120</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Update Hive Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Hive</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;<InLineTypeThis>hive-site.xml</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="82588014-dbba-4a5c-b325-6949f5cf180a">
                                <TblGroup>
                                  <TblCol width="40"/>
                                  <TblCol width="60"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.cluster.delegation.token.store.zookeeper.connectString</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>&lt;!-- The ZooKeeper token store connect string. --&gt;</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.auto.convert.sortmerge.join.to.mapjoin</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.cbo.enable</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.cli.print.header</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.cluster.delegation.token.store.class</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.hadoop.hive.thrift.ZooKeeperTokenStore</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.cluster.delegation.token.store.zookeeper.znode</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/hive/cluster/delegation</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.conf.restricted.list</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          hive.security.authenticator.manager,hive.security.authorization.manager,hive.users.in.admin.role
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.convert.join.bucket.mapjoin.tez</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.compress.intermediate</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.compress.output</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.dynamic.partition</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.dynamic.partition.mode</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>nonstrict</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.max.created.files</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>100000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.max.dynamic.partitions</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>5000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.max.dynamic.partitions.pernode</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.orc.compression.strategy</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>SPEED</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.orc.default.compress</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>ZLIB</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.orc.default.stripe.size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>67108864</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.parallel</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.parallel.thread.number</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>8</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.reducers.bytes.per.reducer</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>67108864</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.reducers.max</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1009</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.scratchdir</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/tmp/hive</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.submit.local.task.via.child</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.exec.submitviachild</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.fetch.task.aggr</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.fetch.task.conversion</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>more</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.fetch.task.conversion.threshold</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1073741824</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.map.aggr.hash.force.flush.memory.threshold</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.9</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.map.aggr.hash.min.reduction</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.5</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.map.aggr.hash.percentmemory</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.5</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.mapjoin.optimized.hashtable</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.mapfiles</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.mapredfiles</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.orcfile.stripe.level</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.rcfile.block.level</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.size.per.task</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>256000000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.smallfiles.avgsize</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>16000000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.merge.tezfiles</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.metastore.authorization.storage.checks</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.metastore.client.connect.retry.delay</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>5s</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.metastore.connect.retries</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>24</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.metastore.failure.retries</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>24</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.metastore.server.max.threads</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>100000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.optimize.constant.propagation</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.optimize.metadataonly</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.optimize.null.scan</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.optimize.sort.dynamic.partition</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.orc.compute.splits.num.threads</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.prewarm.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.prewarm.numcontainers</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.security.metastore.authenticator.manager</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.hadoop.hive.ql.security.HadoopDefaultMetastoreAuthenticator
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.security.metastore.authorization.auth.reads</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.allow.user.substitution</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.logging.operation.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.logging.operation.log.location</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>${system:java.io.tmpdir}/${system:user.name}/operation_logs</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.table.type.mapping</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>CLASSIC</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.thrift.http.path</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>cliservice</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.thrift.http.port</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10001</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.thrift.max.worker.threads</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>500</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.thrift.sasl.qop</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>auth</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.transport.mode</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>binary</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.use.SSL</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.smbjoin.cache.rows</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.stats.dbclass</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>fs</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.stats.fetch.column.stats</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.stats.fetch.partition.stats</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.support.concurrency</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.auto.reducer.parallelism</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.cpu.vcores</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-1</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.dynamic.partition.pruning</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.dynamic.partition.pruning.max.data.size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>104857600</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.dynamic.partition.pruning.max.event.size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1048576</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.log.level</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>INFO</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.max.partition.factor</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2.0</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.min.partition.factor</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.25</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.tez.smb.number.waves</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.5</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.user.install.directory</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/user/</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.vectorized.execution.reduce.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.zookeeper.client.port</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2181</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.zookeeper.namespace</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive_zookeeper_namespace</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.zookeeper.quorum</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>&lt;!-- List of zookeeper server to talk to --&gt;</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="9a9cdfe4-f475-40b2-a7b3-e82533adc4a8">
                                <TblGroup>
                                  <TblCol width="36"/>
                                  <TblCol width="64"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.metastore.client.socket.timeout</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1800s</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.optimize.reducededuplication.min.reducer</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>4</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.security.authorization.manager</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdConfOnlyAuthorizerFactory
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.security.metastore.authorization.manager</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider,
                                          org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.server2.support.dynamic.service.discovery</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>hive.vectorized.groupby.checkinterval</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>4096</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>fs.file.impl.disable.cache</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>fs.hdfs.impl.disable.cache</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start YARN.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineMenuSelection></InLineMenuSelection>
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start MapReduce2.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start HBase and ensure the service check
                    passes.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Service Actions</InLineTypeThis>
                    <InLineMenuSelection>,</InLineMenuSelection>start the Hive service.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Upgrade Oozie.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Perform the following preparation steps on each Oozie server host:</ItemPara>
                        <CustomNote xy:guid="8b105ed0-583c-4480-be67-b2c06ec29065">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="7202a622-12dc-4ada-bee8-872cdcfd880e"/>
                          <SimpleBlock>
                            <RichText>You must replace your Oozie configuration after upgrading.</RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Copy configurations from
                                <InLineMenuSelection>oozie-conf-bak</InLineMenuSelection>
                                to the
                                <InLineMenuSelection>/etc/oozie/conf</InLineMenuSelection>
                                directory on each Oozie server and client.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Create
                                <InLineCode>/usr/hdp/2.2.0.0-</InLineCode>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineCode>/oozie/libext-upgrade22</InLineCode>
                                directory.
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>mkdir /usr/hdp/2.2.0.0-</InLineTypeThis>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineTypeThis>/oozie/libext-upgrade22</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Copy the JDBC jar of your Oozie database to both
                                <InLineCode>/usr/hdp/2.2.0.0-</InLineCode>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineCode>/oozie/libext-upgrade22</InLineCode>
                                and
                                <InLineCode>/usr/hdp/2.2.0.0-</InLineCode>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineCode>/oozie/libtools</InLineCode>.

                                For example, if you are using MySQL, copy your<InLineCode>
                                  mysql-connector-java.jar</InLineCode>.
                                <InLineCode>
                                </InLineCode>
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Copy these files to
                                <InLineCode>/usr/hdp/2.2.0.0-</InLineCode>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineCode>/oozie/libext-upgrade22</InLineCode>
                                directory
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>cp /usr/lib/hadoop/lib/hadoop-lzo*.jar /usr/hdp/2.2.0.0-
                                </InLineTypeThis>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineTypeThis>/oozie/libext-upgrade22;
                                  cp /usr/share/HDP-oozie/ext-2.2.zip /usr/hdp/2.2.0.0-
                                </InLineTypeThis>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineTypeThis>/oozie/libext-upgrade22;
                                  cp /usr/share/HDP-oozie/ext-2.2.zip /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Grant read/write access to the Oozie user.</ItemPara>
                              <RichText>
                                <InLineTypeThis>chmod -R 777 /usr/hdp/2.2.0.0-</InLineTypeThis>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineTypeThis>/oozie/libext-upgrade22</InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Upgrade steps:</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>On the Services view, make sure that YARN and MapReduce2 services are running.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Make sure that the Oozie service is stopped.</ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>In<InLineCode>/etc/oozie/conf/oozie-env.sh</InLineCode>, comment out
                                <InLineCode>CATALINA_BASE</InLineCode>
                                property, also do the same using Ambari Web UI in
                                <InLineTypeThis>Services</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Oozie</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Configs</InLineTypeThis>
                                &gt;<InLineTypeThis>Advanced oozie-env</InLineTypeThis>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Upgrade Oozie.

                                At the Oozie database host, as the Oozie service user:
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>sudo su -l</InLineTypeThis>
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c"/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/bin/ooziedb.sh upgrade -run"

                                </InLineTypeThis>where
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                is the Oozie service user. For example, oozie.
                              </RichText>
                              <RichText>Make sure that the output contains the string "Oozie DB has been upgraded to
                                Oozie version<SyntaxArg>&lt;OOZIE_Build_Version&gt;</SyntaxArg>.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Prepare the Oozie WAR file.</ItemPara>
                              <CustomNote xy:guid="64a588e5-84ec-4485-b2f0-d41a2e11de39">
                                <Icon thumbWidth="50" uri="Icons/Note.png"
                                      xy:guid="fa5a8814-d2d8-43ad-aa61-efe319c98e46"/>
                                <SimpleBlock>
                                  <RichText>The Oozie server must be
                                    <Emph>not</Emph>
                                    running for this step. If you get the message "ERROR: Stop Oozie first", it means
                                    the script still thinks it's running. Check, and if needed, remove the process id
                                    (pid) file indicated in the output. You may see additional "File Not Found" error
                                    messages during a successful upgrade of Oozie.
                                  </RichText>
                                </SimpleBlock>
                              </CustomNote>
                              <RichText>On the Oozie server, as the Oozie user
                                <InLineTypeThis>
                                  sudo su -l
                                </InLineTypeThis>
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/bin/oozie-setup.sh
                                  prepare-war -d /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22"

                                </InLineTypeThis>where
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                is the Oozie service user. For example, oozie.
                              </RichText>
                              <RichText>Make sure that the output contains the string "New Oozie WAR file added".
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Using<InLineMenuSelection>Ambari Web</InLineMenuSelection>, choose
                                <InLineTypeThis>Services</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Oozie</InLineTypeThis>
                                &gt;<InLineTypeThis>Configs</InLineTypeThis>, expand<InLineCode>oozie-log4j</InLineCode>
                                , then add the following property:
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>log4j.appender.oozie.layout.ConversionPattern=%d{ISO8601} %5p %c{1}:%L -
                                  SERVER[
                                </InLineTypeThis>
                                <SyntaxArg>${oozie.instance.id}</SyntaxArg>
                                <InLineTypeThis>] %m%n</InLineTypeThis>

                                where
                                <SyntaxArg>${oozie.instance.id}</SyntaxArg>
                                is determined by Oozie, automatically.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Using
                                <InLineTypeThis>Ambari Web</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Services</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Oozie</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Configs</InLineTypeThis>
                                <InLineMenuSelection>,</InLineMenuSelection>expand<InLineMenuSelection>Advanced
                                  oozie-site</InLineMenuSelection>, then edit the following properties:
                              </ItemPara>
                              <SubList ListMarker="UppercaseAlpha">
                                <ItemBlock>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.service.coord.push.check.requeue.interval</InLineCode>
                                      ,
                                      <Emph>
                                        <Italic>replace</Italic>
                                      </Emph>
                                      the existing property value with the following one:
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>30000</InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.service.URIHandlerService.uri.handlers</InLineCode>,
                                      <Emph>
                                        <Italic>append</Italic>
                                      </Emph>
                                      to the existing property value the following string, if is it is not already
                                      present:
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>
                                        org.apache.oozie.dependency.FSURIHandler,org.apache.oozie.dependency.HCatURIHandler
                                      </InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.services</InLineCode>, make sure all the following
                                      properties are present:
                                    </ItemPara>
                                    <Code>org.apache.oozie.service.SchedulerService,
                                      org.apache.oozie.service.InstrumentationService,
                                      org.apache.oozie.service.MemoryLocksService,
                                      org.apache.oozie.service.UUIDService,
                                      org.apache.oozie.service.ELService,
                                      org.apache.oozie.service.AuthorizationService,
                                      org.apache.oozie.service.UserGroupInformationService,
                                      org.apache.oozie.service.HadoopAccessorService,
                                      org.apache.oozie.service.JobsConcurrencyService,
                                      org.apache.oozie.service.URIHandlerService,
                                      org.apache.oozie.service.DagXLogInfoService,
                                      org.apache.oozie.service.SchemaService,
                                      org.apache.oozie.service.LiteWorkflowAppService,
                                      org.apache.oozie.service.JPAService,
                                      org.apache.oozie.service.StoreService,
                                      org.apache.oozie.service.CoordinatorStoreService,
                                      org.apache.oozie.service.SLAStoreService,
                                      org.apache.oozie.service.DBLiteWorkflowStoreService,
                                      org.apache.oozie.service.CallbackService,
                                      org.apache.oozie.service.ActionService,
                                      org.apache.oozie.service.ShareLibService,
                                      org.apache.oozie.service.CallableQueueService,
                                      org.apache.oozie.service.ActionCheckerService,
                                      org.apache.oozie.service.RecoveryService,
                                      org.apache.oozie.service.PurgeService,
                                      org.apache.oozie.service.CoordinatorEngineService,
                                      org.apache.oozie.service.BundleEngineService,
                                      org.apache.oozie.service.DagEngineService,
                                      org.apache.oozie.service.CoordMaterializeTriggerService,
                                      org.apache.oozie.service.StatusTransitService,
                                      org.apache.oozie.service.PauseTransitService,
                                      org.apache.oozie.service.GroupsService,
                                      org.apache.oozie.service.ProxyUserService,
                                      org.apache.oozie.service.XLogStreamingService,
                                      org.apache.oozie.service.JvmPauseMonitorService
                                    </Code>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the
                                      <InLineTypeThis>oozie.service.AuthorizationService.security.enabled
                                      </InLineTypeThis>
                                      <InLineCode></InLineCode>property with the following property value:
                                      <InLineTypeThis>false</InLineTypeThis>
                                    </ItemPara>
                                    <RichText>
                                      Specifies whether security (user name/admin role) is enabled or not. If disabled
                                      any user can manage Oozie system and manage any job.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the
                                      <InLineTypeThis>oozie.service.HadoopAccessorService.kerberos.enabled
                                      </InLineTypeThis>
                                      <InLineCode></InLineCode>property with the following property value:
                                      <InLineTypeThis>false</InLineTypeThis>
                                    </ItemPara>
                                    <RichText>
                                      Indicates if Oozie is configured to use Kerberos.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.services.ext</InLineCode>,
                                      <Emph>
                                        <Italic>append</Italic>
                                      </Emph>
                                      to the existing property value the following string, if is it is not already
                                      present:
                                    </ItemPara>
                                    <Code>
                                      org.apache.oozie.service.PartitionDependencyManagerService,org.apache.oozie.service.HCatAccessorService
                                    </Code>
                                  </Item>
                                  <Item>
                                    <ItemPara>After modifying all properties on the Oozie Configs page, choose
                                      <InLineMenuSelection>Save</InLineMenuSelection>
                                      to update<InLineCode>oozie.site.xml</InLineCode>, using the modified
                                      configurations.
                                    </ItemPara>
                                  </Item>
                                </ItemBlock>
                              </SubList>
                            </Item>
                            <Item>
                              <ItemPara>Replace the content of
                                <InLineCode>/usr/oozie/share</InLineCode>
                                in HDFS.
                              </ItemPara>
                              <RichText>
                                On the Oozie server host:
                              </RichText>
                              <SubList ListMarker="Numeric">
                                <ItemBlock>
                                  <Item>
                                    <ItemPara>Extract the Oozie sharelib into a
                                      <InLineCode>tmp</InLineCode>
                                      folder.
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>mkdir -p /tmp/oozie_tmp;
                                        cp /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/oozie-sharelib.tar.gz /tmp/oozie_tmp;
                                        cd /tmp/oozie_tmp;
                                        tar xzvf oozie-sharelib.tar.gz;
                                      </InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Back up the
                                      <InLineCode>/user/oozie/share</InLineCode>
                                      folder in HDFS and then delete it.
                                    </ItemPara>
                                    <RichText>
                                      If you have any custom files in this folder, back them up separately and then add
                                      them to the /share folder after updating it.
                                    </RichText>
                                    <RichText>
                                      <InLineTypeThis>mkdir /tmp/oozie_tmp/oozie_share_backup;
                                        chmod 777 /tmp/oozie_tmp/oozie_share_backup;
                                      </InLineTypeThis>
                                    </RichText>
                                    <RichText>
                                      <InLineTypeThis>su -l</InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -copyToLocal /user/oozie/share
                                        /tmp/oozie_tmp/oozie_share_backup";
                                        su -l
                                      </InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -rm -r /user/oozie/share";
                                      </InLineTypeThis>
                                      where
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      is the HDFS service user. For example, hdfs.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the latest share libs that you extracted in step 1. After you have
                                      added the files, modify ownership and acl.
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>su -l</InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -copyFromLocal /tmp/oozie_tmp/share /user/oozie/.";
                                        su -l
                                      </InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -chown -R &lt;OOZIE_USER&gt;:&lt;HADOOP_GROUP&gt;
                                        /user/oozie";
                                        su -l
                                      </InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -chmod -R 755 /user/oozie";
                                      </InLineTypeThis>
                                      where
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      is the HDFS service user. For example, hdfs.
                                    </RichText>
                                  </Item>
                                </ItemBlock>
                              </SubList>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Update Oozie Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          Using<InLineTypeThis>Ambari Web UI &gt; Services &gt; Oozie &gt; Configs &gt;
                          oozie-site.xml</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="6a4dc86a-0f67-4baf-a94f-04dbe4016a69">
                                <TblGroup>
                                  <TblCol width="47"/>
                                  <TblCol width="53"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>oozie.authentication.simple.anonymous.allowed</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>oozie.service.coord.check.maximum.frequency</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>oozie.service.HadoopAccessorService.kerberos.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="47b9001e-93b5-4260-8059-fda3f89e224d">
                                <TblGroup>
                                  <TblCol width="23"/>
                                  <TblCol width="77"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>oozie.service.SchemaService.wf.ext.schemas</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          shell-action-0.1.xsd,shell-action-0.2.xsd,shell-action-0.3.xsd,email-action-0.1.xsd,email-action-0.2.xsd,
                                          hive-action-0.2.xsd,hive-action-0.3.xsd,hive-action-0.4.xsd,hive-action-0.5.xsd,sqoop-action-0.2.xsd,
                                          sqoop-action-0.3.xsd,sqoop-action-0.4.xsd,ssh-action-0.1.xsd,ssh-action-0.2.xsd,distcp-action-0.1.xsd,
                                          distcp-action-0.2.xsd,oozie-sla-0.1.xsd,oozie-sla-0.2.xsd
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>oozie.services.ext</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          org.apache.oozie.service.JMSAccessorService,org.apache.oozie.service.PartitionDependencyManagerService,
                                          org.apache.oozie.service.HCatAccessorService
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Use the
                    <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    view to start the Oozie service.
                  </ItemPara>
                  <RichText>
                    Make sure that ServiceCheck passes for Oozie.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Update WebHCat.</ItemPara>
                  <SubList ListMarker="UppercaseAlpha">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Modify the
                          <InLineCode>webhcat-site</InLineCode>
                          config type.
                        </ItemPara>
                        <RichText>Using
                          <InLineTypeThis>Ambari Web</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;<InLineTypeThis>WebHCat</InLineTypeThis>, modify the following configuration:
                        </RichText>
                        <Table align="" border="true" width="100" xy:guid="82c42cb3-ae5c-4b9b-bbe9-94505004a413">
                          <TblGroup>
                            <TblCol width="12"/>
                            <TblCol width="21"/>
                            <TblCol width="67"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Action</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Property Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Property Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Modify</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>templeton.storage.class</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hive.hcatalog.templeton.tool.ZooKeeperStorage</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Expand
                          <InLineTypeThis>Advanced</InLineTypeThis>
                          &gt;<InLineTypeThis>webhcat-site.xml</InLineTypeThis>.
                        </ItemPara>
                        <RichText>
                          Check if property
                          <InLineCode>templeton.port</InLineCode>
                          exists. If not, then add it using the Custom webhcat-site panel. The default value for
                          templeton.port = 50111.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each WebHCat host, update the Pig and Hive tar bundles, by updating the following
                          files:
                        </ItemPara>
                        <SubList ListMarker="Bullet">
                          <ItemBlock>
                            <Item>
                              <ItemPara>
                                <InLineCode>/apps/webhcat/pig.tar.gz</InLineCode>
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>
                                <InLineCode>/apps/webhcat/hive.tar.gz</InLineCode>
                              </ItemPara>
                              <CustomNote xy:guid="4236b275-87aa-4d04-a4c6-8f0f3179924e">
                                <Icon thumbWidth="50" uri="Icons/Note.png"
                                      xy:guid="49c773dc-f40c-4072-be75-af13e351d4e4"/>
                                <SimpleBlock>
                                  <RichText>Find these files only on a host where WebHCat is installed.</RichText>
                                </SimpleBlock>
                              </CustomNote>
                            </Item>
                          </ItemBlock>
                        </SubList>
                        <SubList ListMarker="Numeric">
                          <ListPreamble>For example, to update a *.tar.gz file:</ListPreamble>
                          <ItemBlock>
                            <Item>
                              <ItemPara>Move the file to a local directory.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -copyToLocal
                                  /apps/webhcat/*.tar.gz
                                </InLineTypeThis>
                                <SyntaxArg>&lt;local_backup_dir&gt;</SyntaxArg>
                                <InLineTypeThis>"</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove the old file.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -rm /apps/webhcat/*.tar.gz"
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Copy the new file.</ItemPara>
                              <Code>su -l &lt;HCAT_USER&gt; -c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal
                                /usr/hdp/2.2.0.0-&lt;$version&gt;/hive/hive.tar.gz /apps/webhcat/"; su -l &lt;HCAT_USER&gt;
                                -c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal /usr/hdp/2.2.0.0-&lt;$version&gt;/pig/pig.tar.gz
                                /apps/webhcat/";
                              </Code>
                              <RichText>
                                where
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                is the HCatalog service user. For example, hcat.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>On each WebHCat host, update
                          <InLineCode>/app/webhcat/hadoop-streaming.jar</InLineCode>
                          file.
                        </ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Move the file to a local directory.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -copyToLocal
                                  /apps/webhcat/hadoop-streaming*.jar &lt;local_backup_dir&gt;"
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove the old file.</ItemPara>
                              <Code>su -l &lt;HCAT_USER&gt; -c "hadoop --config /etc/hadoop/conf fs -rm
                                /apps/webhcat/hadoop-streaming*.jar"
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Copy the new hadoop-streaming.jar file.</ItemPara>
                              <Code>su -l &lt;HCAT_USER&gt; -c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal
                                /usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop-mapreduce/hadoop-streaming*.jar /apps/webhcat"
                              </Code>
                              <RichText>
                                where
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                is the HCatalog service user. For example, hcat.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>If Tez was not installed during the upgrade, you must prepare Tez for work, using the
                    following steps:
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="32d5f62f-e820-4f6b-ab5d-5c1ca1cd51f9">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="e6cbf827-cbaa-4e8e-8a50-f08d852b0e41"/>
                    <SimpleBlock>
                      <RichText>The Tez client should be available on the same host with Pig.</RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    If you use Tez as the Hive execution engine, and if the variable hive.server2.enabled.doAs is set to
                    true, you must create a scratch directory on the NameNode host for the username that will run the
                    HiveServer2 service. If you installed Tez before upgrading the Stack, use the following commands:

                    <InLineTypeThis>sudo su -c "hdfs -makedir /tmp/hive-</InLineTypeThis>
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    <InLineTypeThis>"
                      sudo su -c "hdfs -chmod 777 /tmp/hive-
                    </InLineTypeThis>
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    <InLineTypeThis>"
                    </InLineTypeThis>where<SyntaxArg>&lt;username&gt; </SyntaxArg>is the name of the user that runs the
                    HiveServer2 service.
                  </RichText>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Update Tez Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Tez</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;<InLineTypeThis>tez-site.xml</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="300e11d5-fed3-4cfd-a626-9f38c01e93ba">
                                <TblGroup>
                                  <TblCol width="30"/>
                                  <TblCol width="70"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.container.idle.release-timeout-max.millis</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>20000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.container.idle.release-timeout-min.millis</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.launch.cluster-default.cmd-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -Djava.net.preferIPv4Stack=true -Dhdp.version=${hdp.version}
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.launch.cmd-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-XX:+PrintGCDetails -verbose:gc -XX:+PrintGCTimeStamps -XX:+UseNUMA
                                          -XX:+UseParallelGC
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.launch.env</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          LD_LIBRARY_PATH=/usr/hdp/${hdp.version}/hadoop/lib/native:/usr/hdp/${hdp.version}/hadoop/lib
                                          /native/Linux-amd64-64
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.max.app.attempts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.maxtaskfailures.per.node</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.cluster.additional.classpath.prefix</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          /usr/hdp/${hdp.version}/hadoop/lib/hadoop-lzo-0.6.0.${hdp.version}.jar:/etc/hadoop/conf/secure
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.counters.max</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>2000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.counters.max.groups</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.generate.debug.artifacts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.grouping.max-size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1073741824</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.grouping.min-size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>16777216</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.grouping.split-waves</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1.7</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.history.logging.service.class</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.tez.dag.history.logging.ats.ATSHistoryLoggingService
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.compress</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.compress.codec</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.hadoop.io.compress.SnappyCodec</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.io.sort.mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>272</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.unordered.output.buffer.size-mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>51</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.shuffle-vertex-manager.max-src-fraction</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.4</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.shuffle-vertex-manager.min-src-fraction</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.2</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.task.am.heartbeat.counter.interval-ms.max</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>4000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.task.launch.cluster-default.cmd-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -Djava.net.preferIPv4Stack=true -Dhdp.version=${hdp.version}
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.task.launch.cmd-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-XX:+PrintGCDetails -verbose:gc -XX:+PrintGCTimeStamps -XX:+UseNUMA
                                          -XX:+UseParallelGC
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.task.launch.env</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          LD_LIBRARY_PATH=/usr/hdp/${hdp.version}/hadoop/lib/native:/usr/hdp/${hdp.version}/hadoop/lib
                                          /native/Linux-amd64-64
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.task.max-events-per-heartbeat</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>500</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.task.resource.memory.mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>682</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="a95192bb-0fdb-4dad-8707-5429c25dba81">
                                <TblGroup>
                                  <TblCol width="31"/>
                                  <TblCol width="69"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.container.reuse.non-local-fallback.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.resource.memory.mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1364</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.lib.uris</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/hdp/apps/${hdp.version}/tez/tez.tar.gz</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.session.client.timeout.secs</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-1</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Remove</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="bec691f2-3b6a-4f57-952e-466e312e7277">
                                <TblGroup>
                                  <TblCol width="33"/>
                                  <TblCol width="67"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.container.session.delay-allocation-millis</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>10000</RichText>
                                        <RichText>Â </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.env</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          LD_LIBRARY_PATH=/usr/hdp/2.2.0.0-1947/hadoop/lib/native:/usr/hdp/2.2.0.0-1947/hadoop/lib/native/Linux-amd64-64
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.grouping.max-size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1073741824</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.grouping.min-size</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>16777216</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.grouping.split-waves</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1.4</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.java.opt</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -Xmx546m -Djava.net.preferIPv4Stack=true -XX:+UseNUMA
                                          -XX:+UseParallelGC
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.shuffle-vertex-manager.max-src-fraction</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.4</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.am.shuffle-vertex-manager.min-src-fraction</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.2</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.intermediate-input.compress.codec</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.hadoop.io.compress.SnappyCodec</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.intermediate-input.is-compressed</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.intermediate-output.compress.codec</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.hadoop.io.compress.SnappyCodec</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.runtime.intermediate-output.should-compress</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>tez.yarn.ats.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>true</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Put Tez libraries in hdfs. Execute at any host:</ItemPara>
                        <Code>su -l hdfs -c "hdfs dfs -mkdir -p /hdp/apps/2.2.0.0-&lt;$version&gt;/tez/"
                          su -l hdfs -c "hdfs dfs -copyFromLocal /usr/hdp/2.2.0.0-&lt;$version&gt;/tez/lib/tez.tar.gz
                          /hdp/apps/2.2.0.0-&lt;$version&gt;/tez/."
                          su -l hdfs -c "hdfs dfs -chown -R &lt;HDFS_USER&gt;:&lt;HADOOP_GROUP&gt; /hdp" su -l hdfs -c
                          "hdfs dfs -chmod -R 555 /hdp/apps/2.2.0.0-1899/tez" su -l hdfs -c "hdfs dfs -chmod -R 444
                          /hdp/apps/2.2.0.0-1899/tez/tez.tar.gz"
                        </Code>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Prepare the Storm service properties.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Edit nimbus.childopts.</ItemPara>
                        <RichText>
                          Using Ambari Web UI &gt; Services &gt; Storm &gt; Configs &gt; Nimbus &gt; find
                          nimbus.childopts. Update the path for the jmxetric-1.0.4.jar to:
                          /usr/hdp/current/storm-nimbus/contrib/storm-jmxetric/lib/jmxetric-1.0.4.jar.
                          If nimbus.childopts property value contains
                          "-Djava.security.auth.login.config=/path/to/storm_jaas.conf", remove this text.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Edit supervisor.childopts.</ItemPara>
                        <RichText>
                          Using Ambari Web UI &gt; Services &gt; Storm &gt; Configs &gt; Supervisor &gt; find
                          supervisor.childopts. Update the path for the jmxetric-1.0.4.jar to:
                          /usr/hdp/current/storm-nimbus/contrib/storm-jmxetric/lib/jmxetric-1.0.4.jar.
                          If supervisor.childopts property value contains
                          "-Djava.security.auth.login.config=/etc/storm/conf/storm_jaas.conf", remove this text.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Edit worker.childopts.</ItemPara>
                        <RichText>
                          Using Ambari Web UI &gt; Services &gt; Storm &gt; Configs &gt; Advanced &gt; storm-site find
                          worker.childopts. Update the path for the jmxetric-1.0.4.jar to:
                          /usr/hdp/current/storm-nimbus/contrib/storm-jmxetric/lib/jmxetric-1.0.4.jar.

                          Check if the _storm.thrift.nonsecure.transport property exists. If not, add it,
                          _storm.thrift.nonsecure.transport = backtype.storm.security.auth.SimpleTransportPlugin, using
                          the Custom storm-site panel.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Remove the
                          <InLineCode>storm.local.dir</InLineCode>
                          from every host where the Storm component is installed.
                        </ItemPara>
                        <RichText>
                          You can find this property in the Storm &gt; Configs &gt; General tab.
                        </RichText>
                        <RichText>
                          <InLineTypeThis>rm -rf</InLineTypeThis>
                          <SyntaxArg>&lt;storm.local.dir&gt;</SyntaxArg>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>If you are planning to enable secure mode, navigate to
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Storm</InLineTypeThis>
                          &gt;<InLineTypeThis>Configs</InLineTypeThis>&gt;
                          <InLineTypeThis>Advanced storm-site</InLineTypeThis>
                          and add the following property:
                        </ItemPara>
                        <Code>
                          _storm.thrift.secure.transport=backtype.storm.security.auth.kerberos.KerberosSaslTransportPlugin
                        </Code>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Upgrade Pig.</ItemPara>
                  <RichText>
                    Copy the the Pig configuration files to /etc/pig/conf.
                  </RichText>
                  <RichText>
                    <InLineTypeThis>cp /etc/pig/conf.dist/pig.properties.rpmsave /etc/pig/conf/pig.properties;
                      cp /etc/pig/conf.dist/pig-env.sh /etc/pig/conf/;
                      cp /etc/pig/conf.dist/log4j.properties.rpmsave /etc/pig/conf/log4j.properties
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Storm</InLineTypeThis>, start the Storm service.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Prepare the Falcon service properties:</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Update Falcon Configuration Properties for HDP 2.2</ItemPara>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Falcon</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;<InLineTypeThis>falcon startup properties</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="" border="true" width=""
                                     xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                                     xy:guid="364b62a5-5399-4dca-8e9f-935fbfaa0bad">
                                <TblGroup>
                                  <TblCol width="28"/>
                                  <TblCol width="72"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.application.services</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.falcon.security.AuthenticationInitializationService,\
                                          org.apache.falcon.workflow.WorkflowJobEndNotificationService,\
                                          org.apache.falcon.service.ProcessSubscriberService,\
                                          org.apache.falcon.entity.store.ConfigurationStore,\
                                          org.apache.falcon.rerun.service.RetryService,\
                                          org.apache.falcon.rerun.service.LateRunService,\
                                          org.apache.falcon.service.LogCleanupService
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                        <RichText>
                          Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Falcon</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;<InLineTypeThis>advanced falcon-startup</InLineTypeThis>:
                        </RichText>
                        <SubList ListMarker="Arrow">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="" border="true" width=""
                                     xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                                     xy:guid="e6dc1b0b-fe97-4bbd-93b1-9841890270a2">
                                <TblGroup>
                                  <TblCol width=""/>
                                  <TblCol width=""/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.dfs.namenode.kerberos.principal</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>nn/_HOST@EXAMPLE.COM</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.enableTLS</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.http.authentication.cookie.domain</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>EXAMPLE.COM</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.http.authentication.kerberos.keytab</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/etc/security/keytabs/spnego.service.keytab</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.http.authentication.kerberos.principal</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>HTTP/_HOST@EXAMPLE.COM</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.security.authorization.admin.groups</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>falcon</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.security.authorization.admin.users</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>falcon,ambari-qa</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.security.authorization.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.security.authorization.provider</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.falcon.security.DefaultAuthorizationProvider</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.security.authorization.superusergroup</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>falcon</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.service.authentication.kerberos.keytab</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/etc/security/keytabs/falcon.service.keytab</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.falcon.service.authentication.kerberos.principal</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>falcon/_HOST@EXAMPLE.COM</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>*.journal.impl</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.falcon.transaction.SharedFileSystemJournal</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>prism.application.services</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.falcon.entity.store.ConfigurationStore</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>prism.configstore.listeners</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>org.apache.falcon.entity.v0.EntityGraph,\
                                          org.apache.falcon.entity.ColoClusterRelation,\
                                          org.apache.falcon.group.FeedGroupMap
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, re-start all stopped services.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>The upgrade is now fully functional but not yet finalized. Using the
                    <InLineCode>finalize</InLineCode>
                    command removes the previous version of the NameNode and DataNode storage directories.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="c4169192-409b-40d7-bd32-01625b7f89dc">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="8ede6a04-7017-4d01-b0cc-3dc09c365bd5"/>
                    <SimpleBlock>
                      <RichText>After the upgrade is finalized, the system cannot be rolled back. Usually this step is
                        not taken until a thorough testing of the upgrade has been performed.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    The upgrade must be finalized before another upgrade can be performed.
                  </RichText>
                  <CustomNote xy:guid="ec06a2b5-4f97-449b-94d4-055f81671742">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="d4cc05f5-794a-48b4-a446-49cd60cdefd1"/>
                    <SimpleBlock>
                      <RichText>Directories used by Hadoop 1 services set in
                        <InLineCode>/etc/hadoop/conf/taskcontroller.cfg</InLineCode>
                        are not automatically deleted after upgrade. Administrators can choose to delete these
                        directories after the upgrade.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    To finalize the upgrade, execute the following command once, on the primary NameNode host in your
                    HDP cluster,
                    <InLineTypeThis>
                      sudo su -l
                    </InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "hdfs dfsadmin -finalizeUpgrade"

                    </InLineTypeThis>where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS service user. For example, hdfs.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="24d144de-9940-47d5-a9ea-e4480d3ddb02">
        <Title>Upgrading the HDP Stack from 2.0 to 2.2</Title>
        <ParaBlock xy:guid="ea396b21-ee49-433a-9d5a-031dfafdda3a">
          <RichText>The HDP Stack is the coordinated set of Hadoop components that you have installed on hosts in your
            cluster. Your set of Hadoop components and hosts is unique to your cluster. Before upgrading the Stack on
            your cluster, review all Hadoop services and hosts in your cluster to confirm the location of Hadoop
            components. For example, use the<InLineMenuSelection>Hosts</InLineMenuSelection>and
            <InLineMenuSelection>Services</InLineMenuSelection>
            views in Ambari Web, which summarize and list the components installed on each Ambari host, to determine the
            components installed on each host. For more information about using Ambari to view components in your
            cluster, see<Xref InsideTargetRef="c4a195fa-6eec-41a3-a699-14e950d7893b">Working with Hosts</Xref>, and<Xref
                    InsideTargetRef="9cb21557-3948-4efa-b3cb-1c65f5b0ad31">Viewing Components on a Host</Xref>.
          </RichText>
          <RichText>
            Complete the following procedures to upgrade the Stack from version 2.0 to version 2.2 on your current,
            Ambari-installed-and-managed cluster.
          </RichText>
          <List ListMarker="Numeric" xy:guid="ddca42ba-24b0-44d6-9b4f-059f6140b651">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e17b9cf0-81d0-4b3c-b85d-457f7a2e53e3">Prepare the 2.0 Stack for Upgrade</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="41831906-2d58-4560-8544-0984950cd0c8">Upgrade the 2.0 Stack</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="1512192f-112b-4852-b7e8-81e2727e7fff">Complete the Upgrade of the 2.0 Stack to
                    2.2
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="3a670b6d-fdbb-445f-b8c3-86f3fee53289">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="aae8f51d-818a-47d1-9fbd-578b18d34a48"/>
            <SimpleBlock>
              <RichText>If you plan to upgrade your existing JDK, do so after upgrading Ambari, before upgrading the
                Stack. The upgrade steps require that you remove HDP v2.0 components and install HDP v2.2 components. As
                noted in that section, you should remove and install on each host, only the components on each host that
                you want to run on the HDP 2.2 stack.

                For example, if you want to run Storm or Falcon components on the HDP 2.2 stack, you will install those
                components and then configure their properties during the upgrade procedure.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="cfdf7a52-cd46-4d5e-a19f-f3bb9dbb339e">
          <RichText>In preparation for future HDP 2.2 releases to support rolling upgrades, the HDP RPM package version
            naming convention has changed to include the HDP 2.2 product version in file and directory names. HDP 2.2
            marks the first release where HDP rpms, debs, and directories contain versions in the names to permit
            side-by-side installations of later HDP releases. To transition between previous releases and HDP 2.2,
            Hortonworks provides hdp-select, a script that symlinks your directories to
            <InLineCode>hdp/current</InLineCode>
            and lets you maintain using the same binary and configuration paths that you were using before.

            The following instructions have you remove your old versions of HDP, install hdp-select, and install HDP 2.2
            to prepare for rolling upgrade.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="e17b9cf0-81d0-4b3c-b85d-457f7a2e53e3">
          <Title>Prepare the 2.0 Stack for Upgrade</Title>
          <ParaBlock xy:guid="90a2a871-3c66-4246-8bc1-b10ddc574b45">
            <RichText>To prepare for upgrading the HDP Stack, this section describes how to perform the following
              tasks:
            </RichText>
            <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                  xy:guid="9f9c8f3c-1bec-4a3e-be61-21f512cfae8b">
              <ItemBlock>
                <Item>
                  <ItemPara>Disable Security.</ItemPara>
                  <CustomNote xy:guid="aa5b9a98-6ef0-4101-aed9-c64caee48ac7">
                    <Icon thumbWidth="50" uri="Icons/Important.png" xy:guid="78ad4248-856d-4024-a2b8-b36a2a7f8742"/>
                    <SimpleBlock>
                      <RichText>If your Stack has Kerberos Security turned on, turn it off before performing the
                        upgrade. On<InLineTypeThis>Ambari Web UI</InLineTypeThis>&gt;
                        <InLineTypeThis>Admin</InLineTypeThis>
                        &gt;<InLineTypeThis>Security</InLineTypeThis>click<InLineTypeThis>Disable
                          Security</InLineTypeThis>. You can re-enable Security after performing the upgrade.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Checkpoint user metadata and capture the HDFS operational state.
                    This step supports rollback and restore of the original state of HDFS data, if necessary.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Backup Hive and Oozie metastore databases.
                    This step supports rollback and restore of the original state of Hive and Oozie data, if necessary.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop all HDP and Ambari services.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Make sure to finish all current jobs running on the system before upgrading the stack.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="c7baf629-36a0-479d-a873-40a63fa77cf6">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="5c02ac0c-acc9-4bba-8054-b3359bb62205"/>
                    <SimpleBlock>
                      <RichText>Libraries will change during the upgrade. Any jobs remaining active that use the older
                        version libraries will probably fail during the upgrade.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <ParaBlock xy:guid="246bc5bd-b646-46a4-8ab8-2c95d1b2527a">
            <List ListMarker="Numeric" xy:guid="cc378605-c3fa-42df-a8a1-8c9a6723f2e2">
              <ItemBlock>
                <Item>
                  <ItemPara>Use
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Service Actions</InLineTypeThis>
                    <InLineMenuSelection></InLineMenuSelection>to stop all services except HDFS and ZooKeeper.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop any client programs that access HDFS.</ItemPara>
                  <RichText>Perform steps 3 through 8 on the NameNode host. In a highly-available NameNode
                    configuration, execute the following procedure on the primary NameNode.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="278e23ea-87de-4633-a1ed-8fa613b54fc0">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="8f2b433e-7fa2-4363-a710-e6160f38c0e1"/>
                    <SimpleBlock>
                      <RichText>To locate the primary NameNode in an Ambari-managed HDP cluster, browse
                        <InLineTypeThis>Ambari Web</InLineTypeThis>
                        &gt;
                        <InLineTypeThis>Services</InLineTypeThis>
                        &gt;<InLineTypeThis>HDFS</InLineTypeThis>. In Summary, click NameNode.
                        <InLineTypeThis>Hosts</InLineTypeThis>
                        &gt;<InLineTypeThis>Summary</InLineTypeThis>displays the host name FQDN.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>If HDFS is in a non-finalized state from a prior upgrade operation, you must finalize HDFS
                    before upgrading further. Finalizing HDFS will remove all links to the metadata of the prior HDFS
                    version - do this only if you do not want to rollback to that prior HDFS version.
                  </ItemPara>
                  <RichText>On the NameNode host, as the HDFS user,
                    <InLineTypeThis>
                      su -l
                    </InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>
                      hdfs dfsadmin -finalizeUpgrade
                    </InLineTypeThis>
                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Check the NameNode directory to ensure that there is no snapshot of any prior HDFS upgrade.

                    Specifically, using<InLineMenuSelection>Ambari Web &gt; HDFS &gt; Configs &gt;
                      NameNode</InLineMenuSelection>, examine the
                    <SyntaxArg>&lt;$dfs.namenode.name.dir&gt;</SyntaxArg>
                    or the
                    <SyntaxArg>&lt;$dfs.name.dir&gt;</SyntaxArg>
                    directory in the NameNode Directories property. Make sure that only a "\current" directory and no
                    "\previous" directory exists on the NameNode host.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Create the following logs and other files.</ItemPara>
                  <RichText>
                    Creating these logs allows you to check the integrity of the file system, post-upgrade.

                    As the HDFS user,
                    <InLineTypeThis>
                      su -l
                    </InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>

                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Run
                          <InLineCode>fsck</InLineCode>
                          with the following flags and send the results to a log. The resulting file contains a complete
                          block map of the file system. You use this log later to confirm the upgrade.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>hdfs fsck / -files -blocks -locations &gt; dfs-old-fsck-1.log</InLineTypeThis>
                          <InLineApplicationPrompt></InLineApplicationPrompt>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Optional: Capture the complete namespace of the filesystem.

                          The following command does a recursive listing of the root file system:
                          <InLineTypeThis>
                            hadoop dfs -ls -R / &gt; dfs-old-lsr-1.log
                          </InLineTypeThis>
                          <InLineApplicationPrompt></InLineApplicationPrompt>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Create a list of all the DataNodes in the cluster.</ItemPara>
                        <RichText>
                          <InLineTypeThis>hdfs dfsadmin -report &gt; dfs-old-report-1.log</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Optional: Copy all unrecoverable data stored in HDFS to a local file system or to a
                          backup instance of HDFS.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara><Emph>Save the namespace</Emph>.
                  </ItemPara>
                  <RichText>
                    You must be the HDFS service user to do this and you must put the cluster in Safe Mode.
                  </RichText>
                  <RichText>
                    <InLineTypeThis>hdfs dfsadmin -safemode enter</InLineTypeThis>
                    <EndTextWrap EndWrap="true"/>
                    <InLineTypeThis>
                      hdfs dfsadmin -saveNamespace
                    </InLineTypeThis>
                  </RichText>
                  <CustomNote xy:guid="d938cd12-83f1-48b5-aded-ee765397e5aa">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="fb98973e-2104-4f4f-a24f-302fd2572848"/>
                    <SimpleBlock>
                      <RichText>In a highly-available NameNode configuration, the command
                        <InLineCode>hdfs dfsadmin -saveNamespace</InLineCode>
                        sets a checkpoint in the first NameNode specified in the configuration, in<InLineCode>
                          dfs.ha.namenodes.[nameservice ID]</InLineCode>. You can also use the dfsadmin
                        <InLineCode>-fs</InLineCode>
                        option to specify which NameNode to connect.

                        For example, to force a checkpoint in namenode 2:

                        <InLineTypeThis>hdfs dfsadmin -fs hdfs://namenode2-hostname:namenode2-port -saveNamespace
                        </InLineTypeThis>
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Copy the checkpoint files located in
                    <SyntaxArg>&lt;$dfs.name.dir/current&gt;</SyntaxArg>
                    into a backup directory.
                  </ItemPara>
                  <RichText>

                    Find the directory, using Ambari Web &gt; HDFS &gt; Configs &gt; NameNode &gt; NameNode Directories
                    on your primary NameNode host.
                  </RichText>
                  <CustomNote xy:guid="812a2878-fd3d-41d1-abe1-1fbf7eb88459">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="f57b9118-d62c-4995-8693-14283cab96d2"/>
                    <SimpleBlock>
                      <RichText>In a highly-available NameNode configuration, the location of the checkpoint depends on
                        where the saveNamespace command is sent, as defined in the preceding step.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Store the layoutVersion for the NameNode.

                    Make a copy of the file at
                    <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                    <InLineCode>/current/VERSION</InLineCode>
                    where
                    <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                    is the value of the config parameter<InLineCode>NameNode directories</InLineCode>. This file will be
                    used later to verify that the layout version is upgraded.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop HDFS.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop ZooKeeper.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <SyntaxArg>&lt;service.name&gt;</SyntaxArg>
                    &gt;<InLineTypeThis>Summary</InLineTypeThis>, review each service and make sure that all services in
                    the cluster are completely stopped.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>On the Hive Metastore database host, stop the Hive metastore
                    <Italic>
                      <Emph>service</Emph>
                    </Italic>
                    , if you have not done so already.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="c01a887c-b687-447c-972d-00042fceb50f">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="ed07e4ef-449a-4b92-a62a-c98474604d53"/>
                    <SimpleBlock>
                      <RichText>Make sure that the Hive metastore
                        <Emph>
                          <Italic>database</Italic>
                        </Emph>
                        is running. For more information about Administering the Hive metastore database, see the<Href
                                UrlTarget="https://cwiki.apache.org/confluence/display/Hive/AdminManual+MetastoreAdmin">
                          Hive Metastore Administrator documentation</Href>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>If you are upgrading Hive and Oozie, back up the Hive and Oozie metastore databases on the
                    Hive and Oozie database host machines, respectively.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="aa95d830-9f45-4f91-995b-58bdee5103df">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="5c10325d-fe6f-484a-94c1-f4b758f6620f"/>
                    <SimpleBlock>
                      <RichText>Make sure that your Hive database is updated to the minimum recommended version.
                        <Emph>If you are using Hive with MySQL, we recommend upgrading your MySQL database version to
                          5.6.21 before upgrading the HDP Stack to v2.2.
                        </Emph>
                        For specific information, see<Xref InsideTargetRef="f35b0203-6267-4533-9e88-652452ece5f5">
                          Database Requirements</Xref>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Optional - Back up the Hive Metastore database.</ItemPara>
                        <CustomNote xy:guid="83a36084-b0b6-4a6b-9857-24301451b5a6">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="e17f8cbd-0317-4755-aa5f-21e2f893d101"/>
                          <SimpleBlock>
                            <RichText>These instructions are provided for your convenience. Please check your database
                              documentation for the latest back up instructions.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <Table align="" border="false" width="100" xy:guid="86129ab6-6a4f-4953-a254-7e5b96c1c9ac">
                          <TblTitle>Hive Metastore Database Backup and Restore</TblTitle>
                          <TblGroup>
                            <TblCol width="12"/>
                            <TblCol width="48"/>
                            <TblCol width="40"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Database Type</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Backup</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Restore</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>MySQL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysqldump
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: mysqldump hive &gt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysql
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: mysql hive &lt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Postgres</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    pg_dump
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres pg_dump hive &gt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    psql
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres psql hive &lt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Oracle</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Connect to the Oracle database using sqlplus
                                    export the database: exp username/password@database full=yes file=output_file.dmp
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Import the database: imp username/password@database ile=input_file.dmp
                                  </RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Optional - Back up the Oozie Metastore database.</ItemPara>
                        <CustomNote xy:guid="2a0c5b09-e9bb-4a9b-8912-1f0cdfc1d397">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="4b00dd46-bb37-4f16-bd89-e0ba502c3638"/>
                          <SimpleBlock>
                            <RichText>These instructions are provided for your convenience. Please check your database
                              documentation for the latest back up instructions.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <Table align="" border="false" width="100" xy:guid="8daac90b-a5b5-43fd-90cf-620ac0ef8971">
                          <TblTitle>Oozie Metastore Database Backup and Restore</TblTitle>
                          <TblGroup>
                            <TblCol width="13"/>
                            <TblCol width="46"/>
                            <TblCol width="41"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Database Type</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Backup</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Restore</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>MySQL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysqldump
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: mysqldump oozie &gt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysql
                                    <SyntaxArg>&lt;dbname&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: mysql oozie &lt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Postgres</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    pg_dump
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &gt;
                                    <SyntaxArg>&lt;outputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres pg_dump oozie &gt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u
                                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                                    psql
                                    <SyntaxArg>&lt;databasename&gt;</SyntaxArg>
                                    &lt;
                                    <SyntaxArg>&lt;inputfilename.sql&gt;</SyntaxArg>
                                    For example: sudo -u postgres psql oozie &lt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>On the Ambari Server host, stop Ambari Server and confirm that it is stopped.</ItemPara>
                  <RichText>
                    <InLineTypeThis>ambari-server stop</InLineTypeThis>
                    <InLineTypeThis>ambari-server status</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Stop all Ambari Agents.</ItemPara>
                  <RichText>
                    At every host in your cluster known to Ambari,
                  </RichText>
                  <RichText>
                    <InLineTypeThis>ambari-agent stop</InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="41831906-2d58-4560-8544-0984950cd0c8">
          <Title>Upgrade the 2.0 Stack to 2.2</Title>
          <ParaBlock xy:guid="44485668-9b86-4b76-847a-ddbc9bf6f843">
            <List ListMarker="Numeric" xy:guid="c28238b0-79da-4ae7-ba02-6787d8b81b96">
              <ItemBlock>
                <Item>
                  <ItemPara>Upgrade the HDP repository on all hosts and replace the old repository file with the new
                    file:
                  </ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>
                          <Emph>For RHEL/CentOS/Oracle Linux 6:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/centos6/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/yum.repos.d/HDP.repo
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For SLES 11 SP3:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/suse11sp3/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/zypp/repos.d/HDP.repo
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For SLES 11 SP1:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/sles11sp1/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/zypp/repos.d/HDP.repo
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For UBUNTU:</Emph>
                        </ItemPara>
                        <Code>
                          wget -nv http://public-repo-1.hortonworks.com/HDP/ubuntu1/2.x/GA/2.2.0.0/hdp.list -O
                          /etc/apt/sourceslist.d/HDP.list
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>
                          <Emph>For RHEL/CentOS/Oracle Linux 5:</Emph>
                        </ItemPara>
                        <Code>wget -nv http://public-repo-1.hortonworks.com/HDP/centos5/2.x/GA/2.2.0.0/hdp.repo -O
                          /etc/yum.repos.d/HDP.repo
                        </Code>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="7bf88ecd-cb39-4438-9382-a64c93025251">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="8fb7127f-5438-45f7-8986-b094113402a5"/>
                    <SimpleBlock>
                      <RichText>Make sure to download the HDP.repo file under /etc/yum.repos on ALL hosts.</RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Update the Stack version in the Ambari Server database.
                    On the Ambari Server host, use the following command to update the Stack version to HDP-2.2:
                    <InLineTypeThis></InLineTypeThis>
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      ambari-server upgradestack HDP-2.2
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Back up the files in following directories on the Oozie server host and make sure that all
                    files, including *site.xml files are copied.
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>mkdir oozie-conf-bak
                      cp -R /etc/oozie/conf/* oozie-conf-bak
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Remove the old oozie directories on all Oozie server and client hosts.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>
                          <InLineTypeThis>rm -rf /etc/oozie/conf</InLineTypeThis>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>r
                          <InLineTypeThis>m -rf /usr/lib/oozie/</InLineTypeThis>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineTypeThis>rm -rf /var/lib/oozie/</InLineTypeThis>
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Upgrade the Stack on all Ambari Agent hosts.</ItemPara>
                  <CustomNote xy:guid="258148da-5e2d-4444-8033-bf21462980d3">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="10fdb8f8-eb31-414a-ba6e-ae1982148abd"/>
                    <SimpleBlock>
                      <RichText>For each host, identify the HDP components installed on each host. Use Ambari Web, as
                        described<Xref InsideTargetRef="9cb21557-3948-4efa-b3cb-1c65f5b0ad31">here</Xref>, to view
                        components on each host in your cluster.

                        Based on the HDP components installed, tailor the following upgrade commands for each host to
                        upgrade only components residing on that host. For example, if you know that a host has
                        <Emph>
                          <Italic>no</Italic>
                        </Emph>
                        HBase service or client packages installed, then you can adapt the command to
                        <Emph>
                          <Italic>not</Italic>
                        </Emph>
                        include HBase, as follows:

                        <InLineCode>yum install "collectd*" "gccxml*" "pig*" "hadoop*" "sqoop*" "zookeeper*" "hive*"
                        </InLineCode>
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="48f3060a-8192-4181-bce3-24ca8918c1e7">
                    <Icon thumbWidth="50" uri="Icons/Important.png" xy:guid="10d8d492-81c2-4d86-a931-49ba623aeb6c"/>
                    <SimpleBlock>
                      <RichText>If you are writing to multiple systems using a script, do not use " " with the run
                        command. You can use " " with pdsh -y.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>For RHEL/CentOS/Oracle Linux:</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>On all hosts, clean the yum repository.</ItemPara>
                              <RichText>
                                <InLineTypeThis>yum clean all</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove all components that you want to upgrade. At least, WebHCat, HCatlaog, and
                                Oozie components.
                                This command un-installs the HDP 2.0 component bits. It leaves the user data and
                                metadata, but removes your configurations.
                              </ItemPara>
                              <Code>yum erase "hadoop*" "webhcat*" "hcatalog*" "oozie*" "pig*" "hdfs*" "sqoop*"
                                "zookeeper*" "hbase*" "hive*" "phoenix*" "accumulo*" "mahout*" "hue*" "flume*"
                                "hdp_mon_nagios_addons"
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Remove your old hdp.repo and hdp-utils repo files.</ItemPara>
                              <RichText>
                                <InLineTypeThis>rm etc/yum/repos.d/hdp.repo hdp-utils.repo</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Install the following components:</ItemPara>
                              <Code>yum install "hadoop_2_2_0_0_*" "zookeeper_2_2_0_0_*" "hive_2_2_0_0_*"
                                "flume_2_2_0_0_*" "phoenix_2_2_0_0_*" "accumulo_2_2_0_0_*" "mahout_2_2_0_0_*"
                                rpm -e --nodeps hue-shell
                                yum install hue hue-common hue-beeswax hue-hcatalog hue-pig hue-oozie
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Verify that the components were upgraded.</ItemPara>
                              <RichText>
                                <InLineTypeThis>yum list installed | grep HDP-</InLineTypeThis>
                                <SyntaxArg>&lt;old-stack-version-number&gt;</SyntaxArg>
                              </RichText>
                              <RichText>
                                Nothing should appear in the returned list.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>For SLES:</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>On all hosts, clean the zypper repository.</ItemPara>
                              <RichText>
                                <InLineTypeThis>zypper clean --all</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove WebHCat, HCatalog, and Oozie components.
                                This command uninstalls the HDP 2.0 component bits. It leaves the user data and
                                metadata, but removes your configurations.
                              </ItemPara>
                              <Code>zypper remove "hadoop*" "webhcat*" "hcatalog*" "oozie*" "pig*" "hdfs*" "sqoop*"
                                "zookeeper*" "hbase*" "hive*" "phoenix*" "accumulo*" "mahout*" "hue*" "flume*"
                                "hdp_mon_nagios_addons"
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Remove your old hdp.repo and hdp-utils repo files.</ItemPara>
                              <RichText>
                                <InLineTypeThis>rm etc/zypp/repos.d/hdp.repo hdp-utils.repo</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Install the following components:</ItemPara>
                              <Code>zypper install "hadoop\_2_2_0_0_*" "oozie\_2_2_0_0_*" "pig\_2_2_0_0_*"
                                "sqoop\_2_2_0_0_*" "zookeeper\_2_2_0_0_*" "hbase\_2_2_0_0_*" "hive\_2_2_0_0_*"
                                "flume\_2_2_0_0_*" "phoenix\_2_2_0_0_*" "accumulo\_2_2_0_0_*" "mahout\_2_2_0_0_*"
                                rpm -e --nodeps hue-shell
                                zypper install hue hue-common hue-beeswax hue-hcatalog hue-pig hue-oozie
                              </Code>
                            </Item>
                            <Item>
                              <ItemPara>Verify that the components were upgraded.</ItemPara>
                              <RichText>
                                <InLineTypeThis>rpm -qa | grep hadoop, &amp;&amp; rpm -qa | grep hive &amp;&amp; rpm -qa
                                  | grep hcatalog
                                </InLineTypeThis>
                              </RichText>
                              <RichText>
                                No 2.0 components should appear in the returned list.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>If components were not upgraded, upgrade them as follows:</ItemPara>
                              <RichText>
                                <InLineTypeThis>yast --update hadoop hcatalog hive</InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Symlink directories, using<InLineCode>hdp-select</InLineCode>.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="76123f57-73b3-433c-8c42-a0338d16a247">
                    <Icon thumbWidth="50" uri="Icons/Warning.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="94c57fe0-5067-4ae2-a964-d902fb11edc0"/>
                    <SimpleBlock>
                      <RichText>To prevent version-specific directory issues for your scripts and updates, Hortonworks
                        provides<InLineCode>hdp-select</InLineCode>, a script that symlinks directories to hdp-current
                        and modifies paths for configuration directories.
                      </RichText>
                      <RichText>Check that the
                        <InLineCode>hdp-select</InLineCode>
                        package installed:

                        <InLineTypeThis>rpm -qa | grep hdp-select</InLineTypeThis>

                        You should see:
                        <InLineApplicationPrompt>hdp-select-2.2.0.0-2041.el6.noarch</InLineApplicationPrompt>

                        If not, then run:

                        <InLineTypeThis>yum install hdp-select</InLineTypeThis>

                        Run
                        <InLineCode>hdp-select</InLineCode>
                        as root, on every node. In<InLineCode>/usr/bin</InLineCode>:
                        <InLineTypeThis>
                          hdp-select set all 2.2.0.0-
                        </InLineTypeThis>
                        <SyntaxArg>&lt;$version&gt;
                        </SyntaxArg>
                        <InLineTypeThis>
                        </InLineTypeThis>where
                        <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                        is the build number. For the HDP 2.2 release &lt;$version&gt; = 2041.
                        <InLineTypeThis>
                        </InLineTypeThis>
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>Check that the
                    <InLineCode>hdp-select</InLineCode>
                    package installed:

                    <InLineTypeThis>rpm -qa | grep hdp-select</InLineTypeThis>

                    You should see:
                    <InLineApplicationPrompt>hdp-select-2.2.0.0-2041.el6.noarch</InLineApplicationPrompt>

                    If not, then run:

                    <InLineTypeThis>yum install hdp-select</InLineTypeThis>

                    Run
                    <InLineCode>hdp-select</InLineCode>
                    as root, on every node. In<InLineCode>/usr/bin</InLineCode>:
                    <InLineTypeThis>
                      hdp-select set all 2.2.0.0-
                    </InLineTypeThis>
                    <SyntaxArg>&lt;$version&gt;
                    </SyntaxArg>
                    <InLineTypeThis>
                    </InLineTypeThis>where
                    <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                    is the build number. For the HDP 2.2 release &lt;$version&gt; = 2041.
                    <InLineTypeThis>
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>On the Hive Metastore database host, stop the Hive Metastore
                    <Italic>
                      <Emph>service</Emph>
                    </Italic>
                    , if you have not done so already. Make sure that the Hive Metastore
                    <Italic>
                      <Emph>database</Emph>
                    </Italic>
                    is running.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Upgrade the Hive metastore database schema from v12 to v14, using the following
                    instructions:
                  </ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Set java home:</ItemPara>
                        <RichText>
                          <InLineTypeThis>export JAVA_HOME=/path/to/java</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy (rewrite) old Hive configurations to new conf dir:</ItemPara>
                        <RichText>
                          <InLineTypeThis>cp -R /etc/hive/conf.server/* /etc/hive/conf/</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy the jdbc connector to
                          <InLineTypeThis>/usr/hdp/</InLineTypeThis>
                          <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                          <InLineTypeThis>/hive/lib</InLineTypeThis>, if it not there, yet.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <SyntaxArg>&lt;HIVE_HOME&gt;</SyntaxArg>
                          <InLineTypeThis>/bin/schematool -upgradeSchema -dbType</InLineTypeThis>
                          <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>
                        </ItemPara>
                        <RichText>where &lt;HIVE_HOME&gt; is the Hive installation directory.</RichText>
                        <RichText>
                          For example, on the Hive Metastore host:

                          /usr/hdp/2.2.0.0-<SyntaxArg>&lt;$version&gt;</SyntaxArg>/hive/bin/schematool -upgradeSchema
                          -dbType
                          <SyntaxArg>&lt;databaseType&gt;
                          </SyntaxArg>
                          where<SyntaxArg> &lt;$version&gt; </SyntaxArg>is the 2.2.0 build number and
                          <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>
                          is derby, mysql, oracle, or postgres.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="1512192f-112b-4852-b7e8-81e2727e7fff">
          <Title>Complete the Upgrade of the 2.0 Stack to 2.2</Title>
          <ParaBlock xy:guid="f1676178-de2b-4585-ae5c-980c15bf2ad5">
            <List ListMarker="Numeric" xy:guid="9de9b638-6b69-411f-b560-8ccc175d9c93">
              <ItemBlock>
                <Item>
                  <ItemPara>Start Ambari Server.</ItemPara>
                  <RichText>On the Server host,
                    <InLineTypeThis>
                      amber-server start
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Start all Ambari Agents.</ItemPara>
                  <RichText>On each Ambari Agent host,
                    <InLineTypeThis>
                      ambari-agent start
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Update the repository Base URLs in the Ambari Server for the HDP 2.2 stack.</ItemPara>
                  <RichText>
                    Browse to
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Admin</InLineTypeThis>
                    &gt;<InLineTypeThis>Repositories</InLineTypeThis>, then set the value of the HDP and HDP-UTILS
                    repository Base URLs. For more information about viewing and editing repository Base URLs, see<Xref
                          InsideTargetRef="0cf8106e-364a-46d5-85aa-38dd0476a7e2">Viewing Cluster Stack Version and
                    Repository URLs</Xref>.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="30447a55-911e-41ad-a479-b1845bbcd236">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="380aea6d-d29a-40ca-9508-73e3d7844326"/>
                    <SimpleBlock>
                      <RichText>
                        For a remote, accessible, public repository, the HDP and HDP-UTILS Base URLs are the same as the
                        baseurl=values in the HDP.repo file downloaded in Upgrade the Stack: Step 1. For a local
                        repository, use the local repository Base URL that you configured for the HDP Stack. For links
                        to download the HDP repository files for your version of the Stack, see<Xref
                              InsideTargetRef="3e43081a-a937-4d51-92cc-1fbf15645713">HDP Repositories</Xref>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Using the<InLineMenuSelection>Ambari Web UI &gt; Services</InLineMenuSelection>, start the
                    ZooKeeper service.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>At all Datanode and Namenode hosts, copy (rewrite) old hdfs configurations to new conf
                    directory:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>cp /etc/hadoop/conf.empty/hdfs-site.xml.rpmsave /etc/hadoop/conf/hdfs-site.xml;
                    </InLineTypeThis>
                    <EndTextWrap EndWrap="true"/>
                    <InLineTypeThis>
                      cp /etc/hadoop/conf.empty/hadoop-env.sh.rpmsave /etc/hadoop/conf/hadoop-env.sh;
                    </InLineTypeThis>
                    <EndTextWrap EndWrap="true"/>
                    <InLineTypeThis>
                      cp /etc/hadoop/conf.empty/log4j.properties.rpmsave /etc/hadoop/conf/log4j.properties;
                    </InLineTypeThis>
                    <EndTextWrap EndWrap="false"/>
                    <InLineTypeThis>
                      cp /etc/hadoop/conf.empty/core-site.xml.rpmsave /etc/hadoop/conf/core-site.xml
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If you are upgrading from an HA NameNode configuration, start all JournalNodes.</ItemPara>
                  <RichText>
                    On each JournalNode host, run the following command:

                    <InLineTypeThis>su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "/usr/hdp/2.2.0.0-</InLineTypeThis>
                    <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                    <InLineTypeThis>/hadoop/sbin/hadoop-daemon.sh start journalnode"

                    </InLineTypeThis>where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="a04fbe3d-70f3-4be3-83e2-ae725176bc7f">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="ef421ebd-f0dd-411a-a1f8-470e54a364b6"/>
                    <SimpleBlock>
                      <RichText>All JournalNodes must be running when performing the upgrade, rollback, or finalization
                        operations. If any JournalNodes are down when running any such operation, the operation will
                        fail.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Because the file system version has now changed, you must start the NameNode manually.
                  </ItemPara>
                  <RichText>
                    On the active NameNode host, as the HDFS user:
                  </RichText>
                  <Code>su -l &lt;HDFS_USER&gt; -c "export HADOOP_LIBEXEC_DIR=/usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/libexec
                    &amp;&amp; /usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/sbin/hadoop-daemon.sh start namenode -upgrade"
                  </Code>
                  <RichText>
                    To check if the Upgrade is in progress, check that the "
                    <InLineCode>\previous</InLineCode>
                    " directory has been created in \NameNode and \JournalNode directories. The "
                    <InLineCode>\previous</InLineCode>
                    " directory contains a snapshot of the data before upgrade.
                  </RichText>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="eed1d2a8-1035-4132-a4fa-cb1bf96f69ad">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="e41bf72b-4d4b-4322-beb5-35e6c3729543"/>
                    <SimpleBlock>
                      <RichText>In a NameNode HA configuration, this NameNode will not enter the standby state as usual.
                        Rather, this NameNode will immediately enter the active state, perform an upgrade of its local
                        storage directories, and also perform an upgrade of the shared edit log. At this point, the
                        standby NameNode in the HA pair is still down. It will be out of sync with the upgraded active
                        NameNode.

                        To synchronize the active and standby NameNode, re-establishing HA, re-bootstrap the standby
                        NameNode by running the NameNode with the '-bootstrapStandby' flag. Do NOT start this standby
                        NameNode with the '-upgrade' flag.
                      </RichText>
                      <RichText>As the HDFS user:
                      </RichText>
                      <RichText>
                        <InLineTypeThis>su -l</InLineTypeThis>
                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                        <InLineTypeThis>-c "hdfs namenode -bootstrapStandby -force"w
                        </InLineTypeThis>
                      </RichText>
                      <RichText>The bootstrapStandby command will download the most recent fsimage from the active
                        NameNode into the &lt;dfs.name.dir&gt; directory of the standby NameNode. You can enter that
                        directory to make sure the fsimage has been successfully downloaded. After verifying, start the
                        ZKFailoverController via Ambari, then start the standby NameNode via Ambari. You can check the
                        status of both NameNodes using the Web UI.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Start all DataNodes.</ItemPara>
                  <RichText>
                    On each DataNode, as the HDFS user,
                  </RichText>
                  <Code>su -l &lt;HDFS_USER&gt; -c "/usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/sbin/hadoop-daemon.sh
                    --config /etc/hadoop/conf start datanode"
                  </Code>
                  <RichText>
                    where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS Service user. For example, hdfs.
                    <InLineTypeThis>
                    </InLineTypeThis>The NameNode sends an upgrade command to DataNodes after receiving block reports.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Update HDFS Configuration Properties for HDP 2.2</ItemPara>
                  <RichText>
                    Using
                    <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>HDFS</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Configs</InLineTypeThis>
                    &gt;<InLineTypeThis>core-site.xml</InLineTypeThis>:
                  </RichText>
                  <SubList ListMarker="Arrow">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Add</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="04e4fb6b-98d4-49cd-84d5-87a5e47dfa03">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hadoop.proxyuser.falcon.groups</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>users</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hadoop.proxyuser.falcon.hosts</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>*</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <RichText>
                    <InLineTypeThis>Using Ambari Web UI</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>HDFS</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Configs</InLineTypeThis>
                    &gt;<InLineTypeThis>hdfs-site.xml</InLineTypeThis>:
                  </RichText>
                  <SubList ListMarker="Arrow">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Add</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="55cf5ef8-da60-4b41-861d-688aac73c339">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>dfs.namenode.startup.delay.block.deletion.sec</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>3600</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Modify</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="3f20188e-29eb-4482-b55f-469e5acb6d7c">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>dfs.datanode.max.transfer.threads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>4096</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Restart HDFS.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Open the Ambari Web GUI. If the browser in which Ambari is running has been open
                          throughout the process, clear the browser cache, then refresh the browser.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Choose
                          <InLineTypeThis>Ambari Web</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>HDFS</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Service Actions</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Restart All.</InLineTypeThis>
                        </ItemPara>
                        <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                    xy:guid="f9006c63-8067-42e5-addb-cc9550059251">
                          <Icon thumbWidth="50" uri="Icons/Important.png"
                                xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                xy:guid="e875b9e3-0a76-4003-9c4b-989da99bd0f2"/>
                          <SimpleBlock>
                            <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                                  xy:guid="5a0b4bff-5f6e-4d4c-9540-490f97887d60">
                              <ListPreamble>In a cluster configured for NameNode High Availability, use the following
                                procedure to restart NameNodes. Using the following procedure preserves HA when
                                upgrading the cluster.
                              </ListPreamble>
                              <ItemBlock>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Services &gt; HDFS, choose Active NameNode.</ItemPara>
                                  <RichText>This shows the host name of the current, active NameNode.</RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Write down (or copy, or remember) the host name of the active NameNode.
                                  </ItemPara>
                                  <RichText>You need this host name for step 4.</RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Services &gt; HDFS &gt; Service Actions &gt; choose
                                    Stop.
                                  </ItemPara>
                                  <RichText>This stops all of the HDFS Components, including both NameNodes.</RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Hosts &gt; choose the host name you noted in Step 2,
                                    then start that NameNode component, using Host Actions &gt; Start.
                                  </ItemPara>
                                  <RichText>This causes the original, active NameNode to re-assume its role as the
                                    active NameNode.
                                  </RichText>
                                </Item>
                                <Item>
                                  <ItemPara>Using Ambari Web &gt; Services &gt; HDFS &gt; Service Actions, choose
                                    Re-Start All.
                                  </ItemPara>
                                </Item>
                              </ItemBlock>
                            </List>
                          </SimpleBlock>
                        </CustomNote>
                      </Item>
                      <Item>
                        <ItemPara>Choose
                          <InLineTypeThis>Service Actions</InLineTypeThis>
                          &gt;<InLineTypeThis>Run Service Check</InLineTypeThis>. Makes sure the service checks pass.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>After the DataNodes are started, HDFS exits safe mode. Monitor the status, by running the
                    following command, as the HDFS user:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>sudo su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "hdfs dfsadmin -safemode get"</InLineTypeThis>
                  </RichText>
                  <RichText>
                    When HDFS exits safe mode, the following message displays:
                  </RichText>
                  <RichText>
                    <InLineApplicationPrompt>Safe mode is OFF</InLineApplicationPrompt>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Make sure that the HDFS upgrade was successful.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Compare the old and new versions of the following log files:</ItemPara>
                        <SubList ListMarker="Bullet">
                          <ItemBlock>
                            <Item>
                              <ItemPara>
                                <InLineCode>dfs-old-fsck-1.log</InLineCode>
                                versus<InLineCode>dfs-new-fsck-1.log</InLineCode>.
                              </ItemPara>
                              <RichText>
                                The files should be identical unless the hadoop fsck reporting format has changed in the
                                new version.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>
                                <InLineCode>dfs-old-lsr-1.log</InLineCode>
                                versus<InLineCode>dfs-new-lsr-1.log</InLineCode>.
                              </ItemPara>
                              <RichText>
                                The files should be identical unless the format of hadoop fs -lsr reporting or the data
                                structures have changed in the new version.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>
                                <InLineCode>dfs-old-report-1.log</InLineCode>
                                versus
                                <InLineCode>fs-new-report-1.log.</InLineCode>
                              </ItemPara>
                              <RichText>
                                Make sure that all DataNodes in the cluster before upgrading are up and running.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Update HBase Configuration Properties for HDP 2.2</ItemPara>
                  <RichText>
                    Using
                    <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>HBase</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Configs</InLineTypeThis>
                    &gt;<InLineTypeThis>hbase-site.xml</InLineTypeThis>:
                  </RichText>
                  <SubList ListMarker="Arrow">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Add</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="ca9ebf69-0554-4887-ae70-1bb08bd50001">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hbase.hregion.majorcompaction.jitter</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.50</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Modify</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="a8171079-af5d-4e90-9c45-3e4333ebcd1f">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hbase.hregion.majorcompaction</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>604800000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hbase.hregion.memstore.block.multiplier</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>4</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Remove</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="f507fae6-7b7e-4e4d-ae9a-4697774888dd">
                          <TblGroup>
                            <TblCol width="47"/>
                            <TblCol width="53"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hbase.hstore.flush.retries.number</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>120</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Using Ambari Web, navigate to
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Hive</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Configs</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Advanced</InLineTypeThis>
                    <InLineMenuSelection></InLineMenuSelection>and verify that the following properties are set to their
                    default values:
                  </ItemPara>
                  <Code>Hive (Advanced)
                    hive.security.authorization.manager=org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider
                    hive.security.metastore.authorization.manager=org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider
                    hive.security.authenticator.manager=org.apache.hadoop.hive.ql.security.ProxyUserAuthenticator
                  </Code>
                  <CustomNote xy:guid="0c499e15-53a4-41fb-91fe-c92e89b54311">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="721e5b7e-ba41-4d54-962c-a82c5dafa347"/>
                    <SimpleBlock>
                      <RichText>The Security Wizard enables Hive authorization. The default values for these properties
                        changed in Hive-0.12. If you are upgrading Hive from 0.12 to 0.13 in a secure cluster, you
                        should not need to change the values. If upgrading from Hive-older than version 0.12 to
                        Hive-0.12 or greater in a secure cluster, you will need to correct the values.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Update Hive Configuration Properties for HDP 2.2</ItemPara>
                  <RichText>
                    Using
                    <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Hive</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Configs</InLineTypeThis>
                    &gt;<InLineTypeThis>hive-site.xml</InLineTypeThis>:
                  </RichText>
                  <SubList ListMarker="Arrow">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Add</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="1e46793c-a45c-475f-b224-be8b94cabd2c">
                          <TblGroup>
                            <TblCol width="40"/>
                            <TblCol width="60"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.cluster.delegation.token.store.zookeeper.connectString</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>&lt;!-- The ZooKeeper token store connect string. --&gt;</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>datanucleus.cache.level2.type</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>none</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.auto.convert.sortmerge.join.to.mapjoin</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.cbo.enable</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.cli.print.header</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.cluster.delegation.token.store.class</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hadoop.hive.thrift.ZooKeeperTokenStore</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.cluster.delegation.token.store.zookeeper.znode</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/hive/cluster/delegation</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.abortedtxn.threshold</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.check.interval</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>300L</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.delta.num.threshold</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.delta.pct.threshold</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.1f</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.initiator.on</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.worker.threads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compactor.worker.timeout</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>86400L</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.compute.query.using.stats</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.conf.restricted.list</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>
                                    hive.security.authenticator.manager,hive.security.authorization.manager,hive.users.in.admin.role
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.convert.join.bucket.mapjoin.tez</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.enforce.sortmergebucketmapjoin</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.compress.intermediate</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.compress.output</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.dynamic.partition</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.dynamic.partition.mode</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>nonstrict</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.max.created.files</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>100000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.max.dynamic.partitions</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>5000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.max.dynamic.partitions.pernode</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>2000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.orc.compression.strategy</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>SPEED</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.orc.default.compress</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>ZLIB</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.orc.default.stripe.size</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>67108864</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.parallel</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.parallel.thread.number</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>8</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.reducers.bytes.per.reducer</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>67108864</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.reducers.max</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1009</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.scratchdir</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/tmp/hive</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.submit.local.task.via.child</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.exec.submitviachild</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.fetch.task.aggr</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.fetch.task.conversion</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>more</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.fetch.task.conversion.threshold</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1073741824</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.limit.optimize.enable</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.limit.pushdown.memory.usage</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.04</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.map.aggr.hash.force.flush.memory.threshold</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.9</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.map.aggr.hash.min.reduction</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.5</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.map.aggr.hash.percentmemory</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.5</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.mapjoin.optimized.hashtable</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.mapfiles</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.mapredfiles</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.orcfile.stripe.level</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.rcfile.block.level</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.size.per.task</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>256000000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.smallfiles.avgsize</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>16000000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.merge.tezfiles</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.authorization.storage.checks</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.client.connect.retry.delay</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>5s</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.connect.retries</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>24</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.failure.retries</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>24</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.kerberos.keytab.file</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/etc/security/keytabs/hive.service.keytab</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.kerberos.principal</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive/_HOST@EXAMPLE.COM</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.server.max.threads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>100000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.optimize.constant.propagation</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.optimize.metadataonly</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.optimize.null.scan</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.optimize.sort.dynamic.partition</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.orc.compute.splits.num.threads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.orc.splits.include.file.footer</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.prewarm.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.prewarm.numcontainers</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.security.metastore.authenticator.manager</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hadoop.hive.ql.security.HadoopDefaultMetastoreAuthenticator
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.security.metastore.authorization.auth.reads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.allow.user.substitution</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.authentication.spnego.keytab</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>HTTP/_HOST@EXAMPLE.COM</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.authentication.spnego.principal</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/etc/security/keytabs/spnego.service.keytab</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.logging.operation.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.logging.operation.log.location</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>${system:java.io.tmpdir}/${system:user.name}/operation_logs</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.table.type.mapping</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>CLASSIC</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.tez.default.queues</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>default</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.tez.sessions.per.default.queue</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.thrift.http.path</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>cliservice</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.thrift.http.port</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10001</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.thrift.max.worker.threads</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>500</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.thrift.sasl.qop</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>auth</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.transport.mode</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>binary</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.use.SSL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.smbjoin.cache.rows</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.stats.autogather</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.stats.dbclass</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>fs</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.stats.fetch.column.stats</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.stats.fetch.partition.stats</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.support.concurrency</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.auto.reducer.parallelism</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.cpu.vcores</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>-1</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.dynamic.partition.pruning</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.dynamic.partition.pruning.max.data.size</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>104857600</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.dynamic.partition.pruning.max.event.size</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1048576</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.input.format</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hadoop.hive.ql.io.HiveInputFormat</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.log.level</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>INFO</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.max.partition.factor</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>2.0</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.min.partition.factor</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.25</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.smb.number.waves</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.5</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.txn.manager</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hadoop.hive.ql.lockmgr.DummyTxnManager</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.txn.max.open.batch</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.txn.timeout</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>300</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.user.install.directory</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/user/</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.vectorized.execution.reduce.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.vectorized.groupby.checkinterval</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>4096</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.vectorized.groupby.flush.percent</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.1</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.vectorized.groupby.maxentries</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>100000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.zookeeper.client.port</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>2181</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.zookeeper.namespace</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive_zookeeper_namespace</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.zookeeper.quorum</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>&lt;!-- List of zookeeper server to talk to --&gt;</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Modify</ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="0eea93ba-dd99-45d9-941a-f2e410489526">
                          <TblGroup>
                            <TblCol width="42"/>
                            <TblCol width="58"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.auto.convert.join.noconditionaltask.size</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>238026752</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.metastore.client.socket.timeout</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1800s</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.optimize.reducededuplication.min.reducer</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>4</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.security.authorization.manager</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>
                                    org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdConfOnlyAuthorizerFactory
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.security.metastore.authorization.manager</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>
                                    org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider,org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.server2.support.dynamic.service.discovery</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.container.size</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>682</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hive.tez.java.opts</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>-server -Xmx546m -Djava.net.preferIPv4Stack=true -XX:NewRatio=8 -XX:+UseNUMA
                                    -XX:+UseParallelGC -XX:+PrintGCDetails -verbose:gc -XX:+PrintGCTimeStamps
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>fs.file.impl.disable.cache</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>fs.hdfs.impl.disable.cache</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>If YARN is installed in your HDP 2.0 stack, and the Application Timeline Server (ATS)
                    components are<Emph>NOT</Emph>, then you must create and install ATS service and host components via
                    API by running the following commands on the server that will host the YARN application timeline
                    server in your cluster. Be sure to replace
                    <SyntaxArg>&lt;your_ATS_component_hostname&gt;</SyntaxArg>
                    with a host name appropriate for your envrionment.
                  </ItemPara>
                  <CustomNote xy:guid="51973603-bd90-468a-84bd-f7641ab41ad0">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="cea02ca0-e050-441e-ad98-15965371a8ca"/>
                    <SimpleBlock>
                      <RichText>Ambari does not currently support ATS in a kerberized cluster. If you are upgrading YARN
                        in a kerberized cluster, skip this step.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Create the ATS Service Component.</ItemPara>
                        <Code>curl --user admin:admin -H "X-Requested-By: ambari" -i -X POST
                          http://localhost:8080/api/v1/clusters/&lt;your_cluster_name&gt;/services/YARN/components/APP_TIMELINE_SERVER
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>Create the ATS Host Component.</ItemPara>
                        <Code>
                          curl --user admin:admin -H "X-Requested-By: ambari" -i -X POST
                          http://localhost:8080/api/v1/clusters/&lt;your_cluster_name&gt;/hosts/&lt;your_ATS_component_hostname&gt;/host_components/APP_TIMELINE_SERVER
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>Install the ATS Host Component.</ItemPara>
                        <Code>curl --user admin:admin -H "X-Requested-By: ambari" -i -X PUT -d '{ "HostRoles": {
                          "state": "INSTALLED"}}' http://localhost:8080/api/v1/clusters/&lt;your_cluster_name&gt;/hosts/&lt;your_ATS_component_hostname&gt;/host_components/APP_TIMELINE_SERVER
                        </Code>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <CustomNote xy:guid="4a5ab245-7b4a-4ce2-8556-21baa0c8e206">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="cb972dfc-2ab9-4456-b9cc-9926ed6a51ea"/>
                    <SimpleBlock>
                      <RichText>curl commands use the default<InLineCode>username/password = admin/admin</InLineCode>.
                        To run the curl commands using non-default credentials, modify the --user option to use your
                        Ambari administrator credentials. For example: --user<SyntaxArg>
                          &lt;ambari_admin_username&gt;</SyntaxArg>:<SyntaxArg>&lt;ambari_admin_password&gt;</SyntaxArg>
                        .
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Make the following config changes required for Application Timeline Server. Use the Ambari
                    web UI to navigate to the service dashboard and add/modify the following configurations:
                  </ItemPara>
                  <Code>YARN (Custom yarn-site.xml)
                    yarn.timeline-service.leveldb-timeline-store.path=/var/log/hadoop-yarn/timeline
                    yarn.timeline-service.leveldb-timeline-store.ttl-interval-ms=300000
                    yarn.timeline-service.store-class=org.apache.hadoop.yarn.server.timeline.LeveldbTimelineStore
                    yarn.timeline-service.ttl-enable=true
                    yarn.timeline-service.ttl-ms=2678400000
                    yarn.timeline-service.generic-application-history.store-class=org.apache.hadoop.yarn.server.applicationhistoryservice.NullApplicationHistoryStore
                    yarn.timeline-service.webapp.address=&lt;PUT_THE_FQDN_OF_ATS_HOST_NAME_HERE&gt;:8188
                    yarn.timeline-service.webapp.https.address=&lt;PUT_THE_FQDN_OF_ATS_HOST_NAME_HERE&gt;:8190
                    yarn.timeline-service.address=&lt;PUT_THE_FQDN_OF_ATS_HOST_NAME_HERE&gt;:10200
                  </Code>
                  <Code>
                    HIVE (hive-site.xml)
                    hive.execution.engine=mr
                    hive.exec.failure.hooks=org.apache.hadoop.hive.ql.hooks.ATSHook
                    hive.exec.post.hooks=org.apache.hadoop.hive.ql.hooks.ATSHook
                    hive.exec.pre.hooks=org.apache.hadoop.hive.ql.hooks.ATSHook
                    hive.tez.container.size=&lt;map-container-size&gt;</Code>
                  <RichText>
                    <InLineApplicationPrompt>*If mapreduce.map.memory.mb &gt; 2GB then set it equal to
                      mapreduce.map.memory. Otherwise, set it equal to
                    </InLineApplicationPrompt>
                  </RichText>
                  <Code>mapreduce.reduce.memory.mb*
                    hive.tez.java.opts="-server -Xmx" + Math.round(0.8 * map-container-size) + "m
                    -Djava.net.preferIPv4Stack=true -XX:NewRatio=8 -XX:+UseNUMA -XX:+UseParallelGC"
                  </Code>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="32df8ada-737d-406a-974b-2c92f2c01847">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="69bb18a2-b0a9-4eb8-a67e-5be5102f5a67"/>
                    <SimpleBlock>
                      <RichText>Use configuration values appropriate for your environment. For example, the value "800"
                        in the preceding example is shown only for illustration purposes.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Prepare MR2 and Yarn for work. Execute hdfs commands on any host.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Create mapreduce dir in hdfs.</ItemPara>
                        <RichText>
                          <InLineTypeThis>su -l</InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>-c "hdfs dfs -mkdir -p /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce/"
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy new mapreduce.tar.gz to hdfs mapreduce dir.</ItemPara>
                        <Code>su -l &lt;HDFS_USER&gt; -c "hdfs dfs -copyFromLocal /usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/mapreduce.tar.gz
                          /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce/."
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>Grant permissions for created mapreduce dir in hdfs.</ItemPara>
                        <Code>su -l &lt;HDFS_USER&gt; -c "hdfs dfs -chown -R &lt;HDFS_USER&gt;:&lt;HADOOP_GROUP&gt;
                          /hdp";
                          su -l &lt;HDFS_USER&gt; -c "hdfs dfs -chmod -R 555 /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce";
                          su -l &lt;HDFS_USER&gt; -c "hdfs dfs -chmod -R 444 /hdp/apps/2.2.0.0-&lt;$version&gt;/mapreduce/mapreduce.tar.gz"
                        </Code>
                      </Item>
                      <Item>
                        <ItemPara>Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Service</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Mapreduce2</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Advanced</InLineTypeThis>
                          &gt;<InLineTypeThis>mapred-site</InLineTypeThis>:
                        </ItemPara>
                        <SubList ListMarker="Bullet">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Add</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="63133d1f-a050-4d58-8e22-410a72afedbf">
                                <TblGroup>
                                  <TblCol width="47"/>
                                  <TblCol width="53"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.job.emit-timeline-data</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>false</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.jobhistory.bind-host</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>0.0.0.0</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.shuffle.fetch.retry.enabled</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.shuffle.fetch.retry.interval-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>1000</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.shuffle.fetch.retry.timeout-ms</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>30000</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                            <Item>
                              <ItemPara>Modify</ItemPara>
                              <Table align="left" border="true" width="100"
                                     xy:guid="f6ed3fe8-0681-43cb-9ce5-d467c2a5a1c8">
                                <TblGroup>
                                  <TblCol width="47"/>
                                  <TblCol width="53"/>
                                  <TblHeader>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Name</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>Value</RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblHeader>
                                  <TblBody>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.admin.map.child.java.opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true
                                          -Dhdp.version=${hdp.version}
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.admin.reduce.child.java.opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-server -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true
                                          -Dhdp.version=${hdp.version}
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.map.java.opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-Xmx546m</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.map.memory.mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>682</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.reduce.java.opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-Xmx546m</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.task.io.sort.mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>273</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.app.mapreduce.am.admin-command-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-Dhdp.version=${hdp.version}</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.app.mapreduce.am.command-opts</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>-Xmx546m -Dhdp.version=${hdp.version}</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>yarn.app.mapreduce.am.resource.mb</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>682</RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.application.framework.path</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>/hdp/apps/${hdp.version}/mapreduce/mapreduce.tar.gz#mr-framework
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.application.classpath</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          $PWD/mr-framework/hadoop/share/hadoop/mapreduce/*:$PWD/mr-framework/hadoop/share/hadoop/mapreduce/lib/*:$PWD/mr-framework/hadoop/share/hadoop/common/*:$PWD/mr-framework/hadoop/share/hadoop/common/lib/*:$PWD/mr-framework/hadoop/share/hadoop/yarn/*:$PWD/mr-framework/hadoop/share/hadoop/yarn/lib/*:$PWD/mr-framework/hadoop/share/hadoop/hdfs/*:$PWD/mr-framework/hadoop/share/hadoop/hdfs/lib/*:/usr/hdp/${hdp.version}/hadoop/lib/hadoop-lzo-0.6.0.${hdp.version}.jar:/etc/hadoop/conf/secure
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                    <TableRow>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>mapreduce.admin.user.env</RichText>
                                      </Cell>
                                      <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                        <RichText>
                                          LD_LIBRARY_PATH=/usr/hdp/${hdp.version}/hadoop/lib/native:/usr/hdp/${hdp.version}/hadoop/lib/native/Linux-amd64-64
                                        </RichText>
                                      </Cell>
                                    </TableRow>
                                  </TblBody>
                                  <TblFooter/>
                                </TblGroup>
                              </Table>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Using
                          <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Service</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Yarn</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Configs</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>Advanced</InLineTypeThis>
                          &gt;<InLineTypeThis>yarn-site</InLineTypeThis>. Add/modify the following property:
                        </ItemPara>
                        <Table align="left" border="true" width="100" xy:guid="b76284aa-f266-41da-beab-2a434e1ba652">
                          <TblGroup>
                            <TblCol width="42"/>
                            <TblCol width="58"/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hadoop.registry.zk.quorum</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>&lt;!--List of hostname:port pairs defining the zookeeper quorum binding for
                                    the registry--&gt;</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hadoop.registry.rm.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.client.nodemanager-connect.max-wait-ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>900000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.client.nodemanager-connect.retry-interval-ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.node-labels.fs-store.retry-policy-spec</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>2000, 500</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.node-labels.fs-store.root-dir</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/system/yarn/node-labels</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.node-labels.manager-class</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>
                                    org.apache.hadoop.yarn.server.resourcemanager.nodelabels.MemoryRMNodeLabelsManager
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.bind-host</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.0.0.0</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>
                                    yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>90</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.disk-health-checker.min-free-space-per-disk-mb</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.linux-container-executor.cgroups.hierarchy</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>hadoop-yarn</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.linux-container-executor.cgroups.mount</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.linux-container-executor.cgroups.strict-resource-usage
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.linux-container-executor.resources-handler.class</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hadoop.yarn.server.nodemanager.util.DefaultLCEResourcesHandler
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.log-aggregation.debug-enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.log-aggregation.num-log-files-per-app</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>30</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>-1</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.recovery.dir</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/var/log/hadoop-yarn/nodemanager/recovery-state</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.recovery.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.resource.cpu-vcores</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.nodemanager.resource.percentage-physical-cpu-limit</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>100</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.bind-host</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.0.0.0</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.connect.max-wait.ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>900000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.connect.retry-interval.ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>30000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.fs.state-store.retry-policy-spec</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>2000, 500</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.fs.state-store.uri</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Â Â &lt;enter a "space" as the property value&gt;</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.ha.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.recovery.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.state-store.max-completed-applications</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>${yarn.resourcemanager.max-completed-applications}</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.store.class</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.system-metrics-publisher.dispatcher.pool-size
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.system-metrics-publisher.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.webapp.delegation-token-auth-filter.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.work-preserving-recovery.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>false</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.work-preserving-recovery.scheduling-wait-ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.zk-acl</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>world:anyone:rwcda</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.zk-address</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>localhost:2181</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.zk-num-retries</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.zk-retry-interval-ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.zk-state-store.parent-path</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>/rmstore</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.resourcemanager.zk-timeout-ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.bind-host</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>0.0.0.0</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.client.max-retries</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>30</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.client.retry-interval-ms</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>1000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.enabled</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.http-authentication.simple.anonymous.allowed
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>true</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.http-authentication.type</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>simple</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.leveldb-timeline-store.read-cache-size</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>104857600</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.leveldb-timeline-store.start-time-read-cache-size
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10000</RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>yarn.timeline-service.leveldb-timeline-store.start-time-write-cache-size
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>10000</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start YARN.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start MapReduce2.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Service Actions,</InLineTypeThis>
                    start HBase and ensure the service check passes.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Using
                    <InLineTypeThis>Ambari Web</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Services</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Service Actions</InLineTypeThis>
                    <InLineMenuSelection>,</InLineMenuSelection>start the Hive service.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Upgrade Oozie.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Perform the following preparation steps on each Oozie server host:</ItemPara>
                        <CustomNote xy:guid="618f4d61-8e52-44c7-8bc3-c83be6e584c0">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="e65c1a3b-f305-4ffa-b380-b0b0fdbb22cd"/>
                          <SimpleBlock>
                            <RichText>You must replace your Oozie configuration after upgrading.</RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Copy configurations from
                                <InLineMenuSelection>oozie-conf-bak</InLineMenuSelection>
                                to the
                                <InLineMenuSelection>/etc/oozie/conf</InLineMenuSelection>
                                directory on each Oozie server and client.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Create
                                <InLineCode>/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22</InLineCode>
                                directory.
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>mkdir /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Copy the JDBC jar of your Oozie database to both
                                <InLineCode>/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22</InLineCode>
                                and<InLineCode>/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libtools</InLineCode>.
                                For example, if you are using MySQL, copy your<InLineCode>
                                  mysql-connector-java.jar</InLineCode>.
                                <InLineCode>
                                </InLineCode>
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Copy these files to
                                <InLineCode>/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22</InLineCode>
                                directory
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>cp /usr/lib/hadoop/lib/hadoop-lzo*.jar /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22;
                                  cp /usr/share/HDP-oozie/ext-2.2.zip /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22;
                                  cp /usr/share/HDP-oozie/ext-2.2.zip /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Grant read/write access to the Oozie user.</ItemPara>
                              <RichText>
                                <InLineTypeThis>chmod -R 777 /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Upgrade steps:</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>On the Services view, make sure that YARN and MapReduce2 services are running.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Make sure that the Oozie service is stopped.</ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>In<InLineCode>oozie-env.sh</InLineCode>, comment out
                                <InLineCode>CATALINA_BASE</InLineCode>
                                property, also do the same using Ambari Web UI in
                                <InLineTypeThis>Services</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Oozie</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Configs</InLineTypeThis>
                                &gt;<InLineTypeThis>Advanced oozie-env</InLineTypeThis>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Upgrade Oozie.</ItemPara>
                              <RichText>
                                At the Oozie server host, as the Oozie service user:
                              </RichText>
                              <RichText>
                                <InLineTypeThis>sudo su -l</InLineTypeThis>
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c"/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/bin/ooziedb.sh upgrade -run"
                                </InLineTypeThis>
                                where
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                is the Oozie service user. For example, oozie.
                              </RichText>
                              <RichText>
                                Make sure that the output contains the string "Oozie DB has been upgraded to Oozie
                                version<SyntaxArg>&lt;OOZIE_Build_Version&gt;</SyntaxArg>.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Prepare the Oozie WAR file.</ItemPara>
                              <CustomNote xy:guid="10be3936-901f-40e3-bd6b-be34aec47d84">
                                <Icon thumbWidth="50" uri="Icons/Note.png"
                                      xy:guid="42fbeb3b-0f69-49f8-b0b4-64ba59d08458"/>
                                <SimpleBlock>
                                  <RichText>The Oozie server must be
                                    <Emph>not</Emph>
                                    running for this step. If you get the message "ERROR: Stop Oozie first", it means
                                    the script still thinks it's running. Check, and if needed, remove the process id
                                    (pid) file indicated in the output.
                                  </RichText>
                                  <RichText/>
                                </SimpleBlock>
                              </CustomNote>
                              <RichText>
                                At the Oozie server, as the Oozie user
                                <InLineTypeThis>
                                  sudo su -l
                                </InLineTypeThis>
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "/usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/bin/oozie-setup.sh
                                  prepare-war -d /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/libext-upgrade22"
                                </InLineTypeThis>where
                                <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                is the Oozie service user. For example, oozie.
                              </RichText>
                              <RichText>
                                Make sure that the output contains the string "New Oozie WAR file added".
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Using<InLineMenuSelection>Ambari Web</InLineMenuSelection>, choose
                                <InLineMenuSelection>Services &gt; Oozie &gt; Configs, expand
                                  oozie-log4j</InLineMenuSelection>, then add the following property:
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>log4j.appender.oozie.layout.ConversionPattern=%d{ISO8601} %5p %c{1}:%L -
                                  SERVER[
                                </InLineTypeThis>
                                <SyntaxArg>${oozie.instance.id}</SyntaxArg>
                                <InLineTypeThis>] %m%n</InLineTypeThis>
                                where
                                <SyntaxArg>${oozie.instance.id}</SyntaxArg>
                                is determined by oozie, automatically.
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Using Ambari Web, choose
                                <InLineTypeThis>Services</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Oozie</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Configs</InLineTypeThis>
                                <InLineMenuSelection>,</InLineMenuSelection>expand<InLineMenuSelection>Advanced
                                  oozie-site</InLineMenuSelection>, then edit the following properties:
                              </ItemPara>
                              <SubList ListMarker="UppercaseAlpha">
                                <ItemBlock>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.service.coord.push.check.requeue.interval</InLineCode>
                                      ,
                                      <Italic>
                                        <Emph>replace</Emph>
                                      </Italic>
                                      the existing property value with the following one:
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>30000</InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.service.SchemaService.wf.ext.schemas</InLineCode>,
                                      <Italic>
                                        <Emph>append</Emph>
                                      </Italic>
                                      (using copy/paste) to the existing property value the following string, if is it
                                      is not already present:
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>
                                        shell-action-0.1.xsd,shell-action-0.2.xsd,shell-action-0.3.xsd,email-action-0.1.xsd,email-action-0.2.xsd,hive-action-0.2.xsd,hive-action-0.3.xsd,hive-action-0.4.xsd,hive-action-0.5.xsd,sqoop-action-0.2.xsd,sqoop-action-0.3.xsd,sqoop-action-0.4.xsd,ssh-action-0.1.xsd,ssh-action-0.2.xsd,distcp-action-0.1.xsd,distcp-action-0.2.xsd,oozie-sla-0.1.xsd,oozie-sla-0.2.xsd
                                      </InLineTypeThis>
                                    </RichText>
                                    <CustomNote xy:guid="25bc5939-6781-4bce-963f-96f8a0bc3515">
                                      <Icon thumbWidth="50" uri="Icons/Note.png"
                                            xy:guid="30553f80-986f-49c9-94d3-3517fc021459"/>
                                      <SimpleBlock>
                                        <RichText>If you have customized schemas, append this string to your custom
                                          schema name string.
                                        </RichText>
                                        <RichText>Do not overwrite custom schemas.</RichText>
                                        <RichText>If you have no customized schemas, you can replace the existing string
                                          with the following one:
                                        </RichText>
                                        <RichText>
                                          shell-action-0.1.xsd,email-action-0.1.xsd,hive-action-0.2.xsd,sqoop-action-0.2.xsd,ssh-action-0.1.xsd,distcp-action-0.1.xsd,shell-action-0.2.xsd,oozie-sla-0.1.xsd,oozie-sla-0.2.xsd,hive-action-0.3.xsd
                                        </RichText>
                                      </SimpleBlock>
                                    </CustomNote>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.service.URIHandlerService.uri.handlers</InLineCode>,
                                      <Italic>
                                        <Emph>append</Emph>
                                      </Italic>
                                      to the existing property value the following string, if is it is not already
                                      present:
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>
                                        org.apache.oozie.dependency.FSURIHandler,org.apache.oozie.dependency.HCatURIHandler
                                      </InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.services</InLineCode>, make sure all the following
                                      properties are present:
                                    </ItemPara>
                                    <Code>org.apache.oozie.service.SchedulerService,
                                      org.apache.oozie.service.InstrumentationService,
                                      org.apache.oozie.service.MemoryLocksService,
                                      org.apache.oozie.service.UUIDService,
                                      org.apache.oozie.service.ELService,
                                      org.apache.oozie.service.AuthorizationService,
                                      org.apache.oozie.service.UserGroupInformationService,
                                      org.apache.oozie.service.HadoopAccessorService,
                                      org.apache.oozie.service.JobsConcurrencyService,
                                      org.apache.oozie.service.URIHandlerService,
                                      org.apache.oozie.service.DagXLogInfoService,
                                      org.apache.oozie.service.SchemaService,
                                      org.apache.oozie.service.LiteWorkflowAppService,
                                      org.apache.oozie.service.JPAService,
                                      org.apache.oozie.service.StoreService,
                                      org.apache.oozie.service.CoordinatorStoreService,
                                      org.apache.oozie.service.SLAStoreService,
                                      org.apache.oozie.service.DBLiteWorkflowStoreService,
                                      org.apache.oozie.service.CallbackService,
                                      org.apache.oozie.service.ActionService,
                                      org.apache.oozie.service.ShareLibService,
                                      org.apache.oozie.service.CallableQueueService,
                                      org.apache.oozie.service.ActionCheckerService,
                                      org.apache.oozie.service.RecoveryService,
                                      org.apache.oozie.service.PurgeService,
                                      org.apache.oozie.service.CoordinatorEngineService,
                                      org.apache.oozie.service.BundleEngineService,
                                      org.apache.oozie.service.DagEngineService,
                                      org.apache.oozie.service.CoordMaterializeTriggerService,
                                      org.apache.oozie.service.StatusTransitService,
                                      org.apache.oozie.service.PauseTransitService,
                                      org.apache.oozie.service.GroupsService,
                                      org.apache.oozie.service.ProxyUserService,
                                      org.apache.oozie.service.XLogStreamingService,
                                      org.apache.oozie.service.JvmPauseMonitorService
                                    </Code>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the<InLineCode>
                                      oozie.services.coord.check.maximum.frequency</InLineCode>property with the
                                      following property value:
                                      <InLineTypeThis>false</InLineTypeThis>
                                    </ItemPara>
                                    <RichText>
                                      If you set this property to true, Oozie rejects any coordinators with a frequency
                                      faster than 5 minutes. It is not recommended to disable this check or submit
                                      coordinators with frequencies faster than 5 minutes: doing so can cause unintended
                                      behavior and additional system stress.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the
                                      <InLineTypeThis>oozie.service.AuthorizationService.security.enabled
                                      </InLineTypeThis>
                                      <InLineCode></InLineCode>property with the following property value:
                                      <InLineTypeThis>false</InLineTypeThis>
                                    </ItemPara>
                                    <RichText>

                                      Specifies whether security (user name/admin role) is enabled or not. If disabled
                                      any user can manage Oozie system and manage any job.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the
                                      <InLineTypeThis>oozie.service.HadoopAccessorService.kerberos.enabled
                                      </InLineTypeThis>
                                      <InLineCode></InLineCode>property with the following property value:
                                      <InLineTypeThis>false</InLineTypeThis>
                                    </ItemPara>
                                    <RichText>

                                      Indicates if Oozie is configured to use Kerberos.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the
                                      <InLineTypeThis>oozie.authentication.simple.anonymous.allowed</InLineTypeThis>
                                      <InLineCode></InLineCode>property with the following property value:
                                      <InLineTypeThis>true</InLineTypeThis>
                                    </ItemPara>
                                    <RichText>

                                      Indicates if anonymous requests are allowed. This setting is meaningful only when
                                      using 'simple' authentication.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>In<InLineCode>oozie.services.ext</InLineCode>,
                                      <Italic>
                                        <Emph>append</Emph>
                                      </Italic>
                                      to the existing property value the following string, if is it is not already
                                      present:
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>
                                        org.apache.oozie.service.PartitionDependencyManagerService,org.apache.oozie.service.HCatAccessorService
                                      </InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Update Oozie Configuration Properties for HDP 2.2</ItemPara>
                                    <RichText>
                                      Using<InLineTypeThis>Ambari Web UI &gt; Services &gt; Oozie &gt; Configs &gt;
                                      oozie-site.xml</InLineTypeThis>:
                                    </RichText>
                                    <SubList ListMarker="Arrow">
                                      <ItemBlock>
                                        <Item>
                                          <ItemPara>Add</ItemPara>
                                          <Table align="left" border="true" width="100"
                                                 xy:guid="4b249b4d-9666-4f8d-9046-261f8baae12d">
                                            <TblGroup>
                                              <TblCol width="47"/>
                                              <TblCol width="53"/>
                                              <TblHeader>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>Name</RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>Value</RichText>
                                                  </Cell>
                                                </TableRow>
                                              </TblHeader>
                                              <TblBody>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.authentication.simple.anonymous.allowed</RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>true</RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.service.coord.check.maximum.frequency</RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>false</RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      oozie.service.ELService.ext.functions.coord-action-create
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      now=org.apache.oozie.extensions.OozieELExtensions#ph2_now,
                                                    </RichText>
                                                    <RichText>
                                                      today=org.apache.oozie.extensions.OozieELExtensions#ph2_today,
                                                    </RichText>
                                                    <RichText>
                                                      yesterday=org.apache.oozie.extensions.OozieELExtensions#ph2_yesterday,
                                                    </RichText>
                                                    <RichText>
                                                      currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_currentMonth,
                                                    </RichText>
                                                    <RichText>
                                                      lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_lastMonth,
                                                    </RichText>
                                                    <RichText>
                                                      currentYear=org.apache.oozie.extensions.OozieELExtensions#ph2_currentYear,
                                                    </RichText>
                                                    <RichText>
                                                      lastYear=org.apache.oozie.extensions.OozieELExtensions#ph2_lastYear,
                                                    </RichText>
                                                    <RichText>
                                                      latest=org.apache.oozie.coord.CoordELFunctions#ph2_coord_latest_echo,
                                                    </RichText>
                                                    <RichText>
                                                      future=org.apache.oozie.coord.CoordELFunctions#ph2_coord_future_echo,
                                                    </RichText>
                                                    <RichText>
                                                      formatTime=org.apache.oozie.coord.CoordELFunctions#ph2_coord_formatTime,
                                                    </RichText>
                                                    <RichText>user=org.apache.oozie.coord.CoordELFunctions#coord_user
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      oozie.service.ELService.ext.functions.coord-action-create-inst
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      now=org.apache.oozie.extensions.OozieELExtensions#ph2_now_inst,
                                                    </RichText>
                                                    <RichText>
                                                      today=org.apache.oozie.extensions.OozieELExtensions#ph2_today_inst,
                                                    </RichText>
                                                    <RichText>
                                                      yesterday=org.apache.oozie.extensions.OozieELExtensions#ph2_yesterday_inst,
                                                    </RichText>
                                                    <RichText>
                                                      currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_currentMonth_inst,
                                                    </RichText>
                                                    <RichText>
                                                      lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_lastMonth_inst,
                                                    </RichText>
                                                    <RichText>
                                                      currentYear=org.apache.oozie.extensions.OozieELExtensions#ph2_currentYear_inst,
                                                    </RichText>
                                                    <RichText>
                                                      lastYear=org.apache.oozie.extensions.OozieELExtensions#ph2_lastYear_inst,
                                                    </RichText>
                                                    <RichText>
                                                      latest=org.apache.oozie.coord.CoordELFunctions#ph2_coord_latest_echo,
                                                    </RichText>
                                                    <RichText>
                                                      future=org.apache.oozie.coord.CoordELFunctions#ph2_coord_future_echo,
                                                    </RichText>
                                                    <RichText>
                                                      formatTime=org.apache.oozie.coord.CoordELFunctions#ph2_coord_formatTime,
                                                    </RichText>
                                                    <RichText>user=org.apache.oozie.coord.CoordELFunctions#coord_user
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.service.ELService.ext.functions.coord-action-start
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      now=org.apache.oozie.extensions.OozieELExtensions#ph2_now,
                                                    </RichText>
                                                    <RichText>
                                                      today=org.apache.oozie.extensions.OozieELExtensions#ph2_today,
                                                    </RichText>
                                                    <RichText>
                                                      yesterday=org.apache.oozie.extensions.OozieELExtensions#ph2_yesterday,
                                                    </RichText>
                                                    <RichText>
                                                      currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_currentMonth,
                                                    </RichText>
                                                    <RichText>
                                                      lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_lastMonth,
                                                    </RichText>
                                                    <RichText>
                                                      currentYear=org.apache.oozie.extensions.OozieELExtensions#ph2_currentYear,
                                                    </RichText>
                                                    <RichText>
                                                      lastYear=org.apache.oozie.extensions.OozieELExtensions#ph2_lastYear,
                                                    </RichText>
                                                    <RichText>
                                                      latest=org.apache.oozie.coord.CoordELFunctions#ph3_coord_latest,
                                                    </RichText>
                                                    <RichText>
                                                      future=org.apache.oozie.coord.CoordELFunctions#ph3_coord_future,
                                                    </RichText>
                                                    <RichText>
                                                      dataIn=org.apache.oozie.extensions.OozieELExtensions#ph3_dataIn,
                                                    </RichText>
                                                    <RichText>
                                                      instanceTime=org.apache.oozie.coord.CoordELFunctions#ph3_coord_nominalTime,
                                                    </RichText>
                                                    <RichText>
                                                      dateOffset=org.apache.oozie.coord.CoordELFunctions#ph3_coord_dateOffset,
                                                    </RichText>
                                                    <RichText>
                                                      formatTime=org.apache.oozie.coord.CoordELFunctions#ph3_coord_formatTime,
                                                    </RichText>
                                                    <RichText>user=org.apache.oozie.coord.CoordELFunctions#coord_user
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      oozie.service.ELService.ext.functions.coord-job-submit-data
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      now=org.apache.oozie.extensions.OozieELExtensions#ph1_now_echo,
                                                    </RichText>
                                                    <RichText>
                                                      today=org.apache.oozie.extensions.OozieELExtensions#ph1_today_echo,
                                                    </RichText>
                                                    <RichText>
                                                      yesterday=org.apache.oozie.extensions.OozieELExtensions#ph1_yesterday_echo,
                                                    </RichText>
                                                    <RichText>
                                                      currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_currentMonth_echo,
                                                    </RichText>
                                                    <RichText>
                                                      lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_lastMonth_echo,
                                                    </RichText>
                                                    <RichText>
                                                      currentYear=org.apache.oozie.extensions.OozieELExtensions#ph1_currentYear_echo,
                                                    </RichText>
                                                    <RichText>
                                                      lastYear=org.apache.oozie.extensions.OozieELExtensions#ph1_lastYear_echo,
                                                    </RichText>
                                                    <RichText>
                                                      dataIn=org.apache.oozie.extensions.OozieELExtensions#ph1_dataIn_echo,
                                                    </RichText>
                                                    <RichText>
                                                      instanceTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_nominalTime_echo_wrap,
                                                    </RichText>
                                                    <RichText>
                                                      formatTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_formatTime_echo,
                                                    </RichText>
                                                    <RichText>
                                                      dateOffset=org.apache.oozie.coord.CoordELFunctions#ph1_coord_dateOffset_echo,
                                                    </RichText>
                                                    <RichText>user=org.apache.oozie.coord.CoordELFunctions#coord_user
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      oozie.service.ELService.ext.functions.coord-job-submit-instances
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      now=org.apache.oozie.extensions.OozieELExtensions#ph1_now_echo,
                                                    </RichText>
                                                    <RichText>
                                                      today=org.apache.oozie.extensions.OozieELExtensions#ph1_today_echo,
                                                    </RichText>
                                                    <RichText>
                                                      yesterday=org.apache.oozie.extensions.OozieELExtensions#ph1_yesterday_echo,
                                                    </RichText>
                                                    <RichText>
                                                      currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_currentMonth_echo,
                                                    </RichText>
                                                    <RichText>
                                                      lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_lastMonth_echo,
                                                    </RichText>
                                                    <RichText>
                                                      currentYear=org.apache.oozie.extensions.OozieELExtensions#ph1_currentYear_echo,
                                                    </RichText>
                                                    <RichText>
                                                      lastYear=org.apache.oozie.extensions.OozieELExtensions#ph1_lastYear_echo,
                                                    </RichText>
                                                    <RichText>
                                                      formatTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_formatTime_echo,
                                                    </RichText>
                                                    <RichText>
                                                      latest=org.apache.oozie.coord.CoordELFunctions#ph2_coord_latest_echo,
                                                    </RichText>
                                                    <RichText>
                                                      future=org.apache.oozie.coord.CoordELFunctions#ph2_coord_future_echo
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.service.ELService.ext.functions.coord-sla-create
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      instanceTime=org.apache.oozie.coord.CoordELFunctions#ph2_coord_nominalTime,
                                                    </RichText>
                                                    <RichText>user=org.apache.oozie.coord.CoordELFunctions#coord_user
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.service.ELService.ext.functions.coord-sla-submit
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      instanceTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_nominalTime_echo_fixed,
                                                    </RichText>
                                                    <RichText>user=org.apache.oozie.coord.CoordELFunctions#coord_user
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.service.HadoopAccessorService.kerberos.enabled
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>false</RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      oozie.service.HadoopAccessorService.supported.filesystems
                                                    </RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>*</RichText>
                                                  </Cell>
                                                </TableRow>
                                              </TblBody>
                                              <TblFooter/>
                                            </TblGroup>
                                          </Table>
                                        </Item>
                                        <Item>
                                          <ItemPara>Modify</ItemPara>
                                          <Table align="left" border="true" width="100"
                                                 xy:guid="aae2b86c-22d6-409d-99d1-dc5bff40c0da">
                                            <TblGroup>
                                              <TblCol width="23"/>
                                              <TblCol width="77"/>
                                              <TblHeader>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>Name</RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>Value</RichText>
                                                  </Cell>
                                                </TableRow>
                                              </TblHeader>
                                              <TblBody>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.service.SchemaService.wf.ext.schemas</RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      shell-action-0.1.xsd,shell-action-0.2.xsd,shell-action-0.3.xsd,email-action-0.1.xsd,email-action-0.2.xsd,hive-action-0.2.xsd,hive-action-0.3.xsd,hive-action-0.4.xsd,hive-action-0.5.xsd,sqoop-action-0.2.xsd,sqoop-action-0.3.xsd,sqoop-action-0.4.xsd,ssh-action-0.1.xsd,ssh-action-0.2.xsd,distcp-action-0.1.xsd,distcp-action-0.2.xsd,oozie-sla-0.1.xsd,oozie-sla-0.2.xsd
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                                <TableRow>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>oozie.services.ext</RichText>
                                                  </Cell>
                                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                        rowspan="1">
                                                    <RichText>
                                                      org.apache.oozie.service.JMSAccessorService,org.apache.oozie.service.PartitionDependencyManagerService,org.apache.oozie.service.HCatAccessorService
                                                    </RichText>
                                                  </Cell>
                                                </TableRow>
                                              </TblBody>
                                              <TblFooter/>
                                            </TblGroup>
                                          </Table>
                                        </Item>
                                      </ItemBlock>
                                    </SubList>
                                  </Item>
                                  <Item>
                                    <ItemPara>After modifying all properties on the Oozie Configs page, choose
                                      <InLineMenuSelection>Save</InLineMenuSelection>
                                      to update<InLineCode>oozie.site.xml</InLineCode>, using the updated
                                      configurations.
                                    </ItemPara>
                                  </Item>
                                </ItemBlock>
                              </SubList>
                            </Item>
                            <Item>
                              <ItemPara>Replace the content of
                                <InLineCode>/usr/oozie/share</InLineCode>
                                in HDFS.
                                On the Oozie server host:
                              </ItemPara>
                              <SubList ListMarker="Numeric">
                                <ItemBlock>
                                  <Item>
                                    <ItemPara>Extract the Oozie sharelib into a
                                      <InLineCode>tmp</InLineCode>
                                      folder.
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>mkdir -p /tmp/oozie_tmp;
                                        cp /usr/hdp/2.2.0.0-&lt;$version&gt;/oozie/oozie-sharelib.tar.gz /tmp/oozie_tmp;
                                        cd /tmp/oozie_tmp;
                                        tar xzvf oozie-sharelib.tar.gz;
                                      </InLineTypeThis>
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Back up the
                                      <InLineCode>/user/oozie/share</InLineCode>
                                      folder in HDFS and then delete it. If you have any custom files in this folder,
                                      back them up separately and then add them to the
                                      <InLineCode>/share</InLineCode>
                                      folder after updating it.
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>mkdir /tmp/oozie_tmp/oozie_share_backup;
                                        chmod 777 /tmp/oozie_tmp/oozie_share_backup;
                                      </InLineTypeThis>
                                    </RichText>
                                    <RichText>
                                      <InLineTypeThis>su -l</InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -copyToLocal /user/oozie/share
                                        /tmp/oozie_tmp/oozie_share_backup";
                                        su -l
                                      </InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -rm -r /user/oozie/share";
                                      </InLineTypeThis>where
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      is the HDFS service user. For example, hdfs.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Add the latest share libs that you extracted in step 1. After you have
                                      added the files, modify ownership and acl.
                                    </ItemPara>
                                    <RichText>
                                      <InLineTypeThis>su -l</InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -copyFromLocal /tmp/oozie_tmp/share /user/oozie/.";
                                        su -l
                                      </InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -chown -R &lt;OOZIE_USER&gt;:&lt;HADOOP_GROUP&gt;
                                        /user/oozie";
                                        su -l
                                      </InLineTypeThis>
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      <InLineTypeThis>-c "hdfs dfs -chmod -R 755 /user/oozie";
                                      </InLineTypeThis>where
                                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                      is the HDFS service user. For example, hdfs.
                                    </RichText>
                                  </Item>
                                </ItemBlock>
                              </SubList>
                            </Item>
                            <Item>
                              <ItemPara>Use the
                                <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                                &gt;
                                <InLineTypeThis>Services</InLineTypeThis>
                                view to start the Oozie service. Make sure that ServiceCheck passes for Oozie.
                              </ItemPara>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Update WebHCat.</ItemPara>
                  <SubList ListMarker="UppercaseAlpha">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Modify the
                          <InLineCode>webhcat-site</InLineCode>
                          config type.
                        </ItemPara>
                        <RichText>Using<InLineMenuSelection>Ambari Web</InLineMenuSelection>, navigate to
                          <InLineTypeThis>Services</InLineTypeThis>
                          &gt;
                          <InLineTypeThis>WebHCat</InLineTypeThis>
                          and modify the following configuration:
                        </RichText>
                        <Table align="" border="true" width="100" xy:guid="80f47cf2-cc37-4f56-8a96-21369adf4be6">
                          <TblGroup>
                            <TblCol width=""/>
                            <TblCol width=""/>
                            <TblCol width=""/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Action</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Property Name</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Property Value</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Modify</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>templeton.storage.class</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>org.apache.hive.hcatalog.templeton.tool.ZooKeeperStorage</RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Expand
                          <InLineTypeThis>Advanced</InLineTypeThis>
                          &gt;<InLineTypeThis>webhcat-site.xml</InLineTypeThis>.
                        </ItemPara>
                        <RichText>
                          Check if property
                          <InLineCode>templeton.port</InLineCode>
                          exists. If not, then add it using the Custom webhcat-site panel. The default value for
                          templeton.port = 50111.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each WebHCat host, update the Pig and Hive tar bundles, by updating the following
                          files:
                        </ItemPara>
                        <SubList ListMarker="Bullet">
                          <ItemBlock>
                            <Item>
                              <ItemPara>
                                <InLineCode>/apps/webhcat/pig.tar.gz</InLineCode>
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>
                                <InLineCode>/apps/webhcat/hive.tar.gz</InLineCode>
                              </ItemPara>
                              <CustomNote xy:guid="ed2f7ba5-0781-4edf-9034-f7c966bbe267">
                                <Icon thumbWidth="50" uri="Icons/Note.png"
                                      xy:guid="87ae11cc-999b-4540-bad9-8b651bdd7827"/>
                                <SimpleBlock>
                                  <RichText>Find these files only on a host where WebHCat is installed.</RichText>
                                </SimpleBlock>
                              </CustomNote>
                            </Item>
                          </ItemBlock>
                        </SubList>
                        <SubList ListMarker="Numeric">
                          <ListPreamble>For example, to update a *.tar.gz file:</ListPreamble>
                          <ItemBlock>
                            <Item>
                              <ItemPara>Move the file to a local directory.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -copyToLocal
                                  /apps/webhcat/*.tar.gz
                                </InLineTypeThis>
                                <SyntaxArg>&lt;local_backup_dir&gt;</SyntaxArg>
                                <InLineTypeThis>"</InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove the old file.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -rm /apps/webhcat/*.tar.gz"
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Copy the new file.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal
                                  /usr/hdp/2.2.0.0-
                                </InLineTypeThis>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineTypeThis>/hive/hive.tar.gz /apps/webhcat/"; su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal
                                  /usr/hdp/2.2.0.0-
                                </InLineTypeThis>
                                <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                                <InLineTypeThis>/pig/pig.tar.gz /apps/webhcat/";
                                </InLineTypeThis>where
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                is the HCatalog service user. For example, hcat.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>On each WebHCat host, update
                          <InLineCode>/app/webhcat/hadoop-streaming.jar</InLineCode>
                          file.
                        </ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Move the file to a local directory.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -copyToLocal
                                  /apps/webhcat/hadoop-streaming*.jar &lt;local_backup_dir&gt;"
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Remove the old file.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -rm
                                  /apps/webhcat/hadoop-streaming*.jar"
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Copy the new hadoop-streaming.jar file.</ItemPara>
                              <RichText>
                                <InLineTypeThis>su -l</InLineTypeThis>
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                <InLineTypeThis>-c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal /usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop-mapreduce/hadoop-streaming*.jar
                                  /apps/webhcat"

                                </InLineTypeThis>where
                                <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                is the HCatalog service user. For example, hcat.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Prepare Tez for work.
                    Add the Tez service to your cluster using the Ambari Web UI, if Tez was not installed earlier.
                  </ItemPara>
                  <RichText>
                    Configure Tez.
                    <InLineTypeThis>cd /var/lib/ambari-server/resources/scripts/;
                      ./configs.sh set localhost &lt;your-cluster-name&gt; cluster-env "tez_tar_source"
                      "/usr/hdp/current/tez-client/lib/tez.tar.gz";
                      ./configs.sh set localhost &lt;your-cluster-name&gt; cluster-env "tez_tar_destination_folder"
                      "hdfs:///hdp/apps/{{ hdp_stack_version }}/tez/"
                    </InLineTypeThis>
                  </RichText>
                  <RichText>
                    If you use Tez as the Hive execution engine, and if the variable hive.server2.enabled.doAs is set to
                    true, you must create a scratch directory on the NameNode host for the username that will run the
                    HiveServer2 service. For example, use the following commands:

                    <InLineTypeThis>sudo su -c "hdfs -makedir /tmp/hive-</InLineTypeThis>
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    <InLineTypeThis>"
                      sudo su -c "hdfs -chmod 777 /tmp/hive-
                    </InLineTypeThis>
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    <InLineTypeThis>"
                    </InLineTypeThis>where<SyntaxArg>&lt;username&gt; </SyntaxArg>is the name of the user that runs the
                    HiveServer2 service.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Using the<InLineMenuSelection>Ambari Web UI&gt; Services &gt; Hive</InLineMenuSelection>,
                    start the Hive service.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>If you use Tez as the Hive execution engine, and if the variable
                    <InLineCode>hive.server2.enabled.doAs</InLineCode>
                    is set to<InLineCode>true</InLineCode>, you must create a scratch directory on the NameNode host for
                    the username that will run the HiveServer2 service. For example, use the following commands:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      sudo su -c "hdfs -makedir /tmp/hive-
                    </InLineTypeThis>
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    <InLineTypeThis>"</InLineTypeThis>
                  </RichText>
                  <RichText>
                    <InLineTypeThis>
                      sudo su -c "hdfs -chmod 777 /tmp/hive-
                    </InLineTypeThis>
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    <InLineTypeThis>"</InLineTypeThis>
                  </RichText>
                  <RichText>
                    where
                    <SyntaxArg>&lt;username&gt;</SyntaxArg>
                    is the name of the user that runs the HiveServer2 service.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Using<InLineMenuSelection>Ambari Web &gt; Services</InLineMenuSelection>, re-start the
                    remaining services.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>The upgrade is now fully functional but not yet finalized. Using the
                    <InLineCode>finalize</InLineCode>
                    command removes the previous version of the NameNode and DataNode storage directories.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="301a6dac-9cc1-45d9-bd71-90c8ad8da045">
                    <Icon thumbWidth="50" uri="Icons/Note.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="c5595c00-75b7-44f5-a871-f82021e1a444"/>
                    <SimpleBlock>
                      <RichText>After the upgrade is finalized, the system cannot be rolled back. Usually this step is
                        not taken until a thorough testing of the upgrade has been performed.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    The upgrade must be finalized before another upgrade can be performed.
                  </RichText>
                  <CustomNote xy:guid="79ca1d33-2d57-4781-b921-6f5987db54c5">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="6cfb200a-0587-48da-a2fd-2caf81cdc6ad"/>
                    <SimpleBlock>
                      <RichText>Directories used by Hadoop 1 services set in /etc/hadoop/conf/taskcontroller.cfg are not
                        automatically deleted after upgrade. Administrators can choose to delete these directories after
                        the upgrade.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    To finalize the upgrade, execute the following command once, on the primary NameNode host in your
                    HDP cluster:
                    <InLineTypeThis>sudo su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c "hdfs dfsadmin -finalizeUpgrade"</InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="2c87cbec-f2e9-4c82-96c6-de295bbd589f">
        <Title>Upgrading the HDP Stack from 1.3 to 2.2</Title>
        <ParaBlock xy:guid="4720b228-e69c-4b58-99e3-da1f6f461960">
          <RichText>The Stack is the coordinated set of Hadoop components that you have installed. Use the following
            instructions to upgrade a current, Ambari-installed and managed instance of a version 1.3 Stack to a version
            2.2 Stack. This procedure causes the upgraded stack to be managed by Ambari.
          </RichText>
          <CustomNote xy:guid="9d72a8d5-f983-4d62-9d45-8c64f4bc5022">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="75ca3f69-7a97-4ee6-8bd3-8c41189b4094"/>
            <SimpleBlock>
              <RichText>If your Stack has Kerberos Security turned on, you should turn it off before performing the
                upgrade. On
                <InLineTypeThis>Ambari Web UI</InLineTypeThis>
                &gt;
                <InLineTypeThis>Admin</InLineTypeThis>
                &gt;<InLineTypeThis>Security</InLineTypeThis>, click<InLineTypeThis>Disable Security</InLineTypeThis>.
                You can re-enable Security after performing the upgrade.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>If you are upgrading from any other 1.x version of the stack, you must upgrade to 1.3 or later
            before you can upgrade to 2.2. Upgrades from previous 1.x versions are not supported.
          </RichText>
        </ParaBlock>
        <ParaBlock xy:guid="7b97cfdc-dffb-4fa2-a98f-2d5892ac34a2">
          <RichText>In preparation for future HDP 2.2 releases to support rolling upgrades, the HDP RPM package version
            naming convention has changed to include the HDP 2.2 product version in file and directory names. HDP 2.2
            marks the first release where HDP rpms, debs, and directories contain versions in the names to permit
            side-by-side installations of later HDP releases. To transition between previous releases and HDP 2.2,
            Hortonworks provides hdp-select, a script that symlinks your directories to<InLineCode>
              hdp/current</InLineCode>and lets you maintain using the same binary and configuration paths that you were
            using before. The following instructions have you remove your old versions of HDP, install hdp-select, and
            install HDP 2.2 to prepare for rolling upgrade.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="2d16d77f-9eb4-485f-a3f9-daeb558a4b6b">
          <Title>Preparing the 1.3 Stack for the Upgrade to 2.2</Title>
          <ParaBlock xy:guid="37481e83-fd6a-4925-bec8-9c8abf8a6fc1">
            <RichText>To prepare for upgrading the HDP Stack, this section describes how to perform the following
              tasks:
            </RichText>
            <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                  xy:guid="731505e4-a0a5-4bbd-8c61-aaff8b5d3779">
              <ItemBlock>
                <Item>
                  <ItemPara>Checkpoint user metadata and capture the HDFS operational state.
                    This step supports rollback and restore of the original state of HDFS data, if necessary.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Backup Hive and Oozie metastore databases.
                    This step supports rollback and restore of the original state of Hive and Oozie data, if necessary.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop all HDP and Ambari services.</ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>Perform steps 1 through 8 on the NameNode host. In a highly-available NameNode configuration, you
              should execute the following procedure on the primary NameNode.
            </RichText>
            <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                        xy:guid="3fdfd0f9-7d9a-4e68-800b-8496928b86d4">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                    xy:guid="a80432db-63c9-481d-91ef-e5a8a6db0b40"/>
              <SimpleBlock>
                <RichText>To locate the primary NameNode in an Ambari-managed HDP cluster, browse
                  <InLineTypeThis>Ambari Web</InLineTypeThis>
                  &gt;
                  <InLineTypeThis>Services</InLineTypeThis>
                  &gt;<InLineTypeThis>HDFS</InLineTypeThis>. In Summary, click NameNode.
                  <InLineTypeThis>Hosts</InLineTypeThis>
                  &gt;
                  <InLineTypeThis>Summary</InLineTypeThis>
                  displays the host name FQDN.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <List ListMarker="Numeric" xy:guid="8aa2396f-b195-4df6-9a47-88278c9fb44f">
              <ItemBlock>
                <Item>
                  <ItemPara>Stop all services except HDFS and ZooKeeper. Also stop any client programs that access
                    HDFS.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>If HDFS is in a non-finalized state from a prior upgrade operation, you must finalize HDFS
                    before upgrading further. Finalizing HDFS will remove all links to the metadata of the prior HDFS
                    version - do this only if you do not want to rollback to that prior HDFS version.
                  </ItemPara>
                  <RichText>For example, as the HDFS user:
                    <InLineTypeThis>sudo -u</InLineTypeThis>
                    <InLineApplicationPrompt></InLineApplicationPrompt>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineVariableText></InLineVariableText>
                    <InLineTypeThis>hadoop dfsadmin -finalizeUpgrade</InLineTypeThis>
                  </RichText>
                  <RichText>You can check the namenode directory to ensure that there is no snapshot of any prior HDFS
                    upgrade. Specifically, examine the $dfs.namenode.name.dir (or $dfs.name.dir) on the NameNode. Make
                    sure that only a âcurrentâ, not a âpreviousâ directory exists.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Create the following logs and other files.</ItemPara>
                  <RichText>Creating these logs lets you to check the integrity of the file system after upgrading.
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Run
                          <InLineCode>fsck</InLineCode>
                          with the following flags and send the results to a log. The resulting file contains a complete
                          block map of the file system. You use this log later to confirm the upgrade.
                        </ItemPara>
                        <RichText>

                          <InLineTypeThis>sudo -u</InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>hadoop fsck / -files -blocks -locations &gt; dfs-old-fsck-1.log
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Optional: Capture the complete namespace of the filesystem. (The following command
                          does a recursive listing of the root file system.)
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            sudo -u
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>hadoop dfs -lsr / &gt; dfs-old-lsr-1.log</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Create a list of all the DataNodes in the cluster.</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            sudo -u
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>hadoop dfsadmin -report &gt; dfs-old-report-1.log</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Optional: copy all or unrecoverable only data stored in HDFS to a local file system or
                          to a backup instance of HDFS.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara><Emph>Save the namespace</Emph>. You must be the HDFS service user to do this and you must
                    put the cluster in Safe Mode.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="1e1f8095-8646-41a2-ac20-2cd2e4ef672f">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="6281708d-5bef-4a7f-b76e-562b46bf47a2"/>
                    <SimpleBlock>
                      <RichText>This is a critical step. If you do not do this step before you do the upgrade, the
                        NameNode will not start afterwards.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    As the HDFS user:
                    <InLineTypeThis>hadoop dfsadmin -safemode enter
                      hadoop dfsadmin -saveNamespace
                    </InLineTypeThis>
                  </RichText>
                  <CustomNote xy:guid="6056c120-adb7-4956-bbf6-807e1498336e">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="01a5d784-1c19-4f3c-8c63-cc0543757568"/>
                    <SimpleBlock>
                      <RichText>In a HA NameNode configuration, the command
                        <InLineCode>hdfs dfsadmin -saveNamespace</InLineCode>
                        does checkpoint in the first NameNode specified in the configuration, in<InLineCode>
                          dfs.ha.namenodes.[nameservice ID]</InLineCode>. You can also use the dfsadmin
                        <InLineCode>-fs</InLineCode>
                        option to specify which NameNode to connect. For example, to force a checkpoint in namenode 2:
                      </RichText>
                      <RichText>
                        <InLineTypeThis>hdfs dfsadmin -fs hdfs://namenode2-hostname:namenode2-port -saveNamespace
                        </InLineTypeThis>
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Copy the following checkpoint files into a backup directory. You can find the directory by
                    using the
                    <InLineMenuSelection>Services View</InLineMenuSelection>
                    in the Ambari Web UI. Select
                    <InLineTypeThis>HDFS</InLineTypeThis>
                    &gt;
                    <InLineTypeThis>Configs</InLineTypeThis>
                    <Emph>.</Emph>
                    In the Namenode section, look up the property
                    <Emph>NameNode Directories</Emph>
                    on your NameNode host.
                  </ItemPara>
                  <RichText>
                    <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                    <InLineTypeThis>/current</InLineTypeThis>
                  </RichText>
                  <CustomNote xy:guid="bd534591-8e6d-44ca-90a8-db49fc975dd1">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="7dae2181-8d3c-459d-8b24-4a9e62882e61"/>
                    <SimpleBlock>
                      <RichText>In a HA NameNode configuration, the location of the checkpoint depends on where the
                        saveNamespace command is sent, as defined in the preceding step.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>Store the layoutVersion for the NameNode. Make a copy of the file at
                    <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                    <InLineCode>/current/VERSION</InLineCode>
                    where
                    <SyntaxArg>&lt;dfs.name.dir&gt;</SyntaxArg>
                    is the value of the config parameter<InLineCode>NameNode directories</InLineCode>. This file will be
                    used later to verify that the layout version is upgraded.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Stop HDFS. Make sure all services in the cluster are completely stopped.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>If you are upgrading Hive and Oozie, back up the Hive database and the Oozie database on the
                    Hive database host and Oozie database host machines, respectively.
                  </ItemPara>
                  <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                              xy:guid="86d157d5-ffa1-4b18-b1b7-3ab544c8c2b9">
                    <Icon thumbWidth="50" uri="Icons/Important.png"
                          xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                          xy:guid="f14bfba9-ad25-4991-868e-b4f5dd8761c3"/>
                    <SimpleBlock>
                      <RichText>Make sure that your Hive database is updated to the minimum recommended version.
                        <Emph>If you are using Hive with MySQL, we recommend upgrading your MySQL database version to
                          5.6.21 before upgrading the HDP Stack to v2.2.
                        </Emph>
                        For specific information, see<Xref InsideTargetRef="f35b0203-6267-4533-9e88-652452ece5f5">
                          Database Requirements</Xref>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="LowercaseAlpha">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Optional - Backup the Hive Metastore database.</ItemPara>
                        <CustomNote xy:guid="aefed61c-3aa6-4def-a2c5-eb0daed147e0">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="4868d471-89ba-4557-b1dc-438b64c3a4b1"/>
                          <SimpleBlock>
                            <RichText>These instructions are provided for your convenience. Please check your database
                              documentation for the latest back up instructions.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <Table align="" border="true" width="100" xy:guid="9a308788-cb1d-4d92-b85e-495415c812fb">
                          <TblTitle>Hive Metastore Database Backup and Restore</TblTitle>
                          <TblGroup>
                            <TblCol width="18"/>
                            <TblCol width="48"/>
                            <TblCol width=""/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Database Type</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Backup</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Restore</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>MySQL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysqldump $dbname &gt; $outputfilename.sql For example: mysqldump hive &gt;
                                    /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysql $dbname &lt; $inputfilename.sql For example: mysql hive &lt;
                                    /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Postgres</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u $username pg_dump $databasename &gt; $outputfilename.sql For
                                    example: sudo -u postgres pg_dump hive &gt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u $username psql $databasename &lt; $inputfilename.sql For example:
                                    sudo -u postgres psql hive &lt; /tmp/mydir/backup_hive.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Oracle</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Connect to the Oracle database using sqlplus export the database: exp
                                    username/password@database full=yes file=output_file.dmp
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Import the database: imp username/password@database ile=input_file.dmp
                                  </RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                      <Item>
                        <ItemPara>Optional - Backup the Oozie Metastore database.</ItemPara>
                        <CustomNote xy:guid="924f8b1d-6a57-4430-9006-84e342502b43">
                          <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="8ddf90b4-f8ed-4ea1-9a35-956fad8a0261"/>
                          <SimpleBlock>
                            <RichText>These instructions are provided for your convenience. Please check your database
                              documentation for the latest back up instructions.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                        <Table align="" border="true" width="100" xy:guid="ae960e8d-28e1-4945-8de8-26c8c30b8958">
                          <TblTitle>Oozie Metastore Database Backup and Restore</TblTitle>
                          <TblGroup>
                            <TblCol width="20"/>
                            <TblCol width="46"/>
                            <TblCol width=""/>
                            <TblHeader>
                              <TableRow>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Database Type</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Backup</RichText>
                                </Cell>
                                <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Restore</RichText>
                                </Cell>
                              </TableRow>
                            </TblHeader>
                            <TblBody>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>MySQL</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysqldump $dbname &gt; $outputfilename.sql For example: mysqldump oozie &gt;
                                    /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>mysql $dbname &lt; $inputfilename.sql For example: mysql oozie &lt;
                                    /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                              <TableRow>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>Postgres</RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u $username pg_dump $databasename &gt; $outputfilename.sql For
                                    example: sudo -u postgres pg_dump oozie &gt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                                <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                  <RichText>sudo -u $username psql $databasename &lt; $inputfilename.sql For example:
                                    sudo -u postgres psql oozie &lt; /tmp/mydir/backup_oozie.sql
                                  </RichText>
                                </Cell>
                              </TableRow>
                            </TblBody>
                            <TblFooter/>
                          </TblGroup>
                        </Table>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>On every host in your cluster known to Ambari, stop all Ambari Agents.</ItemPara>
                  <RichText>
                    <InLineTypeThis>ambari-agent stop</InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="aac8d41d-dd8d-4b30-b753-41f6080c8c40">
          <Title>Upgrading the 1.3 Stack to 2.2</Title>
          <ParaBlock xy:guid="4dea9772-29c4-43d4-b724-1c10ad4e2bbf">
            <RichText>This stack upgrade involves removing the HDP 1.x version of MapReduce and replacing it with the
              HDP 2.x YARN and MapReduce2 components. This process is somewhat long and complex. To help you, a Python
              script is provided to automate some of the upgrade steps.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="6a952fc2-4102-4a93-a8f3-cd4e12aff38f">
            <Title>Prepare the 1.3 Stack for Upgrade to 2.2</Title>
            <ParaBlock xy:guid="cad326c3-20ca-4a23-ba2f-abdd0750c049">
              <List ListMarker="Numeric" xy:guid="57e482f5-c384-4ec0-a42e-5d39f87bafa9">
                <ItemBlock>
                  <Item>
                    <ItemPara>Make sure that you completed the system preparation procedure; most importantly, save the
                      namespace.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Stage the upgrade script:</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Create an "Upgrade Folder", for example<InLineCode>/work/upgrade_hdp_2</InLineCode>,
                            on a host that can communicate with Ambari Server. The Ambari Server host would be a
                            suitable candidate.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Copy the upgrade script to the Upgrade Folder. The script is available here:
                            <InLineCode>/var/lib/ambari-server/resources/scripts/UpgradeHelper_HDP2.py</InLineCode>on
                            the Ambari Server host.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Make sure that Python is available on the host and that the version is 2.6 or
                            higher:
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>python --version</InLineTypeThis>
                          </RichText>
                          <CustomNote xy:guid="a18be3d9-58ff-4184-9757-4974551b3969">
                            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ead4b73c-bb54-4549-8323-fbb317bcebaf"/>
                            <SimpleBlock>
                              <RichText>For RHEL/Centos/Oracle Linux 5, you
                                <Emph>must</Emph>
                                use Python 2.6.
                              </RichText>
                            </SimpleBlock>
                          </CustomNote>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Start the Ambari Server only if it is stopped. On the Ambari Server host:</ItemPara>
                    <RichText>
                      <InLineTypeThis>ambari-server status</InLineTypeThis>

                      If status is "stopped", then:

                      <InLineTypeThis>ambari-server start</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Back up current configuration settings and the component host mappings from MapReduce:
                    </ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Go to the Upgrade Folder.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Execute the
                            <InLineCode>backup-configs</InLineCode>
                            action:
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>python UpgradeHelper_HDP2.py --hostname</InLineTypeThis>
                            <SyntaxArg>&lt;HOSTNAME&gt;</SyntaxArg>
                            <InLineTypeThis>--user</InLineTypeThis>
                            <SyntaxArg>&lt;USERNAME&gt;</SyntaxArg>
                            <InLineTypeThis>--password</InLineTypeThis>
                            <SyntaxArg>&lt;PASSWORD&gt;</SyntaxArg>
                            <InLineTypeThis>--clustername</InLineTypeThis>
                            <SyntaxArg>&lt;CLUSTERNAME&gt;</SyntaxArg>
                            <InLineVariableText></InLineVariableText>
                            <InLineTypeThis>backup-configs</InLineTypeThis>
                          </RichText>
                          <RichText>Where</RichText>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <SyntaxArg>&lt;HOSTNAME&gt;</SyntaxArg>
                                  <InLineVariableText></InLineVariableText>is the name of the Ambari Server host
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <SyntaxArg>&lt;USERNAME&gt;</SyntaxArg>
                                  is the admin user for Ambari Server
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <SyntaxArg>&lt;PASSWORD&gt;</SyntaxArg>
                                  is the password for the admin user
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <SyntaxArg>&lt;CLUSTERNAME&gt;</SyntaxArg>
                                  is the name of the cluster
                                </ItemPara>
                              </Item>
                            </ItemBlock>
                          </SubList>
                          <RichText>This step produces a set of files named TYPE_TAG, where TYPE is the configuration
                            type and TAG is the tag. These files contain copies of the various configuration settings
                            for the current (pre-upgrade) cluster. You can use these files as a reference later.
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>Execute the<InLineTypeThis>save-mr-mapping</InLineTypeThis>action:
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>
                              python UpgradeHelper_HDP2.py --hostname
                            </InLineTypeThis>
                            <SyntaxArg>&lt;HOSTNAME&gt;</SyntaxArg>
                            <InLineTypeThis>--user</InLineTypeThis>
                            <SyntaxArg>&lt;USERNAME&gt;</SyntaxArg>
                            <InLineVariableText></InLineVariableText>
                            <InLineTypeThis>--password</InLineTypeThis>
                            <SyntaxArg>&lt;PASSWORD&gt;</SyntaxArg>
                            <InLineTypeThis>--clustername</InLineTypeThis>
                            <SyntaxArg>&lt;CLUSTERNAME&gt;</SyntaxArg>
                            <InLineTypeThis>save-mr-mapping</InLineTypeThis>
                          </RichText>
                          <RichText>This step produces a file named
                            <InLineCode>mr_mapping</InLineCode>
                            that stores the host level mapping of MapReduce components such as MapReduce
                            JobTracker/TaskTracker/Client.
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Delete all the MapReduce server components installed on the cluster.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>If you are not already there, go to the Upgrade Folder.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Execute the
                            <InLineCode>delete-mr</InLineCode>
                            action.
                          </ItemPara>
                          <RichText>
                            <InLineTypeThis>python UpgradeHelper_HDP2.py --hostname</InLineTypeThis>
                            <SyntaxArg>&lt;HOSTNAME&gt;</SyntaxArg>
                            <InLineTypeThis>--user</InLineTypeThis>
                            <SyntaxArg>&lt;USERNAME&gt;</SyntaxArg>
                            <InLineTypeThis>--password</InLineTypeThis>
                            <SyntaxArg>&lt;PASSWORD&gt;</SyntaxArg>
                            <InLineTypeThis>--clustername</InLineTypeThis>
                            <SyntaxArg>&lt;CLUSTERNAME&gt;</SyntaxArg>
                            <InLineTypeThis>delete-mr</InLineTypeThis>
                          </RichText>
                          <RichText>Optionally, execute the delete script with the -n option to view, verify, and
                            validate API calls, if necessary.
                          </RichText>
                          <CustomNote xy:guid="b3ea1c0a-0a75-41e6-ab38-4f87972a6ff2">
                            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="81c75969-c256-4d11-aeb4-63ab812bb8e2"/>
                            <SimpleBlock>
                              <RichText>Running the delete script with the -n option exposes API calls but does not
                                remove installed components. Use the -n option for validation purposes only.
                              </RichText>
                            </SimpleBlock>
                          </CustomNote>
                        </Item>
                        <Item>
                          <ItemPara>The script asks you to confirm that you have executed the
                            <InLineCode>save-mr-mapping</InLineCode>
                            action and that you have a file named
                            <InLineCode>mr_mapping</InLineCode>
                            in the Upgrade Folder.
                          </ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>On the Ambari Server host, stop Ambari Server and confirm that it is stopped.</ItemPara>
                    <RichText>
                      <InLineTypeThis>ambari-server stop</InLineTypeThis>
                      <InLineTypeThis>ambari-server status</InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="29b38814-b822-4fcd-9416-a3bb07bad559">
            <Title>Upgrade the 1.3 Stack to 2.2</Title>
            <ParaBlock xy:guid="4d61886f-8972-4517-abf4-2228141f0026">
              <List ListMarker="Numeric" xy:guid="10a80386-1988-4bd5-908a-10d7d4caf92e">
                <ItemBlock>
                  <Item>
                    <ItemPara>Stop the Ambari Server only if it is started . On the Ambari Server host:</ItemPara>
                    <RichText>
                      <InLineTypeThis>ambari-server status</InLineTypeThis>

                      If status is "started", then:
                      <InLineTypeThis>
                        ambari-server stop
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Make sure that the old version of MapReduce deleted successfully.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Update the stack version in the Ambari Server database.
                      Use the command appropriate for a remote, or local repository, as follows:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>ambari-server upgradestack HDP-2.2</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Upgrade the HDP repository on all hosts and replace the old repo file with the new file:
                    </ItemPara>
                    <RichText>The file you download is named<InLineCode>hdp.repo</InLineCode>. To function properly in
                      the system, it must be named<InLineCode>HDP.repo</InLineCode>. Once you have completed the "mv" of
                      the new repo file to the repos.d folder, make sure there is no file named
                      <InLineCode>hdp.repo</InLineCode>
                      anywhere in your repos.d folder.
                    </RichText>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>For RHEL/CentOS/Oracle Linux 6:</ItemPara>
                          <RichText>
                            <InLineTypeThis>wget -nv
                              http://public-repo-1.hortonworks.com/HDP/centos6/2.x/GA/2.2.0.0/hdp.repo -O
                              /etc/yum.repos.d/HDP.repo
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>For SLES 11:</ItemPara>
                          <RichText>
                            <InLineTypeThis>
                              wget -nv http://public-repo-1.hortonworks.com/HDP/centos5/2.x/GA/2.2.0.0/hdp.repo -O
                              /etc/yum.repos.d/HDP.repo
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>For RHEL/CentOS/Oracle Linux 5: (DEPRECATED)</ItemPara>
                          <RichText>
                            <InLineTypeThis>wget</InLineTypeThis>
                            <InLineTypeThis>-nv
                              http://public-repo-1.hortonworks.com/HDP-LABS/Projects/Champlain-Preview/2.2.0.0-9/centos5/hdp.repo
                              -O /etc/yum.repos.d/HDP.repo
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Back up the files in following directories on the Oozie server host and make sure that all
                      files, including *site.xml files are copied.
                      <InLineTypeThis>mkdir oozie-conf-bak</InLineTypeThis>
                      <InLineCode>
                      </InLineCode>
                      <InLineTypeThis>cp -R /etc/oozie/conf/* oozie-conf-bak</InLineTypeThis>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Remove the old
                      <InLineMenuSelection>/oozie</InLineMenuSelection>
                      directories on all Oozie server and client hosts
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>
                            <InLineTypeThis>rm -rf /etc/oozie/conf</InLineTypeThis>
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>
                            <InLineTypeThis>rm -rf /usr/lib/oozie/</InLineTypeThis>
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>
                            <InLineTypeThis>rm -rf /var/lib/oozie/</InLineTypeThis>
                          </ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Upgrade the stack on all Agent hosts. Skip any components your installation does not
                      use:
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>For RHEL/CentOS/Oracle Linux:</ItemPara>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>On all hosts, clean the yum repository.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>yum clean all</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Remove remaining MapReduce, and WebHCat, HCatalog, and Oozie components on all
                                  hosts.
                                  This command uninstalls these HDP 1.3 component bits. It leaves the user data and
                                  metadata, but removes your configurations.
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>yum erase hadoop-pipes hadoop-sbin hadoop-native "webhcat*"
                                    "hcatalog*" "oozie*" "hadoop*" "hadoop-libhdfs*" "hbase*" "hcatalog*" "hive*"
                                    "oozie*" "oozie-client*" "pig*" "sqoop*" "webhcat-tar-hive*" "webhcat-tar-pig*"
                                    "zookeeper*"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Remove your old hdp.repo and hdp-utils repo files.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>rm etc/yum/repos.d/hdp.repo hdp-utils.repo</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Install the following components:</ItemPara>
                                <RichText>
                                  <InLineTypeThis>
                                    yum install "hadoop_2_2_0_0_*" "oozie_2_2_0_0_*" "pig_2_2_0_0_*" "sqoop_2_2_0_0_*"
                                    "zookeeper_2_2_0_0_*" "hbase_2_2_0_0_*" "hive_2_2_0_0_*"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Verify that the components were upgraded:</ItemPara>
                                <RichText>
                                  <InLineTypeThis>yum list installed | grep HDP-$old-stack-version-number
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>
                                  No 1.3 components should appear in the returned list.
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>For SLES:</ItemPara>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>On all hosts, clean the zypper repository.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>zypper clean --all</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Remove remaining MapReduce, and WebHCat, HCatalog, and Oozie components on all
                                  hosts.
                                  This command uninstalls these HDP 1.3 component bits. It leaves the user data and
                                  metadata, but removes your configurations.
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>zypper remove hadoop-pipes hadoop-sbin hadoop-native webhcat\*
                                    hcatalog\* oozie\*
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Remove your old hdp.repo and hdp-utils repo files.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>rm etc/zypp/repos.d/hdp.repo hdp-utils.repo</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Install the following components:</ItemPara>
                                <RichText>
                                  <InLineTypeThis>zypper install "collectd*" "epel-release*" "gccxml*" "pig*" "hadoop*"
                                    "sqoop*" "zookeeper*" "hbase*" "hive*" hdp_mon_nagios_addons
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>
                                  <InLineTypeThis>zypper install webhcat-tar-hive webhcat-tar-pig</InLineTypeThis>
                                </RichText>
                                <RichText>
                                  <InLineTypeThis>zypper install oozie oozie-client</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Verify that the components were upgraded.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>rpm -qa | grep hadoop, rpm -qa | grep hive and rpm -qa | grep
                                    hcatalog
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>
                                  No 1.3 components should appear in the returned list.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>If components were not upgraded, upgrade them as follows:</ItemPara>
                                <RichText>
                                  <InLineTypeThis>yast --update hadoop hcatalog hive</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Symlink directories, using<InLineCode>hdp-select</InLineCode>.
                    </ItemPara>
                    <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                xy:guid="30f2f135-55e8-4f3e-9fcb-b2600ba132d8">
                      <Icon thumbWidth="50" uri="Icons/Warning.png"
                            xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                            xy:guid="173781a5-9aa2-4f3b-b019-e4239b615a93"/>
                      <SimpleBlock>
                        <RichText>To prevent version-specific directory issues for your scripts and updates, Hortonworks
                          provides<InLineCode>hdp-select</InLineCode>, a script that symlinks directories to hdp-current
                          and modifies paths for configuration directories.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                    <RichText>Check that the
                      <InLineCode>hdp-select</InLineCode>
                      package installed:
                      <InLineTypeThis>rpm -qa | grep hdp-select</InLineTypeThis>

                      You should see:
                      <InLineApplicationPrompt>hdp-select-2.2.0.0-2041.el6.noarch</InLineApplicationPrompt>

                      If not, then run:
                      <InLineTypeThis>
                        yum install hdp-select
                      </InLineTypeThis>

                      Run
                      <InLineCode>hdp-select</InLineCode>
                      as root, on your NameNode(s) and all your DataNodes. In<InLineCode>/usr/bin</InLineCode>:
                      <InLineTypeThis>
                        hdp-select set all 2.2.0.0-
                      </InLineTypeThis>
                      <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                      <InLineTypeThis>
                      </InLineTypeThis>where
                      <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                      is the build number. For the HDP 2.2 release &lt;$version&gt; = 2041.
                      <InLineTypeThis>
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>On the Hive Metastore database host, stop the Hive Metastore
                      <Emph>
                        <Italic>service</Italic>
                      </Emph>
                      , if you have not done so already. Make sure that the Hive Metastore
                      <Emph>
                        <Italic>database</Italic>
                      </Emph>
                      is running.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Upgrade Hive v11 to v14 and upgrade the Hive metastore database schema, using the
                      following instructions:
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Set java home:</ItemPara>
                          <RichText>
                            <InLineTypeThis>export JAVA_HOME=/path/to/java</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>Copy old hive configurations to new conf dir:</ItemPara>
                          <RichText>
                            <InLineTypeThis>cp -R /etc/hive/conf.server/* /etc/hive/conf/</InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <SyntaxArg>&lt;HIVE_HOME&gt; </SyntaxArg>
                            <InLineTypeThis>/bin/schematool -upgradeSchemaFrom 0.11.0 -dbType</InLineTypeThis>
                            <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>
                            where
                            <SyntaxArg>&lt;HIVE_HOME&gt;</SyntaxArg>
                            is the Hive installation directory.
                          </ItemPara>
                          <RichText>
                            For example, on the Hive Metastore host:
                            <InLineTypeThis>/usr/hdp/2.2.0.0-</InLineTypeThis>
                            <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                            <InLineTypeThis>/hive/bin/schematool -upgradeSchemaFrom 0.11.0 -dbType</InLineTypeThis>
                            <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>
                            where
                            <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                            is the 2.2.0 build number and
                            <SyntaxArg>&lt;databaseType&gt;</SyntaxArg>
                            is derby, mysql, oracle, or postgres.
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="a2ab9d91-ceaa-4b8b-a14e-e67b2f6c8507">
            <Title>Complete Upgrade of the 1.3 Stack to 2.2</Title>
            <ParaBlock xy:guid="419001fe-1694-4a9f-a986-c4568939ceaf">
              <List ListMarker="Numeric" xy:guid="77e7058d-030b-4b79-803a-18d3ac20af5a">
                <ItemBlock>
                  <Item>
                    <ItemPara>Start Ambari Server and Ambari Agents.</ItemPara>
                    <RichText>On the Server host:</RichText>
                    <RichText>
                      <InLineTypeThis>ambari-server start</InLineTypeThis>
                    </RichText>
                    <RichText>
                      On all of the Agent hosts:
                    </RichText>
                    <RichText>
                      <InLineTypeThis>ambari-agent start</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Update the repository Base URLs in Ambari Server for the HDP-2.2 stack. Browse to
                      <InLineTypeThis>Ambari Web</InLineTypeThis>
                      &gt;
                      <InLineTypeThis>Admin</InLineTypeThis>
                      &gt;
                      <InLineTypeThis>Repositories</InLineTypeThis>
                      and set the value of the HDP and HDP-UTILS repository Base URLs. For more information about
                      viewing and editing repository Base URLs, see<Xref
                              InsideTargetRef="0cf8106e-364a-46d5-85aa-38dd0476a7e2">Viewing Cluster Stack Version and
                        Repository URLs</Xref>.
                    </ItemPara>
                    <RichText>For a remote, accessible, public repository, the HDP and HDP-UTILS Base URLs are the same
                      as the baseurl=values in the HDP.repo file downloaded in Upgrade the Stack: Step 1 For a local
                      repository, use the local repository Base URL that you configured for the HDP Stack. For links to
                      download the HDP repository files for your version of the Stack, see<Xref
                              InsideTargetRef="3e43081a-a937-4d51-92cc-1fbf15645713">HDP Stack Repositories</Xref>.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Add YARN and MapReduce2 services:</ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>If you are not already there, go to the Upgrade Folder.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Execute the add-yarn-mr2 action:</ItemPara>
                          <RichText>
                            <InLineTypeThis>python UpgradeHelper_HDP2.py --hostname $HOSTNAME --user $USERNAME
                              --password $PASSWORD --clustername $CLUSTERNAME add-yarn-mr2
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                    <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                xy:guid="5a3f3a51-1eb1-47e0-81b9-51f680400b53">
                      <SimpleBlock>
                        <RichText>If desired, you can use the -n option to see the API calls as they are being made so
                          that you can verify them.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                  </Item>
                  <Item>
                    <ItemPara>Update the respective configurations:</ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>If you are not already there, go to the Upgrade Folder.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Execute the update-configs action:</ItemPara>
                          <RichText>
                            <InLineTypeThis>
                              python UpgradeHelper_HDP2.py --hostname $HOSTNAME --user
                            </InLineTypeThis>
                            <SyntaxArg>$USERNAME</SyntaxArg>
                            <InLineTypeThis>--password</InLineTypeThis>
                            <SyntaxArg>$PASSWORD</SyntaxArg>
                            <InLineTypeThis>--clustername</InLineTypeThis>
                            <SyntaxArg>$CLUSTERNAME</SyntaxArg>
                            <InLineTypeThis>update-configs</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Install the YARN and MapReduce2 services:</ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>If you are not already there, go to the Upgrade Folder.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Execute the install-yarn-mr2 action:</ItemPara>
                          <RichText>
                            <InLineTypeThis>python UpgradeHelper_HDP2.py --hostname</InLineTypeThis>
                            <SyntaxArg>$HOSTNAME</SyntaxArg>
                            <InLineTypeThis>--user</InLineTypeThis>
                            <SyntaxArg>$USERNAME</SyntaxArg>
                            <InLineTypeThis>--password</InLineTypeThis>
                            <SyntaxArg>$PASSWORD</SyntaxArg>
                            <InLineTypeThis>--clustername</InLineTypeThis>
                            <SyntaxArg>$CLUSTERNAME</SyntaxArg>
                            <InLineTypeThis>install-yarn-mr2</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Using the Ambari Web UI, add the Tez service if if it has not been installed already. For
                      more information about adding a service, see<Xref
                              InsideTargetRef="19a49eb0-7d00-4f33-bb7b-ed805a5cd656">Adding a Service</Xref>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Using the Ambari Web UI, add any new services that you want to run on the HDP 2.2 stack.
                      You must add a Service before editing configuration properties necessary to complete the upgrade.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Using the Ambari Web Services view, start the ZooKeeper service.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>If you are upgrading from an HA NameNode configuration, start all JournalNodes. On each
                      JournalNode host, run the following command as the HDFS user:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        su -l
                      </InLineTypeThis>
                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                      <InLineTypeThis>-c "/usr/hdp/2.2.0.0-&lt;$version&gt;/hadoop/sbin/hadoop-daemon.sh start
                        journalnode"
                      </InLineTypeThis>
                    </RichText>
                    <RichText>All JournalNodes must be running when performing the upgrade, rollback, or finalization
                      operations. If any JournalNodes are down when running any such operation, the operation will fail.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Because the file system version has now changed you must start the NameNode manually. On
                      the NameNode host, as the HDFS User:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis></InLineTypeThis>
                      <InLineTypeThis>su -l -c "export HADOOP_LIBEXEC_DIR=/usr/hdp/2.2.0.0-</InLineTypeThis>
                      <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                      <InLineTypeThis>/hadoop/libexec &amp;&amp; /usr/hdp/2.2.0.0-</InLineTypeThis>
                      <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                      <InLineTypeThis>/hadoop/sbin/hadoop-daemon.sh start namenode -upgrade"</InLineTypeThis>
                    </RichText>
                    <RichText>To check if the Upgrade is in progress, check that the "
                      <InLineCode>\previous</InLineCode>
                      " directory has been created in \NameNode and \JournalNode directories. The "
                      <InLineCode>\previous</InLineCode>
                      " directory contains a snapshot of the data before upgrade.
                    </RichText>
                    <CustomNote xy:guid="3034753c-257d-4a34-96be-729501e05e9f">
                      <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ad34f774-d45f-47b4-afeb-45b7ba4d95e2"/>
                      <SimpleBlock>
                        <RichText>In a NameNode HA configuration, this NameNode will not enter the standby state as
                          usual. Rather, this NameNode will immediately enter the active state, perform an upgrade of
                          its local storage directories, and also perform an upgrade of the shared edit log. At this
                          point, the standby NameNode in the HA pair is still down. It will be out of sync with the
                          upgraded active NameNode.

                          To synchronize the active and standby NameNode, re-establishing HA, re-bootstrap the
                          standbyNameNode by running the NameNode with the '-bootstrapStandby' flag.
                          <Emph>Do NOT</Emph>
                          start this standby NameNode with the '-upgrade' flag.
                        </RichText>
                        <RichText>
                          <InLineTypeThis>
                            su -l
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                          <InLineTypeThis>-c "hdfs namenode -bootstrapStandby -force"</InLineTypeThis>
                        </RichText>
                        <RichText>
                          The bootstrapStandby command will download the most recent fsimage from the active NameNode
                          into the
                          <InLineCode>$dfs.name.dir</InLineCode>
                          directory of the standby NameNode. You can enter that directory to make sure the fsimage has
                          been successfully downloaded. After verifying, start the ZKFailoverController via Ambari, then
                          start the standby NameNode via Ambari. You can check the status of both NameNodes using the
                          Web UI.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                  </Item>
                  <Item>
                    <ItemPara>Start all DataNodes.</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        su -l
                      </InLineTypeThis>
                      <SyntaxArg> &lt;HDFS_USER&gt;</SyntaxArg>
                      <InLineTypeThis>-c "/usr/hdp/2.2.0.0-</InLineTypeThis>
                      <SyntaxArg>&lt;$version&gt;</SyntaxArg>
                      <InLineTypeThis>/hadoop/sbin/hadoop-daemon.sh --config /etc/hadoop/conf start datanode"
                      </InLineTypeThis>
                    </RichText>
                    <RichText>
                      The NameNode will send an upgrade command to DataNodes after receiving block reports.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Prepare the NameNode to work with Ambari:</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Open the Ambari Web GUI. If it has been open throughout the process, do a hard reset
                            on your browser to force a reload.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>On the Services view, click
                            <Emph>HDFS</Emph>
                            to open the HDFS service.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Click
                            <Emph>View Host</Emph>
                            to open the NameNode host details page.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Use the drop-down menu to stop the NameNode.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>On the Services view, restart the HDFS service. Make sure it passes the Service
                            Check. It is now under Ambari's control.
                          </ItemPara>
                          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                      xy:guid="f9006c63-8067-42e5-addb-cc9550059251">
                            <Icon thumbWidth="50" uri="Icons/Important.png"
                                  xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                  xy:guid="e875b9e3-0a76-4003-9c4b-989da99bd0f2"/>
                            <SimpleBlock>
                              <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                                    xy:guid="5a0b4bff-5f6e-4d4c-9540-490f97887d60">
                                <ListPreamble>In a cluster configured for NameNode High Availability, use the following
                                  procedure to restart NameNodes. Using the following procedure preserves HA when
                                  upgrading the cluster.
                                </ListPreamble>
                                <ItemBlock>
                                  <Item>
                                    <ItemPara>Using Ambari Web &gt; Services &gt; HDFS, choose Active NameNode.
                                    </ItemPara>
                                    <RichText>This shows the host name of the current, active NameNode.</RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Write down (or copy, or remember) the host name of the active NameNode.
                                    </ItemPara>
                                    <RichText>You need this host name for step 4.</RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Using Ambari Web &gt; Services &gt; HDFS &gt; Service Actions &gt; choose
                                      Stop.
                                    </ItemPara>
                                    <RichText>This stops all of the HDFS Components, including both NameNodes.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Using Ambari Web &gt; Hosts &gt; choose the host name you noted in Step 2,
                                      then start that NameNode component, using Host Actions &gt; Start.
                                    </ItemPara>
                                    <RichText>This causes the original, active NameNode to re-assume its role as the
                                      active NameNode.
                                    </RichText>
                                  </Item>
                                  <Item>
                                    <ItemPara>Using Ambari Web &gt; Services &gt; HDFS &gt; Service Actions, choose
                                      Re-Start All.
                                    </ItemPara>
                                  </Item>
                                </ItemBlock>
                              </List>
                            </SimpleBlock>
                          </CustomNote>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>After the DataNodes are started, HDFS exits safemode. To monitor the status, run the
                      following command:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>sudo su -l</InLineTypeThis>
                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                      <InLineTypeThis>-c "hdfs dfsadmin -safemode get"</InLineTypeThis>
                    </RichText>
                    <RichText>
                      Depending on the size of your system, a response may not display for up to 10 minutes. When HDFS
                      exits safemode, the following message displays:
                    </RichText>
                    <RichText>
                      <InLineApplicationPrompt>Safe mode is OFF</InLineApplicationPrompt>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Make sure that the HDFS upgrade was successful. Execute step 3 in
                      <Xref InsideTargetRef="2d16d77f-9eb4-485f-a3f9-daeb558a4b6b">Preparing for the Upgrade</Xref>
                      to create new versions of the logs and reports. Substitute "
                      <InLineCode>new</InLineCode>
                      " for "
                      <InLineCode>old</InLineCode>
                      " in the file names as necessary.
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Compare the old and new versions of the following:</ItemPara>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <InLineCode>dfs-old-fsck-1.log</InLineCode>
                                  versus<InLineCode>dfs-new-fsck-1.log</InLineCode>.
                                </ItemPara>
                                <RichText>
                                  The files should be identical unless the hadoop fsck reporting format has changed in
                                  the new version.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <InLineCode>dfs-old-lsr-1.log</InLineCode>
                                  versus<InLineCode>dfs-new-lsr-1.log</InLineCode>.
                                </ItemPara>
                                <RichText>
                                  The files should be identical unless the format of hadoop fs -lsr reporting or the
                                  data structures have changed in the new version.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <InLineCode>dfs-old-report-1.log</InLineCode>
                                  versus<InLineCode>fs-new-report-1.log</InLineCode>.
                                </ItemPara>
                                <RichText>
                                  Make sure all DataNodes previously belonging to the cluster are up and running.
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Update the configuration properties required for HDFS. Using Ambari Web, navigate to
                      <InLineMenuSelection>Services &gt; HDFS &gt; Configs</InLineMenuSelection>
                      and add/modify the following configurations:
                    </ItemPara>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Change the io.compression.codecs property to:</ItemPara>
                          <RichText>
                            <InLineTypeThis>
                              org.apache.hadoop.io.compress.GzipCodec,com.hadoop.compression.lzo.LzoCodec,org.apache.hadoop.io
                            </InLineTypeThis>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>Add to core-site.xml, the following property:</ItemPara>
                          <RichText>
                            <InLineTypeThis>&lt;name&gt;io.compression.codec.lzo.class&lt;/name&gt;
                              &lt;value&gt;com.hadoop.compression.lzo.LzoCodec&lt;/value&gt;</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Using
                      <InLineTypeThis>Ambari Web</InLineTypeThis>
                      &gt;
                      <InLineTypeThis>Services</InLineTypeThis>
                      &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start YARN.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Using
                      <InLineTypeThis>Ambari Web</InLineTypeThis>
                      &gt;
                      <InLineTypeThis>Services</InLineTypeThis>
                      &gt;<InLineTypeThis>Service Actions</InLineTypeThis>, start MapReduce2.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Upgrade HBase.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Make sure that all HBase components - RegionServers and HBase Master - are
                            stopped.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Using
                            <InLineTypeThis>Ambari Web</InLineTypeThis>
                            &gt;<InLineTypeThis>Services</InLineTypeThis>, start the ZooKeeper service. Wait until the
                            ZK service is up and running.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>On the HBase Master host, make these configuration changes:</ItemPara>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>In<InLineCode>HBASE_CONFDIR/hbase-site.xml</InLineCode>, set the property
                                  <InLineCode>dfs.client.read.shortcircuit</InLineCode>
                                  to<InLineCode>false</InLineCode>.
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>In the configuration file, find the value of the
                                  <InLineCode>hbase.tmp.dir</InLineCode>
                                  property and make sure that the directory exists and is readable and writeable for the
                                  HBase service user and group.
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>
                                    chown -R
                                    &lt;HBASE_USER&gt;:&lt;HADOOP_GROUP&gt;&lt;HBASE.TMP.DIR&gt;</InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Go to the Upgrade Folder and check in the saved global configuration file
                                  named
                                  <InLineCode>global_&lt;$TAG&gt;</InLineCode>
                                  for the value of the property
                                  <InLineCode>hbase_pid_dir</InLineCode>
                                  and<InLineCode>hbase_log_dir</InLineCode>. Make sure that the directories are readable
                                  and writeable for the HBase service user and group.
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>chown -R &lt;HBASE_USER&gt;:&lt;HADOOP_GROUP&gt;&lt;hbase_pid_dir&gt;
                                    chown -R
                                    &lt;HBASE_USER&gt;:&lt;HADOOP_GROUP&gt;&lt;hbase_log_dir&gt;</InLineTypeThis>
                                </RichText>
                                <RichText>Do this on
                                  <Emph>every</Emph>
                                  host where a RegionServer is installed as well as on the HBase Master host.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Check for HFiles in V1 format. HBase 0.96.0 discontinues support for HFileV1.
                                  Before the actual upgrade, run the following command to check if there are HFiles in
                                  V1 format:
                                  <InLineApplicationPrompt>hbase upgrade -check</InLineApplicationPrompt>
                                  HFileV1 was a common format prior to HBase 0.94. You may see output similar to:
                                </ItemPara>
                                <RichText>
                                  <InLineApplicationPrompt>Tables Processed:

                                    hdfs://localhost:41020/myHBase/.META.
                                    hdfs://localhost:41020/myHBase/usertable
                                    hdfs://localhost:41020/myHBase/TestTable
                                    hdfs://localhost:41020/myHBase/t

                                    Count of HFileV1: 2
                                    HFileV1:
                                    hdfs://localhost:41020/myHBase/usertable/fa02dac1f38d03577bd0f7e666f12812/family/249450144068442524
                                    hdfs://localhost:41020/myHBase/usertable/ecdd3eaee2d2fcf8184ac025555bb2af/family/249450144068442512

                                    Count of corrupted files: 1
                                    Corrupted Files:
                                    hdfs://localhost:41020/myHBase/usertable/fa02dac1f38d03577bd0f7e666f12812/family/1
                                    Count of Regions with HFileV1: 2
                                    Regions to Major Compact:
                                    hdfs://localhost:41020/myHBase/usertable/fa02dac1f38d03577bd0f7e666f12812
                                    hdfs://localhost:41020/myHBase/usertable/ecdd3eaee2d2fcf8184ac025555bb2af
                                  </InLineApplicationPrompt>
                                </RichText>
                                <RichText>
                                  When you run the upgrade check, if "Count of HFileV1" returns any files, start the
                                  hbase shell to use major compaction for regions that have HFileV1 format. For example
                                  in the sample output above, you must compact the
                                  <InLineCode>fa02dac1f38d03577bd0f7e666f12812</InLineCode>
                                  and
                                  <InLineCode>ecdd3eaee2d2fcf8184ac025555bb2af</InLineCode>
                                  regions.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Upgrade HBase. As the HBase service user:</ItemPara>
                                <RichText>
                                  <InLineTypeThis>
                                    su -l &lt;HBASE_USER&gt; -c "hbase upgrade -execute"
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>
                                  Make sure that the output contains the string "Successfully completed Znode upgrade".
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Use the Services view to start the HBase service. Make sure that Service Check
                                  passes.
                                </ItemPara>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Upgrade Oozie.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Perform the following preparation steps on each oozie server host:</ItemPara>
                          <CustomNote xy:guid="62a7bd6b-3687-4287-994e-16794ca91243">
                            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="33819337-934a-4058-a504-912c7fe02fb0"/>
                            <SimpleBlock>
                              <RichText>You must replace your Oozie configuration after upgrading.</RichText>
                            </SimpleBlock>
                          </CustomNote>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>Copy
                                  <InLineMenuSelection>/etc/oozie/conf</InLineMenuSelection>
                                  from the template to the<InLineMenuSelection>/conf</InLineMenuSelection>directory on
                                  each Oozie server and client.
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>Create
                                  <InLineCode>/usr/lib/oozie/libext-upgrade22</InLineCode>
                                  directory.
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>
                                    mkdir /usr/lib/oozie/libext-upgrade22
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Copy the JDBC jar of your Oozie database to both
                                  <InLineCode>/usr/lib/oozie/libext-upgrade22</InLineCode>
                                  and<InLineCode>/usr/lib/oozie/libtools</InLineCode>.
                                </ItemPara>
                                <RichText>
                                  For example, if you are using MySQL, copy your<InLineCode>
                                  mysql-connector-java.jar</InLineCode>.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Copy these files to
                                  <InLineCode>/usr/lib/oozie/libext-upgrade22</InLineCode>
                                  directory
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>cp /usr/lib/hadoop/lib/hadoop-lzo*.jar
                                    /usr/lib/oozie/libext-upgrade22
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>
                                  <InLineTypeThis>cp /usr/share/HDP-oozie/ext-2.2.zip /usr/lib/oozie/libext-upgrade22
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Grant read/write access to the Oozie user.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>chmod -R 777 /usr/lib/oozie/libext-upgrade22</InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>Upgrade steps:</ItemPara>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>On the Services view, make sure YARN and MapReduce2 are running.</ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>Make sure that the Oozie service is stopped.</ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>Upgrade Oozie. On the Oozie server host, as the Oozie service user:</ItemPara>
                                <RichText>
                                  <InLineTypeThis>su -l</InLineTypeThis>
                                  <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "/usr/lib/oozie/bin/ooziedb.sh upgrade -run"</InLineTypeThis>
                                </RichText>
                                <RichText>
                                  Make sure that the output contains the string "Oozie DB has been upgraded to Oozie
                                  version<SyntaxArg>&lt;OOZIE_build_version&gt;</SyntaxArg>.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Prepare the Oozie WAR file.</ItemPara>
                                <CustomNote xy:guid="a2c7b9dc-70f0-4672-a7d1-282fc7cb03b5">
                                  <Icon thumbWidth="50" uri="Icons/Note.png"
                                        xy:guid="31d0e3bf-6946-45b9-887b-d82001875fff"/>
                                  <SimpleBlock>
                                    <RichText>The Oozie server must be
                                      <Emph>not</Emph>
                                      running for this step. If the message "ERROR: Stop Oozie first" displays, find and
                                      remove the process id (pid) file listed in the output. This prevent the script
                                      from "seeing" the (old) Oozie server process.
                                    </RichText>
                                  </SimpleBlock>
                                </CustomNote>
                                <RichText>
                                  As the root user:
                                  <InLineTypeThis>sudo su -l</InLineTypeThis>
                                  <SyntaxArg>&lt;OOZIE_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "/usr/lib/oozie/bin/oozie-setup.sh prepare-war -d
                                    /usr/lib/oozie/libext-upgrade22"
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>
                                  Make sure that the output contains the string "New Oozie WAR file added".
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Using Ambari Web UI
                                  <InLineTypeThis>Services</InLineTypeThis>
                                  &gt;
                                  <InLineTypeThis>Oozie</InLineTypeThis>
                                  &gt;<InLineTypeThis>Configs</InLineTypeThis>, edit the following configuration
                                  properties:
                                </ItemPara>
                                <SubList ListMarker="Numeric">
                                  <ItemBlock>
                                    <Item>
                                      <ItemPara>Add the following configuration properties in<InLineCode>
                                        oozie-site.xml</InLineCode>.
                                      </ItemPara>
                                      <Table align="" border="true" width="100"
                                             xy:guid="9645f8ed-9ec0-4e9d-81d8-24b0e613d75c">
                                        <TblGroup>
                                          <TblCol width="10"/>
                                          <TblCol width="56"/>
                                          <TblCol width=""/>
                                          <TblHeader>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Action</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Property Name</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Property Value</RichText>
                                              </Cell>
                                            </TableRow>
                                          </TblHeader>
                                          <TblBody>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.service.URIHandlerService.uri.handlers</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>
                                                  org.apache.oozie.dependency.FSURIHandler,org.apache.oozie.dependency.HCatURIHandler
                                                </RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.service.coord.push.check.requeue.interval</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>30000</RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.services</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>org.apache.oozie.service.SchedulerService,
                                                  org.apache.oozie.service.InstrumentationService,
                                                  org.apache.oozie.service.CallableQueueService,
                                                  org.apache.oozie.service.UUIDService,
                                                  org.apache.oozie.service.ELService,
                                                  org.apache.oozie.service.AuthorizationService,
                                                  org.apache.oozie.service.UserGroupInformationService,
                                                  org.apache.oozie.service.HadoopAccessorService,
                                                  org.apache.oozie.service.URIHandlerService,
                                                  org.apache.oozie.service.MemoryLocksService,
                                                  org.apache.oozie.service.DagXLogInfoService,
                                                  org.apache.oozie.service.SchemaService,
                                                  org.apache.oozie.service.LiteWorkflowAppService,
                                                  org.apache.oozie.service.JPAService,
                                                  org.apache.oozie.service.StoreService,
                                                  org.apache.oozie.service.CoordinatorStoreService,
                                                  org.apache.oozie.service.SLAStoreService,
                                                  org.apache.oozie.service.DBLiteWorkflowStoreService,
                                                  org.apache.oozie.service.CallbackService,
                                                  org.apache.oozie.service.ActionService,
                                                  org.apache.oozie.service.ActionCheckerService,
                                                  org.apache.oozie.service.RecoveryService,
                                                  org.apache.oozie.service.PurgeService,
                                                  org.apache.oozie.service.CoordinatorEngineService,
                                                  org.apache.oozie.service.BundleEngineService,
                                                  org.apache.oozie.service.DagEngineService,
                                                  org.apache.oozie.service.CoordMaterializeTriggerService,
                                                  org.apache.oozie.service.StatusTransitService,
                                                  org.apache.oozie.service.PauseTransitService,
                                                  org.apache.oozie.service.GroupsService,
                                                  org.apache.oozie.service.ProxyUserService,org.apache.oozie.service.XLogStreamingService,org.apache.oozie.service.JobsConcurrencyService
                                                </RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.services.ext</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>
                                                  org.apache.oozie.service.PartitionDependencyManagerService,org.apache.oozie.service.HCatAccessorService
                                                </RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.service.SchemaService.wf.ext.schemas</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>
                                                  shell-action-0.1.xsd,shell-action-0.2.xsd,shell-action-0.3.xsd,email-action-0.1.xsd,email-action-0.2.xsd,hive-action-0.2.xsd,hive-action-0.3.xsd,hive-action-0.4.xsd,hive-action-0.5.xsd,sqoop-action-0.2.xsd,sqoop-actio
                                                </RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.service.coord.check.maximum.frequency</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>false</RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.service.AuthorizationService.security.enabled</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>false</RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.service.HadoopAccessorService.kerberos.enabled
                                                </RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>false</RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>oozie.authentication.simple.anonymous.allowed</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>true</RichText>
                                              </Cell>
                                            </TableRow>
                                            <TableRow>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>Add</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>log4j.appender.oozie.layout.ConversionPattern</RichText>
                                              </Cell>
                                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0"
                                                    rowspan="1">
                                                <RichText>%d{ISO8601} %5p %c{1}:%L - SERVER[${oozie.instance.id}] %m%n
                                                </RichText>
                                              </Cell>
                                            </TableRow>
                                          </TblBody>
                                          <TblFooter/>
                                        </TblGroup>
                                        <Caption>Oozie-site.xml - Properties to Add</Caption>
                                      </Table>
                                      <CustomNote xy:guid="57c1c880-cf0a-4a58-9ce9-91c5897fa3ae">
                                        <Icon thumbWidth="50" uri="Icons/Note.png"
                                              xy:guid="da74b739-2cab-46fe-b489-a15225274233"/>
                                        <SimpleBlock>
                                          <RichText>Do not delete existing values from each property values list. IF you
                                            have customized schema or property values, make sure the customized values
                                            appear on Configs. Values in each property value list must be separated by
                                            commas, no spaces.
                                          </RichText>
                                        </SimpleBlock>
                                      </CustomNote>
                                    </Item>
                                    <Item>
                                      <ItemPara>After modifying all properties on the Oozie Configs page, choose
                                        <InLineMenuSelection>Save</InLineMenuSelection>
                                        to update<InLineCode>oozie.site.xml</InLineCode>, using the modified
                                        configurations.
                                      </ItemPara>
                                    </Item>
                                  </ItemBlock>
                                </SubList>
                              </Item>
                              <Item>
                                <ItemPara>Replace the content of
                                  <InLineCode>/usr/oozie/share</InLineCode>
                                  in HDFS. On the Oozie server host:
                                </ItemPara>
                                <SubList ListMarker="Numeric">
                                  <ItemBlock>
                                    <Item>
                                      <ItemPara>Extract the Oozie sharelib into a
                                        <InLineCode>tmp</InLineCode>
                                        folder.
                                      </ItemPara>
                                      <RichText>
                                        <InLineTypeThis>mkdir -p /tmp/oozie_tmp
                                          cp /usr/lib/oozie/oozie-sharelib.tar.gz /tmp/oozie_tmp
                                          cd /tmp/oozie_tmp
                                          tar xzvf oozie-sharelib.tar.gz
                                        </InLineTypeThis>
                                      </RichText>
                                    </Item>
                                    <Item>
                                      <ItemPara>Back up the
                                        <InLineCode>/user/oozie/share</InLineCode>
                                        folder in HDFS and then delete it. If you have any custom files in this folder
                                        back them up separately and then add them back after the share folder is
                                        updated.
                                      </ItemPara>
                                      <RichText>
                                        <InLineTypeThis>mkdir /tmp/oozie_tmp/oozie_share_backup
                                          chmod 777 /tmp/oozie_tmp/oozie_share_backup
                                        </InLineTypeThis>
                                      </RichText>
                                      <RichText>
                                        As the Oozie user,

                                        <InLineTypeThis>su -l</InLineTypeThis>
                                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                        <InLineTypeThis>-c "hdfs dfs -copyToLocal /user/oozie/share
                                          /tmp/oozie_tmp/oozie_share_backup"
                                          su -l
                                        </InLineTypeThis>
                                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                        <InLineTypeThis>-c "hdfs dfs -rm -r /user/oozie/share"</InLineTypeThis>
                                      </RichText>
                                    </Item>
                                    <Item>
                                      <ItemPara>Add the latest share libs that you extracted in step 1. After you have
                                        added the files, modify ownership and acl.
                                      </ItemPara>
                                      <RichText>
                                        <InLineTypeThis>
                                          su -l
                                        </InLineTypeThis>
                                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                        <InLineTypeThis>-c "hdfs dfs -copyFromLocal /tmp/oozie_tmp/share /user/oozie/."
                                          su -l
                                        </InLineTypeThis>
                                        <SyntaxArg>&lt;HDFS_USER&gt; </SyntaxArg>
                                        <InLineTypeThis>-c "hdfs dfs -chown -R &lt;OOZIE_USER&gt;:&lt;HADOOP_GROUP&gt;
                                          /user/oozie"
                                          su -l
                                        </InLineTypeThis>
                                        <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                                        <InLineTypeThis>-c "hdfs dfs -chmod -R 755 /user/oozie"</InLineTypeThis>
                                      </RichText>
                                    </Item>
                                  </ItemBlock>
                                </SubList>
                              </Item>
                              <Item>
                                <ItemPara>Use the Services view to start the Oozie service. Make sure that ServiceCheck
                                  passes for Oozie.
                                </ItemPara>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Update WebHCat.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Modify the
                            <InLineCode>webhcat-site</InLineCode>
                            config type.
                          </ItemPara>
                          <RichText>
                            Using the Ambari web UI, navigate to
                            <InLineTypeThis>Services</InLineTypeThis>
                            &gt;
                            <InLineTypeThis>WebHCat</InLineTypeThis>
                            and modify the following configuration:
                          </RichText>
                          <Table align="" border="true" width="100" xy:guid="c7dc5112-1864-439e-89e9-daf88aecc4c4">
                            <TblGroup>
                              <TblCol width=""/>
                              <TblCol width=""/>
                              <TblCol width=""/>
                              <TblHeader>
                                <TableRow>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Action</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Property Name</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Property Value</RichText>
                                  </Cell>
                                </TableRow>
                              </TblHeader>
                              <TblBody>
                                <TableRow>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>Modify</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>templeton.storage.class</RichText>
                                  </Cell>
                                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                    <RichText>org.apache.hive.hcatalog.templeton.tool.ZooKeeperStorage</RichText>
                                  </Cell>
                                </TableRow>
                              </TblBody>
                              <TblFooter/>
                            </TblGroup>
                            <Caption>WebHCat Properties to Modify</Caption>
                          </Table>
                        </Item>
                        <Item>
                          <ItemPara>On each WebHCat host, update the Pig and Hive tar bundles, by updating the following
                            files:
                          </ItemPara>
                          <SubList ListMarker="Bullet">
                            <ItemBlock>
                              <Item>
                                <ItemPara>
                                  <InLineCode>/apps/webhcat/pig.tar.gz</InLineCode>
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>
                                  <InLineCode>/apps/webhcat/hive.tar.gz</InLineCode>
                                </ItemPara>
                                <CustomNote xy:guid="7fc5c179-8186-4ec6-a729-346147bf74ee">
                                  <Icon thumbWidth="50" uri="Icons/Note.png"
                                        xy:guid="7b188b55-12f6-4fea-a8cc-213f0ef630ce"/>
                                  <SimpleBlock>
                                    <RichText>You will find these files only on a host where webhcat is installed.
                                    </RichText>
                                  </SimpleBlock>
                                </CustomNote>
                              </Item>
                            </ItemBlock>
                          </SubList>
                          <RichText>
                            For example, to update a *.tar.gz file:
                          </RichText>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>Move the file to a local directory. As the WebHCat user,</ItemPara>
                                <RichText>
                                  <InLineTypeThis>su -l</InLineTypeThis>
                                  <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -copyToLocal
                                    /apps/webhcat/*.tar.gz $&lt;local_backup_dir&gt;"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Remove the old file.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>su -l</InLineTypeThis>
                                  <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -rm /apps/webhcat/*.tar.gz"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Copy the new file.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>su -l</InLineTypeThis>
                                  <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal
                                    /usr/share/HDP-webhcat/*.tar.gz /apps/webhcat/"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>On each WebHCat host, update
                            <InLineCode>/app/webhcat/hadoop-streaming.jar</InLineCode>
                            file.
                          </ItemPara>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>Move the file to a local directory.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>
                                    su -l
                                  </InLineTypeThis>
                                  <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -copyToLocal
                                    /apps/webhcat/hadoop-streaming*.jar $&lt;local_backup_dir&gt;"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Remove the old file.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>
                                    su -l
                                  </InLineTypeThis>
                                  <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "hadoop --config /etc/hadoop/conf fs -rm
                                    /apps/webhcat/hadoop-streaming*.jar"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Copy the new hadoop-streaming.jar file.</ItemPara>
                                <RichText>
                                  <InLineTypeThis>su -l</InLineTypeThis>
                                  <SyntaxArg>&lt;HCAT_USER&gt;</SyntaxArg>
                                  <InLineTypeThis>-c "hdfs --config /etc/hadoop/conf dfs -copyFromLocal
                                    /usr/lib/hadoop-mapreduce/hadoop-streaming*.jar /apps/webhcat"
                                  </InLineTypeThis>
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Make sure Ganglia no longer attempts to monitor JobTracker.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Make sure Ganglia is stopped.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Log into the host where JobTracker was installed (and where ResourceManager is
                            installed after the upgrade).
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Backup the folder<InLineCode>/etc/ganglia/hdp/HDPJobTracker</InLineCode>.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Remove the folder<InLineCode>/etc/ganglia/hdp/HDPJobTracker</InLineCode>.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Remove the folder<InLineCode>$ganglia_runtime_dir/HDPJobTracker</InLineCode>.
                          </ItemPara>
                          <CustomNote xy:guid="1b14c66f-8d15-48e3-9b59-01d95b780a09">
                            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="4cb2f3b4-5615-4e92-b3f4-212f2ffbeb2b"/>
                            <SimpleBlock>
                              <RichText>For the value of<InLineCode>$ganglia_runtime_dir</InLineCode>, in the Upgrade
                                Folder, check the saved global configuration file<InLineCode>
                                  global_&lt;$TAG&gt;</InLineCode>.
                              </RichText>
                            </SimpleBlock>
                          </CustomNote>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Use the Services view to start the remaining services back up.</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>The upgrade is now fully functional but not yet finalized. Using the
                      <InLineCode>finalize</InLineCode>
                      command removes the previous version of the NameNode and DataNode storage directories.
                    </ItemPara>
                    <RichText>
                      After the upgrade is finalized, the system cannot be rolled back. Usually this step is not taken
                      until a thorough testing of the upgrade has been performed.
                    </RichText>
                    <RichText>
                      The upgrade must be finalized before another upgrade can be performed.
                    </RichText>
                    <CustomNote xy:guid="49b83bb7-0dc1-4387-864e-6761ef038ca3">
                      <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="da89e82a-34d4-4882-8163-58c2a403b739"/>
                      <SimpleBlock>
                        <RichText>Directories used by Hadoop 1 services set in /etc/hadoop/conf/taskcontroller.cfg are
                          not automatically deleted after upgrade. Administrators can choose to delete these directories
                          after the upgrade.
                        </RichText>
                      </SimpleBlock>
                    </CustomNote>
                    <RichText>
                      To finalize the upgrade, execute the following command once, on the primary NamaNode host in your
                      HDP cluster, as the HDFS User:
                      <InLineTypeThis>sudo su -l</InLineTypeThis>
                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                      <InLineTypeThis>-c "hadoop dfsadmin -finalizeUpgrade"</InLineTypeThis>
                      where
                      <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                      is the HDFS Service user (by default,<InLineCode>hdfs</InLineCode>).
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="d7fe46ad-eac3-4a84-aed4-a26b902a9b27">
        <Title>Upgrading host server operating systems in an Ambari-managed Hadoop System</Title>
        <ParaBlock xy:guid="d4fcacb0-b3d4-47d6-bcfe-6142ebee15bf">
          <RichText>Ambari requires specific versions of the files for components that it uses. There are three steps
            you should take to make sure that these versions continue to be available:
          </RichText>
          <List ListMarker="Bullet" xy:guid="4233cdde-940a-4518-ade7-0a164b6bd4a3">
            <ItemBlock>
              <Item>
                <ItemPara>Disable automatic OS updates</ItemPara>
              </Item>
              <Item>
                <ItemPara>Do not update any HDP components such as MySQL, Ganglia, etc.</ItemPara>
              </Item>
              <Item>
                <ItemPara>If you must perform an OS update, do a manual kernel update only.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="3a224c6c-b15e-4318-b71e-68db9103ec5d">
        <Title>Upgrading an older Ambari Server version to 1.2.5</Title>
        <ParaBlock xy:guid="5a8689f0-eff6-4c74-b166-0e7e66c146e3">
          <RichText>This 12-step, manual procedure upgrades an Ambari Server from an older, 1.x version to version
            1.2.5. Upgrading the Ambari Server version does not change the underlying Hadoop Stack version.
          </RichText>
          <CustomNote xy:guid="74d66606-deef-4fbf-b0d0-e2542f0c2552">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="2021e331-65c7-43e1-b1bd-c0af22d2245a"/>
            <SimpleBlock>
              <RichText>You must know the location of the Nagios server for Step 9. Use the
                <InLineMenuSelection>Services View &gt; Summary</InLineMenuSelection>
                panel to locate the host on which the Nagios server is running.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <List ListMarker="Numeric" xy:guid="d5ace189-8946-4a57-8ef5-de273466ab9e">
            <ItemBlock>
              <Item>
                <ItemPara>Stop the Ambari Server and all Ambari Agents.</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>On the Ambari Server host:</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-server stop</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>On each Ambari Agent host:</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-agent stop</InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Get the new Ambari bits.</ItemPara>
                <RichText>Using wget, fetch the repository file, then replace the old repository file with the new
                  repository file on every host.
                </RichText>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="dfe50256-9b70-4169-bacb-99fa41cebac0">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="b9220f97-aab8-4695-80d0-58d243ae02bb"/>
                  <SimpleBlock>
                    <RichText>Check your current directory before you download the new repository file to make sure that
                      no previous versions of the file exist. If a previous version exists, the new downloaded file will
                      be saved with a numeric extension such as ambari.repo.1. Make sure that the version you copy is
                      the new version.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Fetch the new repository file:</ItemPara>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>For RHEL/CentOS 5/Oracle Linux 5:</ItemPara>
                            <RichText>
                              <InLineTypeThis>wget
                                http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.2.5.17/ambari.repo
                              </InLineTypeThis>
                            </RichText>
                          </Item>
                          <Item>
                            <ItemPara>For RHEL/CentOS 6/Oracle Linux 6:</ItemPara>
                            <RichText>
                              <InLineTypeThis>wget
                                http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.2.5.17/ambari.repo
                              </InLineTypeThis>
                            </RichText>
                          </Item>
                          <Item>
                            <ItemPara>For SLES 11:</ItemPara>
                            <RichText>
                              <InLineTypeThis>wget
                                http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.2.5.17/ambari.repo
                              </InLineTypeThis>
                            </RichText>
                          </Item>
                        </ItemBlock>
                      </SubList>
                    </Item>
                    <Item>
                      <ItemPara>Replace the old repository file with the new repository file.</ItemPara>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>For RHEL/CentOS 5/Oracle Linux 5:</ItemPara>
                            <RichText>
                              <InLineTypeThis>cp ambari.repo /etc/yum.repos.d/ambari.repo</InLineTypeThis>
                            </RichText>
                          </Item>
                          <Item>
                            <ItemPara>For RHEL/CentOS 6/Oracle Linux 6:</ItemPara>
                            <RichText>
                              <InLineTypeThis>cp ambari.repo /etc/yum.repos.d/ambari.repo</InLineTypeThis>
                            </RichText>
                          </Item>
                          <Item>
                            <ItemPara>For SLES 11:</ItemPara>
                            <RichText>
                              <InLineTypeThis>cp ambari.repo /etc/zypp/repos.d/ambari.repo</InLineTypeThis>
                            </RichText>
                          </Item>
                        </ItemBlock>
                      </SubList>
                    </Item>
                  </ItemBlock>
                </SubList>
                <CustomNote xy:guid="410b7556-f047-43ad-891f-005e24835ffc">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="d8435158-bacb-4dd5-9026-95965c038134"/>
                  <SimpleBlock>
                    <RichText>If your cluster does not have access to the Internet, set up a local repository with this
                      data before you continue. See
                      <Xref InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Configure the Local Repositories
                      </Xref>
                      for more information.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Upgrade Ambari Server.</ItemPara>
                <RichText>On the Ambari Server host:</RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>For RHEL/CentOS/Oracle Linux:</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum clean all
                          yum upgrade ambari-server-1.2.5.17 ambari-log4j-1.2.5.17
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>For SLES:</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper clean
                          zypper up ambari-server-1.2.5.17 ambari-log4j-1.2.5.17
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Check for upgrade success.</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>As the process runs, the console should produce output similar, although not identical,
                        to the following text:
                      </ItemPara>
                      <Code>Setting up Upgrade Process
                        Resolving Dependencies
                        --&gt; Running transaction check
                        ---&gt; Package ambari-agent.x86_64 0:1.2.2.3-1 will be updated
                        ---&gt; Package ambari-agent.x86_64 0:1.2.2.4-1 will be updated ...
                        ---&gt; Package ambari-agent.x86_64 0:1.2.2.5-1 will be an update ...
                      </Code>
                      <RichText>After the process is complete, check each host to make sure the new 1.2.4 files have
                        been installed.
                      </RichText>
                      <RichText>
                        <InLineTypeThis>rpm -qa | grep ambari</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>If the upgrade fails, the console displays output similar to the following text:
                      </ItemPara>
                      <Code>Setting up Upgrade Process
                        No Packages marked for Update
                      </Code>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>On the Ambari Server host, check for a folder named<InLineCode>
                  /etc/ambari-server/conf.save</InLineCode>. If such a folder exists, rename it, using the following
                  command:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>mv /etc/ambari-server/conf.save /etc/ambari-server/conf</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Upgrade the Ambari Server schema.</ItemPara>
                <RichText>On the Ambari Server host:
                  <InLineTypeThis>
                    ambari-server upgrade
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Upgrade the Ambari Agent on all hosts.</ItemPara>
                <RichText>On each Ambari Agent host:</RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>For RHEL/CentOS/Oracle Linux</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum upgrade ambari-agent ambari-log4j</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>For SLES</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper up ambari-agent ambari-log4j</InLineTypeThis>
                      </RichText>
                      <CustomNote xy:guid="5ca5caea-9135-4bb8-a490-d26e09be052f">
                        <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="53468c52-3e18-463f-ab48-60f58ce4746a"/>
                        <SimpleBlock>
                          <RichText>If a warning such as the following, "There are some running programs that use files
                            deleted by recent upgrade" appears, ignore it.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>On each Agent host, check for a folder named<InLineCode>
                  /etc/ambari-agent/conf.save</InLineCode>. If such a folder exists, rename it, using the following
                  command:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>mv /etc/ambari-agent/conf.save /etc/ambari-agent/conf</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Upgrade the Nagios and Ganglia add-ons package and restart.</ItemPara>
                <RichText>On the Nagios/Ganglia hosts:</RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>For RHEL/CentOS/Oracle Linux:</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum upgrade hdp_mon_nagios_addons hdp_mon_ganglia_addons
                          service httpd restart
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>For SLES:</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper up hdp_mon_nagios_addons hdp_mon_ganglia_addons
                          service apache2 restart
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Start the Ambari Server and all Ambari Agents.</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>On the Ambari Server host:</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-server start</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>On each Ambari Agent host:</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-agent start</InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Open<InLineMenuSelection>Ambari Web</InLineMenuSelection>. Point your browser to
                  <InLineCode>http://</InLineCode>
                  <SyntaxArg>&lt;your.ambari.server&gt;</SyntaxArg>
                  <InLineCode>:8080</InLineCode>
                </ItemPara>
                <RichText>Refresh your browser so that it loads the new version of the code. Hold the Shift key down
                  while clicking the refresh button on the browser. If you have problems, clear your browser cache
                  manually, then restart Ambari Server. Use the Ambari Admin name and password you have set up to log
                  in.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Re-start the Ganglia, Nagios, and MapReduce services.</ItemPara>
                <RichText>In Ambari Web:</RichText>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Go to Services View, then choose each service.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Stop, then re-start each service, using the Management Header.</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="c8dfb50f-1c9a-4028-96f8-5c2da4562b41">
        <Title>Troubleshooting an Ambari Server 1.x Upgrade</Title>
        <ParaBlock xy:guid="785da133-0c3a-4058-9071-09475db7119c">
          <RichText>If upgrading Ambari Server 1.x fails, use the instructions in one of the following sections to fix
            the failed upgrade.
          </RichText>
          <List ListMarker="Bullet" xy:guid="f6fe8a88-9706-48ac-9511-c12284988160">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="4f73c195-4d9c-49be-8f27-6e62df06158f">Upgrade Failure with PostgreSQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="41c7d088-dfe4-489c-abe0-da71952d982e">Upgrade Failure with Oracle</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="072f8eea-b064-4950-a53e-311d36ee40c0">Upgrade Failure from a Local Repository
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="4f73c195-4d9c-49be-8f27-6e62df06158f">
          <Title>Upgrade Failure with PostgreSQL</Title>
          <ParaBlock xy:guid="a299952c-9ded-4968-b95e-d9a0f6c5cf5e">
            <RichText>If you installed Ambari server with a PostgreSQL database and upgrading Ambari Server using a
              remote or public repository failed, use the following steps to fix the upgrade.
            </RichText>
            <List ListMarker="Numeric" xy:guid="50a175df-0a66-447f-9217-d53b610270d4">
              <ItemBlock>
                <Item>
                  <ItemPara>Upgrade the database schema.</ItemPara>
                  <RichText>
                    <InLineTypeThis>/var/lib/ambari-server/resources/upgrade/ddl/AmbariRCA-DDL-Postgres-UPGRADE.sql
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Check database consistency.</ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      /var/lib/ambari-server/resources/upgrade/ddl/Ambari-DDL-Postgres-UPGRADE-1.3.0.Check.sql
                    </InLineTypeThis>
                    with the following parameter:
                    <InLineTypeThis>dbname = ambari</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If you find an inconsistency, fix it using:</ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      /var/lib/ambari-server/resources/upgrade/ddl/Ambari-DDL-Postgres-UPGRADE-1.3.0.Fix.sql
                    </InLineTypeThis>
                    with the following parameter:
                    <InLineTypeThis>dbname = ambari</InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="41c7d088-dfe4-489c-abe0-da71952d982e">
          <Title>Upgrade Failure with Oracle</Title>
          <ParaBlock xy:guid="5619899f-8643-4f7f-bac7-29d8b6ae2fd8">
            <RichText>If you installed Ambari server with an Oracle database and upgrading Ambari Server using a remote
              or public repository failed, run the following script to upgrade the database schema.
              <InLineTypeThis>
                /var/lib/ambari-server/resources/upgrade/ddl/AmbariRCA-DDL-Oracle-UPGRADE.sql
              </InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="072f8eea-b064-4950-a53e-311d36ee40c0">
          <Title>Upgrade Failure from a Local Repository</Title>
          <ParaBlock xy:guid="8e16ef50-bf06-40c4-818e-4a875fa004a9">
            <RichText>If you install and upgrade Ambari server using a local repository and upgrading Ambari Server
              using your local repository failed, find information necessary to fix the upgrade in the following
              locations:
            </RichText>
            <List ListMarker="Numeric" xy:guid="cdb4da78-1bfb-45ae-a179-4213f8a3a018">
              <ItemBlock>
                <Item>
                  <ItemPara>Check for local repository version customized in<InLineCode>
                    /var/lib/ambari-server/resources/stacks/HDPLocal</InLineCode>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Check for the repository version used when creating the cluster, in<InLineCode>
                    repos/repoinfo.xml</InLineCode>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>If local repository version is NOT the same as the NON-LOCAL repository version: Note the
                    os, version, repoid and baseurl, found in<InLineCode>repos/repoinfo.xml</InLineCode>.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>Then, choose the fix appropriate for your database version.</RichText>
            <List ListMarker="Bullet" xy:guid="924702aa-2f44-4d36-9c77-fc050c0602b3">
              <ItemBlock>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="4f73c195-4d9c-49be-8f27-6e62df06158f">PostgreSQL</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="41c7d088-dfe4-489c-abe0-da71952d982e">Oracle</Xref>
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="3606d12a-cffa-4126-bd97-a0c23953c82c">
            <Title>Ambari Server with PostgreSQL</Title>
            <ParaBlock xy:guid="8781b9c3-d09f-4ea0-8459-5f949b84c90c">
              <RichText>To fix a local Ambari/PostgreSQL upgrade:</RichText>
              <List ListMarker="Numeric" xy:guid="209089ae-ad9d-4549-be5f-1f62597021a3">
                <ItemBlock>
                  <Item>
                    <ItemPara>Repair metadata information.</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        /var/lib/ambari-server/resources/upgrade/dml/Ambari-DML-Postgres-INSERT_METAINFO.sql
                      </InLineTypeThis>
                      with the following parameters:
                      <InLineTypeThis>dbname = ambari
                        metainfo_key = repo:/HDP/
                      </InLineTypeThis>
                      <SyntaxArg>&lt;version&gt;</SyntaxArg>
                      <InLineTypeThis>/</InLineTypeThis>
                      <SyntaxArg>&lt;os&gt;</SyntaxArg>
                      <InLineTypeThis>/</InLineTypeThis>
                      <SyntaxArg>&lt;repoid&gt;</SyntaxArg>
                      <InLineTypeThis>:baseurl
                        metainfo_value =
                      </InLineTypeThis>
                      <SyntaxArg>&lt;baseurl&gt;</SyntaxArg>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Run the fix script.</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        /var/lib/ambari-server/resources/upgrade/dml/Ambari-DML-Postgres-UPGRADE_STACK.sql
                      </InLineTypeThis>
                      with the following parameters:
                      <InLineTypeThis>dbname = ambari</InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="25baa044-718a-41d6-a582-31ead521f6c7">
            <Title>Ambari Server with Oracle</Title>
            <ParaBlock xy:guid="90ef0d2c-b09b-49e6-bf71-1ce8a7b4c09b">
              <RichText>To fix a local Ambari/PostgreSQL upgrade:</RichText>
              <List ListMarker="Numeric" xy:guid="c4a8388c-3cc5-4092-a9c7-ad4ae0ec74c6">
                <ItemBlock>
                  <Item>
                    <ItemPara>Repair metadata information.</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        /var/lib/ambari-server/resources/upgrade/dml/Ambari-DML-Oracle-INSERT_METAINFO.sql
                      </InLineTypeThis>
                      with the following parameters:
                      <InLineTypeThis>argument #1 = repo:/HDP/</InLineTypeThis>
                      <SyntaxArg>&lt;version&gt;</SyntaxArg>
                      <InLineTypeThis>/</InLineTypeThis>
                      <SyntaxArg>&lt;os&gt;</SyntaxArg>
                      <InLineTypeThis>/</InLineTypeThis>
                      <SyntaxArg>&lt;repoid&gt;</SyntaxArg>
                      <InLineTypeThis>:baseurl
                        argument #2 =
                      </InLineTypeThis>
                      <SyntaxArg>&lt;baseurl&gt;</SyntaxArg>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Run the fix script.</ItemPara>
                    <RichText>
                      <InLineTypeThis>/var/lib/ambari-server/resources/upgrade/dml/Ambari-DML-Oracle-UPGRADE_STACK.sql
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="c016ce20-4136-4813-941b-dfa8ec05b5aa">
      <Title>Administering Ambari</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="80f4710a-fd44-4a39-af4d-d489e8b125de">
        <ParaBlock xy:guid="89b09a94-6df8-4986-be23-4299c8fd9cec">
          <RichText>Apache Ambari is a system to help you provision, manage and monitor Hadoop clusters. This guide is
            intended for Cluster Operators and System Administrators responsible for installing and maintaining Ambari
            and the Hadoop clusters managed by Ambari. Installing Ambari creates a default user with "Admin Admin"
            privilege, with the following username/password:<InLineCode>admin/admin</InLineCode>.

            When you sign into Ambari as Ambari Admin, you can:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="b69285cf-1405-4363-b8da-cc68d8436afa">
            <ItemBlock>
              <Item>
                <ItemPara>Perform
                  <Xref InsideTargetRef="5bc067b8-60d3-4360-a26c-3ffd680fa12b">Ambari Admin Tasks</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c012fd89-584c-4539-a618-f0f8e6b45302">Create and Manage a Cluster</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b61c95af-59c7-4714-8745-eabbbd3056c2">Manage Users and Groups</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="79e76a9f-830b-4acb-8f3b-3a0ada9484cf">Manage Views</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <ParaBlock xy:guid="13941652-4116-4264-81aa-bc482bdf6cd5">
          <RichText>For specific information about provisioning an HDP cluster, see<Xref
                  InsideTargetRef="eb879df1-7042-4733-9221-4f2a7035d3e3">Install, Configure, and Deploy an HDP
            Cluster</Xref>.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="5d8a4057-8871-4b0b-bffc-5ad0f6a654d6">
        <Title>Terms and Definitions</Title>
        <ParaBlock xy:guid="1c408de7-8341-41bc-a8bb-bb0cb531310c">
          <RichText>The following basic terms help describe the key concepts associated with Ambari Administration.
          </RichText>
          <Table align="left" border="false" width="" xy:guid="a63d1f39-c644-4287-be28-db96196a2fea">
            <TblGroup>
              <TblCol width="12"/>
              <TblCol width="88"/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Term</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Definition</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Admin</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Specific privilege granted to a user that enables the user to administer Ambari. The
                      default user
                      <InLineCode>admin</InLineCode>
                      created by Ambari is flagged as an âAmbari Adminâ. Users with the Ambari Admin privilege can
                      grant, or revoke this privilege on other users.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Account</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>User name, password and privileges.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>User</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Unique user in Ambari.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>User Type</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Local and LDAP. Local users are maintained in the Ambari database and authentication is
                      performed against the Ambari database. LDAP users are imported (and synchronized) with an external
                      LDAP (if configured).
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Group</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Unique group of users in Ambari.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Group Type</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Local and LDAP. Local groups are maintained in the Ambari database. LDAP groups are
                      imported (and synchronized) with an external LDAP (if configured).
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Principal</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>User or group that can be authenticated by Ambari.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Cluster</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Installation of a Hadoop cluster, based on a particular Stack, that is managed by
                      Ambari.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Defines a user interface component that is available to Ambari.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Resource</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Represents the resource available and managed in Ambari. Ambari supports two types of
                      resources: cluster and view. An Ambari Admin assigns permissions for a resource for users and
                      groups.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Permissions</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Represents the permission that can be granted to a principal (user or group) on a
                      particular resource.
                      For example, cluster resources support Operator and Read-Only permissions.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Privilege</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Represents the mapping of a principal to a permission and a resource.
                      For example: the user
                      <InLineCode>admin</InLineCode>
                      is granted the permission Operator on cluster DevCluster.
                    </RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="84778cff-dd62-493a-90f9-13e1b37175a8">
        <Title>Logging in to Ambari</Title>
        <ParaBlock xy:guid="7a97a88c-9bb7-4c77-9d46-80a25d41e234">
          <RichText>After installing Ambari, you can log in to Ambari as follows:</RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="29b07db5-15c1-452b-83ea-404c741da4fc">
            <ItemBlock>
              <Item>
                <ItemPara>Enter the following URL in a web browser:</ItemPara>
                <RichText>
                  <InLineTypeThis>http://</InLineTypeThis>
                  <SyntaxArg>&lt;your.ambari.server&gt;</SyntaxArg>
                  <InLineTypeThis>:8080
                  </InLineTypeThis>where
                  <SyntaxArg>&lt;your.ambari.server&gt;</SyntaxArg>
                  is the hostname for your Ambari server machine and
                  <InLineTypeThis>8080</InLineTypeThis>
                  is the default HTTP port.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Enter the user account credentials for the default administrative user automatically created
                  during install:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>username/password = admin/admin</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>The
                  <Xref InsideTargetRef="87a0227f-6727-47a8-a8f8-a28739ddf5ef">Ambari Administration</Xref>
                  web page displays. From this page you can<Xref InsideTargetRef="b61c95af-59c7-4714-8745-eabbbd3056c2">
                    Manage Users and Groups</Xref>,<Xref InsideTargetRef="80dcc1b2-6764-40e3-ae79-cd4e64c65530">Manage
                    Views</Xref>, and<Xref InsideTargetRef="c012fd89-584c-4539-a618-f0f8e6b45302">Create a
                    Cluster</Xref>.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="87a0227f-6727-47a8-a8f8-a28739ddf5ef">
        <Title>About the Ambari Administration Interface</Title>
        <ParaBlock xy:guid="8b75711a-4199-4cbf-a7b7-9b81f0faf4df">
          <RichText>When you log in to the Ambari Administration interface with "Ambari Admin" privilege, a landing page
            displays links to the operations available. Plus, the operations are available from the left menu areas for
            clusters, views, users, and groups.
          </RichText>
          <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="ba14de88-3daa-483f-99bf-5e32fa301db7">
            <MediaObject xy:guid="c8174d47-fb85-49bd-abef-34f702b8cfec">
              <Renditions>
                <Print thumbWidth="50" uri="System Admin Guides/Ambari/170_Ambari_Admin_page.png"/>
                <Web thumbWidth="50" uri="System Admin Guides/Ambari/170_Ambari_Admin_page.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="28ba2d57-9d3f-4b03-a33a-06a5435bc8aa">
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="fbbc3039-2848-4c8a-9e73-df0d8120cc2f">
            <ItemBlock>
              <Item>
                <ItemPara>Clusters displays a link to a cluster (if created) and links to manage access permissions for
                  that cluster.
                  See
                  <Xref InsideTargetRef="c012fd89-584c-4539-a618-f0f8e6b45302">Creating and Managing a Cluster</Xref>
                  for more information.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>User and Group Management provides the ability create and edit users and groups.
                  See
                  <Xref InsideTargetRef="b61c95af-59c7-4714-8745-eabbbd3056c2">Managing Users and Groups</Xref>
                  for more information.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Views lets you to create and edit instances of deployed Views and manage access permissions
                  for those instances.
                  See
                  <Xref InsideTargetRef="80dcc1b2-6764-40e3-ae79-cd4e64c65530">Managing Views</Xref>
                  for more information.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="5d62f7b0-7c24-404c-ba12-95b8a58fdc59">
        <Title>Changing the Administrator Account Password</Title>
        <ParaBlock xy:guid="0812b7be-4808-4cd1-8b0a-814cc23fe9f8">
          <RichText>During install and setup, the Cluster Installer wizard automatically creates a default user with
            "Ambari Admin" privilege. You can change the password for this user (or other Local users in the system)
            from the Ambari Administration interface. You can change the password for the default
            <InLineCode>admin</InLineCode>
            user to create a unique administrator credential for your system.

            To change the password for the default
            <InLineCode>admin</InLineCode>
            account:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="64812785-9659-4092-b4b5-648557ee29af">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to the Users section.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Select the
                  <InLineCode>admin</InLineCode>
                  user.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the Change Password button.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter the current
                  <InLineCode>admin</InLineCode>
                  password and the new password twice.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Click OK to save the new password.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="5bc067b8-60d3-4360-a26c-3ffd680fa12b">
        <Title>Ambari Admin Tasks</Title>
        <ParaBlock xy:guid="48277055-6134-44b6-ad0a-1b4ea448200a">
          <RichText>An "Ambari Admin" has administrator (or super-user) privilege. When logged into Ambari with the
            "Ambari Admin" privilege, you can:
          </RichText>
          <List ListMarker="Bullet" xy:guid="726b5d0d-6db8-4f92-a1c0-dd3cd1d6665c">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c012fd89-584c-4539-a618-f0f8e6b45302">Create a cluster</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b8671a82-8833-4247-b96f-a0b7a81b7b7f">Set access permissions for an existing
                    cluster
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="534fc28f-9908-481e-ac5e-14de8d1a2709">Create, delete, and edit view instances
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="86d0b432-9bd5-4a98-8239-9f1a449217ed">Manage permissions for view instances
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e87c8b71-e7a3-460e-a5c7-29b9c23e74ec">Create, edit, and delete users and user
                    groups
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>
            For more information about creating Ambari users locally and importing Ambari LDAP users, see<Xref
                  InsideTargetRef="b61c95af-59c7-4714-8745-eabbbd3056c2">Managing Users and Groups</Xref>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="c012fd89-584c-4539-a618-f0f8e6b45302">
        <Title>Creating a Cluster</Title>
        <ParaBlock xy:guid="db0308af-284f-4300-901c-9ba2cbf0c1dc">
          <RichText>As an Ambari Admin, you can launch the Cluster Install Wizard and create a cluster.
            To create a cluster, from the Ambari Administration interface:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="1e6750d4-2a8c-4372-a459-25fd46fc600a">
            <ItemBlock>
              <Item>
                <ItemPara>Click<InLineMenuSelection>Install Cluster</InLineMenuSelection>.
                  The Cluster Install Wizard displays.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Follow the steps in the wizard to install your cluster.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>For more information about prerequisites and system requirements, see<Xref
                  InsideTargetRef="4e6fd966-21d0-4dee-8175-06ba6c6ed517">Installing HDP using Ambari</Xref>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="b8671a82-8833-4247-b96f-a0b7a81b7b7f">
        <Title>Setting Cluster Permissions</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="660eb444-5e54-4141-a99a-e210bfef54da">
          <RichText>After you create a cluster, users with Admin Admin privileges automatically get Operator permission
            on the cluster. By default, no users have access to the cluster. You can grant permissions on the cluster to
            other users and groups from the Ambari Administration interface.

            Ambari manages the following permissions for a cluster:
            <InLineMenuSelection>Operator</InLineMenuSelection>
            and<InLineMenuSelection>Read-Only</InLineMenuSelection>. Users and Groups with
            <InLineMenuSelection>Operator</InLineMenuSelection>
            permission are granted access to the cluster. Operator permission provides full control of the following
            services:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="6dabbfd8-1d6d-4ae0-af89-7c0a9e331f81">
            <ItemBlock>
              <Item>
                <ItemPara>Start</ItemPara>
              </Item>
              <Item>
                <ItemPara>Stop</ItemPara>
              </Item>
              <Item>
                <ItemPara>Restart</ItemPara>
              </Item>
              <Item>
                <ItemPara>Add New</ItemPara>
                <RichText>
                  And The Following Configurations:
                </RichText>
              </Item>
              <Item>
                <ItemPara>Modify</ItemPara>
              </Item>
              <Item>
                <ItemPara>Revert</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>Users and Groups with
            <InLineMenuSelection>Read-Only</InLineMenuSelection>
            permission can only view, not modify, services and configurations.

            Users with Ambari Admin privileges are implicitly granted
            <InLineMenuSelection>Operator</InLineMenuSelection>
            permission. Plus, Ambari Admin users have access to the Ambari Administration interface which allows them to
            control permissions for the cluster.
          </RichText>
          <RichText>To modify user and group permissions for a cluster:</RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="50fe5b5e-c3d8-4c19-97b9-4f58a67fab9a">
            <ItemBlock>
              <Item>
                <ItemPara>As an Ambari Admin, access the Ambari Administration interface.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click Permissions, displayed under the cluster name.</ItemPara>
              </Item>
              <Item>
                <ItemPara>The form showing the permissions
                  <InLineMenuSelection>Operator</InLineMenuSelection>
                  and
                  <InLineMenuSelection>Read-Only</InLineMenuSelection>
                  with users and groups is displayed.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Modify the users and groups mapped to each permission and save.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <ImageMap OutlineColor="transparent" xy:schema-version="Core/Definitions/ImageMap.xsd#core-3.9-0"
                    xy:guid="13a7ca59-f173-4fe9-b230-d9aa191515d4">
            <Title/>
            <BaseImage thumbWidth="50" uri="System Admin Guides/Ambari/Permission_rdrs_arrw.png"/>
            <HotSpots/>
          </ImageMap>
          <RichText>For more information about managing users and groups, see<Xref
                  InsideTargetRef="b61c95af-59c7-4714-8745-eabbbd3056c2">Managing Users and Groups</Xref>.
          </RichText>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="f8a7cce5-0686-458f-8ba7-d2542f3e3ebb">
            <Icon thumbWidth="50" uri="Icons/Warning.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="40e6b670-60f4-4fa5-a238-4509532399a6"/>
            <SimpleBlock>
              <RichText>Assigning permissions to a group having
                <Italic>no</Italic>
                members is possible.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="eb14fc37-0510-4335-80c9-909804a420c5">
            <Icon thumbWidth="50" uri="Icons/Tip 3d.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="9e852634-03c0-43c6-9c49-e6700f5d520f"/>
            <SimpleBlock>
              <RichText>Verify user permissions, group membership, and group permissions to ensure that each user and
                group has appropriate permissions.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="c19072ba-7515-4a25-855a-87f013ea337d">
        <Title>Viewing the Cluster Dashboard</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="0faed9de-e024-4efa-bed8-91422ca3c2d9">
          <RichText>After you have created a cluster, select
            <InLineMenuSelection>Clusters &gt; Go to Dashboard</InLineMenuSelection>
            to open the Dashboard view. For more information about using Ambari to monitor and manage your cluster, see
            <Xref InsideTargetRef="09419997-e1b4-4788-a11a-5b02cdfedd90">Monitoring and Managing your HDP C</Xref>
            <Xref InsideTargetRef="09419997-e1b4-4788-a11a-5b02cdfedd90">luster with Ambari</Xref>.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="9a99a261-fcf2-49a8-b52e-dc0948dd30c2">
        <Title>Renaming a Cluster</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="2c3a812a-3dd0-48c7-8539-d7e5dea2dc2a">
          <RichText>A user with Admin Admin privileges can rename a cluster, using the Ambari Administration interface.

            To rename a cluster:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="c5001b60-4beb-4966-921d-496d159a9554">
            <ItemBlock>
              <Item>
                <ItemPara>In Clusters, click the Rename Cluster icon, next to the cluster name.</ItemPara>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="3866adc9-22da-4a32-b794-caaf3fe7e019">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="65492a04-50d1-48d7-ad73-a3db88a55519">
                    <Renditions>
                      <Web thumbWidth="50" uri="System Admin Guides/Ambari/Rename_cluster.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <RichText>The cluster name becomes write-able.</RichText>
              </Item>
              <Item>
                <ItemPara>Enter alphanumeric characters as a cluster name.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the check mark.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Confirm.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="e87c8b71-e7a3-460e-a5c7-29b9c23e74ec">
      <Title>Managing Users and Groups</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="9a9a9c43-5508-429c-ada5-61b3d04220a3">
        <ParaBlock xy:guid="b3ad41ba-fa7d-4dc2-a1c2-a80217c42e5f">
          <RichText>An "Ambari Admin" can create and manage users and groups available to Ambari. An Ambari Admin can
            also import user and group information into Ambari from external LDAP systems. This section describes the
            specific tasks you perform when managing users and groups in Ambari.
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="f186638b-63e4-4b20-9235-d83f7c750ae3">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7131cbf5-4ee7-4785-8a0c-37c7fe1d8828">Local and LDAP User Types</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5bc067b8-60d3-4360-a26c-3ffd680fa12b">Ambari Admin Privileges</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="3de16e08-f9ed-4897-a067-c4ef341c4353">Creating a Local User</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="d52f3822-44fb-47d7-94d0-88f268930776">Setting User Status</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="36a632ca-a534-4edf-9759-89718b5a3722">Setting the Ambari Admin Flag</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="888694e6-b46a-47a1-aea4-b6a2545a4192">Changing the Password for a Local User
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="01e019e9-5336-4a57-b72b-5189c8c116f5">Deleting a Local User</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5011c369-c25e-4ea1-a8ad-0e8b8f49f02a">Creating a Local Group</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="04303e51-d341-409f-8368-09fd41c4c1ae">Managing Group Membership</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="df29da7e-6549-4f2b-8e76-7c7aed29d48d">Deleting a Local Group</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="b61c95af-59c7-4714-8745-eabbbd3056c2">
        <Title>Users and Groups Overview</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="3a58d25f-3477-43fe-8872-b83e7f2f83ba">
          <RichText>Ambari supports two types of users and groups: Local and LDAP. The following topics describe how
            Ambari Administration supports managing Local and LDAP users and groups.
          </RichText>
          <List ListMarker="Bullet" xy:guid="e7d1c4c4-1f56-4356-9436-c1ea52883d26">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7131cbf5-4ee7-4785-8a0c-37c7fe1d8828">Local and LDAP User and Group Types
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5bc067b8-60d3-4360-a26c-3ffd680fa12b">Ambari Admin Privileges</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="7131cbf5-4ee7-4785-8a0c-37c7fe1d8828">
          <Title>Local and LDAP User and Group Types</Title>
          <ParaBlock xy:guid="3d45d2f8-4ea3-4fb3-bf11-4b5432a7a0aa">
            <RichText>Local users are stored in and authenticate against the Ambari database. LDAP users have basic
              account information stored in the Ambari database. Unlike Local users, LDAP users authenticate against an
              external LDAP system.

              Local groups are stored in the Ambari database. LDAP groups have basic information stored in the Ambari
              database, including group membership information. Unlike Local groups, LDAP groups are imported and
              synchronized from an external LDAP system.

              To use LDAP users and groups with Ambari, you must configure Ambari to authenticate against an external
              LDAP system. For more information about running ambari-server setup-ldap, see<Xref
                      InsideTargetRef="443fec0b-ef35-4829-bab9-14b83a416e4c">Configure Ambari to use LDAP Server</Xref>.
              A new Ambari user or group, created either locally or by synchronizing against LDAP, is granted no
              privileges by default. You, as an Ambari Admin, must explicitly grant each user permissions to access
              clusters or views.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="20c00a81-0009-464c-bc53-4e6f3a81ccb6">
          <Title>Ambari Admin Privileges</Title>
          <ParaBlock xy:guid="890ab735-5622-40b6-b487-adcb31e1eade">
            <RichText>As an Ambari Admin, you can create new users, delete users, change user passwords and edit user
              settings. You can control certain privileges for Local and LDAP users. The following table lists the
              privileges available and those not available to the Ambari Admin for Local and LDAP Ambari users.
            </RichText>
            <Table align="left" border="false" width="" xy:guid="e6393754-e35d-45f1-a9d7-dbf4a30b8452">
              <TblTitle>Ambari Administrator Privileges for Ambari Local and LDAP Users</TblTitle>
              <TblGroup>
                <TblCol width="29"/>
                <TblCol width="12"/>
                <TblCol width="59"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Administrator User Privilege</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Local User</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>LDAP User</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Change Password</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Not Available</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Set Ambari Admin Flag</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Change Group Membership</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Not Available</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Delete User</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Not Available</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Set Active / Inactive</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Available</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="3de16e08-f9ed-4897-a067-c4ef341c4353">
        <Title>Creating a Local User</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="01de3be4-038f-4293-bc6d-bb4ce1c2bd49">
          <RichText>To create a local user:</RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="ae9dca8f-465e-4d7e-93c6-f1e77f69a075">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to Users.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click Create Local User.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter a unique user name.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter a password, then confirm that password.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click Save.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="d52f3822-44fb-47d7-94d0-88f268930776">
        <Title>Setting User Status</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="0a9e7e40-4dd1-4df6-9a76-34f05b6bd79a">
          <RichText>User status indicates whether the user is active and should be allowed to log into Ambari or should
            be inactive and denied the ability to log in. By setting the Status flag as Active or Inactive, you can
            effectively "disable" user account access to Ambari while preserving the user account information related to
            permissions.
          </RichText>
          <RichText>To set user Status:</RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="5d34f148-14f1-4d03-b6e4-ee90d3c2a029">
            <ItemBlock>
              <Item>
                <ItemPara>On the Ambari Administration interface, browse to Users.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the user name of the user to modify.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the Status control to toggle between Active or Inactive.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Choose OK to confirm the change.
                  The change is saved immediately.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="36a632ca-a534-4edf-9759-89718b5a3722">
        <Title>Setting the Ambari Admin Flag</Title>
        <ParaBlock xy:guid="5e44eead-a895-4530-9f00-a5ce0aa8918d">
          <RichText>You can elevate one or more users to have Ambari administrative privileges, by setting the Ambari
            Admin flag. You must be logged in as an account that is an Ambari Admin to set or remove the Ambari Admin
            flag.

            To set the Ambari Admin Flag:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="e9b4dbd2-9206-45ba-9b52-ae02e7602197">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to the Users section.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the user name you wish to modify.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click on the Ambari Admin control.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Switch Yes to set, or No to remove the Admin flag.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="eeb88b82-a5cb-465f-898d-58b3f8f12eb6">
            <Icon thumbWidth="50" uri="Icons/Important.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="4593858a-2018-43a6-9491-2882b57d8b0b"/>
            <SimpleBlock>
              <RichText>To prevent you from accidently locking yourself out of the Ambari Administration user interface,
                Ambari prevents setting the Ambari Admin flag for your own Ambari Admin account to No.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="888694e6-b46a-47a1-aea4-b6a2545a4192">
        <Title>Changing the Password for a Local User</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="736606fd-6600-4f70-8668-14eb0372645d">
          <RichText>An Ambari Administrator can change local user passwords. LDAP passwords are not managed by Ambari
            since LDAP users authenticate to external LDAP. Therefore, LDAP user passwords cannot be changed from
            Ambari.

            To change the password for a local user:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="3d02ac1d-14c5-496f-9fc0-25c70681e221">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to the user.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click<InLineTypeThis>Change password</InLineTypeThis>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter YOUR administrator password to confirm that you have privileges required to change a
                  local user password.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter a password, then confirm that password.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click Save.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="01e019e9-5336-4a57-b72b-5189c8c116f5">
        <Title>Deleting a Local User</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="5397d1e3-a67f-43da-ae9b-6d419d30c56e">
          <RichText>Deleting a local user removes the user account from the system, including all privileges associated
            with the user. You can reuse the name of a local user that has been deleted.
            To delete a local user:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="a4919852-7a27-4b71-8c8f-e3094e095066">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to the User.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click<InLineMenuSelection>Delete User</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Confirm.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="11cce7b7-53c2-4275-bf82-e00d4b550f10">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="199bc5c2-1858-45a5-9998-eae0d1b86560"/>
            <SimpleBlock>
              <RichText>If you want to disable user log in,
                <Xref InsideTargetRef="d52f3822-44fb-47d7-94d0-88f268930776">set the user Status</Xref>
                to Inactive.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="5011c369-c25e-4ea1-a8ad-0e8b8f49f02a">
        <Title>Creating a Local Group</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="b4328a84-cfe8-4b33-8132-3cadd634e2a6">
          <RichText>To create a local group:</RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="c6c1ac3e-cb36-4a8a-9ebd-b0c1f7dcd275">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to Groups.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click Create Local Group.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter a unique group name.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click Save.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="04303e51-d341-409f-8368-09fd41c4c1ae">
        <Title>Managing Group Membership</Title>
        <ParaBlock xy:guid="f490bb91-35f8-4373-856c-694e4a534b02">
          <RichText>You can manage group membership of Local groups by adding or removing users from groups.</RichText>
          <List ListMarker="Bullet" xy:guid="c7b0c0ca-0fa6-4e7e-acf1-59d31c6efccd">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="dcd083b0-377a-4670-8d8d-3ff78dd5da3a">Adding a User to a Group</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e0b6ef7c-639e-4cf8-a27f-22132a91072f">Modifying Group Membership</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="dcd083b0-377a-4670-8d8d-3ff78dd5da3a">
          <Title>Adding a User to a Group</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="515c6318-7246-4a89-970b-1c5328a60afe">
            <RichText>To add a user to group:</RichText>
            <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                  xy:guid="5ff6a0b1-ffac-4503-bf1f-b6b1959bc588">
              <ItemBlock>
                <Item>
                  <ItemPara>Browse to Groups.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Click a name in the Group Name list.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Choose the
                    <InLineMenuSelection>Local Members</InLineMenuSelection>
                    control to edit the member list.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>In the empty space, type the first character in an existing user name.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>From the list of available user names, choose a user name.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Click the check mark to save the current, displayed members as group members.</ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
               xy:guid="e0b6ef7c-639e-4cf8-a27f-22132a91072f">
          <Title>Modifying Group Membership</Title>
          <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                     xy:guid="65a236d4-9d26-4a94-a0d9-f5760c66ecff">
            <RichText>To modify Local group membership:</RichText>
            <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                  xy:guid="432d0b3b-7d1a-4d21-908a-13187edac913">
              <ItemBlock>
                <Item>
                  <ItemPara>In the Ambari Administration interface, browse to Groups.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Click the name of the Group to modify.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Choose the
                    <InLineMenuSelection>Local Members</InLineMenuSelection>
                    control to edit the member list.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Click in the Local Members text area to modify the current membership.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Click the
                    <InLineMenuSelection>X</InLineMenuSelection>
                    to remove a user.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>To save your changes, click the checkmark. To discard your changes, click the
                    <InLineMenuSelection>x</InLineMenuSelection>.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="df29da7e-6549-4f2b-8e76-7c7aed29d48d">
        <Title>Deleting a Local Group</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="0aa01ae9-4cff-4ad2-a44b-50d0d143c858">
          <RichText>Deleting a local group removes all privileges associated with the group.
            To delete a local group:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="f70f8166-fba0-41af-8066-1d2c680b5b06">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to the Group.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click<InLineMenuSelection>Delete Group</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Confirm. The group is deleted and the associated group membership information is removed.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="79e76a9f-830b-4acb-8f3b-3a0ada9484cf">
      <Title>Managing Views</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="e018feb3-2934-4f60-a854-18e8080564b1">
        <ParaBlock xy:guid="1ecb6f80-a92a-4bf7-a400-e2708e3800da">
          <RichText>The Ambari Views Framework offers a systematic way to plug in UI capabilities to surface custom
            visualization, management and monitoring features in Ambari Web. The development and use of Views allows you
            to extend and customize Ambari Web to meet your specific needs.

            A View extends Ambari to let third parties plug in new resource types along with APIs, providers, and UIs to
            support them. A View is deployed into the Ambari Server and Ambari Admins can create View instances and set
            the privileges on access to users and groups.

            The following sections cover the basics of Views and how to deploy and manage View instances in Ambari:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="e8e443a3-e059-4620-82d3-9c421b80c7d9">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="80dcc1b2-6764-40e3-ae79-cd4e64c65530">Terminology</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c4f9fe53-e036-4633-8414-0e1bd51b7610">Basic Concepts</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e9380ee8-46f5-4ac7-8b67-d3586d0e6c0f">Deploying Views</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="534fc28f-9908-481e-ac5e-14de8d1a2709">Creating View Instances</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="86d0b432-9bd5-4a98-8239-9f1a449217ed">Setting View Permissions</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="0298b32c-3284-4e0b-8ab2-a894011fb638">Learn More</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="80dcc1b2-6764-40e3-ae79-cd4e64c65530">
        <Title>Terminology</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="be5eed92-e2ef-40bc-914c-e910761d27da">
          <RichText>The following are Views terms and concepts you should be familiar with:</RichText>
          <Table align="left" border="false" width="" xy:guid="2f853da1-b430-4711-a0ea-52939238f342">
            <TblGroup>
              <TblCol width="13"/>
              <TblCol width="87"/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Term</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Views Framework</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>The core framework that is used to develop a View. This is very similar to a Java Web
                      App.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Definition</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Describes the View resources and core View properties such as name, version and any
                      necessary configuration properties. On deployment, the View definition is read by Ambari.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Package</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Packages the View client and server assets (and dependencies) into a bundle that is ready
                      to deploy into Ambari.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Deployment</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Deploying a View into Ambari. This makes the View available to Ambari Admins for creating
                      instances.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Name</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Unique identifier for a View. A View can have one or more versions of a View. The name is
                      defined in the View Definition (created by the View Developer) that is built into the View
                      Package.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Version</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Specific version of a View. Multiple versions of a View (uniquely identified by View name)
                      can be deployed into Ambari.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Instance</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Instantiation of a specific View version. Instances are created and configured by Ambari
                      Admins and must have a unique View instance name.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Instance Name</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Unique identifier of a specific instance of View.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Framework Services</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View context, instance data, configuration properties and events are available from the
                      Views Framework.
                    </RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="c4f9fe53-e036-4633-8414-0e1bd51b7610">
        <Title>Basic Concepts</Title>
        <ParaBlock xy:guid="849e2eac-7f0e-4850-93c0-746a4d2fb042">
          <RichText>Views are basically Web applications that can be âplugged intoâ Ambari. Just like a typical web
            application, a View can include server-side resources and client-side assets. Server-side resources, which
            are written in Java, can integrate with external systems (such as cluster services) and expose REST
            end-points that are used by the view. Client-side assets, such as HTML/JavaScript/CSS, provide the UI for
            the view that is rendered in the Ambari Web interface.
          </RichText>
          <ImageMap OutlineColor="transparent" xy:schema-version="Core/Definitions/ImageMap.xsd#core-3.9-0"
                    xy:guid="ba8fe49b-183b-43bf-8bde-855d3e274df0">
            <Title>Ambari Views Framework</Title>
            <BaseImage thumbWidth="50" uri="System Admin Guides/Ambari/Views_Framework_concept.png"/>
            <HotSpots/>
          </ImageMap>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="66c96e90-e3e2-4f94-b6b8-ac8cb9f3d937">
          <RichText>Ambari exposes the Views Framework as the basis for View development. The Framework provides the
            following:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="47159779-7265-4224-b913-b0ba7940e7e6">
            <ItemBlock>
              <Item>
                <ItemPara>Method for describing and packaging a View</ItemPara>
              </Item>
              <Item>
                <ItemPara>Method for deploying a View</ItemPara>
              </Item>
              <Item>
                <ItemPara>Framework services for a View to integrate with Ambari</ItemPara>
              </Item>
              <Item>
                <ItemPara>Method for managing View versions, instances, and permissions</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>The Views Framework is separate from Views themselves. The Framework is a core feature of Ambari and
            Views build on that Framework. Although Ambari does include some Views out-of-the-box, the feature of Ambari
            is the Framework to enable the development, deployment and creation of views.

            The development and delivery of a View follows this process flow:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="fb7e2017-70fd-42ac-875e-e9997bdeaa22">
            <ItemBlock>
              <Item>
                <ItemPara>Develop the View (similar to how you would build a Web application)</ItemPara>
              </Item>
              <Item>
                <ItemPara>Package the View (similar to a WAR)</ItemPara>
              </Item>
              <Item>
                <ItemPara>Deploy the View into Ambari (using the Ambari Administration interface)</ItemPara>
              </Item>
              <Item>
                <ItemPara>Create and configure instances of the View (performed by Ambari Admins)</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <ImageMap OutlineColor="transparent" xy:schema-version="Core/Definitions/ImageMap.xsd#core-3.9-0"
                    xy:guid="8d1c8fff-35a5-4bc8-b4e3-f24e70461e99">
            <Title/>
            <BaseImage thumbWidth="50" uri="System Admin Guides/Ambari/View_Deploy_process.png"/>
            <HotSpots/>
          </ImageMap>
          <RichText>Considering the above, it is important to understand the different personas involved. The following
            table describes the three personas:
          </RichText>
          <Table align="left" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                 xy:guid="6e608124-3236-402c-8353-84133b2d69bd">
            <TblGroup>
              <TblCol width="16"/>
              <TblCol width="84"/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Persona</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Developer</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Person who builds the front-end and back-end of a View and uses the Framework services
                      available during development. The Developer created the View, resulting in a View Package that is
                      delivered to an Ambari Admin.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Admin</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari user that has Ambari Admin privilege and uses the Views Management section of the
                      Ambari Administration interface to create and managing instances of Views. Ambari Admin also
                      deploys the View Packages delivered by the View Developer.
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View User</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari user that has access to one or more Views in Ambari Web. Basically, this is the end
                      user.
                    </RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="bf726f07-b065-41de-8c44-cee22963b57f">
          <CustomNote xy:guid="f3850650-cade-4302-8693-7a0233d6a737">
            <Icon thumbWidth="50" uri="Icons/Important.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="8dd4b4be-5151-435d-92f5-9ab3efe2e9ef"/>
            <SimpleBlock>
              <RichText>This document covers the tasks related to an Ambari Admin using and making Views available to
                users in their Ambari deployment. This document does not cover View development and packaging. See
                <Xref InsideTargetRef="0298b32c-3284-4e0b-8ab2-a894011fb638">Learn More</Xref>
                for more information on where to obtain information about developing Views.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>After Views are developed, views are identified by unique a view name. Each View can have one or
            more View versions. Each View name + version combination is deployed as a single View package. Once a View
            package is deployed, the Ambari Admin can create View instances, where each instance is identified by a
            unique View instance name. The Ambari Admin can then set access permissions for each View instance.
          </RichText>
          <ImageMap OutlineColor="transparent" xy:schema-version="Core/Definitions/ImageMap.xsd#core-3.9-0"
                    xy:guid="4107c9f5-3249-4dfd-bbae-3f1042695819">
            <Title>Ambari Views Versions and Instances</Title>
            <BaseImage thumbWidth="50" uri="System Admin Guides/Ambari/Views_Versions_Instances_concept.png"/>
            <HotSpots/>
          </ImageMap>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="e9380ee8-46f5-4ac7-8b67-d3586d0e6c0f">
        <Title>Deploying a View</Title>
        <ParaBlock xy:guid="68d8a510-5f9c-430c-8da6-368f5bf1db12">
          <RichText>Deploying a View involves obtaining the View Package and making the View available to the Ambari
            Server. Each View deployed has a unique name. Multiple versions of a View can be deployed at the same time.
            You can configure multiple versions of a View for your users, depending on their roles, and deploy these
            versions at the same time.

            For more information about building Views, see the<Href
                    UrlTarget="https://cwiki.apache.org/confluence/display/AMBARI/Views">Apache Ambari Wiki page</Href>.
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="64bdf51b-6cf9-4ebd-9724-c1e6321bf260">
            <ItemBlock>
              <Item>
                <ItemPara>Obtain the View package. For example,<InLineCode>files-0.1.0.jar</InLineCode>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>On the Ambari Server host, browse to the views directory.</ItemPara>
                <RichText>
                  <InLineTypeThis>cd /var/lib/ambari-server/resources/views</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Copy the View package into place.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Restart Ambari Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server restart</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>The View is extracted, registered with Ambari, and displays in the Ambari Administration
                  interface as available to create instances.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="db478419-a977-41c8-92cd-f0b03940d906">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="b5b02819-7f41-4f2a-96f6-10329b0f1254"/>
            <SimpleBlock>
              <RichText>
                <InLineCode>/var/lib/ambari-server/resources/views</InLineCode>
                is the default directory into which Views are deployed. You can change the default location by editing
                the
                <InLineMenuSelection>views.dir</InLineMenuSelection>
                property in<InLineMenuSelection>ambari.properties</InLineMenuSelection>.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="534fc28f-9908-481e-ac5e-14de8d1a2709">
        <Title>Creating View Instances</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="16cd2458-90d2-4b02-ba8c-d2ed4df92bdb">
          <RichText>To create a View instance:</RichText>
          <List ListMarker="Numeric" StartAtNumber="" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="d82d29c3-908b-42ad-b9cd-4e45bf759dc1">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to a View and expand.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the âCreate Instanceâ button.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Provide the following information:</ItemPara>
                <Table align="left" border="false" width="" xy:guid="cad796a7-1494-4563-94d9-3320b6586c91">
                  <TblGroup>
                    <TblCol width="14"/>
                    <TblCol width="13"/>
                    <TblCol width="73"/>
                    <TblHeader>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Item</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Required</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Description</RichText>
                        </Cell>
                      </TableRow>
                    </TblHeader>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>View Version</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Select the version of the View to instantiate.</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Instance Name</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Must be unique for a given View.</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Display Label</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Readable display name used for the View instance when shown in Ambari Web.
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Description</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Readable description used for the View instance when shown in Ambari Web.</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Visible</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>No</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Designates whether the View is visible or not visible to the end-user in Ambari web.
                            Use this property to temporarily hide a view in Ambari Web from users.
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Properties</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Maybe</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Depends on the View. If the View requires certain configuration properties, you are
                            prompted to provide the required information.
                          </RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="86d0b432-9bd5-4a98-8239-9f1a449217ed">
        <Title>Setting View Permissions</Title>
        <ParaBlock xy:guid="1ce9c1b5-220c-4e7b-8b02-4264daad05a1">
          <RichText>After a view instance has been created, an Ambari Admin can set which users and groups can access
            the view by setting the Use permission. By default, after view instance creation, no permissions are set on
            a view.

            To set permissions on a view:
          </RichText>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="297620d8-7ac3-43a4-8f55-0b9424c048e0">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to a view and expand. For example, browse to the Slider or Jobs view.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click on the view instance you want to modify.</ItemPara>
              </Item>
              <Item>
                <ItemPara>In the Permissions section, click the Users or Groups control.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Modify the user and group lists as appropriate.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Click the check mark to save changes.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="2e5298db-063b-4ad2-9151-5e701f9dfb65">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="b16a58ab-ed7a-4fd4-ab74-ba2fd6ba7001"/>
            <SimpleBlock>
              <RichText>The Framework provides a way for view developers to specify custom permissions, beyond just the
                default Use permission. If custom permissions are are specified, they will show up in the Ambari
                Administration interface and the Ambari Admin can set users and groups on these permissions. See
                <Xref InsideTargetRef="0298b32c-3284-4e0b-8ab2-a894011fb638">Additional Information</Xref>
                for more information on developing with the Views framework.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="0298b32c-3284-4e0b-8ab2-a894011fb638">
        <Title>Additional Information</Title>
        <ParaBlock xy:guid="e5d6e017-a5a6-41e6-813a-1dc5c5e00bd2">
          <RichText>To learn more about developing views and the views framework itself, refer to the following
            resources:
          </RichText>
          <Table align="left" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                 xy:guid="41d57072-384a-491c-b392-72fc48dfac79">
            <TblGroup>
              <TblCol width="11"/>
              <TblCol width="28"/>
              <TblCol width="61"/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Resource</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Link</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Views Wiki</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Learn about the Views Framework and Framework services available to views developers.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>
                      <Href UrlTarget="https://cwiki.apache.org/confluence/display/AMBARI/Views">
                        https://cwiki.apache.org/confluence/display/AMBARI/Viewsche.org/confluence/display/AMBARI/Views
                      </Href>
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Views API</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Covers the Views REST API and associated framework Java classes.</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>
                      <Href UrlTarget="https://github.com/apache/ambari/blob/trunk/ambari-views/docs/index.md">
                        https://github.com/apache/ambari/blob/trunk/ambari-views/docs/index.md
                      </Href>
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Views Examples</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Code for example views that hover different areas of the framework and framework
                      services.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>
                      <Href UrlTarget="https://github.com/apache/ambari/tree/trunk/ambari-views/examples">
                        https://github.com/apache/ambari/tree/trunk/ambari-views/examples
                      </Href>
                    </RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>View Contributions</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Views that are being developed and contributed to the Ambari community.
                      <Footnote>
                        <RichText>The Views in the community are not supported by Hortonworks.</RichText>
                      </Footnote>
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>
                      <Href UrlTarget="https://github.com/apache/ambari/tree/trunk/contrib/views">
                        https://github.com/apache/ambari/tree/trunk/contrib/views
                      </Href>
                    </RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="fef2eab0-dd88-4599-bf23-f3519691a97c">
      <Title>Ambari Security Guide</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="ea431f17-a8c3-4c49-9f7f-3f6708b4a0a2">
        <ParaBlock xy:guid="a3eba464-759c-4c60-a1e1-993b75130005">
          <RichText>This section describes how to set up strong authentication for Hadoop users and hosts in an
            Ambari-installed HDP cluster, and provides information on advanced security options for Ambari.
          </RichText>
          <List ListMarker="Bullet" xy:guid="f3f51858-e002-4f0b-9f0f-17370d4c1206">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="4a8722b7-505e-4aa1-9256-9fff03c0d000">Preparing Kerberos for Hadoop</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="36f47ef6-1164-49fd-8eca-9391317f73c9">Setting Up Hadoop Users</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a9927c0e-595d-45b8-b574-a2d401685ccd">Setting up Ambari for Kerberos</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="4a8722b7-505e-4aa1-9256-9fff03c0d000">
        <Title>Preparing Kerberos for Hadoop</Title>
        <ParaBlock xy:guid="31bd8f16-e9a4-40b1-96d6-35c08cca2d9f">
          <RichText>This section describes how to set up the Kerberos components in your Hadoop cluster.</RichText>
          <List ListMarker="Bullet" xy:guid="abbfcc1c-2b04-4eca-8f55-b57e5e13402a">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c378bde5-ea90-4488-a3f9-2d25808f7f89">Kerberos Overview</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="d6ff1085-1c16-4ef0-aa3b-2ae5eac406c0">Installing and Configuring the KDC</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="1d3140b1-191c-49d2-af48-dfdb854a7a53">Creating the Kerberos Database</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="99390b40-9e5e-4ac6-97c7-e8347cbad6fb">Starting the KDC</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c192db3c-487e-4503-8fb2-a1553cdfae75">Installing and Configuring the Kerberos
                    Clients
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="d0b2f2d1-904f-4982-8f83-26dc53d884bd">Creating Service Principals and Keytab
                    Files for Hadoop 2.x
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="f8683307-21bb-40ac-968f-7b810be76d58">Creating Service Principals and Keytab
                    Files for
                  </Xref>
                  <Xref InsideTargetRef="f8683307-21bb-40ac-968f-7b810be76d58">HDP 1.x</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="c378bde5-ea90-4488-a3f9-2d25808f7f89">
          <Title>Kerberos Overview</Title>
          <ParaBlock xy:guid="3e122fc3-7425-40e7-9d03-7f754309405f">
            <RichText>Establishing identity with strong authentication is the basis for secure access in Hadoop. Users
              need to be able to reliably âidentifyâ themselves and then have that identity propagated throughout the
              Hadoop cluster. Once this is done those users can access resources (such as files or directories) or
              interact with the cluster (like running MapReduce jobs). As well, Hadoop cluster resources themselves
              (such as Hosts and Services) need to authenticate with each other to avoid potential malicious systems
              âposing asâ part of the cluster to gain access to data.
            </RichText>
            <RichText>
              To create that secure communication among its various components, Hadoop uses Kerberos. Kerberos is a
              third party authentication mechanism, in which users and services that users want to access rely on a
              third party - the Kerberos server - to authenticate each to the other. The Kerberos server itself is known
              as the Key Distribution Center, or KDC. At a high level, it has three parts:
            </RichText>
            <List ListMarker="Bullet" xy:guid="06d43d5d-4897-49e1-9601-822b1446e180">
              <ItemBlock>
                <Item>
                  <ItemPara>A database of the users and services (known as<Italic>principals</Italic>) that it knows
                    about and their respective Kerberos passwords
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>An
                    <Italic>authentication server</Italic>
                    (AS) which performs the initial authentication and issues a
                    <Italic>Ticket Granting Ticket</Italic>
                    (TGT)
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>A
                    <Italic>Ticket Granting Server</Italic>
                    (TGS) that issues subsequent service tickets based on the initial TGT
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>A user principal requests authentication from the AS. The AS returns a TGT that is encrypted using
              the user principal's Kerberos password, which is known only to the user principal and the AS. The user
              principal decrypts the TGT locally using its Kerberos password, and from that point forward, until the
              ticket expires, the user principal can use the TGT to get service tickets from the TGS. Service tickets
              are what allow a principal to access various services.
            </RichText>
            <RichText>
              Because cluster resources (hosts or services) cannot provide a password each time to decrypt the TGT, they
              use a special file, called a
              <Italic>keytab,</Italic>
              which contains the resource principal's authentication credentials.
            </RichText>
            <RichText>
              The set of hosts, users, and services over which the Kerberos server has control is called a<Italic>
              realm</Italic>.
            </RichText>
            <Table align="" border="false" width="100" xy:guid="907e7491-8541-47f7-84f1-4900155bf833">
              <TblTitle>Kerberos terminology</TblTitle>
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Term</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Description</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Key Distribution Center, or KDC</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The trusted source for authentication in a Kerberos-enabled environment.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Kerberos KDC Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The machine, or server, that serves as the Key Distribution Center.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Kerberos Client</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Any machine in the cluster that authenticates against the KDC.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Principal</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The unique name of a user or service that authenticates against the KDC.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Keytab</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>A file that includes one or more principals and their keys.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Realm</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The Kerberos network that includes a KDC and a number of Clients.</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="d6ff1085-1c16-4ef0-aa3b-2ae5eac406c0">
          <Title>Installing and Configuring the KDC</Title>
          <ParaBlock xy:guid="0b8596c2-c361-499c-9657-38688fb0ca0a">
            <RichText>To use Kerberos with Hadoop you can either use an existing KDC or install a new one just for
              Hadoop's use. The following gives a very high level description of the installation process. To get more
              information see<Href
                      UrlTarget="https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/installing-kerberos.html">
                RHEL documentation</Href>,<Href
                      UrlTarget="http://www.centos.org/docs/5/html/5.2/Deployment_Guide/s1-kerberos-server.html">CentOS
                documentation</Href>, or
              <Href UrlTarget="http://doc.opensuse.org/products/draft/SLES/SLES-security_sd_draft/cha.net.kerberos.html">
                SLES documentation.
              </Href>
            </RichText>
            <CustomNote xy:guid="0683fe4c-fafe-4639-a551-e6a98de0244e">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="431f4417-d2a8-4451-a7d0-9cb72c5bdaed"/>
              <SimpleBlock>
                <RichText>Because Kerberos is a time-sensitive protocol, all hosts in the realm must be
                  time-synchronized, for example, by using the Network Time Protocol (NTP). If the local system time of
                  a client differs from that of the KDC by as little as 5 minutes (the default), the client will not be
                  able to authenticate.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <List ListMarker="Numeric" xy:guid="be517d45-696c-40b4-aa4d-a7c50cbc8ad9">
              <ItemBlock>
                <Item>
                  <ItemPara>To install a new version of the server:</ItemPara>
                  <RichText>
                    <InLineApplicationPrompt>
                      For RHEL/CentOS/Oracle Linux
                    </InLineApplicationPrompt>
                    <InLineTypeThis>yum install krb5-server krb5-libs krb5-auth-dialog krb5-workstation</InLineTypeThis>
                    <InLineApplicationPrompt></InLineApplicationPrompt>
                  </RichText>
                  <RichText>
                    <InLineApplicationPrompt>
                      For SLES 11
                    </InLineApplicationPrompt>
                    <InLineTypeThis>zypper install krb5 krb5-server krb5-client</InLineTypeThis>
                  </RichText>
                  <RichText>
                    <InLineApplicationPrompt>For UBUNTU 12</InLineApplicationPrompt>
                    <InLineTypeThis>apt-get install krb5 krb5-server krb5-client</InLineTypeThis>
                  </RichText>
                  <CustomNote xy:guid="b01bba4c-58e3-4b18-855d-e05a1f18a285">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="f805d718-dd09-4112-b1d6-156802f3f485"/>
                    <SimpleBlock>
                      <RichText>The host on which you install the KDC must itself be secure.</RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>When the server is installed use a text editor to edit the configuration file, located by
                    default here:
                  </ItemPara>
                  <RichText>
                    <InLineCode>/etc/krb5.conf</InLineCode>
                  </RichText>
                  <RichText>Change the
                    <InLineCode>[realms]</InLineCode>
                    section of this file by replacing the default âkerberos.example.comâ setting for the
                    <InLineCode>kdc</InLineCode>
                    and
                    <InLineCode>admin_server</InLineCode>
                    properties with the Fully Qualified Domain Name of the KDC server. In the following example,
                    âkerberos.example.comâ has been replaced with âmy.kdc.serverâ.
                  </RichText>
                  <RichText>
                    <InLineTypeThis>[realms]
                      EXAMPLE.COM = {
                      kdc = my.kdc.server
                      admin_server = my.kdc.server
                      }
                    </InLineTypeThis>
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="1d3140b1-191c-49d2-af48-dfdb854a7a53">
          <Title>Creating the Kerberos Database</Title>
          <ParaBlock xy:guid="bac1ba90-6d59-416d-9f93-149ee273347f">
            <RichText>Use the utility
              <InLineCode>kdb5_util</InLineCode>
              to create the Kerberos database.
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                For RHEL/CentOS/Oracle Linux 6
              </InLineApplicationPrompt>
              <InLineTypeThis>/usr/sbin/kdb5_util create -s</InLineTypeThis>
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                For SLES 11
              </InLineApplicationPrompt>
              <InLineTypeThis>kdb5_util create -s</InLineTypeThis>
            </RichText>
            <RichText>
              <InLineApplicationPrompt>For UBUNTU 12</InLineApplicationPrompt>
              <InLineTypeThis>kdb5_util create -s</InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="99390b40-9e5e-4ac6-97c7-e8347cbad6fb">
          <Title>Starting the KDC</Title>
          <ParaBlock xy:guid="c980974e-c1a5-4040-aee7-5501b2c603a9">
            <RichText>Start the KDC.

              <InLineApplicationPrompt>For RHEL/CentOS/Oracle Linux 5 (DEPRECATED)
              </InLineApplicationPrompt>
              <InLineTypeThis>/etc/rc.d/init.d/krb5kdc start
                /etc/rc.d/init.d/kadmin start
              </InLineTypeThis>
            </RichText>
            <RichText>
              <InLineApplicationPrompt>For SLES 11</InLineApplicationPrompt>
              <InLineTypeThis>rckrb5kdc start
                rckadmind start
              </InLineTypeThis>
            </RichText>
            <RichText>
              <InLineApplicationPrompt>For UBUNTU 12
              </InLineApplicationPrompt>
              <InLineTypeThis>rckrb5kdc start
                rckadmind start
              </InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="c192db3c-487e-4503-8fb2-a1553cdfae75">
          <Title>Installing and Configuring the Kerberos Clients</Title>
          <ParaBlock xy:guid="b6ef91f0-c2d0-48d8-ad8e-928022b0ef37">
            <List ListMarker="Numeric" xy:guid="08f4f411-46c9-4ac1-b980-9494c631e1bf">
              <ItemBlock>
                <Item>
                  <ItemPara>To install the Kerberos clients, on every server in the cluster:</ItemPara>
                  <RichText>
                    <InLineApplicationPrompt>
                      For RHEL/CentOS/Oracle Linux
                    </InLineApplicationPrompt>
                    <InLineTypeThis>yum install krb5-workstation</InLineTypeThis>
                  </RichText>
                  <RichText>
                    <InLineApplicationPrompt>
                      For SLES 11
                    </InLineApplicationPrompt>
                    <InLineTypeThis>zypper install krb5-client</InLineTypeThis>
                  </RichText>
                  <RichText>
                    <InLineApplicationPrompt>
                      For UBUNTU 12
                    </InLineApplicationPrompt>
                    <InLineTypeThis>apt-get install krb5-client</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Copy the
                    <InLineCode>krb5.conf</InLineCode>
                    file you modified in
                    <Xref InsideTargetRef="d6ff1085-1c16-4ef0-aa3b-2ae5eac406c0">Installing and Configuring the KDC
                    </Xref>
                    to all the servers in the cluster.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="d0b2f2d1-904f-4982-8f83-26dc53d884bd">
          <Title>Creating Service Principals and Keytab Files for HDP 2.x</Title>
          <ParaBlock xy:guid="2486d8e2-6647-44b2-a0ba-28b946f75b78">
            <RichText>Each service and sub-service in Hadoop must have its own principal. A principal name in a given
              realm consists of a primary name and an instance name, which in this case is the FQDN of the host that
              runs that service. As services do not log in with a password to acquire their tickets, their principal's
              authentication credentials are stored in a keytab file, which is extracted from the Kerberos database and
              stored locally with the service principal on the service component host.
            </RichText>
            <RichText>
              First you must create the principal, using mandatory naming conventions.
            </RichText>
            <RichText>
              Then you must create the keytab file with that principal's information and copy the file to the keytab
              directory on the appropriate service host.
            </RichText>
            <CustomNote xy:guid="b5448d5a-51be-4f73-a2fb-e91237af5217">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="8bb1e3d6-813c-4a5d-94f5-2845b57d381f"/>
              <SimpleBlock>
                <RichText>Principals can be created either on the KDC machine itself or through the network, using an
                  âadminâ principal. The following instructions assume you are using the KDC machine and using the
                  <InLineCode>kadmin.local</InLineCode>
                  command line administration utility. Using
                  <InLineCode>kadmin.local</InLineCode>
                  on the KDC machine allows you to create principals without needing to create a separate "admin"
                  principal before you start.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <List ListMarker="Numeric" xy:guid="c9a339f3-9935-4cca-bca2-088c6a0c437d">
              <ItemBlock>
                <Item>
                  <ItemPara>Open the
                    <InLineCode>kadmin.local</InLineCode>
                    utility on the KDC machine
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>/usr/sbin/kadmin.local</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Create the service principals:
                    <InLineTypeThis>$kadmin.local
                      addprinc -randkey $primary_name/$fully.qualified.domain.name @EXAMPLE.COM
                    </InLineTypeThis>
                  </ItemPara>
                  <RichText>
                    The
                    <InLineCode>-randkey</InLineCode>
                    option is used to generate the password.
                  </RichText>
                  <RichText>
                    Notice in the example that each service principal's primary name has appended to it the instance
                    name, the FQDN of the host on which it runs. This provides a unique principal name for services that
                    run on multiple hosts, like DataNodes and NodeManagers. The addition of the host name serves to
                    distinguish, for example, a request from DataNode A from a request from DataNode B. This is
                    important for the following reasons:
                  </RichText>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>If the Kerberos credentials for one DataNode are compromised, it does not
                          automatically lead to all DataNodes being compromised
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>If multiple DataNodes have exactly the same principal and are simultaneously
                          connecting to the NameNode, and if the Kerberos authenticator being sent happens to have same
                          timestamps, then the authentication would be rejected as a replay request.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <RichText>
                    The principal name must match the values in the table below:
                  </RichText>
                  <Table align="left" border="false" width="100" xy:guid="81b30c5e-6833-4e05-8e1e-6e1c9b2ac659">
                    <TblTitle>Service Principals</TblTitle>
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Service</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Component</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Mandatory Principal Name</RichText>
                          </Cell>
                        </TableRow>
                      </TblHeader>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>DataNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>dn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MR2</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>History Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jhs/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MR2</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>History Server HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>YARN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ResourceManager</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>rm/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>YARN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NodeManager</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nm/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>oozie/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive Metastore HiveServer2</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hive/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>WebHCat</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MasterServer</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>RegionServer</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ZooKeeper</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ZooKeeper</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zookeeper/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>JournalNode ServerOnly required if you are setting up NameNode HA.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>JournalNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                  <RichText>
                    For example, to create the principal for a DataNode service, issue the following command:
                    <InLineTypeThis>$kadmin.local
                      addprinc -randkey dn/ $DataNode-Host @EXAMPLE.COM
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>In addition you must create four special principals for Ambari's own use.</ItemPara>
                  <CustomNote xy:guid="e3108b69-b3a7-48dd-8183-93b77584b3f7">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="d11d3022-1028-412e-86f8-0c2474f568b0"/>
                    <SimpleBlock>
                      <RichText>The names in the following table can be customized in the Customize Services step of the
                        Ambari Install Wizard. If this is the case in your installation, the principal names should
                        match the customized names. For example, if the HDFS Service User has been set to<InLineCode>
                          hdfs1</InLineCode>, the respective principal for the Ambari HDFS User should also be created
                        as<InLineCode>hdfs1</InLineCode>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    These principals do not have the FQDN appended to the primary name:
                  </RichText>
                  <Table align="" border="false" width="100" xy:guid="edbc51ba-ef0e-4bb4-b697-08462c1a9b4b">
                    <TblTitle>Ambari Principals</TblTitle>
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Mandatory Principal Name</RichText>
                          </Cell>
                        </TableRow>
                      </TblHeader>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari UserThis principal is used with the JAAS configuration. See Setting up JAAS
                              for Ambari for more information.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Smoke Test User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari-qa</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HDFS User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hdfs</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HBase User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                </Item>
                <Item>
                  <ItemPara>After the principals are created in the database, you can extract the related keytab files
                    for transfer to the appropriate host:
                    <InLineTypeThis>$kadmin.local
                      xst -norandkey -k $keytab_file_name $primary_name /fully.qualified.domain.name@EXAMPLE.COM
                    </InLineTypeThis>
                  </ItemPara>
                  <RichText>
                    You must use the mandatory names for the
                    <SyntaxArg>&lt;$keytab_file_name&gt;</SyntaxArg>
                    variable shown in the preceding table.
                  </RichText>
                  <CustomNote xy:guid="bab15713-3683-4ef8-8cc0-908879c8963e">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="c6e74b57-c427-442a-b5e9-12a3ac23769b"/>
                    <SimpleBlock>
                      <RichText>
                        Some older versions of Kerberos do not support the xst
                        <InLineCode>-norandkey</InLineCode>
                        option. You can use the command without the
                        <InLineCode>-norandkey</InLineCode>
                        flag, except in cases where you need to copy a principal from one keytab file to another keytab
                        file on a host. This might be a requirement if the Hadoop configurations on a host have keytab
                        path properties that point to different keytab locations but have corresponding principal name
                        properties that have the same values.
                      </RichText>
                      <RichText>
                        In situations like this, you can use the two step
                        <InLineCode>kadmin</InLineCode>
                        /
                        <InLineCode>kutil</InLineCode>
                        procedure. This description assumes MIT Kerberos. If you are using another version, please check
                        the documentation for that version.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Extract the keytab file information:</ItemPara>
                        <RichText>
                          <InLineTypeThis>$kadmin
                            xst -k $keytab_file_name-temp1$primary_name /fully.qualified.domain.name@EXAMPLE.COM
                            xst -k $keytab_file_name-temp2$primary_name /fully.qualified.domain.name@EXAMPLE.COM
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Write the keytab to a file.</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            $kutil
                            kutil: rkt $keytab_file_name-temp1
                            kutil: rkt $keytab_file_name-temp2
                            kutil: wkt $keytab_file_name
                            kutil: clear
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <Table align="" border="false" width="100" xy:guid="65791aa8-e41e-4bf7-ab6b-0bd03881db56">
                    <TblTitle>Service Keytab File Names</TblTitle>
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader>
                        <TableRow>
                          <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Component</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Principal Name</RichText>
                          </Cell>
                          <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Mandatory Keytab File Name</RichText>
                          </Cell>
                        </TableRow>
                      </TblHeader>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>DataNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>dn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>dn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MR2 History Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jhs/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jhs.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MR2 History Server HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>YARN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>rm/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>rm.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>YARN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nm/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nm.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>oozie/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>oozie.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive Metastore HiveServer2</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hive/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hive.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>WebHCat</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase Master Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase RegionServer</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ZooKeeper</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zookeeper/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zk.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Journal ServerOnly required if you are setting up NameNode HA.</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari UserThis principal is used with the JAAS configuration. See Setting up JAAS
                              for Ambari for more information.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Smoke Test User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari-qa</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>smokeuser.headless.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HDFS User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hdfs</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hdfs.headless.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HBase User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase.headless.keytab</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                  <RichText>For example, to create the keytab files for NameNode HTTP, issue the following command:
                  </RichText>
                  <RichText>
                    <InLineTypeThis>$kadmin.local
                      xst -norandkey -k spnego.service.keytab HTTP/&lt;namenode-host&gt;</InLineTypeThis>
                  </RichText>
                  <CustomNote xy:guid="ecd4e3ce-0a20-41f4-b364-4164b4bb2607">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="d038e6b2-a4d2-4b6d-af70-2ce316229e80"/>
                    <SimpleBlock>
                      <RichText>If you have a large cluster, you may want to create a script to automate creating your
                        principals and keytabs. To help with that, you can download a CSV-formatted file of all the
                        required principal names and keytab files from the Ambari Web GUI. Select
                        <InLineMenuSelection>Admin &gt; Security &gt; Enable Security</InLineMenuSelection>
                        <Emph>,</Emph>
                        then run the<InLineMenuSelection>Enable Security Wizard</InLineMenuSelection>, using the default
                        values. At the bottom of the third page, in<InLineMenuSelection>Create Principals and
                          Keytabs</InLineMenuSelection>, click<InLineTypeThis>Download CSV</InLineTypeThis>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>When the keytab files have been created, on each host create a directory for them and set
                    appropriate permissions.
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>mkdir -p /etc/security/keytabs/
                      chown root:hadoop /etc/security/keytabs
                      chmod 750 /etc/security/keytabs
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Copy the appropriate keytab file to each host. If a host runs more than one component (for
                    example, both NodeManager and DataNode), copy keytabs for both components. The Ambari Smoke Test
                    User, the Ambari HDFS User, and the Ambari HBase User keytabs should be copied to the all hosts on
                    the cluster.
                  </ItemPara>
                  <RichText>
                    If you have customized service user names, replace the default values below with your appropriate
                    service user, group, and keytab names.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Set appropriate permissions for the keytabs.</ItemPara>
                  <RichText>
                    If you have customized service user names, replace the default values below with your appropriate
                    service user, group, and keytab names.
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Optionally, if you have
                          <Xref InsideTargetRef="04f03c43-badc-48ac-a335-0f44530b49bd">Set up JAAS</Xref>
                          on the Ambari server host:
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>chown ambari:ambari /etc/security/keytabs/ambari.keytab
                            chmod 400 /etc/security/keytabs/ambari.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the HDFS NameNode and SecondaryNameNode hosts:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hdfs:hadoop /etc/security/keytabs/nn.service.keytab
                            chmod 400 /etc/security/keytabs/nn.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the HDFS NameNode host, for the Ambari Test Users:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown ambari-qa:hadoop /etc/security/keytabs/smokeuser.headless.keytab
                            chmod 440 /etc/security/keytabs/smokeuser.headless.keytab
                            chown hdfs:hadoop /etc/security/keytabs/hdfs.headless.keytab
                            chmod 440 /etc/security/keytabs/hdfs.headless.keytab
                            chown hbase:hadoop /etc/security/keytabs/hbase.headless.keytab
                            chmod 440 /etc/security/keytabs/hbase.headless.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each host that runs an HDFS DataNode:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hdfs:hadoop /etc/security/keytabs/dn.service.keytab
                            chmod 400 /etc/security/keytabs/dn.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the MR2 History Server:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown mapred:hadoop /etc/security/keytabs/jhs.service.keytab
                            chmod 400 /etc/security/keytabs/jhs.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the YARN ResourceManager:</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            chown yarn:hadoop /etc/security/keytabs/rm.service.keytab
                            chmod 400 /etc/security/keytabs/rm.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each host that runs a YARN NodeManager:</ItemPara>
                        <RichText>
                          <InLineApplicationPrompt>
                          </InLineApplicationPrompt>
                          <InLineTypeThis>chown yarn:hadoop /etc/security/keytabs/nm.service.keytab
                            chmod 400 /etc/security/keytabs/nm.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the Oozie Server:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown oozie:hadoop /etc/security/keytabs/oozie.service.keytab
                            chmod 400 /etc/security/keytabs/oozie.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the Hive Metastore, HiveServer2 and WebHCat:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hive:hadoop /etc/security/keytabs/hive.service.keytab
                            chmod 400 /etc/security/keytabs/hive.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On hosts that run the HBase MasterServer, RegionServer and ZooKeeper:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hbase:hadoop /etc/security/keytabs/hbase.service.keytab
                            chmod 400 /etc/security/keytabs/hbase.service.keytab
                            chown zookeeper:hadoop /etc/security/keytabs/zk.service.keytab
                            chmod 400 /etc/security/keytabs/zk.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the Nagios server:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown nagios:nagios /etc/security/keytabs/nagios.service.keytab
                            chmod 400 /etc/security/keytabs/nagios.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each host that runs a JournalNode, if you are setting up NameNode HA:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hdfs:hadoop /etc/security/keytabs/jn.service.keytab
                            chmod 400 /etc/security/keytabs/jn.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Verify that the correct keytab files and principals are associated with the correct service
                    using the
                    <InLineCode>klist</InLineCode>
                    command. For example, on the NameNode:
                    <InLineTypeThis>klist âk -t /etc/security/keytabs/nn.service.keytab</InLineTypeThis>
                    Do this on each respective service in your cluster.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="f8683307-21bb-40ac-968f-7b810be76d58">
          <Title>Creating Service Principals and Keytab Files for HDP 1.x</Title>
          <ParaBlock xy:guid="ff5033e1-5f79-482f-909e-e7226fbbcf50">
            <RichText>Each service and sub-service in Hadoop must have its own principal. A principal name in a given
              realm consists of a primary name and an instance name, which in this case is the FQDN of the host that
              runs that service. As services do not log in with a password to acquire their tickets, their principal's
              authentication credentials are stored in a keytab file, which is extracted from the Kerberos database and
              stored locally with the service principal on the service component host.
            </RichText>
            <RichText>
              First, you must create the principal, using mandatory naming conventions. Then you must create the keytab
              file with that principal's information and copy the file to the keytab directory on the appropriate
              service host.
            </RichText>
            <CustomNote xy:guid="0817f3c9-f852-4df7-86ec-44782f67fb93">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="58291f9a-aba3-4050-b6de-b9f7c1c6138c"/>
              <SimpleBlock>
                <RichText>Principals can be created either on the KDC machine itself or through the network, using an
                  âadminâ principal. The following instructions assume you are using the KDC machine and using the
                  <InLineCode>kadmin.local</InLineCode>
                  command line administration utility. Using
                  <InLineCode>kadmin.local</InLineCode>
                  on the KDC machine allows you to create principals without needing to create a separate "admin"
                  principal before you start.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <List ListMarker="Numeric" xy:guid="23b23fd7-a353-4af6-99fe-2326ff5351d8">
              <ItemBlock>
                <Item>
                  <ItemPara>Open the
                    <InLineCode>kadmin.local</InLineCode>
                    utility on the KDC machine
                  </ItemPara>
                  <RichText>
                    <InLineApplicationPrompt>
                    </InLineApplicationPrompt>
                    <InLineTypeThis>/usr/sbin/kadmin.local</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Create the service principals:
                    <InLineTypeThis>$kadmin.local
                      addprinc -randkey $primary_name / $fully.qualified.domain.name @EXAMPLE.COM
                    </InLineTypeThis>
                  </ItemPara>
                  <RichText>
                    The
                    <InLineCode>-randkey</InLineCode>
                    option is used to generate the password.
                  </RichText>
                  <RichText>
                    Notice in the example that each service principal's primary name has appended to it the instance
                    name, the FQDN of the host on which it runs. This provides a unique principal name for services that
                    run on multiple hosts, like DataNodes and TaskTrackers. The addition of the host name serves to
                    distinguish, for example, a request from DataNode A from a request from DataNode B. This is
                    important for the following reasons:
                  </RichText>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>If the Kerberos credentials for one DataNode are compromised, it does not
                          automatically lead to all DataNodes being compromised
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>If multiple DataNodes have exactly the same principal and are simultaneously
                          connecting to the NameNode, and if the Kerberos authenticator being sent happens to have same
                          time stamp, then the authentication would be rejected as a replay request.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <RichText>
                    The principal name must match the following values:
                  </RichText>
                  <Table align="" border="false" width="100" xy:guid="f4864c50-15aa-4281-9217-d406a0ef50e5">
                    <TblTitle>Service Principals</TblTitle>
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Service</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Component</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Mandatory Principal Name</RichText>
                          </Cell>
                        </TableRow>
                      </TblHeader>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HDFS</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>DataNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>dn/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MapReduce</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>JobTracker</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jt/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MapReduce</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>TaskTracker</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>tt/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>oozie/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive Metastore HiveServer2</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hive/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>WebHCat</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>MasterServer</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>RegionServer</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ZooKeeper</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ZooKeeper</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zookeeper/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios/$FQDN</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                  <RichText>
                    <Emph>For example</Emph>
                    : To create the principal for a DataNode service, issue the following command:
                    <InLineTypeThis>$kadmin.local
                      addprinc -randkey dn/$DataNode-Host@EXAMPLE.COM
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>In addition you must create four special principals for Ambari's own use.</ItemPara>
                  <CustomNote xy:guid="2aa1ec2c-3da8-4523-b349-52bee82ac04c">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="6f48ca71-f98d-4481-bffb-b483c3b8097f"/>
                    <SimpleBlock>
                      <RichText>The names in the following table can be customized in the Customize Services step of the
                        Ambari Install Wizard. If this is the case in your installation, the principal names should
                        match the customized names. For example, if the HDFS Service User has been set to<InLineCode>
                          hdfs1</InLineCode>, the respective principal for the Ambari HDFS User should also be created
                        as<InLineCode>hdfs1</InLineCode>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>You do NOT need to append the FQDN to the primary name:</RichText>
                  <Table align="" border="false" width="100" xy:guid="19476890-ce1d-46a3-a820-6331d44bcda5">
                    <TblTitle>Ambari Principals</TblTitle>
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Default Principal Name</RichText>
                          </Cell>
                        </TableRow>
                      </TblHeader>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari UserThis principal is used with the JAAS configuration. See Setting Up JAAS
                              for Ambari for more information.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Smoke Test User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari-qa</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HDFS User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hdfs</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HBase User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                </Item>
                <Item>
                  <ItemPara>After the principals are created in the database, you can extract the related keytab files
                    for transfer to the appropriate host:
                    <InLineTypeThis>$kadmin.local
                      xst -norandkey -k $keytab_file_name $primary_name/fully.qualified.domain.name@EXAMPLE.COM
                    </InLineTypeThis>
                  </ItemPara>
                  <CustomNote xy:guid="bf6b9040-b0bd-4bd2-acdb-dbfbbc324ab6">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="ef01e6b2-fc67-40d3-a157-979b3b0ac16c"/>
                    <SimpleBlock>
                      <RichText>Some older versions of Kerberos do not support the xst
                        <InLineCode>-norandkey</InLineCode>
                        option. You can use the command without the
                        <InLineCode>-norandkey</InLineCode>
                        flag, except in cases where you need to merge two principals with the same name into a single
                        keytab file for a single host. In this case, you can use the two step
                        <InLineCode>kadmin</InLineCode>
                        /
                        <InLineCode>ktutil</InLineCode>
                        procedure. This description assumes MIT Kerberos. If you are using another version, please check
                        the documentation for that version.
                      </RichText>
                      <List ListMarker="Numeric" xy:guid="0173c41a-c8dd-4609-9a10-52367dedb1fe">
                        <ItemBlock>
                          <Item>
                            <ItemPara>Extract the keytab file information.</ItemPara>
                            <RichText>
                              <InLineTypeThis>$kadmin
                                xst -k $keytab_file_name-temp1$primary_name /fully.qualified.domain.name@EXAMPLE.COM
                                xst -k $keytab_file_name-temp2$primary_name /fully.qualified.domain.name@EXAMPLE.COM
                              </InLineTypeThis>
                            </RichText>
                          </Item>
                          <Item>
                            <ItemPara>Merge the keytabs into a single file.</ItemPara>
                            <RichText>
                              <InLineTypeThis>$kutil
                                rkt $keytab_file_name-temp1
                                rkt $keytab_file_name-temp2
                                wkt $keytab_file_name
                                clear
                              </InLineTypeThis>
                              <InLineApplicationPrompt></InLineApplicationPrompt>
                            </RichText>
                          </Item>
                        </ItemBlock>
                      </List>
                    </SimpleBlock>
                  </CustomNote>
                  <RichText>
                    You must use the mandatory names for the
                    <SyntaxArg>&lt;keytab_file_name&gt;</SyntaxArg>
                    variable shown in the following table. Adjust the principal names if necessary.
                  </RichText>
                  <Table align="" border="false" width="100" xy:guid="82c35d75-97b6-4a7f-bf58-95db19e23d7d">
                    <TblTitle>Service Keytab File Names</TblTitle>
                    <TblGroup>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblCol width=""/>
                      <TblHeader>
                        <TableRow>
                          <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Component</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Principal Name</RichText>
                          </Cell>
                          <Cell align="center" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Mandatory Keytab File Name</RichText>
                          </Cell>
                        </TableRow>
                      </TblHeader>
                      <TblBody>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>NameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>SecondaryNameNode HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>DataNode</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>dn/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>dn.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>JobTracker</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jt/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>jt.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>TaskTracker</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>tt/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>tt.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>oozie/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>oozie.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Oozie HTTP</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Hive Metastore HiveServer2</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hive/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hive.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>WebHCat</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HTTP/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>spnego.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase Master Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>HBase RegionServer</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ZooKeeper</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zookeeper/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>zk.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Nagios Server</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios/$FQDN</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>nagios.service.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari UserThis principal is used with the JAAS configuration. See Setting Up JAAS
                              for Ambari for more information.
                            </RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari Smoke Test User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>ambari-qa</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>smokeuser.headless.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HDFS User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hdfs</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hdfs.headless.keytab</RichText>
                          </Cell>
                        </TableRow>
                        <TableRow>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>Ambari HBase User</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase</RichText>
                          </Cell>
                          <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                            <RichText>hbase.headless.keytab</RichText>
                          </Cell>
                        </TableRow>
                      </TblBody>
                      <TblFooter/>
                    </TblGroup>
                  </Table>
                  <RichText>
                    <Emph>For example</Emph>
                    : To create the keytab files for NameNode HTTP, issue this command:
                  </RichText>
                  <RichText>
                    <InLineTypeThis>xst -norandkey -k spnego.service.keytab HTTP/</InLineTypeThis>
                    <SyntaxArg>&lt;namenode-host&gt;</SyntaxArg>
                  </RichText>
                  <CustomNote xy:guid="5f999dfa-1d8a-48ea-b76a-19caa3954a86">
                    <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="a32b0465-7dfd-4686-b293-fd13882f79e6"/>
                    <SimpleBlock>
                      <RichText>If you have a large cluster, you may want to create a script to automate creating your
                        principals and keytabs. The Ambari Web GUI can help. For further information see
                        <Xref InsideTargetRef="d0b2f2d1-904f-4982-8f83-26dc53d884bd">Creating Service Principals and
                          Keytab Files for HDP 2.x
                        </Xref>
                        or<Xref InsideTargetRef="f8683307-21bb-40ac-968f-7b810be76d58">Creating Service Principals and
                          Keytab Files for HDP 1.x</Xref>.
                      </RichText>
                    </SimpleBlock>
                  </CustomNote>
                </Item>
                <Item>
                  <ItemPara>When the keytab files have been created, on each host create a directory for them and set
                    appropriate permissions.
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>mkdir -p /etc/security/keytabs/
                      chown root:hadoop /etc/security/keytabs
                      chmod 750 /etc/security/keytabs
                    </InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Copy the appropriate keytab file to each host. If a host runs more than one component (for
                    example, both TaskTracker and DataNode), copy keytabs for both components. The Ambari Smoke Test
                    User, the Ambari HDFS User, and the Ambari HBase User keytabs should be copied to all hosts.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Set appropriate permissions for the keytabs.</ItemPara>
                  <RichText>
                    If you have customized service user names, replace the default values below with your appropriate
                    service user, group, and keytab names.
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Optionally, if you have
                          <Xref InsideTargetRef="04f03c43-badc-48ac-a335-0f44530b49bd">Set up JAAS for Ambari</Xref>
                          on the Ambari server host:
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>chown ambari:ambari /etc/security/keytabs/ambari.keytab
                            chmod 400 /etc/security/keytabs/ambari.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the HDFS NameNode and SecondaryNameNode hosts:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hdfs:hadoop /etc/security/keytabs/nn.service.keytab
                            chmod 400 /etc/security/keytabs/nn.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the HDFS NameNode host, for the Ambari Test Users:</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            chown ambari-qa:hadoop /etc/security/keytabs/smokeuser.headless.keytab
                            chmod 440 /etc/security/keytabs/smokeuser.headless.keytab
                            chown hdfs:hadoop /etc/security/keytabs/hdfs.headless.keytab
                            chmod 440 /etc/security/keytabs/hdfs.headless.keytab
                            chown hbase:hadoop /etc/security/keytabs/hbase.headless.keytab
                            chmod 440 /etc/security/keytabs/hbase.headless.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each host that runs an HDFS DataNode:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hdfs:hadoop /etc/security/keytabs/dn.service.keytab
                            chmod 400 /etc/security/keytabs/dn.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the MapReduce JobTracker:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown mapred:hadoop /etc/security/keytabs/jt.service.keytab
                            chmod 400 /etc/security/keytabs/jt.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On each host that runs a MapReduce TaskTracker:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown mapred:hadoop /etc/security/keytabs/tt.service.keytab
                            chmod 400 /etc/security/keytabs/tt.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the Oozie Server:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown oozie:hadoop /etc/security/keytabs/oozie.service.keytab
                            chmod 400 /etc/security/keytabs/oozie.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the Hive Metastore, HiveServer2 and WebHCat:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hive:hadoop /etc/security/keytabs/hive.service.keytab
                            chmod 400 /etc/security/keytabs/hive.service.keytab
                            chown root:hadoop /etc/security/keytabs/spnego.service.keytab
                            chmod 440 /etc/security/keytabs/spnego.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On hosts that run the HBase MasterServer, RegionServer and ZooKeeper:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown hbase:hadoop /etc/security/keytabs/hbase.service.keytab
                            chmod 400 /etc/security/keytabs/hbase.service.keytab
                            chown zookeeper:hadoop /etc/security/keytabs/zk.service.keytab
                            chmod 400 /etc/security/keytabs/zk.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>On the host that runs the Nagios server:</ItemPara>
                        <RichText>
                          <InLineTypeThis>chown nagios:nagios /etc/security/keytabs/nagios.service.keytab
                            chmod 400 /etc/security/keytabs/nagios.service.keytab
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Verify that the correct keytab files and principals are associated with the correct service
                    using the
                    <InLineCode>klist</InLineCode>
                    command. For example, on the NameNode:
                    <InLineTypeThis>
                      klist âk -t /etc/security/keytabs/nn.service.keytab .
                    </InLineTypeThis>
                    Do this on each respective service in your cluster.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="36f47ef6-1164-49fd-8eca-9391317f73c9">
        <Title>Setting Up Hadoop Users</Title>
        <ParaBlock xy:guid="663d1f22-c7bc-403f-a4b4-7c8e3cd7db24">
          <RichText>This section provides information on setting up Hadoop users for Kerberos.</RichText>
          <List ListMarker="Bullet" xy:guid="8e09132d-dd03-4550-bf49-52c303e12b17">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="27d9fb8e-1c93-46a3-8be7-b6cd499a7125">Overview</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="cafd5dce-5ade-4651-82c5-dad6dad02fdc">Creating Mappings Between Principals and
                    UNIX Usernames
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="27d9fb8e-1c93-46a3-8be7-b6cd499a7125">
          <Title>Overview</Title>
          <ParaBlock xy:guid="e5633998-6421-4254-aec1-9a54d3272787">
            <RichText>Hadoop determines group file ownership and access control based on each user's group memberships.
              To configure Hadoop for use with Kerberos and Ambari you must create a mapping between service principals
              and these UNIX user names.
            </RichText>
            <RichText>
              A user is mapped to the groups in which it belongs using an implementation of theÂ <InLineCode>
              GroupMappingServiceProviderinterface</InLineCode>. The implementation is pluggable and is configured inÂ 
              <InLineCode>core-site.xml</InLineCode>.
            </RichText>
            <RichText>
              By default Hadoop usesÂ <InLineCode>ShellBasedUnixGroupsMapping</InLineCode>, which is an implementation of
              <InLineCode>GroupMappingServiceProvider</InLineCode>. It fetches the group membership for a user name by
              executing a UNIX shell command. In secure clusters, since the user names are actually Kerberos
              principals,Â 
              <InLineCode>ShellBasedUnixGroupsMapping</InLineCode>
              will work only if the Kerberos principals map to valid UNIX user names. Hadoop provides a feature that
              lets administrators specify mapping rules to map a Kerberos principal to a local UNIX user name.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="cafd5dce-5ade-4651-82c5-dad6dad02fdc">
          <Title>Creating Mappings Between Principals and UNIX User names</Title>
          <ParaBlock xy:guid="9a51a7a1-0e2e-48fe-b902-e88a1e34eff3">
            <RichText>Hadoop uses a rule-based system to create mappings between service principals and their related
              UNIX user names. The rules are specified in the
              <InLineCode>core-site.xml</InLineCode>
              configuration file as the value to the optional key<InLineCode>hadoop.security.auth_to_local</InLineCode>.
            </RichText>
            <RichText>
              The default rule is simply named<InLineCode>DEFAULT</InLineCode>. It translates all principals in your
              default domain to their first component. For example,
              <InLineCode>myusername@APACHE.ORG</InLineCode>
              and
              <InLineCode>myusername/admin@APACHE.ORG</InLineCode>
              both become<InLineCode>myusername</InLineCode>, assuming your default domain is APACHE.ORG.
            </RichText>
            <RichText>
              Use the following instructions to configure the mappings between principals and UNIX user names:
            </RichText>
            <List ListMarker="Bullet" xy:guid="730fbeba-d924-47ac-80e4-123d454d69e6">
              <ItemBlock>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="522eebb0-f10b-4f81-8e52-3cfe89234594">Creating Rules</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="cafdcc6b-53ee-458c-8c43-35e43ff53544">Examples</Xref>
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="522eebb0-f10b-4f81-8e52-3cfe89234594">
            <Title>Creating Rules</Title>
            <ParaBlock xy:guid="54a11250-7fa9-46cb-a4af-0575431b956e">
              <List ListMarker="Bullet" xy:guid="e919f3dc-9724-4ca9-8af9-e21417db0b8c">
                <ItemBlock>
                  <Item>
                    <ItemPara>Simple Rules</ItemPara>
                    <RichText>
                      To make a simple map between principal names and UNIX users, you create a straightforward
                      substitution rule. For example, to map the ResourceManager(rm) and NodeManager(nm) principals in
                      the EXAMPLE.COM realm to the UNIX
                      <SyntaxArg>$YARN_USER</SyntaxArg>
                      user and the NameNode(nn) and DataNode(dn) principals to the UNIX
                      <SyntaxArg>$HDFS_USER</SyntaxArg>
                      user, you would make this the value for the
                      <InLineCode>hadoop.security.auth_to_local</InLineCode>
                      key in<InLineCode>core-site.xml</InLineCode>.
                    </RichText>
                    <RichText>
                      <InLineTypeThis>RULE:[2:$1@$0]([jt]t@.*EXAMPLE.COM)s/.*/ $YARN_USER /
                        RULE:[2:$1@$0]([nd]n@.*EXAMPLE.COM)s/.*/ $HDFS_USER /
                        DEFAULT
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Complex Rules</ItemPara>
                    <RichText>
                      To accommodate more complex translations, you create a hierarchical set of rules to add to the
                      default. Each rule is divided into three parts: base, filter, and substitution.
                    </RichText>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>
                            <Emph>The Base:</Emph>
                          </ItemPara>
                          <RichText>
                            The base begins with the number of components in the principal name (excluding the realm),
                            followed by a colon, and the pattern for building the user name from the sections of the
                            principal name. In the pattern section
                            <InLineCode>$0</InLineCode>
                            translates to the realm,
                            <InLineCode>$1</InLineCode>
                            translates to the first component and
                            <InLineCode>$2</InLineCode>
                            to the second component.
                          </RichText>
                          <RichText>
                            For example:
                          </RichText>
                          <RichText>
                            <InLineCode>
                              [1:$1@$0]
                            </InLineCode>
                            translates
                            <InLineCode>myusername@APACHE.ORG</InLineCode>
                            to
                            <InLineCode>myusername@APACHE.ORG</InLineCode>
                          </RichText>
                          <RichText>
                            <InLineCode>[2:$1]</InLineCode>
                            translates
                            <InLineCode>myusername/admin@APACHE.ORG</InLineCode>
                            to
                            <InLineCode>myusername</InLineCode>
                          </RichText>
                          <RichText>
                            <InLineCode>[2:$1%$2]</InLineCode>
                            translates
                            <InLineCode>myusername/admin@APACHE.ORG</InLineCode>
                            to
                            <InLineCode>myusername%admin</InLineCode>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>The Filter:</Emph>
                          </ItemPara>
                          <RichText>
                            The filter consists of a regex in a parentheses that must match the generated string for the
                            rule to apply.
                          </RichText>
                          <RichText>
                            For example:
                          </RichText>
                          <RichText>
                            <InLineCode>(.*%admin)</InLineCode>
                            matches any string that ends in
                            <InLineCode>%admin</InLineCode>
                          </RichText>
                          <RichText>
                            <InLineCode>(.*@SOME.DOMAIN)</InLineCode>
                            matches any string that ends in
                            <InLineCode>@SOME.DOMAIN</InLineCode>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>The Substitution:</Emph>
                          </ItemPara>
                          <RichText>
                            The substitution is a sed rule that translates a regex into a fixed string.
                          </RichText>
                          <RichText>
                            For example:
                          </RichText>
                          <RichText>
                            <InLineCode>s/@ACME\.COM//</InLineCode>
                            removes the first instance of<InLineCode>@SOME.DOMAIN</InLineCode>.
                          </RichText>
                          <RichText>
                            <InLineCode>s/@[A-Z]*\.COM//</InLineCode>
                            removes the first instance of
                            <InLineCode>@</InLineCode>
                            followed by a name followed by<InLineCode>COM</InLineCode>.
                          </RichText>
                          <RichText>
                            <InLineCode>s/X/Y/g</InLineCode>
                            replaces all of the
                            <InLineCode>X</InLineCode>
                            in the name with
                            <InLineCode>Y</InLineCode>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="cafdcc6b-53ee-458c-8c43-35e43ff53544">
            <Title>Examples</Title>
            <ParaBlock xy:guid="c3aec3b5-b125-4e09-b33d-8876e8b11a06">
              <List ListMarker="Bullet" xy:guid="d3baee7f-0a35-4452-8a79-0c74f541e484">
                <ItemBlock>
                  <Item>
                    <ItemPara>If your default realm was<InLineCode>APACHE.ORG</InLineCode>, but you also wanted to take
                      all principals from
                      <InLineCode>ACME.COM</InLineCode>
                      that had a single component<InLineCode>joe@ACME.COM</InLineCode>, you would create this rule:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>RULE:[1:$1@$0](.*@ACME\.COM)s/@.*//
                        DEFAULT
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>To also translate names with a second component, you would use these rules:</ItemPara>
                    <RichText>
                      <InLineTypeThis>RULE:[1:$1@$0](.*@ACME\.COM)s/@.*//
                        RULE:[2:$1@$0](.*@ACME\.COM)s/@.*//
                        DEFAULT
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>To treat all principals from
                      <InLineCode>APACHE.ORG</InLineCode>
                      with the extension
                      <InLineCode>/admin</InLineCode>
                      as<InLineCode>admin</InLineCode>, your rules would look like this:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>RULE[2:$1%$2@$0](.*%admin@APACHE\.ORG)s/.*/admin/
                        DEFAULT
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="a9927c0e-595d-45b8-b574-a2d401685ccd">
        <Title>Setting up Ambari for Kerberos</Title>
        <ParaBlock xy:guid="dbcabe24-5716-4af3-b055-66fe5efbd9a5">
          <RichText>To turn on Kerberos-based security in the Ambari Web GUI you must:</RichText>
          <List ListMarker="Numeric" xy:guid="3726d000-61ce-4efd-baf1-dbde3bd0d8e4">
            <ItemBlock>
              <Item>
                <ItemPara>Have already set up Kerberos for your cluster.
                  For more information, see<Xref InsideTargetRef="4a8722b7-505e-4aa1-9256-9fff03c0d000">Preparing
                    Kerberos for Hadoop</Xref>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Go to the
                  <InLineMenuSelection>Admin</InLineMenuSelection>
                  tab.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Select<InLineMenuSelection>Security</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Click
                  <InLineMenuSelection>Enable Security</InLineMenuSelection>
                  and follow the steps in the<InLineMenuSelection>Enable Security Wizard</InLineMenuSelection>.
                </ItemPara>
                <Figure xy:guid="9feaad81-d662-4aac-b304-de17419364ce">
                  <MediaObject xy:guid="bc4c03e5-a7df-400b-90df-a0e7bdbd9270">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/newkerb_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="04f03c43-badc-48ac-a335-0f44530b49bd">
          <Title>Setting up JAAS for Ambari</Title>
          <ParaBlock xy:guid="bcb65413-c634-41b8-b165-ff2e494112ff">
            <RichText>If you want to set up Java Authentication and Authorization Services (JAAS) configurations for
              Ambari to provide independent, secure access to native Hadoop GUIs such as the NameName UI, use the Apache
              community documentation topic
              <Href UrlTarget="http://ambari.apache.org/1.2.5/installing-hadoop-using-ambari/content/ambari-kerb-2-3-2-2.html">
                Create the JAAS Configuration Files
              </Href>
              to set up your configurations. Then, do the following:
            </RichText>
            <List ListMarker="Numeric" xy:guid="e8a679ca-ad7c-446c-a07d-d22cbb88da91">
              <ItemBlock>
                <Item>
                  <ItemPara>Log into the Ambari server host.</ItemPara>
                  <RichText>
                    Ambari Server should not be running when you do this. Edit configuration files before you start
                    Ambari Server the first time or, stop the Ambari Server, edit the files, then re-start Ambari
                    Server.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Run the following, specific setup-security command and answer the prompts:</ItemPara>
                  <RichText>
                    <InLineTypeThis>ambari-server setup-security</InLineTypeThis>
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Select 5 for<InLineMenuSelection>Setup Ambari kerberos JAAS
                          configuration</InLineMenuSelection>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Enter the Kerberos principal name for the Ambari server you set up earlier.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Enter the path to the keytab for the Ambari principal.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Restart Ambari Server:</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server restart</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="ec1f472e-3232-4a81-acc5-b3ef236f4737">
          <Title>Deploying JCE Policy Archives on the Ambari Server</Title>
          <ParaBlock xy:guid="e48576db-de34-43ec-8d7b-c2273836d5f6">
            <RichText>On a secure cluster having no internet access, you must deploy the Java Cryptography Extension
              (JCE) security policy.jar files on the Ambari Server, before setting up your Ambari server with a custom
              JDK.
            </RichText>
            <RichText>
              When you<Xref InsideTargetRef="a9927c0e-595d-45b8-b574-a2d401685ccd">enable security</Xref>, Ambari
              distributes the JCE.jars to all appropriate hosts in your cluster.
            </RichText>
            <RichText>
              To obtain and deploy the JCE.jar files appropriate for the JDK version in your cluster on your
              Ambari-server host,
            </RichText>
            <List ListMarker="Numeric" xy:guid="0622b652-2bbb-4db1-a6f9-6cde3d1f8b63">
              <ItemBlock>
                <Item>
                  <ItemPara>Download the archive from one of the following locations</ItemPara>
                  <RichText>
                    <Emph>For JDK 1.6</Emph>
                    :
                    <Href UrlTarget="http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html">
                      http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html
                    </Href>
                  </RichText>
                  <RichText>
                    <Emph>For JDK 1.7</Emph>
                    :
                    <Href UrlTarget="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">
                      http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html
                    </Href>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Save the archive in a temporary location.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Copy the archive to
                    <InLineCode>/var/lib/ambari-server/resources</InLineCode>
                    on the Ambari server.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:guid="46c7aacd-58f5-4f93-ab29-e5c5bd42209d">
      <Title>Advanced Security Options for Ambari</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="87f26b2c-361d-407a-b4a0-b855ee795e49">
        <ParaBlock xy:guid="c7dd9379-a963-445b-9f92-0844aa69b4b8">
          <RichText>This section describes several security options for an Ambari-monitored-and-managed Hadoop
            cluster.
          </RichText>
          <List ListMarker="Bullet" xy:guid="0bcd07f0-a53e-4ad4-a87b-7b84ccdb2999">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="59ed617d-03bc-4d41-964a-fec60deaa043">Setting Up LDAP or Active Directory
                    Authentication
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a33359d6-2802-45a8-90c9-fc3fd20c9753">Encrypt Database and LDAP Passwords
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="2d711515-048d-4662-89ff-222d2ce3e1be">Set Up Security for Ambari</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7ee44c15-f6a4-4a22-890c-442c5edde87c">Set Up Two-Way SSL Between Ambari Server
                    and Ambari Agents
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="b810db92-97de-4d4e-a905-239e2b8a2a04">
        <Title>Setting Up Ambari for LDAP or Active Directory Authentication</Title>
        <ParaBlock xy:guid="23300fc2-2bda-47e4-9829-7f1b08f6b79b">
          <RichText>By default Ambari uses an internal database as the user store for authentication and authorization.
            If you want to configure LDAP or Active Directory (AD) external authentication, you need to
            <Xref InsideTargetRef="59ed617d-03bc-4d41-964a-fec60deaa043">collect the following information</Xref>
            and<Xref InsideTargetRef="443fec0b-ef35-4829-bab9-14b83a416e4c">run a setup command</Xref>.
          </RichText>
          <RichText>
            Also, you must synchronize your LDAP users and groups into the Ambari DB to be able to manage authorization
            and permissions against those users and groups.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="59ed617d-03bc-4d41-964a-fec60deaa043">
          <Title>Setting Up LDAP User Authentication</Title>
          <ParaBlock xy:guid="7af8968f-b639-4c0d-8813-aadabfcb7ef4">
            <RichText>The following table details the properties and values you need to know to set up LDAP
              authentication.
            </RichText>
            <CustomNote xy:guid="d9516bd7-604b-460e-9d7a-2d8c3343d7ae">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="df6bffa2-8485-4763-bd2d-6fbc90689dd3"/>
              <SimpleBlock>
                <RichText>
                  If you are going to set
                  <InLineCode>bindAnonymously</InLineCode>
                  to false (the default), you need to make sure you have an LDAP Manager name and password set up. If
                  you are going to use SSL, you need to make sure you have already set up your certificate and keys.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <Table align="" border="false" width="100" xy:guid="25d000ad-c4c4-4fd5-9e6b-a73b48ff04b4">
              <TblTitle>Ambari Server LDAP Properties</TblTitle>
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Property</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Values</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Description</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.primaryUrl</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>server:port</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The hostname and port for the LDAP or AD server. Example: my.ldap.server:389</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.secondaryUrl</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>server:port</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The hostname and port for the secondary LDAP or AD server. Example:
                        my.secondary.ldap.server:389 This is an optional value.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.useSSL</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>true or false</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>If true, use SSL when connecting to the LDAP or AD server.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.usernameAttribute</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[LDAP attribute]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The attribute for username. Example: uid</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.baseDn</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[Distinguished Name]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The root Distinguished Name to search in the directory for users. Example:
                        ou=people,dc=hadoop,dc=apache,dc=org
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.bindAnonymously</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>true or false</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>If true, bind to the LDAP or AD server anonymously</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.managerDn</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[Full Distinguished Name]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>If Bind anonymous is set to false, the Distinguished Name (âDNâ) for the manager.
                        Example: uid=hdfs,ou=people,dc=hadoop,dc=apache,dc=org
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.managerPassword</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[password]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>If Bind anonymous is set to false, the password for the manager</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.userObjectClass
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[LDAP Object Class]
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The object class that is used for users.
                        Example: organizationalPerson
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.groupObjectClass</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[LDAP Object Class]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The object class that is used for groups.
                        Example: groupOfUniqueNames
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.groupMembershipAttr</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[LDAP attribute]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The attribute for group membership.
                        Example: uniqueMember
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>authentication.ldap.groupNamingAttr</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>[LDAP attribute]</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The attribute for group name.</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
          <Topic xy:guid="443fec0b-ef35-4829-bab9-14b83a416e4c">
            <Title>Configure Ambari to use LDAP Server</Title>
            <ParaBlock xy:guid="b864eb15-752b-4179-8089-67906dda324b">
              <RichText>If the LDAPS server certificate is signed by a trusted Certificate Authority, there is no need
                to import the certificate into Ambari so this section does not apply to you. If the LDAPS server
                certificate is self-signed, or is signed by an unrecognized certificate authority such as an internal
                certificate authority, you must import the certificate and create a keystore file. The following example
                creates a keystore file at /keys/ldaps-keystore.jks, but you can create it anywhere in the file system:

                Run the LDAP setup command on the Ambari server and answer the prompts, using the information you
                collected above:
              </RichText>
              <List ListMarker="Numeric" xy:guid="009ef882-b016-4d17-933b-284d83695d91">
                <ItemBlock>
                  <Item>
                    <ItemPara>
                      <InLineTypeThis>mkdir /keys</InLineTypeThis>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>
                      <InLineTypeThis>$JAVA_HOME/bin/keytool -import -trustcacerts -alias root -file
                        $PATH_TO_YOUR_LDAPS_CERT -keystore /keys/ldaps-keystore.jks
                      </InLineTypeThis>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Set a password when prompted. You will use this during ambari-server setup-ldap.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>
                <InLineTypeThis>
                  ambari-server setup-ldap
                </InLineTypeThis>
              </RichText>
              <List ListMarker="Numeric" xy:guid="dabfd9fa-bcb4-40a2-9d5e-d323393ac97d">
                <ItemBlock>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>Primary URL*</InLineMenuSelection>
                      prompt, enter the server URL and port you collected above. Prompts marked with an asterisk are
                      required values.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>Secondary URL</InLineMenuSelection>
                      prompt, enter the secondary server URL and port. This value is optional.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>Use SSL*</InLineMenuSelection>
                      prompt, enter your selection.
                      <Emph>
                        <Italic>If using LDAPS</Italic>
                      </Emph>
                      , enter<InLineTypeThis>true</InLineTypeThis>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>User name attribute*</InLineMenuSelection>
                      prompt, enter your selection. The default value is<InLineCode>uid</InLineCode>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>Base DN*</InLineMenuSelection>
                      prompt, enter your selection.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>Bind anonymously*</InLineMenuSelection>
                      prompt, enter your selection.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the
                      <InLineMenuSelection>Manager DN*</InLineMenuSelection>
                      prompt, enter your selection if you have set
                      <InLineCode>bind.Anonymously</InLineCode>
                      to false.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the<InLineMenuSelection>Enter the Manager Password*</InLineMenuSelection>prompt, enter
                      the password for your LDAP manager.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the Enter the
                      <InLineTypeThis>userObjectClass*</InLineTypeThis>
                      prompt, enter the object class that is used for users.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the Enter the
                      <InLineMenuSelection>groupObjectClass</InLineMenuSelection>
                      <InLineTypeThis>*</InLineTypeThis>
                      prompt, enter the object class that is used for groups.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the Enter the
                      <InLineMenuSelection>groupMembershipAttr</InLineMenuSelection>
                      <InLineTypeThis>*</InLineTypeThis>
                      prompt, enter the attribute for group membership.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>At the Enter the
                      <InLineMenuSelection>groupNamingAttr</InLineMenuSelection>
                      <InLineTypeThis>*</InLineTypeThis>
                      prompt, enter the attribute for group name.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>If you set
                      <InLineMenuSelection>Use SSL*</InLineMenuSelection>
                      = true in step 3, the following prompt appears:
                      <InLineMenuSelection>Do you want to provide custom TrustStore for Ambari?</InLineMenuSelection>
                    </ItemPara>
                    <RichText>Consider the following options and respond as appropriate.</RichText>
                    <SubList ListMarker="Bullet">
                      <ItemBlock>
                        <Item>
                          <ItemPara>
                            <Emph>More secure option:</Emph>
                            If using a self-signed certificate that you do not want imported to the existing JDK
                            keystore, enter<InLineTypeThis>y</InLineTypeThis>.
                          </ItemPara>
                          <RichText>
                            For example, you want this certificate used only by Ambari, not by any other applications
                            run by JDK on the same host.
                          </RichText>
                          <RichText>
                            If you choose this option, additional prompts appear. Respond to the additional prompts as
                            follows:
                          </RichText>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>At the
                                  <InLineMenuSelection>TrustStore type</InLineMenuSelection>
                                  prompt, enter<InLineTypeThis>jks</InLineTypeThis>.
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>At the<InLineMenuSelection>Path to TrustStore file</InLineMenuSelection>
                                  prompt, enter
                                  <InLineTypeThis>/keys/ldaps-keystore.jks</InLineTypeThis>
                                  (or the actual path to your keystore file).
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>At the
                                  <InLineMenuSelection>Password for TrustStore</InLineMenuSelection>
                                  prompt, enter the password that you defined for the keystore.
                                </ItemPara>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                        <Item>
                          <ItemPara>
                            <Emph>Less secure option:</Emph>
                            If using a self-signed certificate that you want to import and store in the existing,
                            default JDK keystore, enter<InLineTypeThis>n</InLineTypeThis>.
                          </ItemPara>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>Convert the SSL certificate to X.509 format, if necessary, by executing the
                                  following command:
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>openssl x509 -in slapd.pem -out</InLineTypeThis>
                                  <SyntaxArg>&lt;slapd.crt&gt;</SyntaxArg>
                                </RichText>
                                <RichText>Where
                                  <SyntaxArg>&lt;slapd.crt&gt;</SyntaxArg>
                                  is the path to the X.509 certificate.
                                </RichText>
                              </Item>
                              <Item>
                                <ItemPara>Import the SSL certificate to the existing keystore, for example the default
                                  jre certificates storage, using the following instruction:
                                </ItemPara>
                                <RichText>
                                  <InLineTypeThis>/usr/jdk64/jdk1.7.0_45/bin/keytool -import -trustcacerts -file
                                    slapd.crt -keystore /usr/jdk64/jdk1.7.0_45/jre/lib/security/cacerts
                                  </InLineTypeThis>
                                </RichText>
                                <RichText>Where Ambari is set up to use JDK 1.7. Therefore, the certificate must be
                                  imported in the JDK 7 keystore.
                                </RichText>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>Review your settings and if they are correct, select<InLineTypeThis>y</InLineTypeThis>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Start or restart the Server</ItemPara>
                    <RichText>
                      <InLineTypeThis>ambari-server restart</InLineTypeThis>
                    </RichText>
                    <RichText>Initially the users you have enabled all have Ambari User privileges. Ambari Users can
                      read metrics, view service status and configuration, and browse job information. For these new
                      users to be able to start or stop services, modify configurations, and run smoke tests, they need
                      to be Admins. To make this change, as an Ambari Admin, use<InLineMenuSelection>Manage Ambari &gt;
                        Users &gt; Edit</InLineMenuSelection>. For instructions, see Managing Users and Groups.
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="1dfdf893-6022-4244-95e1-8c27a4f4a987">
            <Title>Synchronizing LDAP Users and Groups</Title>
            <ParaBlock xy:guid="c06bb3e6-716b-47b5-9ebe-1044fd78968a">
              <RichText>Run the LDAP synchronize command and answer the prompts to initiate the sync:

                <InLineTypeThis>ambari-server sync-ldap [option]</InLineTypeThis>
              </RichText>
              <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                          xy:guid="ab48c381-eb7e-4404-be39-ab5043ecd992">
                <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                      xy:guid="ae67eb59-9ee3-446c-b37f-ce299f16a41c"/>
                <SimpleBlock>
                  <RichText>To perform this operation, your Ambari Server must be running and you must be an Ambari
                    Admin.
                  </RichText>
                </SimpleBlock>
              </CustomNote>
              <RichText>The utility provides three options for synchronization:</RichText>
              <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                    xy:guid="c7877411-1bee-4f72-83df-dacba566ce9e">
                <ItemBlock>
                  <Item>
                    <ItemPara>Specific set of users and groups, or</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Synchronize the existing users and groups in Ambari with LDAP, or</ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>All users and groups</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="0b1fad1b-bee7-45f2-84fc-31d112faae67">
            <Title>Specific Set of Users and Groups</Title>
            <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                       xy:guid="50a244d7-fd84-43bf-9005-d52228afe304">
              <RichText><InLineTypeThis>
                ambari-server sync-ldap --users users.txt --groups groups.txt

              </InLineTypeThis>Use this option to synchronize a specific set of users and groups from LDAP into Ambari.
                Provide the command a text file of comma-separated users and groups, and those LDAP entities will be
                imported and synchronized with Ambari.
              </RichText>
              <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                          xy:guid="1328668a-35d1-4790-bd92-fcdb797fbe7e">
                <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                      xy:guid="60b2fd2b-49d5-414f-8da7-014d98f1f2cc"/>
                <SimpleBlock>
                  <RichText>Group membership is determined using the Group Membership Attribute specified during
                    setup-ldap.
                  </RichText>
                </SimpleBlock>
              </CustomNote>
            </ParaBlock>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="87d166c3-69a7-4de6-845c-e4e71e59d560">
              <Title>Existing Users and Groups</Title>
              <ParaBlock xy:guid="60d726f3-58d0-4475-87af-9165890f9759">
                <RichText>
                  <InLineTypeThis>ambari-server sync-ldap --existing</InLineTypeThis>

                  After you have performed a synchronization of a<Xref
                        InsideTargetRef="0b1fad1b-bee7-45f2-84fc-31d112faae67">specific set of users and groups</Xref>,
                  you use this option to synchronize only those entities that are in Ambari with LDAP. Users will be
                  removed from Ambari if they no longer exist in LDAP, and group membership in Ambari will be updated to
                  match LDAP.
                </RichText>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="07ae2840-162a-42a8-990b-58ca75191419">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="624b0ea8-2ad5-4d1d-a976-8bb749dffda3"/>
                  <SimpleBlock>
                    <RichText>Group membership is determined using the Group Membership Attribute specified during
                      setup-ldap.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </ParaBlock>
            </Topic>
            <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
                   xy:guid="6ac20c88-9af5-45e4-8f04-627d9d3b06ff">
              <Title>All Users and Groups
              </Title>
              <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                         xy:guid="ba94a7b3-4b17-4217-b96b-3dcc7c6beeee">
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="27ec69a2-9725-47b4-a038-080d62a2ab33">
                  <Icon thumbWidth="50" uri="Icons/Important.png"
                        xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="fb0a44ed-177c-45c3-b662-c4bb0ead554b"/>
                  <SimpleBlock>
                    <RichText>Only use this option if you are sure you want to synchronize all users and groups from
                      LDAP into Ambari. If you only want to synchronize a subset of users and groups, use a
                      <Xref InsideTargetRef="0b1fad1b-bee7-45f2-84fc-31d112faae67">specific set of users and groups
                      </Xref>
                      option.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <RichText>
                  <InLineTypeThis>
                    ambari-server sync-ldap --all
                  </InLineTypeThis>

                  This will import all entities with matching LDAP user and group object classes into Ambari.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="a33359d6-2802-45a8-90c9-fc3fd20c9753">
        <Title>Optional: Encrypt Database and LDAP Passwords</Title>
        <ParaBlock xy:guid="53c0da8d-dbcd-4079-9078-76fa23b9e4f6">
          <RichText>By default the passwords to access the Ambari database and the LDAP server are stored in a plain
            text configuration file. To have those passwords encrypted, you need to run a special setup command.
          </RichText>
          <RichText>
            Ambari Server should not be running when you do this: either make the edits before you start Ambari Server
            the first time or bring the server down to make the edits.
          </RichText>
          <List ListMarker="Numeric" xy:guid="17d0bd28-7d03-457e-bae0-065cade6dbc7">
            <ItemBlock>
              <Item>
                <ItemPara>On the Ambari Server, run the special setup command and answer the prompts:</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server setup-security</InLineTypeThis>
                </RichText>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Select
                        <InLineTypeThis>4</InLineTypeThis>
                        for<InLineMenuSelection>Encrypt passwords stored in ambari.properties file</InLineMenuSelection>
                        .
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Provide a master key for encrypting the passwords. You are prompted to enter the key
                        twice for accuracy.
                      </ItemPara>
                      <RichText>If your passwords are encrypted, you need access to the master key to start Ambari
                        Server.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>You have three options for maintaining the master key:</ItemPara>
                      <SubList ListMarker="Bullet">
                        <ItemBlock>
                          <Item>
                            <ItemPara>At the
                              <InLineMenuSelection>Persist</InLineMenuSelection>
                              prompt, select<InLineTypeThis>y</InLineTypeThis>. This stores the key in a file on the
                              server.
                            </ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Create an environment variable
                              <SyntaxArg>AMBARI_SECURITY_MASTER_KEY</SyntaxArg>
                              and set it to the key.
                            </ItemPara>
                          </Item>
                          <Item>
                            <ItemPara>Provide the key manually at the prompt on server start up.</ItemPara>
                          </Item>
                        </ItemBlock>
                      </SubList>
                    </Item>
                    <Item>
                      <ItemPara>Start or restart the Server</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-server restart</InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="5abd2218-9077-4891-aacd-4dd6c5af2190">
          <Title>Reset Encryption</Title>
          <ParaBlock xy:guid="9131889c-9d0e-41f8-b555-be99425518d2">
            <RichText>There may be situations in which you want to:</RichText>
            <List ListMarker="Bullet" xy:guid="6f5a7653-4117-432f-8a4b-50e80552184f">
              <ItemBlock>
                <Item>
                  <ItemPara>
                    <Xref InsideTargetRef="b09964dd-afb4-4c0d-a237-92654fe0b269">Remove encryption entirely</Xref>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara><Xref InsideTargetRef="212003ef-107e-4e56-8f84-0388f8383175">Change the current master
                    key</Xref>, either because the key has been forgotten or because you want to change the current key
                    as a part of a security routine.
                  </ItemPara>
                  <RichText>Ambari Server should not be running when you do this.</RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
          <Topic xy:guid="b09964dd-afb4-4c0d-a237-92654fe0b269">
            <Title>Remove Encryption Entirely</Title>
            <ParaBlock xy:guid="c37ada11-17d9-48f7-8535-9673926a2187">
              <RichText>To reset Ambari database and LDAP passwords to a completely unencrypted state:</RichText>
              <List ListMarker="Numeric" xy:guid="361b7c17-f132-4012-a2de-2a7f9c63dd13">
                <ItemBlock>
                  <Item>
                    <ItemPara>On the Ambari host, open
                      <InLineCode>/etc/ambari-server/conf/ambari.properties</InLineCode>
                      with a text editor and set this property
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>security.passwords.encryption.enabled=false</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Delete
                      <InLineCode>/var/lib/ambari-server/keys/credentials.jceks</InLineCode>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Delete
                      <InLineCode>/var/lib/ambari-server/keys/master</InLineCode>
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>You must now reset the database password and, if necessary, the LDAP password. Run
                      <Xref InsideTargetRef="77031023-81db-4b1c-9434-2b68372a9920">ambari-server setup</Xref>
                      and
                      <Xref InsideTargetRef="b810db92-97de-4d4e-a905-239e2b8a2a04">ambari-server setup-ldap</Xref>
                      again.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
          <Topic xy:guid="212003ef-107e-4e56-8f84-0388f8383175">
            <Title>Change the Current Master Key</Title>
            <ParaBlock xy:guid="91a01141-3264-4bf3-a93e-f0413b8f49d1">
              <RichText>To change the master key:</RichText>
              <List ListMarker="Bullet" xy:guid="68070b47-eda8-45e0-8696-3ea206712144">
                <ItemBlock>
                  <Item>
                    <ItemPara>
                      <Emph>If</Emph>
                      you know the current master key or if the current master key has been persisted:
                    </ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Re-run the encryption setup command and follow the prompts.</ItemPara>
                          <RichText>
                            <InLineTypeThis>ambari-server setup-security</InLineTypeThis>
                          </RichText>
                          <SubList ListMarker="Numeric">
                            <ItemBlock>
                              <Item>
                                <ItemPara>Select
                                  <InLineTypeThis>4</InLineTypeThis>
                                  for<InLineMenuSelection>Encrypt passwords stored in ambari.properties
                                    file</InLineMenuSelection>.
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>Enter the current master key when prompted if necessary (if it is not
                                  persisted or set as an environment variable).
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>At the
                                  <InLineMenuSelection>Do you want to reset Master Key</InLineMenuSelection>
                                  prompt, enter<InLineTypeThis>yes</InLineTypeThis>.
                                </ItemPara>
                              </Item>
                              <Item>
                                <ItemPara>At the prompt, enter the new master key and confirm.</ItemPara>
                              </Item>
                            </ItemBlock>
                          </SubList>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>
                      <Emph>If</Emph>
                      you do
                      <Emph>not</Emph>
                      know the current master key:
                    </ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Remove encryption entirely, as described<Xref
                                  InsideTargetRef="b09964dd-afb4-4c0d-a237-92654fe0b269">here</Xref>.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Re-run
                            <InLineCode>ambari-server setup-security</InLineCode>
                            as described<Xref InsideTargetRef="2d711515-048d-4662-89ff-222d2ce3e1be">here</Xref>.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Start or restart the Ambari Server.</ItemPara>
                          <RichText>
                            <InLineTypeThis>ambari-server restart</InLineTypeThis>
                          </RichText>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="2d711515-048d-4662-89ff-222d2ce3e1be">
        <Title>Optional: Set Up Security for Ambari</Title>
        <ParaBlock xy:guid="2bad83ba-b4c8-4524-b007-c9ededbc00fb">
          <RichText>There are four ways you can increase the security settings for your Ambari server installation.
          </RichText>
          <CustomNote xy:guid="34690088-7722-41ed-b698-92224094ddf8">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="02d1941a-7a15-4018-8ed3-1b5561f4004e"/>
            <SimpleBlock>
              <RichText>If you plan to configure your cluster for Kerberos, you may use the
                <Emph>Setup Ambari kerberos JAAS configuration</Emph>
                option, which is described inÂ <Xref InsideTargetRef="a9927c0e-595d-45b8-b574-a2d401685ccd">Setting up
                  Ambari for Kerberos</Xref>.
              </RichText>
            </SimpleBlock>
          </CustomNote>
          <List ListMarker="Bullet" xy:guid="35af52b6-e94a-494f-b920-7389a378fc7e">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="ea066612-27fc-4721-b3cb-84dad66e9492">Set Up HTTPS for Ambari Server</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="499fc76f-c9c7-4e87-a7f5-9ae7f8e8399e">Set Up HTTPS for Ganglia</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="23ce2378-876a-43b5-a94d-aa8951b2c9d4">Set Up HTTPS for Nagios</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a33359d6-2802-45a8-90c9-fc3fd20c9753">Encrypt Database and LDAP Passwords
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="ea066612-27fc-4721-b3cb-84dad66e9492">
          <Title>Set Up HTTPS for Ambari Server</Title>
          <ParaBlock xy:guid="8202b283-6923-4b76-92bf-69e8bcd926d2">
            <RichText>If you want to limit access to the Ambari Server to HTTPS connections, you need to provide a
              certificate. While it is possible to use a self-signed certificate for initial trials, they are not
              suitable for production environments. After your certificate is in place, you must run a special setup
              command.
            </RichText>
            <RichText>
              Ambari Server should not be running when you do this. Either make these changes before you start Ambari
              the first time, or bring the server down before running the setup command.
            </RichText>
            <List ListMarker="Numeric" xy:guid="7f66d9a0-faaf-4eaf-ba53-14eb7c6313d6">
              <ItemBlock>
                <Item>
                  <ItemPara>Log into the Ambari Server host.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Locate your certificate. If you want to create a temporary self-signed certificate, use this
                    as an example:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>openssl genrsa -out $wserver.key 2048
                      openssl req -new -key $wserver.key -out $wserver.csr
                      openssl x509 -req -days 365 -in $wserver.csr -signkey $wserver.key -out $wserver.crt
                    </InLineTypeThis>
                  </RichText>
                  <RichText>
                    Where
                    <InLineCode>$wserver</InLineCode>
                    is the Ambari Server host name.
                  </RichText>
                  <RichText>
                    The certificate you use must be PEM-encoded, not DER-encoded. If you attempt to use a DER-encoded
                    certificate, you see the following error:
                  </RichText>
                  <RichText>
                    <InLineApplicationPrompt>unable to load certificate
                      140109766494024:error:0906D06C:PEM routines:PEM_read_bio:no start line:pem_lib.c
                      :698:Expecting: TRUSTED CERTIFICATE
                    </InLineApplicationPrompt>
                  </RichText>
                  <RichText>
                    You can convert a DER-encoded certificate to a PEM-encoded certificate using the following command:
                  </RichText>
                  <RichText>
                    <InLineTypeThis>openssl x509 -in cert.crt -inform der -outform pem -out cert.pem</InLineTypeThis>
                  </RichText>
                  <RichText>
                    where
                    <InLineCode>cert.crt</InLineCode>
                    is the DER-encoded certificate and
                    <InLineCode>cert.pem</InLineCode>
                    is the resulting PEM-encoded certificate.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Run the special setup command and answer the prompts</ItemPara>
                  <RichText>
                    <InLineTypeThis>ambari-server setup-security</InLineTypeThis>
                  </RichText>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Select
                          <InLineTypeThis>1</InLineTypeThis>
                          for<InLineMenuSelection>Enable HTTPS for Ambari server</InLineMenuSelection>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Respond
                          <InLineTypeThis>y</InLineTypeThis>
                          to
                          <InLineTypeThis>Do you want to configure HTTPS ?</InLineTypeThis>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Select the port you want to use for SSL. The default port number is 8443.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Provide the path to your certificate and your private key. For example, put your
                          certificate and private key in
                          <InLineCode>/etc/ambari-server/certs</InLineCode>
                          with root as the owner or the non-root user you designated during Ambari Server setup for the
                          ambari-server daemon.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Provide the password for the private key.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Start or restart the Server</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server restart</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="499fc76f-c9c7-4e87-a7f5-9ae7f8e8399e">
          <Title>Set Up HTTPS for Ganglia</Title>
          <ParaBlock xy:guid="f5238e68-be25-47e9-88b8-87e8f3dfce11">
            <RichText>If you want Ganglia to use HTTPS instead of the default HTTP to communicate with Ambari Server,
              use the following instructions.
            </RichText>
            <RichText>
              The servers should not be running when you do this: either make the edits before you start Ambari Server
              the first time or bring the servers down to make the edits.
            </RichText>
            <List ListMarker="Numeric" xy:guid="bf47a7d3-a153-463b-94ba-40536b5ba50a">
              <ItemBlock>
                <Item>
                  <ItemPara>Set up the Ganglia server.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Log into the Ganglia server host.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Create a self-signed certificate on the Ganglia server host. For example:</ItemPara>
                        <RichText>
                          <InLineTypeThis>openssl genrsa -out $gserver.key 2048
                            openssl req -new -key $gserver.key -out $gserver.csr
                            openssl x509 -req -days 365 -in $gserver.csr -signkey $gserver.key -out $gserver.crt
                          </InLineTypeThis>
                        </RichText>
                        <RichText>Where
                          <InLineCode>$gserver</InLineCode>
                          is the Ganglia server host name.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Install SSL on the Ganglia server host.</ItemPara>
                        <RichText>
                          <InLineTypeThis>yum install mod_ssl</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Edit the SSL configuration file on the Ganglia server host.</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Using a text editor, open:</ItemPara>
                              <RichText>
                                <InLineCode>
                                  /etc/httpd/conf.d/ssl.conf
                                </InLineCode>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Add lines setting the certificate and key file names to the files you created
                                earlier in this procedure. For example:
                              </ItemPara>
                              <RichText>
                                <InLineTypeThis>SSLCertificateFile $gserver.crt
                                  SSLCertificateKeyFile $gserver.key
                                </InLineTypeThis>
                                <InLineApplicationPrompt>
                                </InLineApplicationPrompt>Where $gserver is the Ganglia server host name.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Disable HTTP access (optional).</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Using a text editor, open:</ItemPara>
                              <RichText>
                                <InLineCode>
                                  /etc/httpd/conf/httpd.conf
                                </InLineCode>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Comment out the port 80 listener:</ItemPara>
                              <RichText>
                                <InLineTypeThis>
                                  # Listen 80
                                </InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Restart the
                          <InLineCode>httpd</InLineCode>
                          service on the Ganglia server host.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>service httpd restart</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Set up and restart the Ambari Server.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Log into the Ambari Server.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Run the special setup command and answer the prompts.</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup-security</InLineTypeThis>
                        </RichText>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Select
                                <InLineTypeThis>2</InLineTypeThis>
                                for<InLineMenuSelection>Enable HTTPS for Ganglia service</InLineMenuSelection>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Respond
                                <InLineTypeThis>y</InLineTypeThis>
                                to
                                <InLineMenuSelection>Do you want to configure HTTPS for Ganglia
                                  service
                                </InLineMenuSelection>
                                <Emph>.</Emph>
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter your TrustStore type. Your options are<InLineCode>jks</InLineCode>,
                                <InLineCode>jceks</InLineCode>, or<InLineCode>pks12</InLineCode>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter the path to your TrustStore file.</ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter the password for your TrustStore and then re-enter to confirm. The
                                password must be at least 6 characters long.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter the path to the Ganglia server certificate file.</ItemPara>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Start or restart the Server</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server restart</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="23ce2378-876a-43b5-a94d-aa8951b2c9d4">
          <Title>Set Up HTTPS for Nagios</Title>
          <ParaBlock xy:guid="d0bc79c3-1906-4e15-a93f-aa3a714e2b70">
            <RichText>
              If you want Nagios to use HTTPS instead of HTTP (the default), use the following instructions.
            </RichText>
            <RichText>
              The servers should not be running when you do this: either make the edits before you start Ambari Server
              the first time or bring the servers down to make the edits.
            </RichText>
            <List ListMarker="Numeric" xy:guid="dcd01789-045e-4f95-9fc7-caf8e48ef8b7">
              <ItemBlock>
                <Item>
                  <ItemPara>Set up the Nagios server.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Log into the Nagios server host.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Create a self-signed certificate on the Nagios server host. For example:</ItemPara>
                        <RichText>
                          <InLineTypeThis>openssl genrsa -out $nserver.key 2048
                            openssl req -new -key $nserver.key -out $nserver.csr
                            openssl x509 -req -days 365 -in $nserver.csr -signkey $nserver.key -out $nserver.crt
                          </InLineTypeThis>
                        </RichText>
                        <RichText>Where
                          <InLineCode>$nserver</InLineCode>
                          is the Nagios server host name.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Install SSL on the Nagios server host.</ItemPara>
                        <RichText>
                          <InLineTypeThis>yum install mod_ssl</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Edit the SSL configuration file on the Nagios server host.</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Using a text editor, open:</ItemPara>
                              <RichText>
                                <InLineCode>/etc/httpd/conf.d/ssl.conf</InLineCode>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Add lines setting the certificate and key file names to the files you created
                                previously in this procedure. For example:
                              </ItemPara>
                              <RichText>
                                <InLineApplicationPrompt>
                                </InLineApplicationPrompt>
                                <InLineTypeThis>SSLCertificateFile $nserver.crt
                                  SSLCertificateKeyFile $nserver.key
                                </InLineTypeThis>
                                <InLineApplicationPrompt>
                                </InLineApplicationPrompt>Where $nserver is the Nagios server host name.
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Disable HTTP access (optional)</ItemPara>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Using a text editor, open:</ItemPara>
                              <RichText>
                                <InLineCode>/etc/httpd/conf/httpd.conf</InLineCode>
                              </RichText>
                            </Item>
                            <Item>
                              <ItemPara>Comment out the port 80 listener:</ItemPara>
                              <RichText>
                                <InLineTypeThis># Listen 80</InLineTypeThis>
                              </RichText>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Restart the
                          <InLineCode>httpd</InLineCode>
                          service on the Nagios server host.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>service httpd restart</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Set up and restart the Ambari Server.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Log into the Ambari Server.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Run the special setup command and answer the prompts.</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup-security</InLineTypeThis>
                        </RichText>
                        <SubList ListMarker="Numeric">
                          <ItemBlock>
                            <Item>
                              <ItemPara>Select
                                <InLineTypeThis>2</InLineTypeThis>
                                for<InLineMenuSelection>Enable HTTPS for Nagios service</InLineMenuSelection>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Respond
                                <InLineTypeThis>y</InLineTypeThis>
                                to<InLineMenuSelection>Do you want to configure HTTPS for Nagios?</InLineMenuSelection>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter your TrustStore type. Your options are<InLineCode>jks</InLineCode>,
                                <InLineCode>jceks</InLineCode>, or<InLineCode>pks12</InLineCode>.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter the path to your TrustStore file.</ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter the password for your TrustStore and then re-enter to confirm. The
                                password must be at least 6 characters long.
                              </ItemPara>
                            </Item>
                            <Item>
                              <ItemPara>Enter the path to the Nagios server certificate file.</ItemPara>
                            </Item>
                          </ItemBlock>
                        </SubList>
                      </Item>
                      <Item>
                        <ItemPara>Start or restart the Server</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server restart</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="7ee44c15-f6a4-4a22-890c-442c5edde87c">
        <Title>Optional: Set Up Two-Way SSL Between Ambari Server and Ambari Agents</Title>
        <ParaBlock xy:guid="4b9523f2-2fcd-4766-9a2c-198ea09c1c33">
          <RichText>Two-way SSL provides a way to encrypt communication between Ambari Server and Ambari Agents. By
            default Ambari ships with Two-way SSL disabled. To enable Two-way SSL:
          </RichText>
          <RichText>
            Ambari Server should not be running when you do this: either make the edits before you start Ambari Server
            the first time or bring the server down to make the edits.
          </RichText>
          <List ListMarker="Numeric" xy:guid="8890bdd9-2af0-4c91-aca8-789d45d448dd">
            <ItemBlock>
              <Item>
                <ItemPara>On the Ambari Server host, open
                  <InLineCode>/etc/ambari-server/conf/ambari.properties</InLineCode>
                  with a text editor.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add the following property:</ItemPara>
                <RichText>
                  <InLineTypeThis>security.server.two_way_ssl = true</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start or restart the Ambari Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server restart</InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <RichText>The Agent certificates are downloaded automatically during Agent Registration.</RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="9b94686d-3bd8-4d8b-bb27-f0af1b546ccf">
        <Title>Optional: Configure Ciphers and Protocols for Ambari Server</Title>
        <ParaBlock xy:guid="93f90fa9-1375-45a6-9ae8-4ba2be74c1c7">
          <RichText>Ambari provides control of ciphers and protocols that are exposed via Ambari Server.</RichText>
          <List ListMarker="Numeric" xy:guid="83398db1-c7dc-4748-ab75-d9eb87c7d8f0">
            <ItemBlock>
              <Item>
                <ItemPara>To disable specific ciphers, you can optionally add a list of the following format to
                  ambari.properties. If you specify multiple ciphers, separate each cipher using a vertical bar |.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>security.server.disabled.ciphers=TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>To disable specific protocols, you can optionally add a list of the following format to
                  ambari.properties. If you specify multiple protocols, separate each protocol using a vertical bar |.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>security.server.disabled.protocols=SSL|SSLv2|SSLv3</InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="4037d421-cc20-4dec-9da1-6f796652c0c9">
      <Title>Troubleshooting Ambari Deployments</Title>
      <Topic xy:guid="51adbb3c-07ba-479f-82e9-7eb9f0e2fe02">
        <Title>Introduction</Title>
        <ParaBlock xy:guid="9fcb9efd-d112-473b-a9ba-e817e94762b1">
          <RichText>The first step in troubleshooting any problem in an Ambari-deploying Hadoop cluster is<Xref
                  InsideTargetRef="523b3bb0-1633-41d0-800e-3e959e49dddf">Reviewing the Ambari Log Files</Xref>.
          </RichText>
          <RichText>Find a recommended solution to a troubleshooting problem in one of the following sections:
          </RichText>
          <List ListMarker="Bullet" xy:guid="ca05c066-cffd-4c34-9e2c-71c0408a20cb">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="4e0a7a1a-a1d8-4573-96b0-78bf29a2bb75">Resolving Ambari Installer Problems
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="4e0a7a1a-a1d8-4573-96b0-78bf29a2bb75">Resolving Cluster Deployment Problems
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="237d7afb-a37e-470b-b2ce-55ae739ac1ac">Resolving General Problems</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="523b3bb0-1633-41d0-800e-3e959e49dddf">
        <Title>Reviewing Ambari Log Files</Title>
        <ParaBlock xy:guid="43946d12-589d-445d-87a7-9d44c6631e53">
          <RichText>Find files that log activity on an Ambari host in the following locations:</RichText>
          <List ListMarker="Bullet" xy:guid="384d623c-1635-4f1a-9ec6-f0b1f0f3e8e4">
            <ItemBlock>
              <Item>
                <ItemPara>Ambari Server logs</ItemPara>
                <RichText>
                  <InLineCode>&lt;your.Ambari.server.host&gt;/var/log/ambari-server/ambari-server.log</InLineCode>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Ambari Agent logs</ItemPara>
                <RichText>
                  <InLineCode>&lt;your.Ambari.agent.host&gt;/var/log/ambari-agent/ambari-agent.log</InLineCode>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Ambari Action logs</ItemPara>
                <RichText>
                  <InLineCode>&lt;your.Ambari.agent.host&gt;/var/lib/ambari-agent/data/</InLineCode>
                </RichText>
                <RichText>
                  This location contains logs for all tasks executed on an Ambari agent host.
                  Each log name includes:
                </RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>commands-N.txt - the command file corresponding to a specific task.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>output-N.txt - the output from the command execution.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>errors-N.txt - error messages.</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="4e0a7a1a-a1d8-4573-96b0-78bf29a2bb75">
        <Title>Resolving Ambari Installer Problems</Title>
        <ParaBlock xy:guid="3a6de322-c57a-4da3-9949-e09b244d1552">
          <RichText>Try the recommended solution for each of the following problems:</RichText>
        </ParaBlock>
        <Topic xy:guid="019e9667-bc21-4e6d-9bea-486fee081b46">
          <Title>Problem: Browser crashed before Install Wizard completes</Title>
          <ParaBlock xy:guid="2e21cb5e-ff33-42f6-afd3-c3b0b01c2e82">
            <RichText>Your browser crashes or you accidentally close your browser before the Install Wizard completes.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="49982961-c205-47de-b276-b8655602434a">
            <Title>Solution</Title>
            <ParaBlock xy:guid="a405e8ab-0699-4044-97af-552ee3ad39c7">
              <RichText>The response to a browser closure depends on where you are in the process:</RichText>
              <List ListMarker="Bullet" xy:guid="8cb04811-38e8-4cff-b897-531ec3a96d3a">
                <ItemBlock>
                  <Item>
                    <ItemPara>The browser closes before you press the
                      <InLineMenuSelection>Deploy</InLineMenuSelection>
                      button.
                    </ItemPara>
                    <RichText>
                      Re-launch the same browser and continue the install process. Using a different browser forces you
                      to re-start the entire process.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>The browser closes after you press
                      <InLineMenuSelection>Deploy</InLineMenuSelection>
                      <Emph>,</Emph>
                      while or after the
                      <InLineMenuSelection>Install, Start, and Test</InLineMenuSelection>
                      screen opens.
                    </ItemPara>
                    <RichText>
                      Re-launch the same browser and continue the process, or log in again, using a different browser.
                      When the
                      <InLineMenuSelection>Install, Start, and Test</InLineMenuSelection>
                      displays, proceed.
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="381997a6-2afe-46c6-ac78-ba5094ce9277">
          <Title>Problem: Install Wizard reports that the cluster install has failed</Title>
          <ParaBlock xy:guid="ef8bb28d-c814-414f-a4e8-f0a44658183a">
            <RichText>The Install, Start, and Test screen reports that the cluster install has failed.</RichText>
          </ParaBlock>
          <Topic xy:guid="1dcbdd6a-3584-4568-8361-b8f8fe75f355">
            <Title>Solution</Title>
            <ParaBlock xy:guid="ba4506f0-af43-4ea4-beb1-3ca789b2c1c2">
              <RichText>The response to a report of install failure depends on the cause of the failure:</RichText>
              <List ListMarker="Bullet" xy:guid="5e396414-9f62-4c46-ad91-bbb3ae423d75">
                <ItemBlock>
                  <Item>
                    <ItemPara>The failure is due to intermittent network connection errors during software package
                      installs.
                    </ItemPara>
                    <RichText>
                      Use the
                      <Emph></Emph>
                      <InLineMenuSelection>Retry</InLineMenuSelection>
                      <Emph></Emph>button on the
                      <InLineMenuSelection>Install, Start, and Test</InLineMenuSelection>
                      screen.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>The failure is due to misconfiguration or other setup errors.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Use the left navigation bar to go back to the appropriate screen. For example,
                            <InLineMenuSelection>Customize Services</InLineMenuSelection>.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Make your changes.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Continue in the normal way.</ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>The failure occurs during the start/test sequence.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Click
                            <InLineMenuSelection>Next</InLineMenuSelection>
                            and
                            <InLineMenuSelection>Complete,</InLineMenuSelection>
                            then proceed to the<InLineMenuSelection>Monitoring Dashboard</InLineMenuSelection>.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Use the
                            <InLineMenuSelection>Services View</InLineMenuSelection>
                            to make your changes.
                          </ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Re-start the service using<InLineMenuSelection>Service Actions</InLineMenuSelection>
                            .
                          </ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                  <Item>
                    <ItemPara>The failure is due to something else.</ItemPara>
                    <SubList ListMarker="Numeric">
                      <ItemBlock>
                        <Item>
                          <ItemPara>Open an SSH connection to the Ambari Server host.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Clear the database. At the command line, type:</ItemPara>
                          <RichText>
                            <InLineApplicationPrompt></InLineApplicationPrompt>
                            <InLineTypeThis>ambari-server reset</InLineTypeThis>
                            <InLineApplicationPrompt></InLineApplicationPrompt>
                          </RichText>
                        </Item>
                        <Item>
                          <ItemPara>Clear your browser cache.</ItemPara>
                        </Item>
                        <Item>
                          <ItemPara>Re-run the Install Wizard.</ItemPara>
                        </Item>
                      </ItemBlock>
                    </SubList>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="6acff1f9-cfcb-4f85-9209-df8b490b69dc">
          <Title>Problem: Ambari Agents May Fail to Register with Ambari Server.</Title>
          <ParaBlock xy:guid="0e04e930-f0d6-4f7e-b8b5-e3f8d46c956a">
            <RichText>When deploying HDP using Ambari 1.4.x or later on RHEL CentOS 6.5, click the âFailedâ link on the
              Confirm Hosts page in the Cluster Install wizard to display the Agent logs. The following log entry
              indicates the SSL connection between the Agent and Server failed during registration:
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                INFO 2014-04-02 04:25:22,669 NetUtil.py:55 - Failed to connect to https://{ambari-server}:8440/cert/ca
                due to [Errno 1] _ssl.c:492: error:100AE081:elliptic curve routines:EC_GROUP_new_by_curve_name:unknown
                group
              </InLineApplicationPrompt>
            </RichText>
            <RichText>
              For more detailed information about this OpenSSL issue, see
              <Href UrlTarget="https://bugzilla.redhat.com/show_bug.cgi?id=1025598">
                https://bugzilla.redhat.com/show_bug.cgi?id=1025598
              </Href>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="c2d96afb-f02f-4dff-8cdf-e14c7b985776">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="770b50d8-5902-4a26-94dd-e9899286b99a">
              <RichText>In certain recent Linux distributions, such as RHEL/Centos/Oracle Linux 6.x, the default value
                of
                <InLineCode>nproc</InLineCode>
                is lower than the value required to deploy the HBase service successfully. If you are deploying HBase,
                change the value of<InLineCode>nproc</InLineCode>:
              </RichText>
              <List ListMarker="Numeric" xy:guid="af5963e8-90b1-44e6-84c2-cdac3ae7650f">
                <ItemBlock>
                  <Item>
                    <ItemPara>Check the OpenSSL library version installed on your host(s):</ItemPara>
                    <RichText>
                      <InLineTypeThis>rpm -qa | grepopenssl openssl-1.0.1e-15.el6.x86_64</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>If the output reads
                      <InLineApplicationPrompt>openssl-1.0.1e-15.x86_64 (1.0.1 build 15),</InLineApplicationPrompt>
                      you must upgrade the OpenSSL library. To upgrade the OpenSSL library, run the following command:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>yum upgrade openssl</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Verify you have the newer version of OpenSSL (1.0.1 build 16):</ItemPara>
                    <RichText>
                      <InLineTypeThis>rpm -qa | grep opensslopenssl-1.0.1e-16.el6.x86_64</InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Restart Ambari Agent(s) and click
                      <InLineMenuSelection>Retry -&gt; Failed</InLineMenuSelection>
                      in the wizard user interface.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="4e4b5e6e-3270-4fa3-9c33-f20c4c13714a">
          <Title>Problem: The âyum install ambari-serverâ Command Fails</Title>
          <ParaBlock xy:guid="c93cdb10-6006-4327-9e69-76c29ea01915">
            <RichText>You are unable to get the initial install command to run.</RichText>
          </ParaBlock>
          <Topic xy:guid="83591c16-7156-4857-a86b-592926024331">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="1cc5f49c-c510-4168-823d-0d3285aa2032">
              <RichText>You may have incompatible versions of some software components in your environment. See Meet
                Minimum System Requirements in Installing HDP Using Ambari for more information, then make any necessary
                changes.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="436cce37-d804-4cc1-a9dc-9061c042139f">
          <Title>Problem: HDFS Smoke Test Fails</Title>
          <ParaBlock xy:guid="fb354cf0-708f-4062-ab71-01823f4ea763">
            <RichText>If your DataNodes are incorrectly configured, the smoke tests fail and you get this error message
              in the DataNode logs:
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                DisallowedDataNodeException
                org.apache.hadoop.hdfs.server.protocol.
                DisallowedDatanodeException
              </InLineApplicationPrompt>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="e1928dcf-e6b2-449c-9fde-cb009fc2c053">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="9611e653-34f9-4b59-a009-4c4123bc831c">
              <List ListMarker="Numeric" xy:guid="72ad16ac-45e6-469e-8584-ad4cd33512dd">
                <ItemBlock>
                  <Item>
                    <ItemPara>Make sure that reverse DNS look-up is properly configured for all nodes in your cluster.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Make sure you have the correct FQDNs when specifying the hosts for your cluster. Do not
                      use IP addresses - they are not supported.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Restart the installation process.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="c30515a6-ee40-4659-a864-2e52b8135eb9">
          <Title>Problem: yum Fails on Free Disk Space Check</Title>
          <ParaBlock xy:guid="2fa55b9f-738e-4dff-b2d2-9e3dc3da6f71">
            <RichText>If you boot your Hadoop DataNodes with/as a ramdisk, you must disable the free space check for yum
              before doing the install. If you do not disable the free space check, yum will fail with the following
              error:
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                Fail: Execution of '/usr/bin/yum -d 0 -e 0 -y install unzip' returned 1. Error Downloading Packages:
                unzip-6.0-1.el6.x86_64: Insufficient space in download directory /var/cache/yum/x86_64/6/base/packages
                * free 0
                * needed 149 k
              </InLineApplicationPrompt>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="06d03d06-db9b-4a27-a464-8ebaf06b30f9">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="e2c62b75-4823-4975-bc4b-fccaa0e9bee6">
              <RichText>To disable free space check, update the DataNode image with a directive in<InLineCode>
                /etc/yum.conf</InLineCode>:
              </RichText>
              <RichText>
                <InLineTypeThis>
                  diskspacecheck=0
                </InLineTypeThis>
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="76477c38-4d18-4c6c-9f34-677d6cc424b2">
          <Title>Problem: A service with a customized service user is not appearing properly in Ambari Web</Title>
          <ParaBlock xy:guid="e74647a4-64d2-4a56-87c7-e02ec27948a7">
            <RichText>You are unable to monitor or manage a service in Ambari Web when you have created a customized
              service user name with a hyphen, for example,<InLineCode>hdfs-user</InLineCode>.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="c12a650f-f3ea-43e0-9e6d-1571dee30ed6">
            <Title>Solution</Title>
            <ParaBlock xy:guid="75deeb70-3440-45e0-96ee-cc8dd96669be">
              <RichText>Hyphenated service user names are not supported. You must re-run the Ambari Install Wizard and
                create a different name.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="237d7afb-a37e-470b-b2ce-55ae739ac1ac">
        <Title>Resolving Cluster Deployment Problems</Title>
        <ParaBlock xy:guid="742ce114-6d95-472b-a418-c4a0b410a3c0">
          <RichText>Try the recommended solution for each of the following problems:.</RichText>
        </ParaBlock>
        <Topic xy:guid="d68a9d73-d876-43f6-b015-f8e0ca728ebf">
          <Title>Problem: Trouble Starting Ambari on System Reboot</Title>
          <ParaBlock xy:guid="54cc4a86-9db3-4d02-a723-3f332cb9464b">
            <RichText>If you reboot your cluster, you must restart the Ambari Server and all the Ambari Agents
              manually.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="0f68e06f-cb44-49a3-9a7c-8c03ae30009a">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="ee87f175-a577-4ae1-a9d2-da11a3ba9ffe">
              <RichText>Log in to each machine in your cluster separately:</RichText>
              <List ListMarker="Numeric" xy:guid="5e1b20e5-acc9-4ffa-b4c9-3303c35b547d">
                <ItemBlock>
                  <Item>
                    <ItemPara>On the Ambari Server host machine:</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        ambari-server start
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>On each host in your cluster:</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        ambari-agent start
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="ea0d083b-a53a-4e3e-996d-7fea0112710b">
          <Title>Problem: Metrics and Host information display incorrectly in Ambari Web</Title>
          <ParaBlock xy:guid="435b60ad-6441-43c5-ba1d-0a8ccbb13bfe">
            <RichText>Charts appear incorrectly or not at all despite being available in the native Ganglia interface or
              Host health status is displayed incorrectly.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="877cc066-d5b6-42a4-bc8e-eb89abf2d1c5">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="33eefec8-f858-4364-b0e4-9e6c4537945c">
              <RichText>All the hosts in your cluster and the machine from which you browse to Ambari Web must be in
                sync with each other. The easiest way to assure this is to enable NTP.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="5ae6b90f-8611-4bc6-a222-a6db3ba062c9">
          <Title>Problem: On SUSE 11 Ambari Agent crashes within the first 24 hours</Title>
          <ParaBlock xy:guid="5fa5b00b-6f56-4e5f-b1a0-a0a3617e0d52">
            <RichText>SUSE 11 ships with Python version 2.6.0-8.12.2 which contains a known defect that causes this
              crash.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="d731beea-af90-4e2b-a54c-cdbfed53a00e">
            <Title>Solution:</Title>
            <ParaBlock xy:guid="fe56219b-0285-4680-aac0-8e2041c93b08">
              <RichText>Upgrade to Python version 2.6.8-0.15.1.</RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="39377cc2-bec2-4bba-b726-a809342550d2">
          <Title>Problem: Attempting to Start HBase REST server causes either REST server or Ambari Web to fail</Title>
          <ParaBlock xy:guid="e3c42dba-4950-49e3-b404-3ef47189d55b">
            <RichText>
              As an option you can start the HBase REST server manually after the install process is complete. It can be
              started on any host that has the HBase Master or the Region Server installed. If you install the REST
              server on the same host as the Ambari server, the http ports will conflict.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="ad462166-9636-4d09-9138-adc24a0babf1">
            <Title>Solution</Title>
            <ParaBlock xy:guid="21777210-3c7c-453c-86c8-695e3002bf28">
              <RichText>In starting the REST server, use the -p option to set a custom port.
                Use the following command to start the REST server.
                <InLineTypeThis>/usr/lib/hbase/bin/hbase-daemon.sh start rest -p
                  &lt;custom_port_number&gt;</InLineTypeThis>
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="2c2d833d-7dae-4719-87ab-d6af5ad93e9d">
          <Title>Problem: Multiple Ambari Agent processes are running, causing re-register</Title>
          <ParaBlock xy:guid="13d6ab20-794e-4a24-84bf-4d48719a56f8">
            <RichText>On a cluster host
              <InLineCode>ps aux | grep ambari-agent</InLineCode>
              shows more than one agent process running. This causes Ambari Server to get incorrect ids from the host
              and forces Agent to restart and re-register.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="b786f051-abdb-410d-b770-0b8350ece747">
            <Title>Solution</Title>
            <ParaBlock xy:guid="652023b7-dae8-4b93-b685-0aceaf822a48">
              <RichText>On the affected host, kill the processes and restart.</RichText>
              <List ListMarker="Numeric" xy:guid="45a8b7cc-3f52-4164-b963-a79720ba454d">
                <ItemBlock>
                  <Item>
                    <ItemPara>Kill the Agent processes and remove the Agent PID files found here:<InLineCode>
                      /var/run/ambari-agent/ambari-agent.pid</InLineCode>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Restart the Agent process:</ItemPara>
                    <RichText>
                      <InLineTypeThis>ambari-agent start</InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="fa11e56a-8ab0-4605-9942-9abfe64f86fd">
          <Title>Problem: Some graphs do not show a complete hour of data until the cluster has been running for an
            hour
          </Title>
          <ParaBlock xy:guid="e63779fc-40f1-4253-9d0d-b1895630b50d">
            <RichText>When you start a cluster for the first time, some graphs, such as
              <InLineMenuSelection>Services View &gt; HDFS</InLineMenuSelection>
              and<InLineMenuSelection>Services View &gt; MapReduce</InLineMenuSelection>, do not plot a complete hour of
              data. Instead, they show data only for the length of time the service has been running. Other graphs
              display the run of a complete hour.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="8354d54a-697b-4c22-bb8e-6368eee398b7">
            <Title>Solution</Title>
            <ParaBlock xy:guid="9a6b9250-17a2-4eaa-91f8-70f06d49a7a9">
              <RichText>Let the cluster run. After an hour all graphs will show a complete hour of data.</RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="8bae6be5-1433-4f47-9511-626cdfdf2c42">
          <Title>Problem: Ambari stops MySQL database during deployment, causing Ambari Server to crash.</Title>
          <ParaBlock xy:guid="1c88abcd-ed06-41d8-b3db-600b727ef124">
            <RichText>The Hive Service uses MySQL Server by default. If you choose MySQL server as the database on the
              Ambari Server host as the managed server for Hive, Ambari stops this database during deployment and
              crashes.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="abad780a-7701-4b5b-95c2-c0769d7b8418">
            <Title>Solution</Title>
            <ParaBlock xy:guid="a8529852-278a-4a57-8834-8ffa5244e573">
              <RichText>If you plan to use the default MySQL Server setup for Hive and use MySQL Server for Ambari -
                make sure that the two MySQL Server instances are different.
              </RichText>
              <RichText>If you plan to use the same MySQL Server for Hive and Ambari - make sure to choose the existing
                database option for Hive.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="6215bc37-eea0-47f1-8c4e-8575cbf1543d">
          <Title>Problem: Service Fails with Unknown Host Exception</Title>
          <ParaBlock xy:guid="397c5964-2cb1-40ce-b0ae-711a25e97f9c">
            <RichText>JVM networkaddress.cache negative.ttl default setting of 10 (never cache) may result in DNS
              failure. Long, or multiple queries running on the JVM may fail. Occurs in Java 6,7, and 8.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="c592efd5-5c86-4459-a4d6-b245b9ff2723">
            <Title>Solution</Title>
            <ParaBlock xy:guid="0adcbd17-a200-4b99-8d46-d38b80c39dcc">
              <RichText>Appropriate values for networkaddress.cache negative ttl depend on various system factors,
                including network traffic, cluster size, and resource availability. You can set Java VM options in an
                Ambari-installed cluster using the following procedure:
              </RichText>
              <List ListMarker="Numeric" xy:guid="dc02da9a-1336-40e0-9e06-4c3c8585cd1a">
                <ItemBlock>
                  <Item>
                    <ItemPara>Edit the template for hadoop-env.sh file. Ambari deploys the template file on your cluster
                      in the following location:
                    </ItemPara>
                    <RichText>
                      <InLineCode>
                        /var/lib/ambari-server/resources/stacks/
                      </InLineCode>
                      <SyntaxArg>&lt;stack.Name&gt;</SyntaxArg>
                      <InLineCode>/</InLineCode>
                      <SyntaxArg>&lt;stack.Version&gt;</SyntaxArg>
                      <InLineCode>/hooks/before-START/templates/hadoop-env.sh.j2</InLineCode>
                    </RichText>
                    <RichText>
                      where
                      <SyntaxArg>&lt;stack.Name&gt;</SyntaxArg>
                      and
                      <SyntaxArg>&lt;stack.Version&gt;</SyntaxArg>
                      refer to your specific stack name and version.
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Change the following line in the template to add options to all Hadoop processes, then
                      save the file.
                    </ItemPara>
                    <RichText>
                      <InLineCode>
                        export HADOOP_OPTS="-Djava.net.preferIPv4Stack=true ${HADOOP_OPTS}"
                      </InLineCode>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Restart Ambari server.</ItemPara>
                    <RichText>
                      <InLineTypeThis>
                        ambari-server restart
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>Restart affected services, using the Ambari Web UI.</ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="25fc8a65-f719-4912-a9fa-e61c45822323">
          <Title>Problem: Cluster Install Fails with Groupmod Error</Title>
          <ParaBlock xy:guid="465defbc-b9dc-4d52-9006-211ab756cdde">
            <RichText>
              The cluster fails to install with an error related to running<InLineCode>groupmod</InLineCode>. This can
              occur in environments where groups are managed in LDAP, and not on local Linux machines.
              You may see an error message similar to the following one:
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                Fail: Execution of 'groupmod hadoop' returned 10. groupmod: group 'hadoop' does not exist in /etc/group
              </InLineApplicationPrompt>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="f74c23d9-c100-40e1-aade-223a6a6a276f">
            <Title>Solution</Title>
            <ParaBlock xy:guid="13f09bb5-9bfe-41ef-b833-87ed6aa4e227">
              <RichText>When installing the cluster using the Cluster Installer Wizard, at the
                <InLineMenuSelection>Customize Services</InLineMenuSelection>
                step, select the
                <InLineMenuSelection>Misc</InLineMenuSelection>
                tab and choose the
                <InLineMenuSelection>Skip group modifications during install</InLineMenuSelection>
                option.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="74128cc8-54eb-46e7-a32c-726cb40a0982">
          <Title>Problem: Host registration fails during Agent bootstrap on SLES due to timeout.</Title>
          <ParaBlock xy:guid="8d91d487-547e-44a9-9832-a107e0e70b85">
            <RichText>When using SLES and performing host registration using SSH, the Agent bootstrap may fail due to
              timeout when running the
              <InLineCode>setupAgent.py</InLineCode>
              script. The host on which the timeout occurs will show the following process hanging:
            </RichText>
            <RichText>
              <InLineApplicationPrompt>
                c6401.ambari.apache.org:/etc/ # ps -ef | grep zypper
                root 18318 18317 5 03:15 pts/1 00:00:00 zypper -q search -s --match-exact ambari-agent
              </InLineApplicationPrompt>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="93ba2a06-614f-4e09-a1ed-26b523cac51f">
            <Title>Solution</Title>
            <ParaBlock xy:guid="191d4f28-d10e-4b9d-b9e5-5eeb4801f817">
              <List ListMarker="Numeric" xy:guid="338c4552-9bab-4da4-8fc2-582e56e67b06">
                <ItemBlock>
                  <Item>
                    <ItemPara>If you have a repository registered that is prompting to accept keys, via user
                      interaction, you may see the hang and timeout. In this case, run
                      <InLineTypeThis>zypper refresh</InLineTypeThis>
                      and confirm all repository keys are accepted for the zypper command to work without user
                      interaction.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>Another alternative is to perform manual Agent setup and not use SSH for host
                      registration. This option does not require that Ambari call zypper without user interaction.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="49f23b95-c579-4083-ac48-ddd9f0d9b25d">
          <Title>Problem: Host Check Fails if Transparent Huge Pages (THP) is not disabled.</Title>
          <ParaBlock xy:guid="1b48b690-f026-412a-a7e4-5df71a5d84fc">
            <RichText>
              When installing Ambari on CentOS6.x using the Cluster Installer Wizard at the Host Checks step, one or
              more host checks may fail if you have not disabled Transparent Huge Pages on all hosts.
            </RichText>
            <RichText><InLineApplicationPrompt>
            </InLineApplicationPrompt>Host Checks will warn you when a failure occurs.
              <InLineApplicationPrompt>
              </InLineApplicationPrompt>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="6a93c6cf-fa22-4cb5-a8d0-5b4b483d07de">
            <Title>Solution</Title>
            <ParaBlock xy:guid="3521b13b-0d85-41ef-80cc-b7ee597260b6">
              <RichText>Disable THP.
                On all hosts,
              </RichText>
              <List ListMarker="Numeric" xy:guid="03bbe204-03c5-4eea-8d05-81ced926978a">
                <ItemBlock>
                  <Item>
                    <ItemPara>Add the following command to your
                      <InLineCode>/etc/rc.local</InLineCode>
                      file:
                    </ItemPara>
                    <RichText>
                      <InLineTypeThis>if test -f /sys/kernel/mm/transparent_hugepage/defrag; then
                        echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag
                        fi
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                  <Item>
                    <ItemPara>To confirm, reboot the host then run the following command:</ItemPara>
                    <RichText>
                      <InLineTypeThis>$ cat /sys/kernel/mm/transparent_hugepage/enabled
                        always madvise [never]
                      </InLineTypeThis>
                    </RichText>
                  </Item>
                </ItemBlock>
              </List>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="c5c5030a-ca27-4d81-99c0-ed74e60569c4">
        <Title>Resolving General Problems</Title>
        <Topic xy:guid="34e51e7a-3c79-4e3e-94e4-cf95fad63850">
          <Title>Problem: Hive developers may encounter an exception error message during Hive Service Check</Title>
          <ParaBlock xy:guid="2100fc88-2c8a-464f-914c-d8d6b3fd7fca">
            <RichText>MySQL is the default database used by the Hive metastore. Depending on several factors, such as
              the version and configuration of MySQL, a Hive developer may see an exception message similar to the
              following one:
            </RichText>
            <RichText>
              <InLineApplicationPrompt>An exception was thrown while adding/validating classes) : Specified key was too
                long; max key length is 767 bytes
              </InLineApplicationPrompt>
            </RichText>
          </ParaBlock>
          <Topic xy:guid="30c2a8c3-5fef-420d-99ae-293c1b367273">
            <Title>Solution</Title>
            <ParaBlock xy:guid="051348ea-2a18-4e78-b1b2-939548beeb26">
              <RichText>Administrators can resolve this issue by altering the Hive metastore database to use the Latin1
                character set, as shown in the following example:
                <InLineTypeThis>mysql&gt; ALTER DATABASE</InLineTypeThis>
                <SyntaxArg>&lt;metastore.database.name&gt;</SyntaxArg>
                <InLineTypeThis>character set latin1;</InLineTypeThis>
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="886f3311-7fb1-48af-95db-4a9bad194e0c">
          <Title>Problem: API calls for PUT, POST, DELETE respond with a "400 - Bad Request"</Title>
          <ParaBlock xy:guid="c4f97099-5740-4ab9-b21c-a0f4dac1712a">
            <RichText>Removing a registered host not added to a cluster. curl command and REST API calls require a
              header element.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="92e43eb4-92a4-4e16-a581-ad29a7cdb325">
            <Title>Solution</Title>
            <ParaBlock xy:guid="d1b9344d-a9f0-4d83-80d9-2d3d2661abb3">
              <RichText>Starting with Ambari 1.4.2, you must include the "X-Requested-By" header with the REST API
                calls.
              </RichText>
              <RichText>For example, if using curl, include the
                <InLineCode>-H "X-Requested-By: ambari"</InLineCode>
                option.
                <InLineTypeThis>curl -u admin:admin -H "X-Requested-By: ambari" -X DELETE http://&lt;ambari-host&gt;:8080/api/v1/hosts/host1</InLineTypeThis>
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="98fcd077-cf39-4075-ac30-264e3028fb49">
          <Title>Problem: Enabling NameNode HA wizard fails on the "Initialize JournalNode" step.</Title>
          <ParaBlock xy:guid="12fde198-0dd5-471f-8d39-27fbcde421da">
            <RichText>After upgrading to Ambari 1.6.1 and attempting to enable NameNode HA in a HDP 2.x Stack-based
              cluster, the HA wizard fails to complete with an error during the "Initialize JournalNode" step. This
              failure situation can also occur if your cluster was created using a Blueprint.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="03f10e7b-ce60-4fc9-bcd8-f86d0400f829">
            <Title>Solution</Title>
            <ParaBlock xy:guid="0d80609e-f090-4f2f-8c8c-b656404c8ea0">
              <RichText>Using the Ambari REST API, you need to create JournalNode and ZKFC service components. This API
                can also be called prior to launching the NameNode HA wizard to avoid the wizard failing.
              </RichText>
              <RichText>
                <InLineTypeThis>
                  curl --user admin:admin -H "X-Requested-By: ambari" -i -X POST -d
                  '{"components":[{"ServiceComponentInfo":{"component_name":"JOURNALNODE"}},{"ServiceComponentInfo":{"component_name":"ZKFC"}}]}'
                  http://
                </InLineTypeThis>
                <SyntaxArg>&lt;ambari.server&gt;</SyntaxArg>
                <InLineTypeThis>:8080/api/v1/clusters/</InLineTypeThis>
                <SyntaxArg>&lt;c1.name&gt;</SyntaxArg>
                <InLineTypeThis>/services?ServiceInfo/service_name=HDFS</InLineTypeThis>
              </RichText>
              <RichText>
                Replace
                <SyntaxArg>&lt;ambari.server&gt;</SyntaxArg>
                and
                <SyntaxArg>&lt;c1.name&gt;</SyntaxArg>
                with your Ambari Server hostname and cluster name respectively.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
        <Topic xy:guid="81807403-92db-4d74-9e45-75349a1908c6">
          <Title>Problem: When using HDP 1.3 Stack, alerts do not clear on TaskTracker decommission/recommission.
          </Title>
          <ParaBlock xy:guid="e129095b-7497-47d4-acd0-0eb28bcbbb1a">
            <RichText>After decommissioning a TaskTracker, a host alert is shown as critical for the TaskTracker
              detecting the web UI is inaccessible. As part of decommissioning MapReduce shuts down the TaskTracker web
              UI but not the process.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="b89e37e6-918a-4048-be9a-6c295298a4a9">
            <Title>Solution</Title>
            <ParaBlock xy:guid="4409de7f-fb71-47a6-86d4-b9fac87779d0">
              <RichText>
                After decommissioning, the user must also stop the TaskTracker via Ambari. Now, on a recommission, the
                TaskTracker will be in the state, ready to start. When started, the TaskTracker web UI will come back
                up, and the alert will be dismissed.
              </RichText>
            </ParaBlock>
          </Topic>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:guid="209adcf8-90ae-4a2a-8256-9cabedd8707c">
      <Title>Installing Ambari Agents Manually</Title>
      <Topic xy:guid="ff15b838-7902-4658-83f1-f53c9fe547c1">
        <Title>
          Download the Ambari Repo
        </Title>
        <ParaBlock xy:guid="561fdd04-d2e4-4190-89a4-f50a009167e0">
          <RichText>Select the OS family running on your installation host.</RichText>
          <Tabs xy:schema-version="Core/Definitions/Tabs.xsd#core-3.9-0" xy:guid="da493dcb-bd54-47c3-be85-65a8715b4248">
            <Properties Orientation="Horizontal"/>
            <Tab>
              <Label>RHEL/CentOS/Oracle Linux 6</Label>
              <Content>
                <RichText>
                  On a server host that has Internet access, use a command line editor to perform the following steps:
                </RichText>
                <List ListMarker="Numeric" xy:guid="77b2fa53-e2b7-443a-a999-1fd43655b320">
                  <ListPreamble>
                    <Emph>RHEL/CentOS/Oracle Linux 6</Emph>
                  </ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <InLineCode>&lt;username&gt;</InLineCode>
                        is your user name and
                        <InLineCode>&lt;fqdn&gt;</InLineCode>
                        is the fully qualified domain name of your server host.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.</ItemPara>
                      <RichText>
                        <InLineTypeThis>wget -nv
                          http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo -O
                          /etc/yum.repos.d/ambari.repo
                        </InLineTypeThis>
                      </RichText>
                      <CustomNote xy:guid="d773a721-2e27-45c9-ae65-87173ee8a48b">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="63dd4ff8-abfd-444d-92a2-3f225344edfd"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.repo</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm that the repository is configured by checking the repo list.</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum repolist</InLineTypeThis>
                        You should see values similar to the following for Ambari repositories in the list.
                      </RichText>
                      <RichText>
                        Version values vary, depending on the installation.
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="dc3c81d6-7222-4301-b6db-c45baf13b3ad">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo id</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo name</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>status</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI.1.7.0-1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>5</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-6 - Base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>6,518</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>extras</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-6 - Extras</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>15</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-6 - Updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>209</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs the default PostgreSQL Ambari database.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Enter
                        <InLineTypeThis>y</InLineTypeThis>
                        when prompted to to confirm transaction and dependency checks.
                      </ItemPara>
                      <RichText>A successful installation displays output similar to the following:
                        <InLineApplicationPrompt>Installing : postgresql-libs-8.4.20-1.el6_5.x86_64 1/4
                          Installing : postgresql-8.4.20-1.el6_5.x86_64 2/4
                          Installing : postgresql-server-8.4.20-1.el6_5.x86_64 3/4
                          Installing : ambari-server-1.7.0-135.noarch 4/4
                          Verifying : postgresql-server-8.4.20-1.el6_5.x86_64 1/4
                          Verifying : postgresql-libs-8.4.20-1.el6_5.x86_64 2/4
                          Verifying : ambari-server-1.7.0-135.noarch 3/4
                          Verifying : postgresql-8.4.20-1.el6_5.x86_64 4/4

                          Installed:
                          ambari-server.noarch 0:1.7.0-135

                          Dependency Installed:
                          postgresql.x86_64 0:8.4.20-1.el6_5 postgresql-libs.x86_64 0:8.4.20-1.el6_5
                          postgresql-server.x86_64 0:8.4.20-1.el6_5

                          Complete!
                        </InLineApplicationPrompt>
                      </RichText>
                      <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                  xy:guid="22138c71-2d64-4189-9750-9559ecdad8d1">
                        <Icon thumbWidth="50" uri="Icons/Note.png"
                              xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                              xy:guid="2095aeb9-2cbb-44b5-b481-808d9aae8e13"/>
                        <SimpleBlock>
                          <RichText>Accept the warning about trusting the Hortonworks GPG Key. That key will be
                            automatically downloaded and used to validate packages from Hortonworks. You will see the
                            following message:

                            <InLineApplicationPrompt>Importing GPG key 0x07513CAD:
                              Userid: "Jenkins (HDP Builds) &lt;jenkin@hortonworks.com&gt;"
                              From :
                              http://s3.amazonaws.com/dev.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
                            </InLineApplicationPrompt>
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>SLES 11</Label>
              <Content>
                <RichText>On a server host that has Internet access, use a command line editor to perform the following
                  steps:
                </RichText>
                <List ListMarker="Numeric" xy:guid="1e4e0d36-578b-4d14-9646-a5854155ed24">
                  <ListPreamble>
                    <Emph>SLES 11</Emph>
                  </ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <InLineCode>&lt;username&gt;</InLineCode>
                        is your user name and
                        <InLineCode>&lt;fqdn&gt;</InLineCode>
                        is the fully qualified domain name of your server host.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.
                        <InLineTypeThis>wget -nv
                          http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                          /etc/zypp/repos.d/ambari.repo
                        </InLineTypeThis>
                      </ItemPara>
                      <CustomNote xy:guid="2140a4e6-0631-444b-996c-dc25d4410cc5">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="49ec460c-d027-452b-a0cd-ab84b7bc84ea"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.repo</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm the downloaded repository is configured by checking the repo list.</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper repos</InLineTypeThis>
                        You should see the Ambari repositories in the list.
                      </RichText>
                      <RichText>
                        Version values vary, depending on the installation.
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="68072478-bce3-4ea6-b382-f93f4b1f10c2">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width="43"/>
                          <TblCol width="15"/>
                          <TblCol width="17"/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Alias</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Name</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Enabled</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Refresh</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI.1.7.0-1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>No</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>http-demeter.uni-regensburg.de-c997c8f9</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>SUSE-Linux-Enterprise-Software-Development-Kit-11-SP1 11.1.1-1.57</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>opensuse</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>OpenSuse</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Yes</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper install ambari-server</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Enter
                        <InLineTypeThis>y</InLineTypeThis>
                        when prompted to to confirm transaction and dependency checks.
                      </ItemPara>
                      <RichText>
                        <InLineApplicationPrompt>A successful installation displays output similar to the following:
                          Retrieving package postgresql-libs-8.3.5-1.12.x86_64 (1/4), 172.0 KiB (571.0 KiB unpacked)
                          Retrieving: postgresql-libs-8.3.5-1.12.x86_64.rpm [done (47.3 KiB/s)]
                          Installing: postgresql-libs-8.3.5-1.12 [done]
                          Retrieving package postgresql-8.3.5-1.12.x86_64 (2/4), 1.0 MiB (4.2 MiB unpacked)
                          Retrieving: postgresql-8.3.5-1.12.x86_64.rpm [done (148.8 KiB/s)]
                          Installing: postgresql-8.3.5-1.12 [done]
                          Retrieving package postgresql-server-8.3.5-1.12.x86_64 (3/4), 3.0 MiB (12.6 MiB unpacked)
                          Retrieving: postgresql-server-8.3.5-1.12.x86_64.rpm [done (452.5 KiB/s)]
                          Installing: postgresql-server-8.3.5-1.12 [done]
                          Updating etc/sysconfig/postgresql...
                          Retrieving package ambari-server-1.7.0-135.noarch (4/4), 99.0 MiB (126.3 MiB unpacked)
                          Retrieving: ambari-server-1.7.0-135.noarch.rpm [done (3.0 MiB/s)]
                          Installing: ambari-server-1.7.0-135 [done]
                          ambari-server 0:off 1:off 2:off 3:on 4:off 5:on 6:off
                        </InLineApplicationPrompt>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>UBUNTU 12</Label>
              <Content>
                <RichText>On a server host that has Internet access, use a command line editor to perform the following
                  steps:
                </RichText>
                <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                      xy:guid="ba08fa5b-4379-441d-8d10-0061d27a1677">
                  <ListPreamble>
                    <Emph>UBUNTU 12</Emph>
                  </ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <InLineCode>&lt;username&gt;</InLineCode>
                        is your user name and
                        <InLineCode>&lt;fqdn&gt;</InLineCode>
                        is the fully qualified domain name of your server host.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.
                        <InLineTypeThis>wget -nv
                          http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list -O
                          /etc/apt/sources.list.d/ambari.list

                          apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD

                          apt-get update
                        </InLineTypeThis>
                      </ItemPara>
                      <CustomNote xy:guid="a61691ac-36f0-4a59-abcb-98a85dd4ebad">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="628b004c-e603-4670-b8aa-9ca1a8584e3a"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.list</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm that Ambari packages downloaded successfully by checking the package name
                        list.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-cache pkgnames
                        </InLineTypeThis>
                        You should see the Ambari packages in the list.
                      </RichText>
                      <RichText>
                        Version values vary, depending on the installation.
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="99a634fa-1187-4c8e-b15d-2f0dcf34fa91">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Alias</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Name</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI-dev-2.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 2.x</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-get install ambari-server</InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Label>
              <Content>
                <RichText>
                  On a server host that has Internet access, use a command line editor to perform the following steps:
                </RichText>
                <List ListMarker="Numeric" xy:guid="cacfebd4-6f0d-44b2-9e06-b596803cef24">
                  <ListPreamble>
                    <Emph>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Emph>
                  </ListPreamble>
                  <ItemBlock>
                    <Item>
                      <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                        <InLineTypeThis>sudo su -</InLineTypeThis>
                        where
                        <InLineCode>&lt;username&gt;</InLineCode>
                        is your user name and
                        <InLineCode>&lt;fqdn&gt;</InLineCode>
                        is the fully qualified domain name of your server host.
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Download the Ambari repository file to a directory on your installation host.
                        <InLineTypeThis>
                          wget -nv http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo -O
                          /etc/yum.repos.d/ambari.repo
                        </InLineTypeThis>
                      </ItemPara>
                      <CustomNote xy:guid="fab96f24-97b8-45ce-b5eb-02d644874ca6">
                        <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                              xy:guid="61ab1f0f-ecd1-47b5-b3d4-ccabb4f817c8"/>
                        <SimpleBlock>
                          <RichText>Do not modify the
                            <InLineCode>ambari.repo</InLineCode>
                            file name. This file is expected to be available on the Ambari Server host during Agent
                            registration.
                          </RichText>
                        </SimpleBlock>
                      </CustomNote>
                    </Item>
                    <Item>
                      <ItemPara>Confirm the repository is configured by checking the repo list.</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum repolist</InLineTypeThis>
                        You should see the Ambari repositories in the list.
                      </RichText>
                      <RichText>
                        <InLineApplicationPrompt>AMBARI.1.7.0-1.x | 951 B 00:00
                          AMBARI.1.7.0-1.x/primary | 1.6 kB 00:00
                          AMBARI.1.7.0-1.x 5/5
                          epel | 3.7 kB 00:00
                          epel/primary_db | 3.9 MB 00:01
                        </InLineApplicationPrompt>
                      </RichText>
                      <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                             xy:guid="ef44d0b0-b93e-41f1-b90f-46ead0bb7162">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader/>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo Id</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>repo Name</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>status</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>AMBARI.1.7.0-1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Ambari 1.x</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>5</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-5 - Base</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>3,667</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>epel</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Extra Packages for Enterprise Linux 5 - x86_64</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>7,614</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>puppet</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Puppet</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>433</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>CentOS-5 - Updates</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>118</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                      <RichText>
                        <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                        <InLineApplicationPrompt></InLineApplicationPrompt>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
          </Tabs>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="f5528b82-648f-4eca-85b3-56004e6652b9">
          <RichText>
            Follow instructions in the section for the operating system that runs on your installation host.
            Use a command line editor to perform each instruction.
          </RichText>
          <List ListMarker="Numeric" xy:guid="77b2fa53-e2b7-443a-a999-1fd43655b320">
            <ListPreamble>
              <Emph>RHEL/CentOS/Oracle Linux 6</Emph>
            </ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <InLineCode>&lt;username&gt;</InLineCode>
                  is your user name and
                  <InLineCode>&lt;fqdn&gt;</InLineCode>
                  is the fully qualified domain name of your server host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.</ItemPara>
                <RichText>
                  <InLineTypeThis>wget -nv
                    http://public-repo-1.hortonworks.com/ambari/centos6/1.x/updates/1.7.0/ambari.repo -O
                    /etc/yum.repos.d/ambari.repo
                  </InLineTypeThis>
                </RichText>
                <CustomNote xy:guid="d773a721-2e27-45c9-ae65-87173ee8a48b">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="63dd4ff8-abfd-444d-92a2-3f225344edfd"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.repo</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm that the repository is configured by checking the repo list.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum repolist</InLineTypeThis>
                  You should see values similar to the following for Ambari repositories in the list.
                </RichText>
                <RichText>
                  Version values vary, depending on the installation.
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="dc3c81d6-7222-4301-b6db-c45baf13b3ad">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo id</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo name</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>status</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI.1.7.0-1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>5</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-6 - Base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>6,518</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>extras</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-6 - Extras</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>15</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-6 - Updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>209</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs the default PostgreSQL Ambari database.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Enter
                  <InLineTypeThis>y</InLineTypeThis>
                  when prompted to to confirm transaction and dependency checks.
                </ItemPara>
                <RichText>A successful installation displays output similar to the following:
                  <InLineApplicationPrompt>Installing : postgresql-libs-8.4.20-1.el6_5.x86_64 1/4
                    Installing : postgresql-8.4.20-1.el6_5.x86_64 2/4
                    Installing : postgresql-server-8.4.20-1.el6_5.x86_64 3/4
                    Installing : ambari-server-1.7.0-135.noarch 4/4
                    Verifying : postgresql-server-8.4.20-1.el6_5.x86_64 1/4
                    Verifying : postgresql-libs-8.4.20-1.el6_5.x86_64 2/4
                    Verifying : ambari-server-1.7.0-135.noarch 3/4
                    Verifying : postgresql-8.4.20-1.el6_5.x86_64 4/4

                    Installed:
                    ambari-server.noarch 0:1.7.0-135

                    Dependency Installed:
                    postgresql.x86_64 0:8.4.20-1.el6_5 postgresql-libs.x86_64 0:8.4.20-1.el6_5
                    postgresql-server.x86_64 0:8.4.20-1.el6_5

                    Complete!
                  </InLineApplicationPrompt>
                </RichText>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="22138c71-2d64-4189-9750-9559ecdad8d1">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="2095aeb9-2cbb-44b5-b481-808d9aae8e13"/>
                  <SimpleBlock>
                    <RichText>Accept the warning about trusting the Hortonworks GPG Key. That key will be automatically
                      downloaded and used to validate packages from Hortonworks. You will see the following message:

                      <InLineApplicationPrompt>Importing GPG key 0x07513CAD:
                        Userid: "Jenkins (HDP Builds) &lt;jenkin@hortonworks.com&gt;"
                        From :
                        http://s3.amazonaws.com/dev.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins
                      </InLineApplicationPrompt>
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
            </ItemBlock>
          </List>
          <List ListMarker="Numeric" xy:guid="1e4e0d36-578b-4d14-9646-a5854155ed24">
            <ListPreamble>
              <Emph>SLES 11</Emph>
            </ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <InLineCode>&lt;username&gt;</InLineCode>
                  is your user name and
                  <InLineCode>&lt;fqdn&gt;</InLineCode>
                  is the fully qualified domain name of your server host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.
                  <InLineTypeThis>wget -nv
                    http://public-repo-1.hortonworks.com/ambari/suse11/1.x/updates/1.7.0/ambari.repo -O
                    /etc/zypp/repos.d/ambari.repo
                  </InLineTypeThis>
                </ItemPara>
                <CustomNote xy:guid="2140a4e6-0631-444b-996c-dc25d4410cc5">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="49ec460c-d027-452b-a0cd-ab84b7bc84ea"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.repo</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm the downloaded repository is configured by checking the repo list.</ItemPara>
                <RichText>
                  <InLineTypeThis>zypper repos</InLineTypeThis>
                  You should see the Ambari repositories in the list.
                </RichText>
                <RichText>
                  Version values vary, depending on the installation.
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="68072478-bce3-4ea6-b382-f93f4b1f10c2">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width="43"/>
                    <TblCol width="15"/>
                    <TblCol width="17"/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Alias</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Name</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Enabled</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Refresh</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI.1.7.0-1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>No</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>http-demeter.uni-regensburg.de-c997c8f9</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>SUSE-Linux-Enterprise-Software-Development-Kit-11-SP1 11.1.1-1.57</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>opensuse</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>OpenSuse</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Yes</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                <RichText>
                  <InLineTypeThis>zypper install ambari-server</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Enter
                  <InLineTypeThis>y</InLineTypeThis>
                  when prompted to to confirm transaction and dependency checks.
                </ItemPara>
                <RichText>
                  <InLineApplicationPrompt>A successful installation displays output similar to the following:
                    Retrieving package postgresql-libs-8.3.5-1.12.x86_64 (1/4), 172.0 KiB (571.0 KiB unpacked)
                    Retrieving: postgresql-libs-8.3.5-1.12.x86_64.rpm [done (47.3 KiB/s)]
                    Installing: postgresql-libs-8.3.5-1.12 [done]
                    Retrieving package postgresql-8.3.5-1.12.x86_64 (2/4), 1.0 MiB (4.2 MiB unpacked)
                    Retrieving: postgresql-8.3.5-1.12.x86_64.rpm [done (148.8 KiB/s)]
                    Installing: postgresql-8.3.5-1.12 [done]
                    Retrieving package postgresql-server-8.3.5-1.12.x86_64 (3/4), 3.0 MiB (12.6 MiB unpacked)
                    Retrieving: postgresql-server-8.3.5-1.12.x86_64.rpm [done (452.5 KiB/s)]
                    Installing: postgresql-server-8.3.5-1.12 [done]
                    Updating etc/sysconfig/postgresql...
                    Retrieving package ambari-server-1.7.0-135.noarch (4/4), 99.0 MiB (126.3 MiB unpacked)
                    Retrieving: ambari-server-1.7.0-135.noarch.rpm [done (3.0 MiB/s)]
                    Installing: ambari-server-1.7.0-135 [done]
                    ambari-server 0:off 1:off 2:off 3:on 4:off 5:on 6:off
                  </InLineApplicationPrompt>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="ba08fa5b-4379-441d-8d10-0061d27a1677">
            <ListPreamble>
              <Emph>UBUNTU 12</Emph>
            </ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <InLineCode>&lt;username&gt;</InLineCode>
                  is your user name and
                  <InLineCode>&lt;fqdn&gt;</InLineCode>
                  is the fully qualified domain name of your server host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.
                  <InLineTypeThis>wget -nv
                    http://public-repo-1.hortonworks.com/ambari/ubuntu12/1.x/updates/1.7.0/ambari.list -O
                    /etc/apt/sources.list.d/ambari.list

                    apt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD

                    apt-get update
                  </InLineTypeThis>
                </ItemPara>
                <CustomNote xy:guid="a61691ac-36f0-4a59-abcb-98a85dd4ebad">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="628b004c-e603-4670-b8aa-9ca1a8584e3a"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.list</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm that Ambari packages downloaded successfully by checking the package name list.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>apt-cache pkgnames
                  </InLineTypeThis>
                  You should see the Ambari packages in the list.
                </RichText>
                <RichText>
                  Version values vary, depending on the installation.
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="99a634fa-1187-4c8e-b15d-2f0dcf34fa91">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Alias</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>Name</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI-dev-2.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 2.x</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                <RichText>
                  <InLineTypeThis>apt-get install ambari-server</InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <List ListMarker="Numeric" xy:guid="cacfebd4-6f0d-44b2-9e06-b596803cef24">
            <ListPreamble>
              <Emph>RHEL/CentOS/ORACLE Linux 5 (DEPRECATED)</Emph>
            </ListPreamble>
            <ItemBlock>
              <Item>
                <ItemPara>Log in to your host as<InLineCode>root</InLineCode>. For example, type:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>ssh &lt;username&gt;@&lt;fqdn&gt;</InLineTypeThis>
                  <InLineTypeThis>sudo su -</InLineTypeThis>
                  where
                  <InLineCode>&lt;username&gt;</InLineCode>
                  is your user name and
                  <InLineCode>&lt;fqdn&gt;</InLineCode>
                  is the fully qualified domain name of your server host.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Download the Ambari repository file to a directory on your installation host.
                  <InLineTypeThis>
                    wget -nv http://public-repo-1.hortonworks.com/ambari/centos5/1.x/updates/1.7.0/ambari.repo -O
                    /etc/yum.repos.d/ambari.repo
                  </InLineTypeThis>
                </ItemPara>
                <CustomNote xy:guid="fab96f24-97b8-45ce-b5eb-02d644874ca6">
                  <Icon name="important" thumbWidth="50" uri="Icons/Important.png"
                        xy:guid="61ab1f0f-ecd1-47b5-b3d4-ccabb4f817c8"/>
                  <SimpleBlock>
                    <RichText>Do not modify the
                      <InLineCode>ambari.repo</InLineCode>
                      file name. This file is expected to be available on the Ambari Server host during Agent
                      registration.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Confirm the repository is configured by checking the repo list.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum repolist</InLineTypeThis>
                  You should see the Ambari repositories in the list.
                </RichText>
                <RichText>
                  <InLineApplicationPrompt>AMBARI.1.7.0-1.x | 951 B 00:00
                    AMBARI.1.7.0-1.x/primary | 1.6 kB 00:00
                    AMBARI.1.7.0-1.x 5/5
                    epel | 3.7 kB 00:00
                    epel/primary_db | 3.9 MB 00:01
                  </InLineApplicationPrompt>
                </RichText>
                <Table align="" border="false" width="" xy:schema-version="Core/Definitions/Table.xsd#core-3.9-0"
                       xy:guid="ef44d0b0-b93e-41f1-b90f-46ead0bb7162">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader/>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo Id</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>repo Name</Emph>
                          </RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>
                            <Emph>status</Emph>
                          </RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>AMBARI.1.7.0-1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Ambari 1.x</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>5</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-5 - Base</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>3,667</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>epel</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Extra Packages for Enterprise Linux 5 - x86_64</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>7,614</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>puppet</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Puppet</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>433</RichText>
                        </Cell>
                      </TableRow>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>CentOS-5 - Updates</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>118</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Install the Ambari bits. This also installs PostgreSQL.</ItemPara>
                <RichText>
                  <InLineTypeThis>yum install ambari-server</InLineTypeThis>
                  <InLineApplicationPrompt></InLineApplicationPrompt>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                          xy:guid="6ec86dcf-ef17-46da-8233-a4106778cae0">
            <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                           xy:guid="d99a3a0f-fdae-42bf-ae72-06c14504da4a">
              <TargetOutput xy:guid="2fd54d9e-2d8b-445b-987f-ab416c890216">Guide</TargetOutput>
            </TargetOutputs>
          </FilterMetadata>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="e8c78e11-18e3-4b8a-b04d-8626e3a94460">
          <CustomNote xy:guid="20421d59-9b68-4f80-bbb5-2651d4201159">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="e1f1800b-abce-46b5-92bd-95eb923ed50c"/>
            <SimpleBlock>
              <RichText>When deploying HDP on a cluster having limited or no Internet access, you should provide access
                to the bits using an alternative method.
              </RichText>
              <List ListMarker="Bullet" xy:guid="f7f2025e-3774-48ba-8dc5-aec3b11f08bc">
                <ItemBlock>
                  <Item>
                    <ItemPara>For more information about setting up local repositories, see<Xref
                            InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Optional: Configure Local
                      Repositories</Xref>.
                    </ItemPara>
                  </Item>
                  <Item>
                    <ItemPara>For more information about obtaining JCE policy archives for secure authentication, see
                      <Xref InsideTargetRef="ec1f472e-3232-4a81-acc5-b3ef236f4737">Deploying JCE Policy Archives on the
                        Ambari Server</Xref>.
                    </ItemPara>
                  </Item>
                </ItemBlock>
              </List>
              <RichText>Ambari Server by default uses an embedded PostgreSQL database. When you install the Ambari
                Server, the PostgreSQL packages and dependencies must be available for install. These packages are
                typically available as part of your Operating System repositories. Please confirm you have the
                appropriate repositories available for the postgresql-server packages.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="ce168039-28fd-49cd-ba4b-455ce949b471">
        <Title>Install the Ambari Agents Manually</Title>
        <ParaBlock xy:guid="1a7d7b23-3b96-4ad5-9fc6-2ea5312c320b">
          <RichText>Use the instructions specific to the OS family running on your agent hosts.</RichText>
          <Tabs xy:guid="6cdfdb08-0521-47ae-8284-82c82f927bae">
            <Properties Orientation="Horizontal"/>
            <Tab>
              <Label>RHEL/CentOS/Oracle Linux 6</Label>
              <Content>
                <List ListMarker="Numeric" xy:guid="c726865b-98a2-4c2f-8db0-6a2f69fb2185">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis></InLineTypeThis>
                        <InLineTypeThis>yum install ambari-agent</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Using a text editor, configure the Ambari Agent by editing the
                        <InLineCode>ambari-agent.ini</InLineCode>
                        file as shown in the following example:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server] hostname=&lt;your.ambari.server.hostname&gt;url_port=8440
                          secured_url_port=8441
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-agent start</InLineTypeThis>
                      </RichText>
                      <RichText>
                        The agent registers with the Server on start.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>SLES 11</Label>
              <Content>
                <List ListMarker="Numeric" xy:guid="3c6400d3-3203-44e9-9dbc-d17f7f69dc38">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis>zypper install ambari-agent</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Configure the Ambari Agent by editing the
                        <InLineCode>ambari-agent.ini</InLineCode>
                        file as shown in the following example:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server]hostname=&lt;your.ambari.server.hostname&gt;url_port=8440secured_url_port=8441</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-agent start</InLineTypeThis>
                      </RichText>
                      <RichText>
                        The agent registers with the Server on start.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>UBUNTU 12</Label>
              <Content>
                <List ListMarker="Numeric" xy:guid="41a2506c-7a6f-4ae4-beec-a5854fc8d336">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis>apt-get install ambari-agent</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Configure the Ambari Agent by editing the
                        <InLineCode>ambari-agent.ini</InLineCode>
                        file as shown in the following example:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server]hostname=&lt;your.ambari.server.hostname&gt;url_port=8440secured_url_port=8441</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-agent start</InLineTypeThis>
                      </RichText>
                      <RichText>
                        The agent registers with the Server on start.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
            <Tab>
              <Label>RHEL/CentOS/Oracle Linux 5 (DEPRECATED)</Label>
              <Content>
                <List ListMarker="Numeric" xy:guid="95eac8a7-8808-47b3-875e-b0f51e60cf1e">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis></InLineTypeThis>
                        <InLineTypeThis>yum install ambari-agent</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Using a text editor, configure the Ambari Agent by editing the
                        <InLineCode>ambari-agent.ini</InLineCode>
                        file as shown in the following example:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server] hostname=&lt;your.ambari.server.hostname&gt;url_port=8440
                          secured_url_port=8441
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                      <RichText>
                        <InLineTypeThis>ambari-agent start</InLineTypeThis>
                      </RichText>
                      <RichText>
                        The agent registers with the Server on start.
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </Content>
            </Tab>
          </Tabs>
        </ParaBlock>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="417a8c89-6db1-405b-84ef-18b6f9693ac4">
          <RichText>RHEL/CentOS/Oracle Linux 6</RichText>
          <List ListMarker="Numeric" xy:guid="c726865b-98a2-4c2f-8db0-6a2f69fb2185">
            <ItemBlock>
              <Item>
                <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis></InLineTypeThis>
                  <InLineTypeThis>yum install ambari-agent</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Using a text editor, configure the Ambari Agent by editing the
                  <InLineCode>ambari-agent.ini</InLineCode>
                  file as shown in the following example:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server] hostname=&lt;your.ambari.server.hostname&gt;url_port=8440
                    secured_url_port=8441
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent start</InLineTypeThis>
                </RichText>
                <RichText>
                  The agent registers with the Server on start.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <RichText>SLES 11</RichText>
          <List ListMarker="Numeric" xy:guid="c726865b-98a2-4c2f-8db0-6a2f69fb2185">
            <ItemBlock>
              <Item>
                <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis></InLineTypeThis>
                  <InLineTypeThis>yum install ambari-agent</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Using a text editor, configure the Ambari Agent by editing the
                  <InLineCode>ambari-agent.ini</InLineCode>
                  file as shown in the following example:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server] hostname=&lt;your.ambari.server.hostname&gt;url_port=8440
                    secured_url_port=8441
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent start</InLineTypeThis>
                </RichText>
                <RichText>
                  The agent registers with the Server on start.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <RichText>UBUNTU 12</RichText>
          <List ListMarker="Numeric" xy:guid="c726865b-98a2-4c2f-8db0-6a2f69fb2185">
            <ItemBlock>
              <Item>
                <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis></InLineTypeThis>
                  <InLineTypeThis>yum install ambari-agent</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Using a text editor, configure the Ambari Agent by editing the
                  <InLineCode>ambari-agent.ini</InLineCode>
                  file as shown in the following example:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server] hostname=&lt;your.ambari.server.hostname&gt;url_port=8440
                    secured_url_port=8441
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent start</InLineTypeThis>
                </RichText>
                <RichText>
                  The agent registers with the Server on start.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <RichText>RHEL/CentOS/Oracle Linux 5 (DEPRECATED)</RichText>
          <List ListMarker="Numeric" xy:guid="c726865b-98a2-4c2f-8db0-6a2f69fb2185">
            <ItemBlock>
              <Item>
                <ItemPara>Install the Ambari Agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis></InLineTypeThis>
                  <InLineTypeThis>yum install ambari-agent</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Using a text editor, configure the Ambari Agent by editing the
                  <InLineCode>ambari-agent.ini</InLineCode>
                  file as shown in the following example:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>vi /etc/ambari-agent/conf/ambari-agent.ini [server] hostname=&lt;your.ambari.server.hostname&gt;url_port=8440
                    secured_url_port=8441
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the agent on every host in your cluster.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent start</InLineTypeThis>
                </RichText>
                <RichText>
                  The agent registers with the Server on start.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <FilterMetadata xy:schema-version="Core/Definitions/Metadata/FilterMetadata.xsd#core-3.9-0"
                          xy:guid="9378af21-935a-44c3-a1ce-327abdc28ff5">
            <TargetOutputs xy:schema-version="Core/Definitions/Metadata/TargetOutputs.xsd#core-3.9-0"
                           xy:guid="1fcccddc-d392-44c3-abf4-d44dfdf7915e">
              <TargetOutput xy:guid="41c997e4-66a5-4338-9894-5745734b0a8e">Guide</TargetOutput>
            </TargetOutputs>
          </FilterMetadata>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="59d918c4-155b-478b-9e18-386c433b3cd0">
      <Title>Customizing HDP Services</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="03e9c186-e35f-47c4-a646-cf07c2b5802e">
        <ParaBlock xy:guid="b9df2ca0-d210-445a-8d2f-975dcbfd1eb5">
          <RichText>You can override the default service settings established by the Ambari install wizard. For
            information about customizing service settings for your HDP Stack version, see one of the following topics:
          </RichText>
          <List ListMarker="Bullet" xy:guid="a72a7b44-3adf-4e8d-95ed-bbbf721fe115">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="eeda7cc9-867e-4485-90cd-9d9c35001c55">Customizing Services for a HDP 2.x
                    Stack
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="6c6f06e3-5645-41fa-9d90-b081b0c7dd2f">Customizing Services for a HDP 1.x
                    Stack
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="eeda7cc9-867e-4485-90cd-9d9c35001c55">
        <Title>Customizing Services for a HDP 2.x Stack</Title>
        <ParaBlock xy:guid="5c7382d8-c017-4129-ab69-b73b7c314154">
          <RichText>Generally, you can customize services for the HDP 2.x Stack by overriding default settings that
            appear in
            <InLineMenuSelection>Services &gt; Configs</InLineMenuSelection>
            for each Service in the Ambari Web GUI.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="54886008-3a0a-486a-a575-f0e7fb4a724c">
          <Title>Defining Service Users and Groups for HDP 2.x</Title>
          <ParaBlock xy:guid="73964f96-0805-4b78-962a-3a74c5c07757">
            <RichText>The individual services in Hadoop run under the ownership of their respective Unix accounts. These
              accounts are known as service users. These service users belong to a special Unix group. "Smoke Test" is a
              service user dedicated specifically for running smoke tests on components during installation using the
              <InLineMenuSelection>Services</InLineMenuSelection>
              View of the Ambari Web GUI. You can also run service checks as the "Smoke Test" user on-demand after
              installation. You can customize any of these users and groups using the
              <InLineMenuSelection>Misc</InLineMenuSelection>
              tab during the
              <InLineMenuSelection>Customize Services</InLineMenuSelection>
              installation step.
            </RichText>
            <CustomNote xy:guid="90aa8586-95f9-4f4e-85f7-6f20c631c10a">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="8785cacc-9cb2-475f-a628-ee407b54e659"/>
              <SimpleBlock>
                <RichText>Use the
                  <InLineMenuSelection>Skip Group Modifications</InLineMenuSelection>
                  option to not modify the Linux groups in the cluster. Choosing this option is typically required if
                  your environment manages groups using LDAP and not on the local Linux machines.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <RichText>If you choose to customize names, Ambari checks to see if these custom accounts already exist. If
              they do not exist, Ambari creates them. The default accounts are always created during installation
              whether or not custom accounts are specified. These default accounts are not used and can be removed
              post-install.
            </RichText>
            <CustomNote xy:guid="8dd9cef3-728f-42d1-bda8-585747a7012a">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="6aa78a92-c31b-4afb-b464-1e44146580a2"/>
              <SimpleBlock>
                <RichText>All new service user accounts, and any existing user accounts used as service users, must have
                  a UID &gt;= 1000.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <Table align="" border="false" width="100" xy:guid="5bb38b2b-5132-4da1-ac70-870cc5ec7c3b">
              <TblTitle>Service Users</TblTitle>
              <TblGroup>
                <TblCol width="13"/>
                <TblCol width="37"/>
                <TblCol width="50"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Service*</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Component</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Default User Account</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Knox</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Knox Gateway</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>knox</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Kafka</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Kafka Broker</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>kafka</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NameNode SecondaryNameNode DataNode</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hdfs</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>YARN</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NodeManager ResourceManager</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>yarn</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>MapReduce2</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HistoryServer</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>mapred</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Tez</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Tez clients</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>tez
                        (Tez is available with HDP 2.1 or 2.2 Stack.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>MasterServer RegionServer</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Hive</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Hive Metastore, HiveServer2</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hive</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HCat</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HCatalog Client</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hcat</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>WebHCat</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>WebHCat Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hcat</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Falcon</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Falcon Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>falcon
                        (Falcon is available with HDP 2.1 or 2.2 Stack.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Storm</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Masters (Nimbus, DRPC Server, Storm REST API, Server, Storm UI Server) Slaves
                        (Supervisors, Logviewers)
                      </RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>storm
                        (Storm is available with HDP 2.1 or 2.2 Stack.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Oozie</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Oozie Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>oozie</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server Ganglia Monitors</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nobody</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>RRDTool (with Ganglia Server)</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>rrdcahed
                        (Created as part of installing RRDTool, which is used to store metrics data collected by
                        Ganglia.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Apache HTTP Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>apache
                        (Created as part of installing Apache HTTP Server, which is used to serve the Ganglia web UI.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>PostgreSQL</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>PostgreSQL (with Ambari Server)</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>postgres
                        (Created as part of installing the default PostgreSQL database with Ambari Server. If you are
                        not using the Ambari PostgreSQL database, this user is not needed.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios
                        (If you plan to use an existing user account named ânagiosâ, that ânagiosâ account must either
                        be in a group named ânagiosâ or you must customize the Nagios Group.)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ZooKeeper</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ZooKeeper</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>zookeeper</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <RichText>
              *For all components, the Smoke Test user performs smoke tests against cluster services as part of the
              install process. It also can perform these on-demand, from the Ambari Web UI. The default user account for
              the smoke test user is ambari-qa.
            </RichText>
            <Table align="" border="false" width="100" xy:guid="8c68ffb8-b605-4581-a334-59fa76b56709">
              <TblTitle>Service Group</TblTitle>
              <TblGroup>
                <TblCol width="14"/>
                <TblCol width="27"/>
                <TblCol width="59"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Service</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Components</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Default Group Account</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>All</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>All</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hadoop</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server Ganglia Monitor</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nobody</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Knox</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Knox Gateway</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>knox</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="77620bdf-162e-4902-a59d-ab18601b9620">
          <Title>Setting Properties That Depend on Service Usernames/Groups</Title>
          <ParaBlock xy:guid="444b11df-3a64-49e8-b396-82434ff639ba">
            <RichText>Some properties must be set to match specific service user names or service groups. If you have
              set up non-default, customized service user names for the HDFS or HBase service or the Hadoop group name,
              you must edit the following properties, using<InLineMenuSelection>Services &gt; Service.Name &gt; Configs
                &gt; Advanced hdfs-ste</InLineMenuSelection>:
            </RichText>
            <Table align="" border="false" width="100" xy:guid="f7ec7c9b-cd0e-49af-8853-d79ee2a8b2b1">
              <TblTitle>HDFS Settings: Advanced</TblTitle>
              <TblGroup>
                <TblCol width="44"/>
                <TblCol width="56"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Property Name</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Value</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.permissions.superusergroup</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The same as the HDFS username. The default is "hdfs"</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.cluster.administrators</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>A single space followed by the HDFS username.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.block.local-path-access.user</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The HBase username. The default is "hbase".</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <Table align="" border="false" width="100" xy:guid="3c53275a-844b-484b-a35a-9473e59a8162">
              <TblTitle>MapReduce Settings: Advanced</TblTitle>
              <TblGroup>
                <TblCol width="46"/>
                <TblCol width="54"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Property Name</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Value</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>mapreduce.cluster.administrators</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>A single space followed by the Hadoop group name.</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
      </Topic>
      <Topic xy:guid="6c6f06e3-5645-41fa-9d90-b081b0c7dd2f">
        <Title>Customizing Services for a HDP 1.x Stack</Title>
        <ParaBlock xy:guid="f37dacc5-2a8d-4ef0-9ff0-1470fa299782">
          <RichText>Generally, you can customize services for the HDP 1.x Stack by overriding default settings that
            appear in the Management Header for each Service in the Ambari Web GUI.
          </RichText>
        </ParaBlock>
        <Topic xy:guid="f05f67b8-9cdb-45bf-8250-08c8cfbc2780">
          <Title>Defining Service Users and Groups for HDP 1.x</Title>
          <ParaBlock xy:guid="3822ea67-edca-41ad-b8dd-79aeecf1bde6">
            <RichText>The individual services in Hadoop run under the ownership of their respective Unix accounts. These
              accounts are known as service users. These service users belong to a special Unix group. "Smoke Test" is a
              service user dedicated specifically for running smoke tests on components during installation using the
              <InLineMenuSelection>Services</InLineMenuSelection>
              View of the Ambari Web GUI. You can also run service checks as the "Smoke Test" user on-demand after
              installation. You can customize any of these users and groups using the
              <InLineMenuSelection>Misc</InLineMenuSelection>
              tab during the
              <InLineMenuSelection>Customize Services</InLineMenuSelection>
              installation step.
            </RichText>
            <CustomNote xy:guid="78ca8ae3-96bd-4562-81d3-9105c7bb8ab4">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="f2acde0e-b084-4129-9df2-1766deb4dec1"/>
              <SimpleBlock>
                <RichText>Use the
                  <InLineMenuSelection>Skip Group Modifications</InLineMenuSelection>
                  option to not modify the Linux groups in the cluster. Choosing this option is typically required if
                  your environment manages groups using LDAP and not on the local Linux machines.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <RichText>If you choose to customize names, Ambari checks to see if these custom accounts already exist. If
              they do not exist, Ambari creates them. The default accounts are always created during installation
              whether or not custom accounts are specified. These default accounts are not used and can be removed
              post-install.
            </RichText>
            <CustomNote xy:guid="9e95f824-9573-4080-9a23-3ba2536b4a49">
              <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="a9ed36cd-7ec0-4579-bc32-7b2dcd38da42"/>
              <SimpleBlock>
                <RichText>All new service user accounts, and any existing user accounts used as service users, must have
                  a UID &gt;= 1000.
                </RichText>
              </SimpleBlock>
            </CustomNote>
            <Table align="" border="false" width="100" xy:guid="fe342cde-2843-4ddd-8285-c5fad56a6ac7">
              <TblTitle>Service Users</TblTitle>
              <TblGroup>
                <TblCol width="13"/>
                <TblCol width="34"/>
                <TblCol width="53"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Service</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Component</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Default User Account</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HDFS</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>NameNode SecondaryNameNode DataNode</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hdfs</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>MapReduce</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>JobTracker HistoryServer TaskTracker</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>mapred</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Hive</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Hive Metastore HiveServer2</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hive</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HCat</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HCatalog Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hcat</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>WebHCat</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>WebHCat Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hcat</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Oozie</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Oozie Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>oozie</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>HBase</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>MasterServer RegionServer</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hbase</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ZooKeeper</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ZooKeeper</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>zookeeper</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Ganglia Server Ganglia Collectors</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nobody</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Nagios Server</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>nagios

                        (If you plan to use an existing user account named "nagios", that "nagios" account must be in a
                        group named "nagios". If you customize this account, that account will be created and put in a
                        group "nagios".)
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Smoke Test</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>All</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>ambari-qa

                        (The Smoke Test user performs smoke tests against cluster services as part of the install
                        process. It also can perform these on-demand from the Ambari Web GUI.)
                      </RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <Table align="" border="false" width="100" xy:guid="568959c9-3d17-4e6a-8792-a28a8f654a0b">
              <TblTitle>Service Group</TblTitle>
              <TblGroup>
                <TblCol width="14"/>
                <TblCol width="37"/>
                <TblCol width="49"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Service</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Components</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Default Group Account</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>All</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>All</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>hadoop</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="0092934e-902f-4379-932c-eefc6fa91a26">
          <Title>Setting Properties That Depend on Service Usernames/Groups</Title>
          <ParaBlock xy:guid="a826f065-a971-488c-88f4-b28e9c76adf9">
            <RichText>Some properties must be set to match specific service user names or service groups. If you have
              set up non-default, customized service user names for the HDFS or HBase service or the Hadoop group name,
              you must edit the following properties, using<InLineMenuSelection>Services &gt; Service.Name &gt; Configs
                &gt; Advanced</InLineMenuSelection>:
            </RichText>
            <Table align="" border="false" width="100" xy:guid="a8251973-f183-4ac2-a692-b5140a291216">
              <TblTitle>HDFS Settings: Advanced</TblTitle>
              <TblGroup>
                <TblCol width="26"/>
                <TblCol width="74"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Property Name</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Value</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.permissions.supergroup</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The same as the HDFS username. The default is "hdfs"</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.cluster.administrators</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>A single space followed by the HDFS username.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>dfs.block.local-path-access.user</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The HBase username. The default is "hbase".</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <Table align="" border="false" width="100" xy:guid="0bb139a6-818f-44ce-acc3-b7f03ac67bb8">
              <TblTitle>MapReduce Settings: Advanced</TblTitle>
              <TblGroup>
                <TblCol width="28"/>
                <TblCol width="72"/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Property Name</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Value</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>mapreduce.tasktracker.group</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>The Hadoop group name. The default is "hadoop".</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>mapreduce.cluster.administrators</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>A single space followed by the Hadoop group name.</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="739c71a6-ab15-401d-a329-9d2ab0c7fea6">
          <Title>Recommended Memory Configurations for the MapReduce Service</Title>
          <ParaBlock xy:guid="88733512-59e9-4a36-ab8b-489d236c8d24">
            <RichText>The following recommendations can help you determine appropriate memory configurations based on
              your usage scenario:
            </RichText>
            <List ListMarker="Bullet" xy:guid="c42a017f-208c-472f-9df0-d3aa63980fee">
              <ItemBlock>
                <Item>
                  <ItemPara>Make sure that there is enough memory for all of the processes. Remember that system
                    processes take around 10% of the available memory.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>For co-deploying an HBase RegionServer and MapReduce service on the same node, reduce the
                    RegionServer's heap size (use the
                    <InLineMenuSelection>HBase Settings &gt; RegionServer &gt; HBase Region Servers maximum Java heap
                      size
                    </InLineMenuSelection>
                    property to modify the RegionServer heap size).
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>For co-deploying an HBase RegionServer and the MapReduce service on the same node, or for
                    memory intensive MapReduce applications, modify the map and reduce slots as suggested in the
                    following example:
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>
              <Emph>EXAMPLE:</Emph>
              For co-deploying an HBase RegionServer and the MapReduce service on a machine with 16GB of available
              memory, the following would be a recommended configuration:
            </RichText>
            <RichText>2 GB: system processes</RichText>
            <RichText>8 GB: MapReduce slots. 6 Map + 2 Reduce slots per 1 GB task</RichText>
            <RichText>4 GB: HBase RegionServer</RichText>
            <RichText>1 GB: TaskTracker</RichText>
            <RichText>1 GB: DataNode</RichText>
            <RichText>To change the number of Map and Reduce slots based on the memory requirements of your application,
              use the following properties:
            </RichText>
            <RichText>
              <Emph>MapReduce Settings: TaskTracker</Emph>
              :
              <InLineCode>Number of Map slots per node</InLineCode>
            </RichText>
            <RichText>
              <Emph>MapReduce Settings: TaskTracker</Emph>
              :
              <InLineCode>Number of Reduce slots per node</InLineCode>
            </RichText>
          </ParaBlock>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:guid="3a7feea7-5ce2-4d27-be90-aa1eeecfc813">
      <Title>Using Custom Host Names</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="09243b65-a941-46b5-a800-60cd664cd19b">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="7f2a4336-a02b-4613-b26c-62187e305981">
          <RichText>You can customize the agent registration host name and the public host name used forâ¨ each host in
            Ambari. Use this capability when "hostname" does not return the public network host name for your machines.
          </RichText>
          <RichText>
            <Xref InsideTargetRef="37533a4c-11a5-4e86-9497-960caa65e3b2">How to Customize the name of a host</Xref>
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="37533a4c-11a5-4e86-9497-960caa65e3b2">
        <Title>How to Customize the name of a host</Title>
        <ParaBlock xy:guid="6ffdc3f5-76e1-4566-a9eb-0184487c5ff8">
          <List ListMarker="Numeric" xy:guid="681351c3-275b-4299-95a3-9f4e8776bf63">
            <ItemBlock>
              <Item>
                <ItemPara>At the
                  <InLineMenuSelection>Install Options</InLineMenuSelection>
                  step in the Cluster Installer wizard, select<InLineMenuSelection>Perform Manual Registration for
                    Ambari Agents</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Install the Ambari Agents manually on each host, as described in<Xref
                        InsideTargetRef="ce168039-28fd-49cd-ba4b-455ce949b471">Install the Ambari Agents Manually</Xref>
                  .
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>To echo the customized name of the host to which the Ambari agent registers, for every host,
                  create a script like the following example, namedâ¨<InLineCode>
                    /var/lib/ambari-agent/hostname.sh</InLineCode>. Be sure to
                  <InLineCode>chmod</InLineCode>
                  the script so it is executable by the Agent.
                  <InLineTypeThis>#!/bin/shâ¨ echo
                  </InLineTypeThis>
                  <SyntaxArg>&lt;ambari_hostname&gt;</SyntaxArg>
                </ItemPara>
                <RichText>
                  where
                  <SyntaxArg>&lt;ambari_hostname&gt;</SyntaxArg>
                  is the host name to use for Agent registration.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Open
                  <InLineCode>/etc/ambari-agent/conf/ambari-agent.ini</InLineCode>
                  on every host, using a text editor.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add to the
                  <InLineCode>[agent]</InLineCode>
                  section the following line:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>
                    hostname_script=/var/lib/ambari-agent/hostname.sh
                  </InLineTypeThis>
                </RichText>
                <RichText>
                  where
                  <InLineCode>/var/lib/ambari-agent/hostname.sh</InLineCode>
                  is the name of your custom echo script.
                </RichText>
              </Item>
              <Item>
                <ItemPara>To generate a public host name for every host, create a script like the following example,
                  named
                  <InLineCode>var/lib/ambari-agent/public_hostname.sh</InLineCode>
                  to show the name for that host in the UI. Be sure to
                  <InLineCode>chmod</InLineCode>
                  the script so it is executable by the Agent.
                  <InLineTypeThis>#!/bin/sh</InLineTypeThis>
                  <SyntaxArg>&lt;hostname&gt;</SyntaxArg>
                  <InLineTypeThis>-f</InLineTypeThis>
                </ItemPara>
                <RichText>
                  where
                  <SyntaxArg> &lt;hostname&gt;</SyntaxArg>
                  is the host name to use for Agent registration.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Open
                  <InLineCode>/etc/ambari-agent/conf/ambari-agent.ini</InLineCode>
                  on every host, using a text editor.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add to the
                  <InLineCode>[agent]</InLineCode>
                  section the following line:
                </ItemPara>
                <RichText>
                  public_hostname_script=/var/lib/ambari-agent/public_hostname.sh
                </RichText>
              </Item>
              <Item>
                <ItemPara>If applicable, add the host names to
                  <InLineCode>/etc/hosts</InLineCode>
                  on every host.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Restart the Agent on every host for these changes to take effect.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent restart</InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="8fe08499-b03e-4d5a-94af-9704fa3c0820">
      <Title>Moving the Ambari Server</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="89c12d40-b978-4640-9380-7afbd83cb454">
        <ParaBlock xy:guid="6ec615a5-6877-48e3-80b7-d71375e513c0">
          <RichText>To transfer an Ambari Server that uses the default, PostgreSQL database to a new host, use the
            following instructions:
          </RichText>
          <List ListMarker="Numeric" xy:guid="3ae1e5bc-8468-4b14-9b6d-e2903206a8ce">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="70abae27-19c7-49c2-a373-fadbed4d8d97">Back up all current data</Xref>
                  - from the original Ambari Server and MapReduce databases.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="6b596c1a-a195-4164-9368-6a60ef5abda5">Update all Agents</Xref>
                  - to point to the new Ambari Server.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="6fb36a70-54ef-4c39-9367-25a58968725d">Install the New Server</Xref>
                  - on a new host and populate databases with information from original Server.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="159e059b-c7f5-4e36-97b2-40bedc1f6060">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="48f4d79a-b914-4c81-86fe-1ad7f1972013"/>
            <SimpleBlock>
              <RichText>If your Ambari database is one of the non-default types, such as Oracle, adjust the database
                backup, restore, and stop/start procedures to match that database type.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="70abae27-19c7-49c2-a373-fadbed4d8d97">
        <Title>Back up Current Data</Title>
        <ParaBlock xy:guid="0892e8df-e68d-4ac6-9845-1607065808dc">
          <List ListMarker="Numeric" xy:guid="7c1a511c-7c9f-4353-80a5-48f0827b0587">
            <ItemBlock>
              <Item>
                <ItemPara>Stop the original Ambari Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server stop</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Create a directory to hold the database backups.</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    cd /tmp
                    mkdir dbdumps
                    cd dbdumps/
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Create the database backups.</ItemPara>
                <RichText>
                  <InLineTypeThis>pg_dump -U</InLineTypeThis>
                  <SyntaxArg>&lt;AMBARI.SERVER.USERNAME&gt;</SyntaxArg>
                  <InLineTypeThis>ambari &gt; ambari.sql Password:</InLineTypeThis>
                  <SyntaxArg>&lt;AMBARI.SERVER.PASSWORD&gt;</SyntaxArg>
                  <InLineTypeThis>
                    pg_dump -U
                  </InLineTypeThis>
                  <SyntaxArg>&lt;MAPRED.USERNAME&gt;</SyntaxArg>
                  <InLineTypeThis>ambarirca &gt; ambarirca.sql Password:</InLineTypeThis>
                  <SyntaxArg>&lt;MAPRED.PASSWORD&gt;</SyntaxArg>
                </RichText>
                <RichText>
                  where<SyntaxArg>&lt;AMBARI.SERVER.USERNAME&gt;</SyntaxArg>,<SyntaxArg>
                  &lt;MAPRED.USERNAME&gt;</SyntaxArg>,<SyntaxArg>&lt;AMBARI.SERVER.PASSWORD&gt;</SyntaxArg>, and
                  <SyntaxArg>&lt;MAPRED.PASSWORD&gt;</SyntaxArg>
                  are the user names and passwords that you set up during installation. Default values are:
                  <InLineCode>ambari-server/bigdata</InLineCode>
                  and<InLineCode>mapred/mapred</InLineCode>.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="6b596c1a-a195-4164-9368-6a60ef5abda5">
        <Title>Update Agents</Title>
        <ParaBlock xy:guid="16bef1f9-ea04-405f-94bf-396419dd30f1">
          <List ListMarker="Numeric" xy:guid="98ffbeb3-b70b-460c-a277-d19cfa219e70">
            <ItemBlock>
              <Item>
                <ItemPara>On each agent host, stop the agent.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent stop</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Remove old agent certificates.</ItemPara>
                <RichText>
                  <InLineTypeThis>rm /var/lib/ambari-agent/keys/*</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Using a text editor, edit
                  <InLineCode>/etc/ambari-agent/conf/ambari-agent.ini</InLineCode>
                  to point to the new host.
                </ItemPara>
                <RichText>
                  [server]
                  hostname=<SyntaxArg>&lt;NEW FULLY.QUALIFIED.DOMAIN.NAME&gt;
                </SyntaxArg>url_port=8440
                  secured_url_port=8441
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="6fb36a70-54ef-4c39-9367-25a58968725d">
        <Title>Install the New Server and Populate the Databases</Title>
        <ParaBlock xy:guid="0204adf2-2002-412a-85cd-eca5ac845a7b">
          <List ListMarker="Numeric" xy:guid="927efc3f-3095-4501-8bf9-719e7859a840">
            <ItemBlock>
              <Item>
                <ItemPara>Install the Server on the new host.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Stop the Server so that you can copy the old database data to the new Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-server stop</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Restart the PostgreSQL instance.</ItemPara>
                <RichText>
                  <InLineTypeThis>service postgresql restart</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Open the PostgreSQL interactive terminal.</ItemPara>
                <RichText>
                  <InLineTypeThis>su - postgres
                    psql
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Using the interactive terminal, drop the databases created by the fresh install.</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    drop database ambari;
                    drop database ambarirca;
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Check to make sure the databases have been dropped.</ItemPara>
                <RichText>
                  <InLineTypeThis>/list</InLineTypeThis>
                </RichText>
                <RichText>
                  The databases should not be listed.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Create new databases to hold the transferred data.</ItemPara>
                <RichText>
                  <InLineTypeThis>create database ambari;
                    create database ambarirca;
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Exit the interactive terminal.</ItemPara>
                <RichText>
                  <InLineTypeThis>^d</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Copy the saved data from
                  <Xref InsideTargetRef="70abae27-19c7-49c2-a373-fadbed4d8d97">Back up Current Data</Xref>
                  to the new Server.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>cd /tmp
                    scp -i &lt;ssh-key&gt; root@
                  </InLineTypeThis>
                  <SyntaxArg>&lt;original.Ambari.Server&gt;</SyntaxArg>
                  <InLineTypeThis>/tmp/dbdumps/*.sql/tmp</InLineTypeThis>
                </RichText>
                <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                            xy:guid="a9d12bbd-a1a0-425d-916f-ff0e70eae21e">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="0ca14830-1e55-4b1b-b582-ab728c4d2dff"/>
                  <SimpleBlock>
                    <RichText>
                      <InLineTypeThis>compress/transfer/uncompress</InLineTypeThis>
                      as needed from source to dest
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
                <RichText>
                  <InLineTypeThis>psql -d ambari -f /tmp/ambari.sql
                    psql -d ambarirca -f /tmp/ambarirca.sql
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Start the new Server.</ItemPara>
                <RichText>
                  <InLineApplicationPrompt>&lt;exit to root&gt;
                  </InLineApplicationPrompt>
                  <InLineTypeThis>ambari-server start</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>On each Agent host, start the Agent.</ItemPara>
                <RichText>
                  <InLineTypeThis>ambari-agent start</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Open Ambari Web. Point your browser to:</ItemPara>
                <RichText>
                  <SyntaxArg>&lt;new.Ambari.Server&gt;</SyntaxArg>
                  <InLineTypeThis>:8080</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Go to
                  <InLineMenuSelection>Services &gt; MapReduce</InLineMenuSelection>
                  and use the Management Header to
                  <Emph>Stop</Emph>
                  and
                  <Emph>Start</Emph>
                  the MapReduce service.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Start other services as necessary.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>
            The new Server is ready to use.
          </RichText>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="20a21438-c3fc-43df-83ae-c4990686cd0a">
      <Title>Configuring LZO Compression</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="88dd453a-920e-456b-a5fb-2354d15aefbc">
        <ParaBlock xy:guid="ff48f531-09e9-43d7-a618-366403303623">
          <RichText>LZO is a lossless data compression library that favors speed over compression ratio. Ambari does not
            install nor enable LZO Compression by default.
            To enable LZO compression in your HDP cluster, you must<Xref
                    InsideTargetRef="b53f37b7-389f-4781-8a2b-eeba4d9de123">Configure core-site.xml for LZO</Xref>.
          </RichText>
          <RichText>
            Optionally, you can implement LZO to optimize Hive queries in your cluster for speed.
            For more information about using LZO compression with Hive, see<Xref
                  InsideTargetRef="53d79874-3b82-4840-a56b-cc400eb9c98e">Running Compression with Hive Queries</Xref>.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="b53f37b7-389f-4781-8a2b-eeba4d9de123">
        <Title>Configure core-site.xml for LZO</Title>
        <ParaBlock xy:guid="17af894b-27c3-4e1f-b286-03c3d04994d8">
          <List ListMarker="Numeric" xy:guid="4f9de18a-686e-427f-a445-ae1a363bfc57">
            <ItemBlock>
              <Item>
                <ItemPara>Browse to<InLineMenuSelection>Ambari Web &gt; Services &gt; HDFS &gt;
                  Configs</InLineMenuSelection>, then expand<InLineMenuSelection>Advanced
                  core-site</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Find the
                  <InLineCode>io.compression.codecs</InLineCode>
                  property key.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Append to the
                  <InLineCode>io.compression.codecs</InLineCode>
                  property key, the following value:
                  <InLineTypeThis>com.hadoop.compression.lzo.LzoCodec,com.hadoop.compression.lzo.LzopCodec
                  </InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add a description of the config modification, then choose Save.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Expand the
                  <InLineCode>Custom core-site.xml</InLineCode>
                  section.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Select<InLineMenuSelection>Add Property</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add to
                  <InLineCode>Custom core-site.xml</InLineCode>
                  the following property key and value
                </ItemPara>
                <Table align="" border="false" width="100" xy:guid="c545db01-f9cd-4fd9-b9b8-a7649fc4f8fa">
                  <TblGroup>
                    <TblCol width=""/>
                    <TblCol width=""/>
                    <TblHeader>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Property Key</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>Property Value</RichText>
                        </Cell>
                      </TableRow>
                    </TblHeader>
                    <TblBody>
                      <TableRow>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>io.compression.codec.lzo.class</RichText>
                        </Cell>
                        <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                          <RichText>com.hadoop.compression.lzo.LzoCodec</RichText>
                        </Cell>
                      </TableRow>
                    </TblBody>
                    <TblFooter/>
                  </TblGroup>
                </Table>
              </Item>
              <Item>
                <ItemPara>Choose<InLineTypeThis>Save</InLineTypeThis>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add a description of the config modification, then choose Save.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Restart the HDFS, MapReduce2 and YARN services.</ItemPara>
                <CustomNote xy:guid="4b0953ce-57a6-4c8c-a062-724934ac96b8">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="2776377e-1dfa-420c-a14d-302af2f87f2c"/>
                  <SimpleBlock>
                    <RichText>If performing a Restart or a Restart All does not start the required package install, you
                      may need to stop, then start the HDFS service to install the necessary LZO packages. Restart is
                      only available for a service in the "Runnning" or "Started" state.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="53d79874-3b82-4840-a56b-cc400eb9c98e">
        <Title>Running Compression with Hive Queries</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="400e173c-6fe5-468b-8011-471e288f4941">
          <RichText>Running Compression with Hive Queries requires creating LZO files. To create LZO files, use one of
            the following procedures:
          </RichText>
        </ParaBlock>
        <Topic xy:guid="4f509b39-54c8-4918-af02-5917906e4671">
          <Title>Create LZO Files</Title>
          <ParaBlock xy:guid="0283d6d4-9d5b-41b9-a182-6cf52494b897">
            <List ListMarker="Numeric" xy:guid="fccb1fb9-5605-4929-b3e8-8ab5a85b7eb6">
              <ItemBlock>
                <Item>
                  <ItemPara>Create LZO files as the output of the Hive query.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Use
                    <InLineCode>lzop</InLineCode>
                    command utility or your custom Java to generate
                    <InLineCode>lzo.index</InLineCode>
                    for the
                    <InLineCode>.lzo</InLineCode>
                    files.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
            <RichText>
              <Emph>Hive Query Parameters</Emph>
            </RichText>
            <RichText>Prefix the query string with these parameters:</RichText>
            <Code>SET mapreduce.output.fileoutputformat.compress.codec=com.hadoop.compression.lzo.LzopCodec
              SET hive.exec.compress.output=true
              SET mapreduce.output.fileoutputformat.compress=true
            </Code>
            <RichText>For example:</RichText>
            <RichText>
              <InLineTypeThis>hive -e "SET
                mapreduce.output.fileoutputformat.compress.codec=com.hadoop.compression.lzo.LzopCodec;SET
                hive.exec.compress.output=true;SET mapreduce.output.fileoutputformat.compress=true;"
              </InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="ff953ea6-8170-4568-baad-2a3735b167fd">
          <Title>Write Custom Java to Create LZO Files</Title>
          <ParaBlock xy:guid="cd47e864-e288-4700-8895-7fe444967e1b">
            <List ListMarker="Numeric" xy:guid="94f59736-526a-4f77-88d8-dd598aef9587">
              <ItemBlock>
                <Item>
                  <ItemPara>Create text files as the output of the Hive query.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Write custom Java code to</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>convert Hive query generated text files to
                          <InLineCode>.lzo</InLineCode>
                          files
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>generate
                          <InLineCode>lzo.index</InLineCode>
                          files for the
                          <InLineCode>.lzo</InLineCode>
                          files
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
            <RichText>
              <Emph>Hive Query Parameters</Emph>
            </RichText>
            <RichText>Prefix the query string with these parameters:</RichText>
            <Code>SET hive.exec.compress.output=false
              SET mapreduce.output.fileoutputformat.compress=false
            </Code>
            <RichText>For example:</RichText>
            <RichText>
              <InLineTypeThis>hive -e "SET hive.exec.compress.output=false;SET
                mapreduce.output.fileoutputformat.compress=false;&lt;query-string&gt;"
              </InLineTypeThis>
            </RichText>
          </ParaBlock>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:guid="27fc2641-801e-490d-b478-6276c443f465">
      <Title>Using Non-Default Databases</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="61e83788-db8a-4316-abe0-140b898135ef">
        <ParaBlock xy:guid="3da04a8e-2606-414e-8d68-16652bd0ebea">
          <RichText>Use the following instructions to prepare a non-default database for Ambari, Hive/HCatalog, or
            Oozie. You must complete these instructions before you set up the Ambari Server by running<InLineCode>
              ambari-server setup</InLineCode>.
          </RichText>
          <List ListMarker="Bullet" xy:guid="9ac30b16-b4ee-4f5f-9b02-07e1f83ba04b">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="6db1b3ae-7e80-4a7c-a73d-20f11379078f">Using Non-Default Databases - Ambari
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5010f1c4-fc32-44cd-94f5-fe557eefcd6d">Using Non-Default Databases - Hive</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b9803b8c-5f91-40d5-bdc4-da481581efbf">Using Non-Default Databases - Oozie
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="6db1b3ae-7e80-4a7c-a73d-20f11379078f">
        <Title>Using Non-Default Databases - Ambari</Title>
        <ParaBlock xy:guid="3e0184da-6fc4-4207-802b-fa220b0dbed3">
          <RichText>The following sections describe how to use Ambari with an existing database, other than the embedded
            PostgreSQL database instance that Ambari Server uses by default.
          </RichText>
          <List ListMarker="Bullet" xy:guid="f3b43696-c249-4e48-9529-d82b53646d23">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="e9b1e9fd-5904-46a7-a36c-3d3b96925f6a">Using Ambari with Oracle</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="826a906d-2ce7-4341-8a98-13ec519755de">Using Ambari with MySQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7c4d2521-5377-468e-8e3d-93b5ea19cf46">Using Ambari with PostgreSQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7774fa56-4fa8-4eb9-a973-9add77b8cfc1">Troubleshooting Non-Default Databases
                    with Ambari
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="e9b1e9fd-5904-46a7-a36c-3d3b96925f6a">
          <Title>Using Ambari with Oracle</Title>
          <ParaBlock xy:guid="113eaf8c-da77-4fc9-8f33-d5c9f82a6afe">
            <RichText>To set up Oracle for use with Ambari:</RichText>
            <List ListMarker="Numeric" xy:guid="362c0a7d-d6bd-4af6-8e5f-6066483fd405">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, install the appropriate
                    <InLineCode>JDBC.jar</InLineCode>
                    file.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Download the Oracle JDBC (OJDBC) driver from<Href
                                UrlTarget="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">
                          http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html</Href>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Select<InLineCode>Oracle Database 11g Release 2 - ojdbc6.jar</InLineCode>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Copy the .jar file to the Java share directory.</ItemPara>
                        <RichText>
                          <InLineTypeThis>cp ojdbc6.jar /usr/share/java</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Make sure the .jar file has the appropriate permissions - 644.</ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Ambari and grant that user appropriate permissions.</ItemPara>
                  <RichText>For example, using the Oracle database admin utility, run the following commands:
                  </RichText>
                  <RichText>
                    <InLineTypeThis># sqlplus sys/root as sysdba
                      CREATE USER &lt;AMBARIUSER&gt; IDENTIFIED BY &lt;AMBARIPASSWORD&gt; default tablespace
                      âUSERSâ temporary tablespace âTEMPâ;
                      GRANT unlimited tablespace to &lt;AMBARIUSER&gt;;
                      GRANT create session to &lt;AMBARIUSER&gt;;
                      GRANT create TABLE to &lt;AMBARIUSER&gt;;
                      GRANT create SEQUENCE to &lt;AMBARIUSER&gt;;
                      QUIT;
                    </InLineTypeThis>
                  </RichText>
                  <RichText>
                    Where
                    <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                    is the Ambari user name and
                    <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                    is the Ambari user password.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Load the Ambari Server database schema.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>You must pre-load the Ambari database schema into your Oracle database using the
                          schema script.
                        </ItemPara>
                        <RichText>
                          <InLineCode>sqlplus</InLineCode>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineCode>/</InLineCode>
                          <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                          <InLineCode> &lt; Ambari-DDL-Oracle-CREATE.sql</InLineCode>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Find the Ambari-DDL-Oracle-CREATE.sql file in the
                          <InLineCode>/var/lib/ambari-server/resources/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>When setting up the Ambari Server, select
                    <InLineCode>Advanced Database Configuration &gt; Option [2] Oracle</InLineCode>
                    and respond to the prompts using the username/password credentials you created in step 2.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="826a906d-2ce7-4341-8a98-13ec519755de">
          <Title>Using Ambari with MySQL</Title>
          <ParaBlock xy:guid="b2d1a95b-3f14-4eb9-9fbc-bd105919a211">
            <RichText>To set up MySQL for use with Ambari:</RichText>
            <List ListMarker="Numeric" xy:guid="b4cf71b5-c010-4fad-80c4-8b62a4f6342d">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, install the connector.</ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Install the connector</ItemPara>
                        <RichText>
                          <Emph>
                            RHEL/CentOS/Oracle Linux
                          </Emph>
                          <InLineCode>yum install mysql-connector-java</InLineCode>
                        </RichText>
                        <RichText>
                          <Emph>
                            SLES
                          </Emph>
                          <InLineCode>zypper install mysql-connector-java</InLineCode>
                        </RichText>
                        <RichText>
                          <InLineApplicationPrompt>
                          </InLineApplicationPrompt>
                          <Emph>UBUNTU</Emph>
                          <InLineApplicationPrompt>
                          </InLineApplicationPrompt>
                          <InLineCode>apt-get install mysql-connector-java</InLineCode>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Confirm that<InLineCode>.jar</InLineCode>is in the Java share directory.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>ls /usr/share/java/mysql-connector-java.jar</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Make sure the .jar file has the appropriate permissions - 644.</ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Ambari and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>For example, using the MySQL database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis># mysql -u root -p
                            CREATE USER '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'%' IDENTIFIED BY '</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>';
                            GRANT ALL PRIVILEGES ON *.* TO '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'%';
                            CREATE USER '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'localhost' IDENTIFIED BY '</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>';
                            GRANT ALL PRIVILEGES ON *.* TO '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'localhost';
                            CREATE USER'
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARISERVERFQDN&gt;</SyntaxArg>
                          <InLineTypeThis>' IDENTIFIED BY '</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>';
                            GRANT ALL PRIVILEGES ON *.* TO '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARISERVERFQDN&gt;</SyntaxArg>
                          <InLineTypeThis>';
                            FLUSH PRIVILEGES;
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where<SyntaxArg>&lt;AMBARIUSER&gt; </SyntaxArg>is the Ambari user name,
                          <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                          is the Ambari user password and
                          <SyntaxArg>&lt;AMBARISERVERFQDN&gt;</SyntaxArg>
                          is the Fully Qualified Domain Name of the Ambari Server host.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Load the Ambari Server database schema.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>You must pre-load the Ambari database schema into your MySQL database using the schema
                          script.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>mysql -u</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>-p CREATE DATABASE</InLineTypeThis>
                          <InLineMenuSelection>&lt;AMBARIDATABASE&gt;</InLineMenuSelection>
                          <InLineTypeThis>;
                            USE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            SOURCE Ambari-DDL-MySQL-CREATE.sql;
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          is the Ambari user name and
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          is the Ambari database name.
                        </ItemPara>
                        <RichText>
                          Find the
                          <InLineCode>Ambari-DDL-MySQL-CREATE.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>When setting up the Ambari Server, select
                    <InLineCode>Advanced Database Configuration &gt; Option [3] MySQL</InLineCode>
                    and enter the credentials you defined in Step 2. for user name, password and database name.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="7c4d2521-5377-468e-8e3d-93b5ea19cf46">
          <Title>Using Ambari with PostgreSQL</Title>
          <ParaBlock xy:guid="1055b78c-6283-441c-aef9-646bd2ede85b">
            <RichText>To set up PostgreSQL for use with Ambari:</RichText>
            <List ListMarker="Numeric" xy:guid="997b7b30-4f12-4968-924c-00e24b20e867">
              <ItemBlock>
                <Item>
                  <ItemPara>Create a user for Ambari and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Using the PostgreSQL database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis># sudo -u postgres psql
                            CREATE DATABASE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            CREATE USER
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>WITH PASSWORD â</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>â;
                            GRANT ALL PRIVILEGES ON DATABASE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>TO</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            \connect
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            CREATE SCHEMA
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARISCHEMA&gt;</SyntaxArg>
                          <InLineTypeThis>AUTHORIZATION</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            ALTER SCHEMA
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARISCHEMA&gt;</SyntaxArg>
                          <InLineTypeThis>OWNER TO</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            ALTER ROLE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>SET search_path to â</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARISCHEMA&gt;</SyntaxArg>
                          <InLineTypeThis>â, 'public';</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg> &lt;AMBARIUSER&gt;</SyntaxArg>
                          is the Ambari user name<SyntaxArg>&lt;AMBARIPASSWORD&gt; </SyntaxArg>is the Ambari user
                          password,
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          is the Ambari database name and
                          <SyntaxArg>&lt;AMBARISCHEMA&gt;</SyntaxArg>
                          <InLineCode></InLineCode>is the Ambari schema name.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Load the Ambari Server database schema.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>You must pre-load the Ambari database schema into your PostgreSQL database using the
                          schema script.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis># psql -U</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIUSER&gt;</SyntaxArg>
                          <InLineTypeThis>-d</InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>
                            \connect
                          </InLineTypeThis>
                          <SyntaxArg>&lt;AMBARIDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            \i Ambari-DDL-Postgres-CREATE.sql;
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Find the
                          <InLineCode>Ambari-DDL-Postgres-CREATE.sql</InLineCode>
                          file in the<InLineCode>/var/lib/ambari-server/resources/</InLineCode>directory of the Ambari
                          Server host after you have installed Ambari Server.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>When setting up the Ambari Server, select
                    <InLineCode>Advanced Database Configuration &gt; Option[4] PostgreSQL</InLineCode>
                    and enter the credentials you defined in Step 2. for user name, password, and database name.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="7774fa56-4fa8-4eb9-a973-9add77b8cfc1">
          <Title>Troubleshooting Ambari</Title>
          <ParaBlock xy:guid="20bddae4-e11f-4dc3-a4fb-8448932b0ac3">
            <RichText>Use these topics to help troubleshoot any issues you might have installing Ambari with an existing
              Oracle database.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="cf884f2c-437d-4329-b054-328b3aab193e">
            <Title>Problem: Ambari Server Fails to Start: No Driver</Title>
            <ParaBlock xy:guid="de92abc7-b6a5-40d2-9057-dfeb1cdbca98">
              <RichText>Check
                <InLineCode>/var/log/ambari-server/ambari-server.log</InLineCode>
                for the following error:
              </RichText>
              <RichText>
                <InLineApplicationPrompt>ExceptionDescription:Configurationerror.Class[oracle.jdbc.driver.OracleDriver]
                  not found.
                </InLineApplicationPrompt>
              </RichText>
              <RichText>The Oracle JDBC.jar file cannot be found.</RichText>
            </ParaBlock>
            <Topic xy:guid="98c5e608-4abe-415e-8203-2fab1bde64db">
              <Title>Solution</Title>
              <ParaBlock xy:guid="f6dde4b4-a562-4fb0-b0eb-d5260cc15b43">
                <RichText>Make sure the file is in the appropriate directory on the Ambari server and re-run<InLineCode>
                  ambari-server setup</InLineCode>. Review the load database procedure appropriate for your database
                  type in<Xref InsideTargetRef="6db1b3ae-7e80-4a7c-a73d-20f11379078f">Using Non-Default Databases -
                    Ambari</Xref>.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="e7467ad7-2cbf-4b17-8238-704312048378">
            <Title>Problem: Ambari Server Fails to Start: No Connection</Title>
            <ParaBlock xy:guid="001c8165-799c-41f5-8c42-1b2b383d4d3f">
              <RichText>Check<InLineCode>/var/log/ambari-server/ambari-server.log</InLineCode>for the following error:
              </RichText>
              <RichText>
                <InLineApplicationPrompt>The Network Adapter could not establish the connection Error Code: 17002
                </InLineApplicationPrompt>
              </RichText>
              <RichText>Ambari Server cannot connect to the database.</RichText>
            </ParaBlock>
            <Topic xy:guid="05ac8fce-bc3c-47b2-bc90-c6e25f752427">
              <Title>Solution</Title>
              <ParaBlock xy:guid="7a6a85ad-2889-4ee0-8682-6c36f094d6d3">
                <RichText>Confirm that the database host is reachable from the Ambari Server and is correctly configured
                  by reading<InLineCode>/etc/ambari-server/conf/ambari.properties</InLineCode>.
                  <InLineApplicationPrompt>server.jdbc.url=jdbc:oracle:thin:@oracle.database.hostname:1521/ambaridb
                    server.jdbc.rca.url=jdbc:oracle:thin:@oracle.database.hostname:1521/ambari
                  </InLineApplicationPrompt>
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="8da23fde-d671-41c1-8ed7-ab3a5d01e2fd">
            <Title>Problem: Ambari Server Fails to Start: Bad Username</Title>
            <ParaBlock xy:guid="79b8da71-0e36-48fb-8305-337c43d91c57">
              <RichText>Check
                <InLineCode>/var/log/ambari-server/ambari-server.log</InLineCode>
                for the following error:
              </RichText>
              <RichText>
                <InLineApplicationPrompt>Internal Exception: java.sql.SQLException:ORAÂ­01017: invalid username/password;
                  logon denied
                </InLineApplicationPrompt>
              </RichText>
              <RichText>You are using an invalid username/password.</RichText>
            </ParaBlock>
            <Topic xy:guid="49a46e27-0089-4ce3-a974-158e724dbcb6">
              <Title>Solution</Title>
              <ParaBlock xy:guid="5a69de72-7269-4e7c-8f41-85e5d73d0eb4">
                <RichText>Confirm the user account is set up in the database and has the correct privileges. See Step 3
                  above.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="1726583a-3dd0-4965-aabd-eb9429fed250">
            <Title>Problem: Ambari Server Fails to Start: No Schema</Title>
            <ParaBlock xy:guid="cff167de-4e62-4f51-844d-a778a4002c96">
              <RichText>Check
                <InLineCode>/var/log/ambari-server/ambari-server.log</InLineCode>
                for the following error:
              </RichText>
              <RichText>
                <InLineApplicationPrompt>Internal Exception: java.sql.SQLSyntaxErrorException: ORAÂ­00942: table or view
                  does not exist
                </InLineApplicationPrompt>
              </RichText>
              <RichText>The schema has not been loaded.</RichText>
            </ParaBlock>
            <Topic xy:guid="9a7cd060-9e76-4536-9064-57568c86b859">
              <Title>Solution</Title>
              <ParaBlock xy:guid="66df5cef-7614-43ba-ae8a-d249db39d4b9">
                <RichText>Confirm you have loaded the database schema. Review the load database schema procedure
                  appropriate for your database type in<Xref InsideTargetRef="6db1b3ae-7e80-4a7c-a73d-20f11379078f">
                    Using Non-Default Databases - Ambari</Xref>.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="5010f1c4-fc32-44cd-94f5-fe557eefcd6d">
        <Title>Using Non-Default Databases - Hive</Title>
        <ParaBlock xy:guid="c63e63e9-9579-4d08-8cb6-695a8f1f3803">
          <RichText>The following sections describe how to use Hive with an existing database, other than the MySQL
            database instance that Ambari installs by default.
          </RichText>
          <List ListMarker="Bullet" xy:guid="ac4008ad-fee5-4147-a945-acc1b2b9e5a3">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="3e4391cf-499e-41c8-85cf-0d173c2b3360">Using Hive with Oracle</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="fe9e3437-a3f4-43b9-b2a2-4a323697dbfd">Using Hive with MySQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="a0442805-2765-4541-a76b-d13620359588">Using Hive with PostgreSQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5f15a1bb-365a-4f1c-bcbf-3c195368d06f">Troubleshooting Non-Default Databases
                    with Hive
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="3e4391cf-499e-41c8-85cf-0d173c2b3360">
          <Title>Using Hive with Oracle</Title>
          <ParaBlock xy:guid="463cd594-3383-4b33-9115-db714abf0b0f">
            <RichText>To set up Oracle for use with Hive:</RichText>
            <List ListMarker="Numeric" xy:guid="1c58ddc0-8c94-412e-a36f-c83e3096618d">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, stage the appropriate JDBC driver file for later deployment.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Download the Oracle JDBC (OJDBC) driver from<Href
                                UrlTarget="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">
                          http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html</Href>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Select
                          <InLineCode>Oracle Database 11g Release 2 - ojdbc6.jar</InLineCode>
                          and download the file.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Make sure the .jar file has the appropriate permissions - 644.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Execute the following command, adding the path to the downloaded .jar file:</ItemPara>
                        <RichText>
                          <InLineCode>ambari-server setup --jdbc-db=oracle
                            --jdbc-driver=/path/to/downloaded/ojdbc6.jar
                          </InLineCode>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Hive and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Using the Oracle database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis># sqlplus sys/root as sysdba
                            CREATE USER
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>IDENTIFIED BY</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            GRANT SELECT_CATALOG_ROLE TO
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            GRANT CONNECT, RESOURCE TO
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            QUIT;
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          is the Hive user name and
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          is the Hive user password.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Load the Hive database schema.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 2.2 Stack</Emph>
                        </ItemPara>
                        <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                    xy:guid="a21dff00-8468-48b2-8fb5-41bdf59c2d34">
                          <Icon thumbWidth="50" uri="Icons/Important.png"
                                xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                xy:guid="e49e7ec4-8999-4366-a12b-99ab46d2231f"/>
                          <SimpleBlock>
                            <RichText>
                              Ambari sets up the Hive Metastore database schema<Underline>automatically</Underline>.
                              You do not need to pre-load the Hive Metastore database schema into your Oracle database
                              for a HDP 2.2 Stack.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                      </Item>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 2.1 Stack</Emph>
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your Oracle database using the schema script,
                          as follows:
                          sqlplus &lt;HIVEUSER&gt;/&lt;HIVEPASSWORD&gt; &lt; hive-schema-0.13.0.oracle.sql
                        </RichText>
                        <RichText>
                          Find the
                          <InLineCode>hive-schema-0.13.0.oracle.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/2.1/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 2.0 Stack</Emph>
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your Oracle database using the schema script,
                          as follows:
                          sqlplus &lt;HIVEUSER&gt;/&lt;HIVEPASSWORD&gt; &lt; hive-schema-0.12.0.oracle.sql
                        </RichText>
                        <RichText>
                          Find the
                          <InLineCode>hive-schema-0.12.0.oracle.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/2.0.6/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 1.3 Stack</Emph>
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your Oracle database using the schema script,
                          as follows:
                          sqlplus &lt;HIVEUSER&gt;/&lt;HIVEPASSWORD&gt; &lt; hive-schema-0.10.0.oracle.sql
                        </RichText>
                        <RichText>
                          Find the
                          <InLineCode>hive-schema-0.10.0.oracle.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/1.3.2/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="fe9e3437-a3f4-43b9-b2a2-4a323697dbfd">
          <Title>Using Hive with MySQL</Title>
          <ParaBlock xy:guid="5fa27750-1cfe-472c-86e8-e771a6dffd6f">
            <RichText>To set up MySQL for use with Hive:</RichText>
            <List ListMarker="Numeric" xy:guid="d3273c55-12d8-4281-8a7c-ebee6590af93">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, stage the appropriate MySQL connector for later deployment.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Install the connector.</ItemPara>
                        <RichText>
                          <Emph>RHEL/CentOS/Oracle Linux
                          </Emph>
                          <InLineTypeThis>yum install mysql-connector-java*</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>SLES
                          </Emph>
                          <InLineTypeThis>zypper install mysql-connector-java*</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>UBUNTU
                          </Emph>
                          <InLineTypeThis>apt-get install mysql-connector-java*</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Confirm that
                          <InLineCode>mysql-connector-java.jar</InLineCode>
                          is in the Java share directory.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>ls /usr/share/java/mysql-connector-java.jar</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Make sure the .jar file has the appropriate permissions - 644.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Execute the following command:</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup --jdbc-db=mysql
                            --jdbc-driver=/usr/share/java/mysql-connector-java.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Hive and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Using the MySQL database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis># mysql -u root -p
                            CREATE USER â
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>â@âlocalhostâ IDENTIFIED BY â</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>â;
                            GRANT ALL PRIVILEGES ON *.* TO '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'localhost';
                            CREATE USER â
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>â@â%â IDENTIFIED BY â</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>â;
                            GRANT ALL PRIVILEGES ON *.* TO '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'%';
                            CREATE USER '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEMETASTOREFQDN&gt;</SyntaxArg>
                          <InLineTypeThis>'IDENTIFIED BY '</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>';
                            GRANT ALL PRIVILEGES ON *.* TO '
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>'@'</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEMETASTOREFQDN&gt;</SyntaxArg>
                          <InLineTypeThis>';
                            FLUSH PRIVILEGES;
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          is the Hive user name,
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          is the Hive user password and<SyntaxArg>&lt;HIVEMETASTOREFQDN&gt; </SyntaxArg>is the Fully
                          Qualified Domain Name of the Hive Metastore host.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create the Hive database.</ItemPara>
                  <RichText>The Hive database must be created before loading the Hive database schema.

                    <InLineTypeThis># mysql -u root -p CREATE DATABASE</InLineTypeThis>
                    <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>

                    Where
                    <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                    is the Hive database name.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Load the Hive database schema.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>For a<Emph>HDP 2.2 Stack</Emph>:
                        </ItemPara>
                        <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                    xy:guid="c58de471-40fa-45e3-8457-4c08c3f7b3b4">
                          <Icon thumbWidth="50" uri="Icons/Important.png"
                                xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                xy:guid="d90e9e8a-a0ee-4edd-a47d-0ea14d6ad58c"/>
                          <SimpleBlock>
                            <RichText>
                              Ambari sets up the Hive Metastore database schema<Underline>automatically</Underline>.
                              You do not need to pre-load the Hive Metastore database schema into your MySQL database
                              for a HDP 2.2 Stack.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                      </Item>
                      <Item>
                        <ItemPara>For a<Emph>HDP 2.1 Stack</Emph>:
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your MySQL database using the schema script,
                          as follows.
                          <InLineTypeThis>
                            mysql -u root -p
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>hive-schema-0.13.0.mysql.sql</InLineTypeThis>
                        </RichText>
                        <RichText>Find the
                          <InLineCode>hive-schema-0.13.0.mysql.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/2.1/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="a0442805-2765-4541-a76b-d13620359588">
          <Title>Using Hive with PostgreSQL</Title>
          <ParaBlock xy:guid="870011ab-017b-4466-aed9-7b3444c4052b">
            <RichText>To set up PostgreSQL for use with Hive:</RichText>
            <List ListMarker="Numeric" xy:guid="0073523b-d92c-4902-a066-5274f363ff3a">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, stage the appropriate PostgreSQL connector for later
                    deployment.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Install the connector.</ItemPara>
                        <RichText>
                          <Emph>RHEL/CentOS/Oracle Linux
                          </Emph>
                          <InLineTypeThis>yum install postgresql-jdbc*</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>SLES
                          </Emph>
                          <InLineTypeThis>zypper install -y postgresql-jdbc</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy the connector.jar file to the Java share directory.</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            cp /usr/share/pgsql/postgresql-*.jdbc3.jar /usr/share/java/postgresql-jdbc.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Confirm that .jar is in the Java share directory.</ItemPara>
                        <RichText>
                          <InLineTypeThis>
                            ls /usr/share/java/postgresql-jdbc.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Change the access mode of the.jar file to 644.</ItemPara>
                        <RichText>
                          chmod 644 /usr/share/java/postgresql-jdbc.jar
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Execute the following command:</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup --jdbc-db=postgres</InLineTypeThis>
                          <InLineTypeThis>--jdbc-driver=/usr/share/java/postgresql-connector-java.jar</InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Hive and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Using the PostgreSQL database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis>echo "CREATE DATABASE &lt;HIVEDATABASE&gt;;" | psql -U postgres
                            echo "CREATE USER
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>WITH PASSWORD '</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>';" | psql -U postgres
                            echo "GRANT ALL PRIVILEGES ON DATABASE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>TO</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;" | psql -U postgres</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where<SyntaxArg>&lt;HIVEUSER&gt; </SyntaxArg>is the Hive user name,
                          <SyntaxArg>&lt;HIVEPASSWORD&gt;</SyntaxArg>
                          is the Hive user password and
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          is the Hive database name.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Load the Hive database schema.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 2.2 Stack:</Emph>
                        </ItemPara>
                        <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                                    xy:guid="62fddf5e-3906-431f-8c00-e60abd30d0d3">
                          <Icon thumbWidth="50" uri="Icons/Important.png"
                                xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                                xy:guid="2550877a-8ea4-47e3-8641-172def6b31ca"/>
                          <SimpleBlock>
                            <RichText>
                              Ambari sets up the Hive Metastore database schema<Underline>automatically</Underline>.
                              You do not need to pre-load the Hive Metastore database schema into your PostgreSQL
                              database for a HDP 2.2 Stack.
                            </RichText>
                          </SimpleBlock>
                        </CustomNote>
                      </Item>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 2.1 Stack:</Emph>
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your PostgreSQL database using the schema
                          script, as follows:

                          <InLineTypeThis># psql -U</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>-d</InLineTypeThis>
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>
                            \connect
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            \i hive-schema-0.13.0.postgres.sql;
                          </InLineTypeThis>
                        </RichText>
                        <RichText>Find the
                          <InLineCode>hive-schema-0.13.0.postgres.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/2.1/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 2.0 Stack:</Emph>
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your PostgreSQL database using the schema
                          script, as follows:

                          <InLineTypeThis># sudo -u postgres psql
                            \connect
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            \i hive-schema-0.12.0.postgres.sql;
                          </InLineTypeThis>
                        </RichText>
                        <RichText>Find the
                          <InLineCode>hive-schema-0.12.0.postgres.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/2.0.6/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>For a
                          <Emph>HDP 1.3 Stack:</Emph>
                        </ItemPara>
                        <RichText>
                          You must pre-load the Hive database schema into your PostgreSQL database using the schema
                          script, as follows:

                          <InLineTypeThis># sudo -u postgres psql
                            \connect
                          </InLineTypeThis>
                          <SyntaxArg>&lt;HIVEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;
                            \i hive-schema-0.10.0.postgres.sql;
                          </InLineTypeThis>
                        </RichText>
                        <RichText>Find the
                          <InLineCode>hive-schema-0.10.0.postgres.sql</InLineCode>
                          file in the
                          <InLineCode>/var/lib/ambari-server/resources/stacks/HDP/1.3.2/services/HIVE/etc/</InLineCode>
                          directory of the Ambari Server host after you have installed Ambari Server.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="5f15a1bb-365a-4f1c-bcbf-3c195368d06f">
          <Title>Troubleshooting Hive</Title>
          <ParaBlock xy:guid="3cc0dbf7-7e3d-4eba-901e-1adc85d287b9">
            <RichText>Use these entries to help you troubleshoot any issues you might have installing Hive with
              non-default databases.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="a0fce7f7-9602-4b32-9e56-028aae88aa61">
            <Title>Problem: Hive Metastore Install Fails Using Oracle</Title>
            <ParaBlock xy:guid="a4b13237-57f0-40db-9052-92780cc2e0f5">
              <RichText>Check the install log:</RichText>
              <RichText>
                <InLineApplicationPrompt>cp /usr/share/java/${jdbc_jar_name} ${target}] has failures: true
                </InLineApplicationPrompt>
              </RichText>
              <RichText>The Oracle JDBC.jar file cannot be found.</RichText>
            </ParaBlock>
            <Topic xy:guid="8cebe98a-80bc-454c-a30a-b88b908df06f">
              <Title>Solution</Title>
              <ParaBlock xy:guid="55ff8595-eb0f-4962-9d1d-501ae7bb931b">
                <RichText>Make sure the file is in the appropriate directory on the Hive Metastore server and click
                  <Emph>Retry</Emph>.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="8aed98ff-aef4-4bd3-9f23-e0a5e668086f">
            <Title>Problem: Install Warning when "Hive Check Execute" Fails Using Oracle</Title>
            <ParaBlock xy:guid="043b5969-1ddb-46f1-9229-055539918b25">
              <RichText>Check the install log:</RichText>
              <RichText>
                <InLineApplicationPrompt>java.sql.SQLSyntaxErrorException: ORA-01754:
                  a table may contain only one column of type LONG
                </InLineApplicationPrompt>
              </RichText>
              <RichText>The Hive Metastore schema was not properly loaded into the database.</RichText>
            </ParaBlock>
            <Topic xy:guid="e16356a2-3f73-4474-b901-c68e6c8ac94f">
              <Title>Solution</Title>
              <ParaBlock xy:guid="e53f0b22-9701-443f-aedd-c38a589b0539">
                <RichText>Ignore the warning, and complete the install. Check your database to confirm the Hive
                  Metastore schema is loaded. In the Ambari Web GUI, browse to
                  <Emph>Services</Emph>
                  &gt;<Emph>Hive</Emph>. Choose
                  <InLineMenuSelection>Service Actions &gt; Service Check</InLineMenuSelection>
                  to check that the schema is correctly in place.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="1f248e6e-19b3-4795-a6f4-fd08dacec7b8">
            <Title>Problem: Hive Check Execute may fail after completing an Ambari upgrade to version 1.4.2</Title>
            <ParaBlock xy:guid="04b6eb59-7e33-453b-89f8-e0efbe2f8fd3">
              <RichText>For secure and non-secure clusters, with Hive security authorization enabled, the Hive service
                check may fail. Hive security authorization may not be configured properly.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="aa002e4e-8ae7-4f0c-a353-ad15c7e19503">
              <Title>Solution</Title>
              <ParaBlock xy:guid="8691eef1-ac4c-4809-ad30-59d25c94a2ad">
                <RichText>Two workarounds are possible. Using Ambari Web, in<Emph>HiveConfigsAdvanced</Emph>:
                </RichText>
                <List ListMarker="Bullet" xy:guid="65642fe4-a037-47f4-8a66-b868e2b1970f">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Disable<InLineCode>hive.security.authorization</InLineCode>, by setting the
                        <InLineCode>hive.security.authorization.enabled</InLineCode>
                        value to false.
                      </ItemPara>
                      <RichText>
                        <Emph></Emph>
                        <Emph>
                          <Italic>or</Italic>
                        </Emph>
                        <Emph></Emph>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Properly configure Hive security authorization. For example, set the following
                        properties:
                      </ItemPara>
                      <RichText>For more information about configuring Hive security, see
                        <Href UrlTarget="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization#LanguageManualAuthorization-MetastoreServerSecurity">
                          Metastore Server Security
                        </Href>
                        in
                        <Href UrlTarget="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization">
                          Hive Authorization
                        </Href>
                        and the HCatalog document<Href
                                UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.9.1/bk_using_Ambari_book/content/ambari-chaplast-1-1.html">
                          Storage Based Authorization</Href>.
                      </RichText>
                      <Table align="" border="false" width="100" xy:guid="992370d4-3e72-4e6f-82f0-7776e2f9b163">
                        <TblTitle>Hive Security Authorization
                          Settings
                        </TblTitle>
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Property</Emph>
                                </RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  <Emph>Value</Emph>
                                </RichText>
                              </Cell>
                            </TableRow>
                          </TblHeader>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>hive.security.authorization.manager</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>hive.security.metastore.authorization.manager</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>
                                  org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider
                                </RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>hive.security.authenticator.manager</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>org.apache.hadoop.hive.ql.security.ProxyUserAuthenticator</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                      <RichText>
                        <Href UrlTarget="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization#LanguageManualAuthorization-MetastoreServerSecurity">
                          Metastore Server Security
                        </Href>
                        <Href UrlTarget="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization">
                          Hive Authorization
                        </Href>
                        <Href UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.9.1/bk_using_Ambari_book/content/ambari-chaplast-1-1.html">
                          Storage Based Authorization
                        </Href>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </List>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
      </Topic>
      <Topic xy:guid="b9803b8c-5f91-40d5-bdc4-da481581efbf">
        <Title>Using Non-Default Databases - Oozie</Title>
        <ParaBlock xy:guid="21548a08-c6be-45f0-af3f-b5c5a9851ceb">
          <RichText>The following sections describe how to use Oozie with an existing database, other than the Derby
            database instance that Ambari installs by default.
          </RichText>
          <List ListMarker="Bullet" xy:guid="a271d347-86b4-4145-bd74-f69fc141be7a">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="27b85ede-4fbe-4672-b771-2b3f02e5a2f9">Using Oozie with Oracle</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b7328f97-8bd8-4936-a038-6289902a6029">Using Oozie with MySQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="168b712d-c256-466d-8ea2-d9f71150ef84">Using Oozie with PostgreSQL</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="22a77028-fd36-4976-ac14-ddd4e502f55a">Troubleshooting Non-Default Databases
                    with Oozie
                  </Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="27b85ede-4fbe-4672-b771-2b3f02e5a2f9">
          <Title>Using Oozie with Oracle</Title>
          <ParaBlock xy:guid="d151729e-368b-41e0-99ac-b8cceceb2c01">
            <RichText>To set up Oracle for use with Oozie:</RichText>
            <List ListMarker="Numeric" xy:guid="94be8c56-bb57-40d8-99c7-1b319def6a75">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, stage the appropriate JDBC driver file for later deployment.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Download the Oracle JDBC (OJDBC) driver from<Href
                                UrlTarget="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">
                          http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html</Href>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Select<InLineKeyword>Oracle Database 11g Release 2 - ojdbc6.jar</InLineKeyword>.
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Make sure the .jar file has the appropriate permissions - 644.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Execute the following command, adding the path to the downloaded.jar file:</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup --jdbc-db=oracle
                            --jdbc-driver=/path/to/downloaded/ojdbc6.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Oozie and grant it permissions.</ItemPara>
                  <RichText>Using the Oracle database admin utility, run the following commands:</RichText>
                  <RichText>
                    <InLineTypeThis># sqlplus sys/root as sysdba
                      CREATE USER
                    </InLineTypeThis>
                    <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                    <InLineTypeThis>IDENTIFIED BY</InLineTypeThis>
                    <SyntaxArg>&lt;OOZIEPASSWORD&gt;</SyntaxArg>
                    <InLineTypeThis>;
                      GRANT ALL PRIVILEGES TO
                    </InLineTypeThis>
                    <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                    <InLineTypeThis>;
                      QUIT;
                    </InLineTypeThis>
                  </RichText>
                  <RichText>Where
                    <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                    is the Oozie user name and
                    <SyntaxArg>&lt;OOZIEPASSWORD&gt;</SyntaxArg>
                    is the Oozie user password.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="b7328f97-8bd8-4936-a038-6289902a6029">
          <Title>Using Oozie with MySQL</Title>
          <ParaBlock xy:guid="26825c12-65d1-4e9d-ad1b-ea61f59247c3">
            <RichText>To set up MySQL for use with Oozie:</RichText>
            <List ListMarker="Numeric" xy:guid="93423375-8f29-4ec3-8f5d-7a4d8196e0a6">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, stage the appropriate MySQL connector for later deployment.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Install the connector.</ItemPara>
                        <RichText>
                          <Emph>RHEL/CentOS/Oracle Linux
                          </Emph>
                          <InLineTypeThis>yum install mysql-connector-java*</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>SLES
                          </Emph>
                          <InLineTypeThis>zypper install mysql-connector-java*</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>UBUNTU
                          </Emph>
                          <InLineTypeThis>apt-get install mysql-connector-java*</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Confirm that
                          <InLineCode>mysql-connector-java.jar</InLineCode>
                          is in the Java share directory.
                        </ItemPara>
                        <RichText>
                          <InLineTypeThis>ls /usr/share/java/mysql-connector-java.jar</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Make sure the .jar file has the appropriate permissions - 644.</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>Execute the following command:</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup --jdbc-db=mysql
                            --jdbc-driver=/usr/share/java/mysql-connector-java.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Oozie and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Using the MySQL database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis># mysql -u root -p
                            CREATE USER â
                          </InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>â@â%â IDENTIFIED BY â</InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>â;
                            GRANT ALL PRIVILEGES ON *.* TO '&lt;OOZIEUSER&gt;'@'%';
                            FLUSH PRIVILEGES;
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                          is the Oozie user name and
                          <SyntaxArg>&lt;OOZIEPASSWORD&gt;</SyntaxArg>
                          is the Oozie user password.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create the Oozie database.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>The Oozie database must be created prior.</ItemPara>
                        <RichText>
                          <InLineTypeThis># mysql -u root -p
                            CREATE DATABASE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEDATABASE&gt;</SyntaxArg>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg>&lt;OOZIEDATABASE&gt;</SyntaxArg>
                          is the Oozie database name.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="168b712d-c256-466d-8ea2-d9f71150ef84">
          <Title>Using Oozie with PostgreSQL</Title>
          <ParaBlock xy:guid="2f5b6d7a-22da-4e9f-8d6d-632c4f611559">
            <RichText>To set up PostgreSQL for use with Oozie:</RichText>
            <List ListMarker="Numeric" xy:guid="e885b13c-ae38-49bc-82f4-ab3a72d16f67">
              <ItemBlock>
                <Item>
                  <ItemPara>On the Ambari Server host, stage the appropriate PostgreSQL connector for later
                    deployment.
                  </ItemPara>
                  <SubList ListMarker="Numeric">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Install the connector.</ItemPara>
                        <RichText>
                          <Emph>
                            RHEL/CentOS/Oracle Linux
                          </Emph>
                          <InLineTypeThis>yum install postgresql-jdbc</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>SLES
                          </Emph>
                          <InLineTypeThis>zypper install -y postgresql-jdbc</InLineTypeThis>
                        </RichText>
                        <RichText>
                          <Emph>UBUNTU
                          </Emph>
                          <InLineTypeThis>apt-get install -y postgresql-jdbc</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Copy the connector.jar file to the Java share directory.</ItemPara>
                        <RichText>
                          <InLineTypeThis>cp /usr/share/pgsql/postgresql-*.jdbc3.jar
                            /usr/share/java/postgresql-jdbc.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Confirm that .jar is in the Java share directory.</ItemPara>
                        <RichText>
                          <InLineTypeThis>ls /usr/share/java/postgresql-jdbc.jar</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Change the access mode of the .jar file to 644.</ItemPara>
                        <RichText>
                          <InLineTypeThis>chmod 644 /usr/share/java/postgresql-jdbc.jar</InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Execute the following command:</ItemPara>
                        <RichText>
                          <InLineTypeThis>ambari-server setup --jdbc-db=postgres
                            --jdbc-driver=/usr/share/java/postgresql-connector-java.jar
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>Create a user for Oozie and grant it permissions.</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>Using the PostgreSQL database admin utility:</ItemPara>
                        <RichText>
                          <InLineTypeThis>echo "CREATE DATABASE</InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>;" | psql -U postgres
                            echo "CREATE USER
                          </InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>WITH PASSWORD '</InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEPASSWORD&gt;</SyntaxArg>
                          <InLineTypeThis>';" | psql -U postgres
                            echo "GRANT ALL PRIVILEGES ON DATABASE
                          </InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEDATABASE&gt;</SyntaxArg>
                          <InLineTypeThis>TO</InLineTypeThis>
                          <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                          <InLineTypeThis>;" | psql -U postgres
                          </InLineTypeThis>
                        </RichText>
                      </Item>
                      <Item>
                        <ItemPara>Where
                          <SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>
                          is the Oozie user name,
                          <SyntaxArg>&lt;OOZIEPASSWORD&gt;</SyntaxArg>
                          is the Oozie user password and
                          <SyntaxArg>&lt;OOZIEDATABASE&gt;</SyntaxArg>
                          is the Oozieozie database name.
                        </ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="22a77028-fd36-4976-ac14-ddd4e502f55a">
          <Title>Troubleshooting Oozie</Title>
          <ParaBlock xy:guid="6deb7b0c-ad97-4882-9e42-33abdf55947e">
            <RichText>
              Use these entries to help you troubleshoot any issues you might have installing Oozie with non-default
              databases.
            </RichText>
          </ParaBlock>
          <Topic xy:guid="13cab6c4-f7cb-4934-951b-abd23275edea">
            <Title>Problem: Oozie Server Install Fails Using MySQL</Title>
            <ParaBlock xy:guid="e14ecc50-a539-4af3-aa96-f4444bcc4037">
              <RichText>Check the install log:</RichText>
              <RichText>
                <InLineApplicationPrompt>
                </InLineApplicationPrompt>
                <InLineTypeThis>cp /usr/share/java/mysql-connector-java.jar
                  usr/lib/oozie/libext/mysql-connector-java.jar
                  has failures: true
                </InLineTypeThis>
                <InLineApplicationPrompt>
                </InLineApplicationPrompt>
              </RichText>
              <RichText>
                The MySQL JDBC.jar file cannot be found.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="c585d1c7-5d15-47c9-bfbb-85cc052164d2">
              <Title>Solution</Title>
              <ParaBlock xy:guid="a4b6fe67-4af7-4b17-9e5b-b4b5fe3721ae">
                <RichText>
                  Make sure the file is in the appropriate directory on the Oozie server and click<Emph>Retry</Emph>.
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
          <Topic xy:guid="8d18bae3-9d5d-4a06-8586-7d0ec4fba03b">
            <Title>Problem: Oozie Server Install Fails Using Oracle or MySQL</Title>
            <ParaBlock xy:guid="5fb458f5-9a4c-4d57-bf7c-5c08fd8e8d7a">
              <RichText>
                Check the install log:
              </RichText>
              <RichText>
                <InLineApplicationPrompt>
                  Exec[exec cd /var/tmp/oozie &amp;&amp;
                  /usr/lib/oozie/bin/ooziedb.sh create -sqlfile oozie.sql -run ]
                  has failures: true
                </InLineApplicationPrompt>
              </RichText>
              <RichText>
                Oozie was unable to connect to the database or was unable to successfully setup the schema for Oozie.
              </RichText>
            </ParaBlock>
            <Topic xy:guid="c99e2adb-5d00-4395-af7d-af686d28a2b1">
              <Title>Solution</Title>
              <ParaBlock xy:guid="9f3c7fae-6e5e-4403-a58a-0b0b78c6eadb">
                <RichText>
                  Check the database connection settings provided during the
                  <InLineMenuSelection>Customize Services</InLineMenuSelection>
                  step in the install wizard by browsing back to<InLineMenuSelection>Customize Services &gt;
                  Oozie</InLineMenuSelection>. After confirming and adjusting your database settings, proceed forward
                  with the install wizard.
                </RichText>
                <RichText>
                  If the Install Oozie Server wizard continues to fail, get more information by connecting directly to
                  the Oozie server and executing the following command as<SyntaxArg>&lt;OOZIEUSER&gt;</SyntaxArg>:
                </RichText>
                <RichText>
                  <InLineTypeThis>su oozie /usr/lib/oozie/bin/ooziedb.sh create -sqlfile oozie.sql -run</InLineTypeThis>
                </RichText>
              </ParaBlock>
            </Topic>
          </Topic>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:guid="591efcd9-72ce-4b27-898e-a5661a022775">
      <Title>Setting up an Internet Proxy Server for Ambari</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="91c15120-bdbc-478c-815a-1d757e9c58f9">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="bf348d02-4a84-4304-8fe5-9835eca32d57">
          <RichText>If you plan to use the public repositories for installing the Stack, Ambari Server must have
            Internet access to confirm access to the repositories and validate the repositories. If your machine
            requires use of a proxy server for Internet access, you must configure Ambari Server to use the proxy
            server.
          </RichText>
          <RichText>
            <Xref InsideTargetRef="0c356526-e74c-4420-a686-8b9bc17dd0c1">How To Set Up an Internet Proxy Server for
              Ambari
            </Xref>
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="0c356526-e74c-4420-a686-8b9bc17dd0c1">
        <Title>How To Set Up an Internet Proxy Server for Ambari</Title>
        <ParaBlock xy:guid="3f7fe060-cc65-4d62-9e47-fb616a88f8d8">
          <List ListMarker="Numeric" xy:guid="08855b78-8412-47c6-89c0-c31403f35784">
            <ItemBlock>
              <Item>
                <ItemPara>On the Ambari Server host, add proxy settings to the following script:
                  <InLineCode>/var/lib/ambari-server/ambari-env.sh.</InLineCode>
                </ItemPara>
                <RichText>
                  <InLineTypeThis>-Dhttp.proxyHost=</InLineTypeThis>
                  <SyntaxArg>&lt;yourProxyHost&gt;</SyntaxArg>
                  <InLineTypeThis>-Dhttp.proxyPort=</InLineTypeThis>
                  <SyntaxArg>&lt;yourProxyPort&gt;</SyntaxArg>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Optionally, to prevent some host names from accessing the proxy server, define the list of
                  excluded hosts, as follows:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>-Dhttp.nonProxyHosts=</InLineTypeThis>
                  <SyntaxArg>&lt;pipe|separated|list|of|hosts&gt;</SyntaxArg>
                </RichText>
              </Item>
              <Item>
                <ItemPara>If your proxy server requires authentication, add the user name and password, as follows:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>-Dhttp.proxyUser=</InLineTypeThis>
                  <SyntaxArg>&lt;username&gt;</SyntaxArg>
                  <InLineTypeThis>-Dhttp.proxyPassword=</InLineTypeThis>
                  <SyntaxArg>&lt;password&gt;</SyntaxArg>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Restart the Ambari Server to pick up this change.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:guid="828e48cc-ab2a-4348-b528-4af5eb3a3a86">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="4dc5d384-a798-4086-9835-27fd99562f46"/>
            <SimpleBlock>
              <RichText>If you plan to use local repositories, see<Xref
                      InsideTargetRef="28d7e1f2-0adb-436a-a4b1-65b522fdcdf2">Optional: Configure Local
                Repositories</Xref>. Configuring Ambari to use a proxy server and have Internet access is not required.
                The Ambari Server must have access to your local repositories.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="44d15c85-db52-47c7-b082-a3d5f143d48c">
      <Title>Configuring Network Port Numbers</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="dc49e2d9-0d0d-4500-8e2a-17f787c9ba00">
        <ParaBlock xy:guid="f5e75946-fc89-4e3c-a3e3-ff0c2dbf098d">
          <RichText>This chapter lists port number assignments required to maintain communication between Ambari Server,
            Ambari Agents, Ambari Web UI, Ganglia, and Nagios components.
          </RichText>
          <List ListMarker="Bullet" xy:guid="839dd7cf-15c9-4fe0-826d-c50f645fa2cf">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="85947452-af53-46f1-96fa-133675313860">Default Network Port Numbers - Ambari
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="9635a415-5a72-4aca-9a13-f4acd6623f6d">Configuring Ganglia Ports</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="434dcc25-963d-4d73-8e3c-76a266860b2a">Configuring Nagios Ports</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="88b834bf-48d5-4bd9-9f66-4bc46533dd71">Optional: Changing the Default Ambari
                    Server Port
                  </Xref>
                </ItemPara>
                <RichText>
                  For more information about configuring port numbers for Stack components, see
                  <Href UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/HDP_Ref_Gd_v22/configuring_ports/index.html#Item1.1">
                    Configuring Ports
                  </Href>
                  in the HDP Stack documentation.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="85947452-af53-46f1-96fa-133675313860">
        <Title>Default Network Port Numbers - Ambari</Title>
        <ParaBlock xy:guid="f9b84148-cdcf-469b-b07b-0afdcc2f1d79">
          <RichText>The following table lists the default ports used by Ambari Server and Ambari Agent services.
          </RichText>
          <Table align="" border="false" width="100" xy:guid="94c5048d-caff-426c-900b-a265a7953606">
            <TblGroup>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Service</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Servers</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Default Ports Used</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Protocol</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Need End User Access?</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Configuration Parameters</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Server</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8080 See Optional: Change the Ambari Server Port
                      for instructions on changing the default
                      port.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>http See Optional: Set Up HTTPS for Ambari Server
                      for instructions on enabling HTTPS.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Interface to Ambari Web and Ambari REST
                      API
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Server</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8440</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>https</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Handshake Port for Ambari Agents to Ambari
                      Server
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Server</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8441</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>https</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Registration and Heartbeat Port for Ambari Agents
                      to Ambari Server
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Agent</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>All hosts running Ambari Agents</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8670 You can change the Ambari Agent ping port in
                      the Ambari Agent configuration. If you change the port,
                      you must restart Nagios after making the
                      change.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>tcp</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ping port used for Nagios Server to check the
                      health of the Ambari Agent
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="9635a415-5a72-4aca-9a13-f4acd6623f6d">
        <Title>Ganglia Ports</Title>
        <ParaBlock xy:guid="f165219a-c883-4f5b-a853-687c4cd223a3">
          <RichText>The following table lists the default ports used by the various Ganglia services.</RichText>
          <Table align="" border="false" width="100" xy:guid="48af3d7a-e278-4fa2-8407-a02a54b7d691">
            <TblGroup>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Service</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Servers</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Default Ports Used</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Protocol</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Need End User Access?</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Configuration Parameters</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia Server</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8660/61/62/63</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>For metric (gmond) collectors</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia Monitor</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>All Slave Node hosts</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8660</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>For monitoring (gmond) agents</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia Server</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>8651</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>For ganglia gmetad</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia Web</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ganglia server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>httpSee Optional: Set Up HTTPS for Ganglia for
                      instructions on enabling HTTPS.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="434dcc25-963d-4d73-8e3c-76a266860b2a">
        <Title>Nagios Ports</Title>
        <ParaBlock xy:guid="c0d874b2-55c0-4e65-aa01-e0757d425358">
          <RichText>The following table lists the default port used by the Nagios server.</RichText>
          <Table align="" border="false" width="100" xy:guid="4ff6ee5c-2f9b-400a-846f-1e331cb220ee">
            <TblGroup>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Service</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Servers</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Default Ports Used</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Protocol</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Need End User Access?</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Configuration Parameters</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Nagios Server</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Nagios server host</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>80</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>httpSee Optional: Set Up HTTPS for Nagios for
                      instructions on enabling HTTPS.
                    </RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Nagios Web UI</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>No</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText/>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="88b834bf-48d5-4bd9-9f66-4bc46533dd71">
        <Title>Optional: Changing the Default Ambari Server Port</Title>
        <ParaBlock xy:guid="8d4beb00-1c9f-4536-8238-a7e61392ad92">
          <RichText>By default, Ambari Server uses port 8080 to access the Ambari Web UI and the REST API. To change the
            port number, you must edit the Ambari properties file.
          </RichText>
          <RichText>Ambari Server should not be running when you change port numbers. Edit
            <InLineCode>ambari.properties</InLineCode>
            before you start Ambari Server the first time or stop Ambari Server before editing properties.
          </RichText>
          <List ListMarker="Numeric" xy:guid="c1d31d01-f77e-4cb9-abe8-d3b3d029b127">
            <ItemBlock>
              <Item>
                <ItemPara>On the Ambari Server host, open
                  <InLineCode>/etc/ambari-server/conf/ambari.properties</InLineCode>
                  with a text editor.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Add the client API port property and set it to your desired port value:
                  <InLineTypeThis>
                    client.api.port=
                  </InLineTypeThis>
                  <SyntaxArg>&lt;port_number&gt;</SyntaxArg>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Start or re-start the Ambari Server. Ambari Server now accesses Ambari Web via the newly
                  configured port:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>
                    http://
                  </InLineTypeThis>
                  <SyntaxArg>&lt;your.ambari.server&gt;</SyntaxArg>
                  <InLineTypeThis>:</InLineTypeThis>
                  <SyntaxArg>&lt;port_number&gt;  </SyntaxArg>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="2b4811cf-2a81-44b1-bcd4-ce9a51170d2e">
      <Title>Changing the JDK Version on an Existing Cluster</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="6f756fe3-42ae-4aad-b5a1-c8e929a33534">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="d83b5af0-4014-4770-b2a0-5fd52b8e13b9">
          <RichText>During your initial Ambari Server Setup, you selected the JDK to use or provided a path to a custom
            JDK already installed on your hosts. After setting up your cluster, you may change the JDK version using the
            following procedure.
          </RichText>
          <RichText>
            <Xref InsideTargetRef="938c5120-aa38-4cc6-afc7-b7c18ce1f239">How to change the JDK Version for an Existing
              Cluster
            </Xref>
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="938c5120-aa38-4cc6-afc7-b7c18ce1f239">
        <Title>How to change the JDK Version for an Existing Cluster</Title>
        <ParaBlock xy:guid="3754e100-ef38-496a-8b8c-963845344160">
          <List ListMarker="Numeric" xy:guid="0c84816b-e3dd-4a3c-bb0f-fa9c7eb5515c">
            <ItemBlock>
              <Item>
                <ItemPara>Re-run Ambari Server Setup.</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    ambari-server setup
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>At the prompt to change the JDK, Enter<Emph>y</Emph>.
                </ItemPara>
                <RichText>
                  <InLineApplicationPrompt>Do you want to change Oracle JDK [y/n] (n)?</InLineApplicationPrompt>
                  <InLineTypeThis>y</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>At the prompt to choose a JDK, Enter
                  <InLineTypeThis>1</InLineTypeThis>
                  to change the JDK to v1.7.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>
                    [1] - Oracle JDK 1.7
                  </InLineTypeThis>
                  <InLineApplicationPrompt>
                    [2] - Oracle JDK 1.6
                    [3] - Custom JDK Enter choice: 3
                  </InLineApplicationPrompt>
                </RichText>
                <RichText>
                  If you choose Oracle JDK 1.7 or Oracle JDK 1.6, the JDK you choose downloads and installs
                  automatically.
                </RichText>
              </Item>
              <Item>
                <ItemPara>If you choose<InLineMenuSelection>Custom JDK</InLineMenuSelection>, verify or add the custom
                  JDK path on all hosts in the cluster.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>After setup completes, you must restart each component for the new JDK to be used by the
                  Hadoop services.
                </ItemPara>
                <RichText>Using the Ambari Web UI, do the following tasks:</RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Restart each component</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Restart each host</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Restart all services</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
          <RichText>
            For more information about managing services in your cluster, see<Xref
                  InsideTargetRef="a395d3b3-f835-4033-8176-d5ccee6830e5">Monitoring and Managing Services</Xref>.
          </RichText>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="2733aba0-d79b-40b5-b53e-ae31f0a985bb">
      <Title>Configuring NameNode High Availability</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="1c89af4c-bc49-4e8a-8e62-b8642e0b61c8">
        <ParaBlock xy:guid="6762c355-9056-4b63-9d68-e4c7b00ef70e">
          <RichText>Ambari sets up active and standby NameNode hosts on a new cluster, by default. Configuring NameNode
            High Availability (HA) sets the standby NameNode to handle the active NameNode workload in the event that
            the active NameNode fails.
          </RichText>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="7fefe819-a527-4a99-855e-57858a9af4a1">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="1bc2e9fb-eafa-4471-9632-0f587a4611ca"/>
            <SimpleBlock>
              <RichText>NameNode HA is available with HDP Stack v2.0 or later.</RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>
            Following topics describe:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="de48b596-6ed6-469a-a338-44b50bdc236d">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="96b6ea9c-9bf5-4a1b-a4fd-85eec215621e">How to Set Up NameNode HA</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="1143b7d0-5b4f-402c-8089-115017933ccd">How to Roll Back NameNode HA</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="96b6ea9c-9bf5-4a1b-a4fd-85eec215621e">
        <Title>How To Set Up NameNode High Availability</Title>
        <ParaBlock xy:guid="c694f1c8-db85-424c-8f0e-b1d006a61f9d">
          <List ListMarker="Numeric" xy:guid="c785b788-d100-475f-8551-fc18bff08d22">
            <ItemBlock>
              <Item>
                <ItemPara>Check to make sure you have at least three hosts in your cluster and are running at least
                  three ZooKeeper servers.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>In Ambari Web, select
                  <InLineMenuSelection>Services &gt; HDFS &gt; Summary. Select Service Actions and choose Enable
                    NameNode HA.
                  </InLineMenuSelection>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>The Enable HA Wizard launches. This wizard describes the set of automated and manual steps you
                  must take to set up NameNode high availability.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Get Started</Emph>
                  : This step gives you an overview of the process and allows you to select a Nameservice ID. You use
                  this Nameservice ID instead of the NameNode FQDN once HA has been set up. Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  to proceed.
                </ItemPara>
                <Figure xy:guid="17f3355c-0421-46bc-9499-9e33e929d8be">
                  <MediaObject xy:guid="4714530f-fc7b-45f0-a486-bbe0caa88734">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/getstartedHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Select Hosts</Emph>
                  : Select a host for the additional NameNode and the JournalNodes. The wizard suggest options that you
                  can adjust using the drop-down lists. Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  to proceed.
                </ItemPara>
                <Figure xy:guid="b1aef99a-d346-4308-b4fd-8332eaac0408">
                  <MediaObject xy:guid="58219ae2-1140-4c87-9f54-0a28b33753e3">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/selecthostha_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Review</Emph>
                  : Confirm your host selections and click<InLineMenuSelection>Next</InLineMenuSelection>.
                </ItemPara>
                <Figure xy:guid="9a7e644b-15be-4c9c-8fa2-87ebdc302b5f">
                  <MediaObject xy:guid="838ede6d-52b8-4424-8e32-f38daf0889aa">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/reviewha_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Create Checkpoints</Emph>
                  : Follow the instructions in the step. You need to log in to your
                  <Emph>current</Emph>
                  NameNode host to run the commands to put your NameNode into safe mode and create a checkpoint. When
                  Ambari detects success, the message on the bottom of the window changes. Click<InLineMenuSelection>
                  Next</InLineMenuSelection>.
                </ItemPara>
                <Figure xy:guid="62676faf-8bd2-4161-ac52-4f0ff841ab0e">
                  <MediaObject xy:guid="afee4f81-002c-443c-8d61-a42f45055266">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/checkpointsHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Configure Components</Emph>
                  : The wizard configures your components, displaying progress bars to let you track the steps. Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  to continue.
                </ItemPara>
                <Figure xy:guid="84da3771-2cad-44b9-8076-8d4269bf727b">
                  <MediaObject xy:guid="1ae74311-3467-4efe-949d-1f763c362597">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/configurecomponentsHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Initialize JournalNodes</Emph>
                  : Follow the instructions in the step. You need to login to your
                  <Emph>current</Emph>
                  NameNode host to run the command to initialize the JournalNodes. When Ambari detects success, the
                  message on the bottom of the window changes. Click<Emph>Next</Emph>.
                </ItemPara>
                <RichText>
                  <Italic>
                    <Emph>After upgrading to Ambari 1.6.1, or using a Blueprint to install your cluster,</Emph>
                  </Italic>
                  initializing JournalNodes may fail. For information about how to work around this issue, see the the
                  following topic in the Ambari Troubleshooting Guide:

                  <Xref InsideTargetRef="98fcd077-cf39-4075-ac30-264e3028fb49">Enabling NameNode HA wizard fails at the
                    Initialize JournalNode step
                  </Xref>
                </RichText>
                <Figure xy:guid="31fc2a8a-84c6-41d4-93b2-26d75ae40a93">
                  <MediaObject xy:guid="825cdc0b-5b7f-47e8-9c62-3ef85ef08f20">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/initializejournalnodesHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Start Components</Emph>
                  : The wizard starts the ZooKeeper servers and the NameNode, displaying progress bars to let you track
                  the steps. Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  to continue.
                </ItemPara>
                <Figure xy:guid="7d28fc5a-77d5-4003-ade9-25144d700d72">
                  <MediaObject xy:guid="70a52207-5fb8-4041-9f69-2809dc0015bc">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/startcomponentsHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Initialize Metadata</Emph>
                  : Follow the instructions in the step. For this step you must log in to both the
                  <Emph>current</Emph>
                  NameNode and the
                  <Emph>additional</Emph>
                  NameNode. Make sure you are logged in to the correct host for each command. Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  when you have completed the two commands. A
                  <Emph>Confirmation</Emph>
                  pop-up window displays, reminding you to do both steps. Click
                  <InLineMenuSelection>OK</InLineMenuSelection>
                  to confirm.
                </ItemPara>
                <Figure xy:guid="bf552d14-5d03-4467-baba-7cede4df53ed">
                  <MediaObject xy:guid="255062a7-30b7-4c3a-b8fb-288617a845b4">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/initializemetadataHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>
                  <Emph>Finalize HA Setup</Emph>
                  : The wizard the setup, displaying progress bars to let you track the steps. Click
                  <InLineMenuSelection>Done</InLineMenuSelection>
                  to finish the wizard. After the Ambari Web GUI reloads, you may see some alert notifications. Wait a
                  few minutes until the services come back up. If necessary, restart any components using Ambari Web.
                </ItemPara>
                <Figure xy:guid="d4c42d0b-4077-4405-b5fa-2041ff9ec729">
                  <MediaObject xy:guid="aef71346-b73e-42de-b061-792c8cbca598">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/finalizeHA_2x.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
                <CustomNote xy:guid="da2e757a-e093-4e0e-b759-23acb82dffcc">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="92ce526d-2521-4f6e-b29c-671fdb10edf0"/>
                  <SimpleBlock>
                    <RichText>Choose Services, then start Nagios, after completing all steps in the HA wizard.
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>If you are using Hive, you must manually change the Hive Metastore FS root to point to the
                  Nameservice URI instead of the NameNode URI. You created the Nameservice ID in the Get Started step.
                </ItemPara>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Check the current FS root. On the Hive host:</ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          hive --config /etc/hive/conf.server --service metatool -listFSRoot
                        </InLineTypeThis>
                      </RichText>
                      <RichText>
                        The output looks similar to the following:
                        <InLineApplicationPrompt>Listing FS Roots...
                          hdfs://&lt;namenode-host&gt;/apps/hive/warehouse
                        </InLineApplicationPrompt>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Use this command to change the FS root:</ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          $ hive --config /etc/hive/conf.server --service metatool -updateLocation
                        </InLineTypeThis>
                        <SyntaxArg>&lt;new-location&gt;&lt;old-location&gt;</SyntaxArg>
                        <InLineApplicationPrompt>

                        </InLineApplicationPrompt>For example, where the Nameservice ID is mycluster:
                        <InLineApplicationPrompt>
                        </InLineApplicationPrompt>
                        <InLineTypeThis>$ hive --config /etc/hive/conf.server --service metatool -updateLocation
                          hdfs://mycluster/apps/hive/warehouse hdfs://c6401.ambari.apache.org/apps/hive/warehouse
                        </InLineTypeThis>
                      </RichText>
                      <RichText>
                        The output looks similar to the following:
                      </RichText>
                      <RichText>
                        <InLineApplicationPrompt>Successfully updated the following locations...
                        </InLineApplicationPrompt>
                        <InLineApplicationPrompt>Updated X records in SDS table</InLineApplicationPrompt>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>If you are using Oozie, you must use the Nameservice ID instead of the NameNode URI in your
                  workflow files. For example, where the Nameservice ID is<InLineCode>mycluster</InLineCode>:
                </ItemPara>
                <RichText>
                  <InLineTypeThis>
                    &lt;workflow-app xmlns="uri:oozie:workflow:0.2" name="map-reduce-wf"&gt;
                    &lt;start to="mr-node"/&gt;
                    &lt;action name="mr-node"&gt;
                    &lt;map-reduce&gt;
                    &lt;job-tracker&gt;&lt;jobTracker&gt;&lt;/job-tracker&gt;
                    &lt;name-node&gt;hdfs://mycluster&lt;/name-node&gt;</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>If you are using Hue, to enable NameNode HighAvailability, you must use httpfs instead of
                  webhdfs to communicate with name nodes inside the cluster. After successfully setting up NameNode High
                  Availability:
                </ItemPara>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Install an httpfs server on any node in the cluster:</ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          yum install hadoop-httpfs
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Ensure that Hue hosts and groups use the httpfs server.</ItemPara>
                      <RichText>
                        For example, on the httpfs server host, add to httpfs-site.xml the following lines:
                      </RichText>
                      <RichText>
                        <InLineApplicationPrompt>
                        </InLineApplicationPrompt>
                        <InLineTypeThis>&lt;property&gt;
                          &lt;name&gt;httpfs.proxyuser.hue.hosts&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt;
                          &lt;property&gt; &lt;name&gt;httpfs.proxyuser.hue.groups&lt;/name&gt; &lt;value&gt;*&lt;/value&gt;
                          &lt;/property&gt;</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Ensure that groups and hosts in the cluster use the httpfs server. For example, use
                        <Emph>Services &gt; HDFS &gt; Configs</Emph>
                        to add the following properties and values to<InLineCode>core-site.xml</InLineCode>.
                      </ItemPara>
                      <Table align="" border="false" width="100" xy:guid="64389727-f5de-4dc8-a51c-b7d9962ad7f9">
                        <TblGroup>
                          <TblCol width=""/>
                          <TblCol width=""/>
                          <TblHeader>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Property</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>Value</RichText>
                              </Cell>
                            </TableRow>
                          </TblHeader>
                          <TblBody>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>hadoop.proxyuser.httpfs.groups</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>*</RichText>
                              </Cell>
                            </TableRow>
                            <TableRow>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>hadoop.proxyuser.httpfs.hosts</RichText>
                              </Cell>
                              <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                                <RichText>*</RichText>
                              </Cell>
                            </TableRow>
                          </TblBody>
                          <TblFooter/>
                        </TblGroup>
                      </Table>
                    </Item>
                    <Item>
                      <ItemPara>Using Ambari, in
                        <InLineMenuSelection>Services &gt;HDFS</InLineMenuSelection>
                        restart the HDFS service in your cluster.
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>On the Hue host, configure Hue to use the httpfs server by editing hue.ini to include
                        the following line:
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          webhdfs_url=http://
                        </InLineTypeThis>
                        <SyntaxArg>&lt;fqdn.of.httpfs.server&gt;</SyntaxArg>
                        <InLineTypeThis>:14000/webhdfs/v1/</InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Restart the Hue service.</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Adjust the ZooKeeper Failover Controller retries setting for your environment.</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Browse to
                        <InLineMenuSelection>Services &gt; HDFS &gt; Configs &gt;</InLineMenuSelection>
                        <InLineCode>core-site.</InLineCode>
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Set
                        <InLineTypeThis>ha.failover-controller.active-standby-elector.zk.op.retries=120</InLineTypeThis>
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
          <RichText/>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="1143b7d0-5b4f-402c-8089-115017933ccd">
        <Title>How to Roll Back NameNode HA</Title>
        <ParaBlock xy:guid="7969e605-1f76-4ef9-859c-c0644f26b258">
          <RichText>To roll back NameNode HA to the previous non-HA state use the following step-by-step manual process,
            depending on your installation.
          </RichText>
          <List ListMarker="Numeric" xy:guid="4ec88366-7c96-4a68-b9e5-2ad32d1518e9">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="da81d662-9713-4819-9cc6-6cff0136fb44">Stop HBase</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="1edc6678-2624-4180-9ed2-eec9b369b85a">Checkpoint the Active</Xref>
                  <Xref InsideTargetRef="1edc6678-2624-4180-9ed2-eec9b369b85a">NameNode</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="d84d214b-90a8-4692-98b7-f4ad603a08d0">Stop All Services</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7f2eb960-6285-425f-9422-2155c53941e6">Prepare the Ambari</Xref>
                  <Xref InsideTargetRef="7f2eb960-6285-425f-9422-2155c53941e6">Host for Rollback</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="b9c0561a-dfdb-4695-b283-1ef5a5d0bd23">Restore the HBase Configuration</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="845625e1-fa42-425d-b60a-bcd347c3adaf">Delete ZooKeeper Failover Controllers
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="c38d1665-9d76-4270-b2de-7f21aa69f827">Modify HDFS Configurations</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="5eba614f-afb2-4fdd-a2f2-6aa64a91e98e">Recreate the</Xref>
                  <Xref InsideTargetRef="5eba614f-afb2-4fdd-a2f2-6aa64a91e98e">standby NameNode</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="85ebe09e-eeca-462b-9784-d3df13d8d443">Re-enable the standby</Xref>
                  <Xref InsideTargetRef="85ebe09e-eeca-462b-9784-d3df13d8d443">NameNode</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="dd4a088d-e577-4565-b178-46fbd428b68b">Delete All</Xref>
                  <Xref InsideTargetRef="dd4a088d-e577-4565-b178-46fbd428b68b">JournalNodes</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="f922aff3-18bc-4bd9-b7c8-fcdce9b1ecd8">Delete the</Xref>
                  <Xref InsideTargetRef="f922aff3-18bc-4bd9-b7c8-fcdce9b1ecd8">Additional NameNode</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="cdc37f56-735e-4422-bcc6-73225b8f50c9">Verify the HDFS Components</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="9c137931-2d46-48f0-8a6e-e6ba5331dc6a">Start HDFS</Xref>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
        <Topic xy:guid="da81d662-9713-4819-9cc6-6cff0136fb44">
          <Title>Stop HBase</Title>
          <ParaBlock xy:guid="d8b04615-ef2c-42f6-abb1-3a241523f5b8">
            <List ListMarker="Numeric" xy:guid="e0213121-3338-409d-8be7-d6f5a92c7be7">
              <ItemBlock>
                <Item>
                  <ItemPara>From Ambari Web, go to the Services view and select HBase.</ItemPara>
                </Item>
                <Item>
                  <ItemPara>Choose
                    <InLineMenuSelection>Service Actions &gt; Stop</InLineMenuSelection>
                    <Emph>.</Emph>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Wait until HBase has stopped completely before continuing.</ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="1edc6678-2624-4180-9ed2-eec9b369b85a">
          <Title>Checkpoint the Active NameNode</Title>
          <ParaBlock xy:guid="33b9161d-5475-4bb6-9710-3bb1c888cfa1">
            <RichText>
              If HDFS has been in use
              <Emph>after</Emph>
              you enabled NameNode HA, but you wish to revert back to a non-HA state, you must checkpoint the HDFS state
              before proceeding with the rollback.
            </RichText>
            <RichText>
              If the
              <InLineMenuSelection>Enable NameNode HA</InLineMenuSelection>
              wizard failed and you need to revert back, you can skip this step and move on to<Xref
                    InsideTargetRef="d84d214b-90a8-4692-98b7-f4ad603a08d0">Stop All Services</Xref>.
            </RichText>
            <List ListMarker="Bullet" xy:guid="6384be7e-3433-401f-887b-072b604bfbbd">
              <ItemBlock>
                <Item>
                  <ItemPara>If Kerberos security has
                    <Emph>not</Emph>
                    been enabled on the cluster:
                  </ItemPara>
                  <RichText>
                    On the Active NameNode host, execute the following commands to save the namespace. You must be the
                    HDFS service user to do this.
                  </RichText>
                  <RichText>
                    <InLineTypeThis>sudo su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c 'hdfs dfsadmin -safemode enter'
                      sudo su -l
                    </InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c 'hdfs dfsadmin -saveNamespace'</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If Kerberos security
                    <Emph>has</Emph>
                    been enabled on the cluster:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>sudo su -l</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c 'kinit -kt /etc/security/keytabs/nn.service.keytab nn/</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>@</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>;hdfs dfsadmin -safemode enter'
                      sudo su -l
                    </InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-c 'kinit -kt /etc/security/keytabs/nn.service.keytab nn/</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>@</InLineTypeThis>
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    <InLineTypeThis>;hdfs dfsadmin -saveNamespace'</InLineTypeThis>
                  </RichText>
                  <RichText>
                    Where
                    <SyntaxArg>&lt;HDFS_USER&gt;</SyntaxArg>
                    is the HDFS service user; for example hdfs,
                    <SyntaxArg>&lt;HOSTNAME&gt;</SyntaxArg>
                    is the Active NameNode hostname, and<SyntaxArg>&lt;REALM&gt; </SyntaxArg>is your Kerberos realm.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="d84d214b-90a8-4692-98b7-f4ad603a08d0">
          <Title>Stop All Services</Title>
          <ParaBlock xy:guid="450c9b92-26d1-4830-aa50-8ed01c0004be">
            <RichText>Browse to<InLineMenuSelection>Ambari Web &gt; Services</InLineMenuSelection>, then choose
              <InLineMenuSelection>Stop All</InLineMenuSelection>
              in the Services navigation panel. You must wait until all the services are completely stopped.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="7f2eb960-6285-425f-9422-2155c53941e6">
          <Title>Prepare the Ambari Server Host for Rollback</Title>
          <ParaBlock xy:guid="23baa1c3-9450-4ffe-9610-c0e365e63251">
            <RichText>Log into the Ambari server host and set the following environment variables to prepare for the
              rollback procedure:
            </RichText>
            <Table align="" border="false" width="100" xy:guid="ad0026b6-98a7-41cc-bae7-d27c835c4edf">
              <TblGroup>
                <TblCol width=""/>
                <TblCol width=""/>
                <TblHeader>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Variable</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Value</RichText>
                    </Cell>
                  </TableRow>
                </TblHeader>
                <TblBody>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export AMBARI_USER=AMBARI_USERNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the value of the administrative user for Ambari Web. The default value is
                        admin.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export AMBARI_PW=AMBARI_PASSWORD</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the value of the administrative password for Ambari Web. The default value is
                        admin.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export AMBARI_PORT=AMBARI_PORT</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the Ambari Web port. The default value is 8080.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export AMBARI_PROTO=AMBARI_PROTOCOL</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the value of the protocol for connecting to Ambari Web. Options are http or
                        https. The default value is http.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export CLUSTER_NAME=CLUSTER_NAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the name of your cluster, set during the Ambari Install Wizard process. For
                        example: mycluster.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export NAMENODE_HOSTNAME=NN_HOSTNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the FQDN of the host for the non-HA NameNode. For example:
                        nn01.mycompany.com.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export ADDITIONAL_NAMENODE_HOSTNAME=ANN_HOSTNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the FQDN of the host for the additional NameNode in your HA setup.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export SECONDARY_NAMENODE_HOSTNAME=SNN_HOSTNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the FQDN of the host for the standby NameNode for the non-HA setup.
                      </RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export JOURNALNODE1_HOSTNAME=JOUR1_HOSTNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the FQDN of the host for the first Journal Node.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export JOURNALNODE2_HOSTNAME=JOUR2_HOSTNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the FQDN of the host for the second Journal Node.</RichText>
                    </Cell>
                  </TableRow>
                  <TableRow>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>export JOURNALNODE3_HOSTNAME=JOUR3_HOSTNAME</RichText>
                    </Cell>
                    <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                      <RichText>Substitute the FQDN of the host for the third Journal Node.</RichText>
                    </Cell>
                  </TableRow>
                </TblBody>
                <TblFooter/>
              </TblGroup>
            </Table>
            <RichText>
              Double check that these environment variables are set correctly.
            </RichText>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="b9c0561a-dfdb-4695-b283-1ef5a5d0bd23">
          <Title>Restore the HBase Configuration</Title>
          <ParaBlock xy:guid="9eee41d0-7ea4-47b8-8aeb-acaf0521d5b4">
            <RichText>If you have installed HBase, you may need to restore a configuration to its pre-HA state.
            </RichText>
            <List ListMarker="Numeric" xy:guid="da5fceae-6193-49ff-a11b-9050d8995b59">
              <ItemBlock>
                <Item>
                  <ItemPara>To check if your current HBase configuration needs to be restored, on the Ambari Server
                    host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      /var/lib/ambari-server/resources/scripts/configs.sh -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>get localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>hbase-site</InLineTypeThis>
                  </RichText>
                  <RichText>
                    Where the environment variables you set up in
                    <Xref InsideTargetRef="7f2eb960-6285-425f-9422-2155c53941e6">Prepare the Ambari Server Host for
                      Rollback
                    </Xref>
                    substitute for the variable names.
                  </RichText>
                  <RichText>
                    Look for the configuration property<InLineCode>hbase.rootdir</InLineCode>. If the value is set to
                    the NameService ID you set up using the
                    <InLineMenuSelection>Enable NameNode HA</InLineMenuSelection>
                    wizard, you need to revert the
                    <InLineCode>hbase-site</InLineCode>
                    configuration set up back to non-HA values. If it points instead to a specific NameNode host, it
                    does not need to be rolled back and you can go on to<Xref
                          InsideTargetRef="845625e1-fa42-425d-b60a-bcd347c3adaf">Delete ZooKeeper Failover
                    Controllers</Xref>.
                  </RichText>
                  <RichText>
                    For example:
                  </RichText>
                  <RichText>
                    <InLineTypeThis>"hbase.rootdir":"hdfs://</InLineTypeThis>
                    <SyntaxArg>&lt;name-service-id&gt;</SyntaxArg>
                    <InLineTypeThis>:8020/apps/hbase/data"</InLineTypeThis>
                    The hbase.rootdir property points to the NameService ID and the value needs to be rolled back

                    <InLineTypeThis>"hbase.rootdir":"hdfs://</InLineTypeThis>
                    <SyntaxArg>&lt;nn01.mycompany.com&gt;</SyntaxArg>
                    <InLineTypeThis>:8020/apps/hbase/data"</InLineTypeThis>
                    The hbase.rootdir property points to a specific NameNode host and not a NameService ID. This does
                    not need to be rolled back.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If you need to roll back the
                    <InLineCode>hbase.rootdir</InLineCode>
                    value, on the Ambari Server host, use the
                    <InLineCode>config.sh</InLineCode>
                    script to make the necessary change:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      /var/lib/ambari-server/resources/scripts/configs.sh -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>set localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>hbase-site hbase.rootdir hdfs://</InLineTypeThis>
                    <SyntaxArg>&lt;NAMENODE_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>:8020/apps/hbase/data</InLineTypeThis>
                  </RichText>
                  <RichText>
                    Where the environment variables you set up in
                    <Xref InsideTargetRef="7f2eb960-6285-425f-9422-2155c53941e6">Prepare the Ambari Server Host for
                      Rollback
                    </Xref>
                    substitute for the variable names.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Verify that the
                    <InLineCode>hbase.rootdir</InLineCode>
                    property has been restored properly. On the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      /var/lib/ambari-server/resources/scripts/configs.sh -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>get localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>hbase-site</InLineTypeThis>
                  </RichText>
                  <RichText>
                    The
                    <InLineCode>hbase.rootdir</InLineCode>
                    property should now be set to the NameNode hostname, not the NameService ID.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="845625e1-fa42-425d-b60a-bcd347c3adaf">
          <Title>Delete ZooKeeper Failover Controllers</Title>
          <ParaBlock xy:guid="5b237179-d76f-4233-942e-7604aef65060">
            <RichText>You may need to delete ZooKeeper (ZK) Failover Controllers.</RichText>
            <List ListMarker="Numeric" xy:guid="e7992f5d-77a7-4823-b17a-88404c4be2d3">
              <ItemBlock>
                <Item>
                  <ItemPara>To check if you need to delete ZK Failover Controllers, on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      curl -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?</InLineTypeThis>
                    <InLineApplicationPrompt>HostRoles/component_name=ZKFC</InLineApplicationPrompt>
                  </RichText>
                  <RichText>
                    If this returns an empty
                    <InLineCode>items</InLineCode>
                    array, you may proceed to<Xref InsideTargetRef="c38d1665-9d76-4270-b2de-7f21aa69f827">Modify HDFS
                    Configuration</Xref>.
                    Otherwise you must use the following DELETE commands:
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>To delete all ZK Failover Controllers, on the Ambari Server host:</ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      curl -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X DELETE</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts/</InLineTypeThis>
                    <SyntaxArg>&lt;NAMENODE_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components/ZKFC

                      curl -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X DELETE</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts/</InLineTypeThis>
                    <SyntaxArg>&lt;ADDITIONAL_NAMENODE_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components/ZKFC</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Verify that the ZK Failover Controllers have been deleted. On the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=ZKFC</InLineTypeThis>
                  </RichText>
                  <RichText>
                    This command should return an empty
                    <InLineCode>items</InLineCode>
                    array.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="c38d1665-9d76-4270-b2de-7f21aa69f827">
          <Title>Modify HDFS Configurations</Title>
          <ParaBlock xy:guid="5c54989f-56d1-46e9-b248-7507829149f4">
            <RichText>You may need to modify your
              <InLineCode>hdfs-site</InLineCode>
              configuration and/or your
              <InLineCode>core-site</InLineCode>
              configuration.
            </RichText>
            <List ListMarker="Numeric" xy:guid="06955d77-1c22-43f9-9115-a62faa7e35c4">
              <ItemBlock>
                <Item>
                  <ItemPara>To check if you need to modify your
                    <InLineCode>hdfs-site</InLineCode>
                    configuration, on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>
                      /var/lib/ambari-server/resources/scripts/configs.sh -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>get localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>hdfs-site</InLineTypeThis>
                  </RichText>
                  <RichText>
                    If you see
                    <Emph>any</Emph>
                    of the following properties, you must delete them from your configuration.
                  </RichText>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.nameservices</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.client.failover.proxy.provider.&lt;NAMESERVICE_ID&gt;</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.ha.namenodes.&lt;NAMESERVICE_ID&gt;</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.ha.fencing.methods</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.ha.automatic-failover.enabled</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.namenode.http-address.&lt;NAMESERVICE_ID&gt;.nn1</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.namenode.http-address.&lt;NAMESERVICE_ID&gt;.nn2</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.namenode.rpc-address.&lt;NAMESERVICE_ID&gt;.nn1</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.namenode.rpc-address.&lt;NAMESERVICE_ID&gt;.nn2</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.namenode.shared.edits.dir</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.journalnode.edits.dir</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.journalnode.http-address</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.journalnode.kerberos.internal.spnego.principal</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.journalnode.kerberos.principal</InLineCode>
                        </ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>
                          <InLineCode>dfs.journalnode.keytab.file</InLineCode>
                        </ItemPara>
                        <RichText>
                          Where
                          <InLineCode>&lt;NAMESERVICE_ID&gt;</InLineCode>
                          is the NameService ID you created when you ran the
                          <Emph>Enable NameNode HA</Emph>
                          wizard.
                        </RichText>
                      </Item>
                    </ItemBlock>
                  </SubList>
                </Item>
                <Item>
                  <ItemPara>To delete these properties, execute the following
                    <Emph>for each property</Emph>
                    you found. On the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    /
                    <InLineTypeThis>var/lib/ambari-server/resources/scripts/configs.sh -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>delete localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>hdfs-site property_name</InLineTypeThis>
                  </RichText>
                  <RichText>
                    Where you replace
                    <InLineTypeThis>property_name</InLineTypeThis>
                    with the name of
                    <Emph>each</Emph>
                    of the properties to be deleted.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Verify that all of the properties have been deleted. On the Ambari Server host:
                    <InLineTypeThis>/var/lib/ambari-server/resources/scripts/configs.sh -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>get localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>hdfs-site</InLineTypeThis>
                  </ItemPara>
                  <RichText>
                    None of the properties listed above should be present.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>To check if you need to modify your
                    <InLineCode>core-site</InLineCode>
                    configuration, on the Ambari Server host:
                    <InLineTypeThis>/var/lib/ambari-server/resources/scripts/configs.sh -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>get localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>core-site</InLineTypeThis>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>If you see the property<InLineCode>ha.zookeeper.quorum</InLineCode>, it must be deleted. On
                    the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>/var/lib/ambari-server/resources/scripts/configs.sh -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>delete localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>core-site ha.zookeeper.quorum</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>If the property
                    <InLineCode>fs.defaultFS</InLineCode>
                    is set to the NameService ID, it must be reverted back to its non-HA value. For example:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>"fs.defaultFS":"hdfs://</InLineTypeThis>
                    <SyntaxArg>&lt;name-service-id&gt;</SyntaxArg>
                    <InLineTypeThis>"
                      The property fs.defaultFS needs to be modified as it points to a NameService ID
                      "fs.defaultFS":"hdfs://
                    </InLineTypeThis>
                    <SyntaxArg>&lt;nn01.mycompany.com&gt;</SyntaxArg>
                    <InLineTypeThis>"
                    </InLineTypeThis>
                    The property
                    <InLineCode>fs.defaultFS</InLineCode>
                    does not need to be changed as it points to a specific NameNode, not to a NameService ID
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>To revert the property
                    <InLineCode>fs.defaultFS</InLineCode>
                    to the NameNode host value, on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>/var/lib/ambari-server/resources/scripts/configs.sh -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>set localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>core-site fs.defaultFS hdfs://</InLineTypeThis>
                    <SyntaxArg>&lt;NAMENODE_HOSTNAME&gt;</SyntaxArg>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Verify that the
                    <InLineCode>core-site</InLineCode>
                    properties are now properly set. On the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>/var/lib/ambari-server/resources/scripts/configs.sh -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>-p</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-port</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>get localhost</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>core-site</InLineTypeThis>
                  </RichText>
                  <RichText>
                    The property
                    <InLineCode>fs.defaultFS</InLineCode>
                    should be set to point to the NameNode host and the property
                    <InLineCode>ha.zookeeper.quorum</InLineCode>
                    should not be there.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="5eba614f-afb2-4fdd-a2f2-6aa64a91e98e">
          <Title>Recreate the Standby NameNode</Title>
          <ParaBlock xy:guid="9b91740a-8e5b-4d37-86e3-8aecfa0fc31e">
            <RichText>You may need to recreate your standby NameNode.</RichText>
            <List ListMarker="Numeric" xy:guid="a519867b-825b-444b-a256-166aa3751212">
              <ItemBlock>
                <Item>
                  <ItemPara>To check to see if you need to recreate the standby NameNode, on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X GET</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=SECONDARY_NAMENODE</InLineTypeThis>
                  </RichText>
                  <RichText>
                    If this returns an empty
                    <InLineCode>items</InLineCode>
                    array, you must recreate your standby NameNode. Otherwise you can go on to<Xref
                          InsideTargetRef="85ebe09e-eeca-462b-9784-d3df13d8d443">Re-enable Standby NameNode</Xref>.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Recreate your standby NameNode. On the Ambari Server host:
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X POST -d '{"host_components" :
                      [{"HostRoles":{"component_name":"SECONDARY_NAMENODE"}] }'
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts?Hosts/host_name=</InLineTypeThis>
                    <SyntaxArg>&lt;SECONDARY_NAMENODE_HOSTNAME&gt;</SyntaxArg>
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Verify that the standby NameNode now exists. On the Ambari Server host:</ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X GET</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=SECONDARY_NAMENODE</InLineTypeThis>
                  </RichText>
                  <RichText>
                    This should return a non-empty
                    <InLineCode>items</InLineCode>
                    array containing the standby NameNode.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="85ebe09e-eeca-462b-9784-d3df13d8d443">
          <Title>Re-enable the Standby NameNode</Title>
          <ParaBlock xy:guid="ed42f36f-f181-4486-b651-006c24a72142">
            <RichText>To re-enable the standby NameNode, on the Ambari Server host:</RichText>
            <RichText>
              <InLineTypeThis>curl -u</InLineTypeThis>
              <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
              <InLineTypeThis>:</InLineTypeThis>
              <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
              <InLineTypeThis>-H "X-Requested-By: ambari" -i -X '{"RequestInfo":{"context":"Enable Secondary
                NameNode"},"Body":{"HostRoles":{"state":"INSTALLED"}}}'
              </InLineTypeThis>
              <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
              <InLineTypeThis>://localhost:</InLineTypeThis>
              <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
              <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
              <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
              <InLineTypeThis>/hosts/&lt;SECONDARY_NAMENODE_HOSTNAME}/host_components/SECONDARY_NAMENODE
              </InLineTypeThis>
            </RichText>
            <List ListMarker="Bullet" xy:guid="5fbe735c-bf25-496b-9ab4-254cf3da5cca">
              <ItemBlock>
                <Item>
                  <ItemPara>If this returns 200, go to<Xref InsideTargetRef="dd4a088d-e577-4565-b178-46fbd428b68b">
                    Delete All JournalNodes</Xref>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>If this returns 202, wait a few minutes and run the following on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:${AMBARI_PW -H "X-Requested-By: ambari" -i -X "</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=SECONDARY_NAMENODE&amp;fields=HostRoles/state"</InLineTypeThis>
                  </RichText>
                  <RichText>
                    When
                    <InLineCode>"state" : "INSTALLED"</InLineCode>
                    is in the response, go on to the next step.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="dd4a088d-e577-4565-b178-46fbd428b68b">
          <Title>Delete All JournalNodes</Title>
          <ParaBlock xy:guid="278874f8-cfd7-44e0-b88a-5eb1f7c7918a">
            <RichText>
              You may need to delete any JournalNodes.
            </RichText>
            <List ListMarker="Numeric" xy:guid="4de47e47-7c3b-4e68-8783-ab5f86fb99aa">
              <ItemBlock>
                <Item>
                  <ItemPara>To check to see if you need to delete JournalNodes, on the Ambari Server host:</ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X GET</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=JOURNALNODE</InLineTypeThis>
                  </RichText>
                  <RichText>
                    If this returns an empty
                    <InLineCode>items</InLineCode>
                    array, you can go on to<Xref InsideTargetRef="f922aff3-18bc-4bd9-b7c8-fcdce9b1ecd8">Delete the
                    Additional NameNode</Xref>. Otherwise you must delete the JournalNodes.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>To delete the JournalNodes, on the Ambari Server host:</ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X DELETE</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts/</InLineTypeThis>
                    <SyntaxArg>&lt;JOURNALNODE1_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components/JOURNALNODE

                      curl -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X DELETE</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts/</InLineTypeThis>
                    <SyntaxArg>&lt;JOURNALNODE2_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components/JOURNALNODEâ¨

                      curl -u
                    </InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X DELETE</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts/</InLineTypeThis>
                    <SyntaxArg>&lt;JOURNALNODE3_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components/JOURNALNODE</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Verify that all the JournalNodes have been deleted. On the Ambari Server host:</ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X GET</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=JOURNALNODE</InLineTypeThis>
                  </RichText>
                  <RichText>
                    This should return an empty
                    <InLineCode>items</InLineCode>
                    array.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="f922aff3-18bc-4bd9-b7c8-fcdce9b1ecd8">
          <Title>Delete the Additional NameNode</Title>
          <ParaBlock xy:guid="cbbcdc4d-68bb-451c-b73a-88ce1f263fbd">
            <RichText>
              You may need to delete your Additional NameNode.
            </RichText>
            <List ListMarker="Numeric" xy:guid="7119f3b1-1404-4929-82c1-728cb64f238b">
              <ItemBlock>
                <Item>
                  <ItemPara>To check to see if you need to delete your Additional NameNode, on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X GET</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=NAMENODE</InLineTypeThis>
                  </RichText>
                  <RichText>
                    If the
                    <InLineCode>items</InLineCode>
                    array contains two NameNodes, the Additional NameNode must be deleted.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>To delete the Additional NameNode that was set up for HA, on the Ambari Server host:
                  </ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X DELETE</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/hosts/</InLineTypeThis>
                    <SyntaxArg>&lt;ADDITIONAL_NAMENODE_HOSTNAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components/NAMENODE</InLineTypeThis>
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>Verify that the Additional NameNode has been deleted:</ItemPara>
                  <RichText>
                    <InLineTypeThis>curl -u</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_USER&gt;</SyntaxArg>
                    <InLineTypeThis>:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PW&gt;</SyntaxArg>
                    <InLineTypeThis>-H "X-Requested-By: ambari" -i -X GET</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PROTO&gt;</SyntaxArg>
                    <InLineTypeThis>://localhost:</InLineTypeThis>
                    <SyntaxArg>&lt;AMBARI_PORT&gt;</SyntaxArg>
                    <InLineTypeThis>/api/v1/clusters/</InLineTypeThis>
                    <SyntaxArg>&lt;CLUSTER_NAME&gt;</SyntaxArg>
                    <InLineTypeThis>/host_components?HostRoles/component_name=NAMENODE</InLineTypeThis>
                  </RichText>
                  <RichText>
                    This should return an
                    <InLineCode>items</InLineCode>
                    array that shows only one NameNode.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="cdc37f56-735e-4422-bcc6-73225b8f50c9">
          <Title>Verify the HDFS Components</Title>
          <ParaBlock xy:guid="6e3e0d9f-f861-4d32-ab76-e8c69f692ca0">
            <RichText>Make sure you have the correct components showing in HDFS.</RichText>
            <List ListMarker="Numeric" xy:guid="d470bfd3-f698-438b-8a6c-18a7dbc34d35">
              <ItemBlock>
                <Item>
                  <ItemPara>Go to<InLineMenuSelection>Ambari Web UI &gt; Services</InLineMenuSelection>, then select
                    <InLineMenuSelection>HDFS</InLineMenuSelection>.
                  </ItemPara>
                </Item>
                <Item>
                  <ItemPara>Check the Summary panel and make sure that the first three lines look like this:</ItemPara>
                  <SubList ListMarker="Bullet">
                    <ItemBlock>
                      <Item>
                        <ItemPara>NameNode</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>SNameNode</ItemPara>
                      </Item>
                      <Item>
                        <ItemPara>DataNodes</ItemPara>
                      </Item>
                    </ItemBlock>
                  </SubList>
                  <RichText>
                    You should
                    <Emph>not</Emph>
                    see any line for JournalNodes.
                  </RichText>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
        <Topic xy:guid="9c137931-2d46-48f0-8a6e-e6ba5331dc6a">
          <Title>Start HDFS</Title>
          <ParaBlock xy:guid="9e277831-343c-4864-bfc0-270178a71373">
            <List ListMarker="Numeric" xy:guid="6062017f-0a5b-4b44-af2a-13fb8a21b2dd">
              <ItemBlock>
                <Item>
                  <ItemPara>In the<InLineMenuSelection>Ambari Web UI</InLineMenuSelection>, select<InLineMenuSelection>
                    Service Actions</InLineMenuSelection>, then choose
                    <InLineMenuSelection>Start</InLineMenuSelection>
                    <Emph>.</Emph>
                  </ItemPara>
                  <RichText>
                    Wait until the progress bar shows that the service has completely started and has passed the service
                    checks.

                    If HDFS does not start, you may need to repeat the previous step.
                  </RichText>
                </Item>
                <Item>
                  <ItemPara>To start all of the other services, select<InLineMenuSelection>Actions &gt; Start
                    All</InLineMenuSelection>in the
                    <InLineMenuSelection>Services</InLineMenuSelection>
                    navigation panel.
                  </ItemPara>
                </Item>
              </ItemBlock>
            </List>
          </ParaBlock>
        </Topic>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="43a2a024-0e2a-4edc-abde-490ac78029e1">
      <Title>Configuring ResourceManager High Availability</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="27ebc54b-f45a-49ea-b136-dc867de918ca">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="e180763c-6e2b-47bd-9871-43f5c56db0a1">
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="cb4721ff-ca29-434a-9f23-d454eec3cfc4">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="ced9e16e-fc7c-440e-b39e-250b906a87d7"/>
            <SimpleBlock>
              <RichText>This feature is available with HDP Stack 2.2 or later.</RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>The following topic explains<Xref InsideTargetRef="edbf1cf0-b3cd-42fb-959c-fdb13bc5e02f">How to set
            up ResourceManager High Availability</Xref>.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="edbf1cf0-b3cd-42fb-959c-fdb13bc5e02f">
        <Title>How to Set Up ResourceManager High Availability</Title>
        <ParaBlock xy:guid="7989d36e-1eed-4fbf-a087-13c07570c5af">
          <List ListMarker="Numeric" xy:guid="718887c1-9961-4a55-be47-948de6df869c">
            <ItemBlock>
              <Item>
                <ItemPara>Check to make sure you have at least three hosts in your cluster and are running at least
                  three ZooKeeper servers.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>In Ambari Web, browse to<InLineMenuSelection>Services &gt; YARN &gt;
                  Summary</InLineMenuSelection>. Select
                  <InLineMenuSelection>Service Actions</InLineMenuSelection>
                  and choose<InLineMenuSelection>Enable ResourceManager HA</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>The Enable ResourceManager HA Wizard launches. The wizard describes a set of automated and
                  manual steps you must take to set up ResourceManager High Availability.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara><Emph>Get Started</Emph>: This step gives you an overview of enabling ResourceManager HA.
                  Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  to proceed.
                </ItemPara>
                <Figure xy:guid="42d88b14-81fe-4313-9f3c-5fa4adac3ff2">
                  <MediaObject xy:guid="8f6c5500-14c1-4b50-a31e-404579233230">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/RMHA-01_get_started.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara><Emph>Select Host</Emph>: The wizard shows you the host on which the current ResourceManager
                  is installed and suggests a default host on which to install an additional ResourceManager. Accept the
                  default selection, or choose an available host. Click
                  <InLineMenuSelection>Next</InLineMenuSelection>
                  to proceed.
                </ItemPara>
                <Figure xy:guid="e341ca2e-7c00-4be1-b703-74fac96588c9">
                  <MediaObject xy:guid="d9fba0eb-988f-4c70-8071-cb7321b00dac">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/RMHA-02_Select_Host.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara><Emph>Review Selections</Emph>: The wizard shows you the host selections and configuration
                  changes that will occur to enable ResourceManager HA. Expand YARN, if necessary, to review all the
                  YARN configuration changes. Click<InLineMenuSelection>Next</InLineMenuSelection>to approve the changes
                  and start automatically configuring ResourceManager HA.
                </ItemPara>
                <Figure xy:guid="260623bf-055f-4c09-ada1-79cdc8ff1d63">
                  <MediaObject xy:guid="49e8dc79-9d81-4841-80fa-4b2c42151756">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/RMHA-03_Review.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara><Emph>Configure Components</Emph>: The wizard configures your components automatically,
                  displaying progress bars to let you track the steps. After all progress bars complete, click
                  <InLineMenuSelection>Complete</InLineMenuSelection>to finish the wizard.
                </ItemPara>
                <Figure xy:guid="51e0a925-66ea-415c-8636-d65e60765d55">
                  <MediaObject xy:guid="8656aff2-fb54-4654-b7d9-6879bb9b43f9">
                    <Renditions>
                      <Web thumbWidth="50" uri="01-RawContent/Ambari/RMHA-04_Configure_Components.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="e561c948-f7cb-46c9-82d3-793204e18151">
      <Title>Configuring RHEL HA for Hadoop 1.x</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="c18430a2-f574-49b9-a50a-19c48d99f775">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="8966b0d9-c971-4859-b42c-e3141bc51923">
          <RichText>Ambari supports High Availability of components such as NameNode or JobTracker in a HDP 1.x cluster
            running RHEL HA. After installing NameNode monitoring components on hosts in an HA cluster, as described in
            <Href UrlTarget="http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.3.3/bk_hdp1-system-admin-guide/content/ch_ha-redhat-nn-config.html">
              HDP System Administration</Href>, configure Ambari to reassign any component on a failover host in the
            cluster, using the host_relocate_component.py script.
          </RichText>
          <RichText>For example, if the host for the primary NameNode or JobTracker component fails, Ambari reassigns
            the primary NameNode or JobTracker component to the configured failover host, when you start or restart
            Ambari server.

            To configure RHEL HA for an Hadoop 1.x, do the following tasks:
          </RichText>
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="eb9dddf3-49ab-4a1f-adc5-6a39c233e619">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="7025de4e-976f-4e96-8874-5ce3370d62e7">Deploy the scripts</Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <Xref InsideTargetRef="67e6f971-18b4-45a1-a8f5-02651bc66683">Configure Ambari properties across the HA
                    cluster
                  </Xref>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara><Xref InsideTargetRef="bf4a0932-32e2-4d62-9196-ca244ab44255">Troublshoot RHEL HA</Xref>, if
                  necessary
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="7025de4e-976f-4e96-8874-5ce3370d62e7">
        <Title>Deploy the scripts</Title>
        <ParaBlock xy:guid="5f518179-7b00-4103-8b3c-bbe414b3ffef">
          <RichText>While the Ambari server and ambari agents are running on each host:</RichText>
          <List ListMarker="Numeric" xy:guid="248a1e35-95f6-4060-be90-0aa2cd2f7558">
            <ItemBlock>
              <Item>
                <ItemPara>Download relocate_host_component.py from
                  <InLineCode>/var/lib/ambari-server/resources/scripts</InLineCode>
                  on the Ambari server to
                  <InLineCode>/usr/bin/</InLineCode>
                  on each failover host.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Download
                  <InLineMenuSelection>hadoop.sh</InLineMenuSelection>
                  from
                  <InLineCode>/var/lib/ambari-server/resources/scripts</InLineCode>
                  on the Ambari server and replace hadoop.sh in /usr/share/cluster/ on each failover host.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="67e6f971-18b4-45a1-a8f5-02651bc66683">
        <Title>Configure Ambari properties across the HA cluster</Title>
        <ParaBlock xy:guid="bdc4cd08-7412-4f28-98ff-1763e5b437eb">
          <RichText>To enable Ambari to run<InLineCode>relocate_host_component.py</InLineCode>, use a text editor to
            edit the cluster configuration file on each failover host in the HA cluster.
          </RichText>
          <RichText>
            In<InLineCode>/etc/cluster/cluster.conf</InLineCode>, set values for each of the following properties:
          </RichText>
          <List ListMarker="Bullet" xy:guid="75c664b2-c7f4-4c5e-9333-f3a34a793f9d">
            <ItemBlock>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;server&gt;=&lt;ambari-hostname / ip&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;port&gt;=&lt;8080&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;protocol&gt;=&lt;http / https&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;user&gt;=&lt;admin&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;password&gt;=&lt;admin&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;cluster&gt;=&lt;cluster-name&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>
                  <InLineTypeThis>&lt;output&gt;=&lt;/var/log/ambari_relocate.log&gt;</InLineTypeThis>
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>
            For example, the Hadoop daemon section of
            <InLineCode>cluster.conf</InLineCode>
            on the NameNode localhost in an HA cluster will look like:
          </RichText>
          <RichText>
            <InLineTypeThis>&lt;hadoop__independent_subtree="1" __max_restarts="10" __restart_expire_time="600"
              name="NameNode Process"
              daemon="namenode" boottime="10000" probetime="10000" stoptime="10000"
              url="http://10.0.0.30:50070/dfshealth.jsp"
              pid="/var/run/hadoop/hdfs/hadoop-hdfs-namenode.pid" path="/"

              ambariproperties="server=localhost,port=8080,protocol=http,user=admin,password=admin,cluster=c1,output=/var/log/ambari_relocate.log"/&gt;</InLineTypeThis>
          </RichText>
          <RichText>
            The
            <InLineCode>relocate_host_component.py</InLineCode>
            script reassigns components on failover of any host in the HA cluster, when you start or restart Ambari
            server.
          </RichText>
        </ParaBlock>
      </Topic>
      <Topic xy:guid="bf4a0932-32e2-4d62-9196-ca244ab44255">
        <Title>Troubleshooting RHEL HA</Title>
        <ParaBlock xy:guid="57e08112-ea64-464b-a328-85ab516d38ec">
          <List ListMarker="Numeric" xy:guid="964ec7bb-85fe-41e2-aad6-e8d826a7c1b0">
            <ItemBlock>
              <Item>
                <ItemPara>Review errors in<InLineCode>/var/log/messages/</InLineCode>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>If the following error message appears:</ItemPara>
                <RichText>
                  <InLineApplicationPrompt>abrtd: Executable '/usr/bin/relocate_resources.py' doesn't belong to any
                    package and ProcessUnpackaged is set to 'no'
                  </InLineApplicationPrompt>
                </RichText>
                <RichText>
                  Set the following property, in<InLineCode>/etc/abrt/abrt-action-save-package-data.conf</InLineCode>,
                </RichText>
                <RichText>
                  <InLineTypeThis>
                    set ProcessUnpackaged=Yes
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>If the scripts return Error status=exit code 3, make sure the following are true:</ItemPara>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>The ambari agent on the failover host is running.</ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>Failover did not result from STOP HDFS or STOP NN/JT, using Ambari.</ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
            </ItemBlock>
          </List>
          <RichText>
            The following table lists and describes parameters for<InLineCode>relocate_host_components.py</InLineCode>.
          </RichText>
          <Table align="" border="false" width="100" xy:guid="ee6bf7d5-d9c1-40ad-8362-7010eccc9758">
            <TblGroup>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblCol width=""/>
              <TblHeader>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Parameter</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Value</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Example</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Description</RichText>
                  </Cell>
                </TableRow>
              </TblHeader>
              <TblBody>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-h,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>na</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--help</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Display all parameter options.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-v,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>na</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--verbose</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Increases output verbosity.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-s,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>SERVER_HOSTNAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--host=SERVER_HOSTNAME</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari server host name (FQDN)</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-p,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>SERVER_PORT,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--port=SERVER_PORT</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari server port. [default: 8080]</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-r,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>PROTOCOL,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--protocol=PROTOCOL</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Protocol for communicating with Ambari server (http/https) [default: http]</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-c,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>CLUSTER_NAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--cluster-name=CLUSTER_NAME</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari cluster to operate on.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-e,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>SERVICE_NAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--service-name=SERVICE_NAME</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Service to which the component belongs.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-m,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>COMPONENT_NAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--component-name=COMPONENT_NAME</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari Service Component to operate on.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-n,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>NEW_HOSTNAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--new-host=NEW_HOSTNAME</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>New host to relocate the component to.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-a,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>ACTION,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--action=ACTION</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Script action. [default: relocate]</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-o,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>FILE,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--output-file=FILE</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Output file. [default: /temp/ambari_reinstall_probe.out]</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-u,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>USERNAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--username=USERNAME</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari server admin user. [default: admin]</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-w,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>PASSWORD,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--password=PASSWORD</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Ambari server admin password.</RichText>
                  </Cell>
                </TableRow>
                <TableRow>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>-d,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>COMPONENT_NAME,</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>--start-component</RichText>
                  </Cell>
                  <Cell align="left" cell-bg="none" colspan="1" isInHeaderColumn="0" rowspan="1">
                    <RichText>Start the component after reassignment.</RichText>
                  </Cell>
                </TableRow>
              </TblBody>
              <TblFooter/>
            </TblGroup>
          </Table>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="142bce96-a516-45fb-b045-ef498305b4e4">
      <Title>Using Ambari Blueprints</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="47fe50fd-6ede-45fb-8d24-07bc88fd7090">
        <ParaBlock xy:guid="bf4b6c0f-11de-4a48-b492-1278eb359a10">
          <RichText>Ambari Blueprints provide an API to perform cluster installations. You can build a reusable
            âblueprintâ that defines which Stack to use, how Service Components should be laid-out across a cluster, and
            what configurations to set.
          </RichText>
          <RichText>
            <Xref InsideTargetRef="54188247-ac4b-47b4-a402-88bbf6687b74">Overview: Ambari Blueprints</Xref>
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="54188247-ac4b-47b4-a402-88bbf6687b74">
        <Title>Overview: Ambari Blueprints</Title>
        <ParaBlock xy:guid="4fd2debe-ece5-47f6-8aac-5dd12d1d806e">
          <RichText>
            Ambari Blueprints provide an API to perform cluster installations. You can build a reusable âblueprintâ that
            defines which Stack to use, how Service Components should be laid-out across a cluster and what
            configurations to set.
          </RichText>
          <Figure xy:guid="cc922aa0-f6c6-4d24-9772-406fc9b452c9">
            <MediaObject xy:guid="346b44e6-50fb-4b2a-a93f-fd992559755e">
              <Renditions>
                <Web thumbWidth="85" uri="01-RawContent/Ambari/ambari_blueprint_concept.png"/>
              </Renditions>
            </MediaObject>
          </Figure>
          <RichText>
            After setting up a blueprint, you can call the API to instantiate the cluster by providing the list of hosts
            to use. The Ambari Blueprint framework promotes reusability and facilitates automating cluster installations
            without UI interaction.
          </RichText>
          <RichText>
            Learn more about Ambari Blueprints API on the<Href
                  UrlTarget="https://cwiki.apache.org/confluence/display/AMBARI/Blueprints">Ambari Wiki</Href>.
          </RichText>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="772a7b80-ed6b-4b23-91f1-10499788473b">
      <Title>Configuring HDP Stack Repositories for Red Hat Satellite</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="855a0eec-fc76-4c34-8abe-4b51ea211b86">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="3de8542a-05bd-43b5-8721-d171d20f5b38">
          <RichText>As part of installing HDP Stack with Ambari,
            <InLineCode>HDP.repo</InLineCode>
            and
            <InLineCode>HDP-UTILS.repo</InLineCode>
            files are generated and distributed to the cluster hosts based on the Base URL user input from the Cluster
            Install Wizard during the Select Stack step. In cases where you are using Red Hat Satellite to manage your
            Linux infrastructure, you can disable the repositories defined in the HDP Stack .repo files and instead
            leverage Red Hat Satellite.
          </RichText>
          <RichText>
            <Xref InsideTargetRef="43d025a3-bb9c-412a-8080-ae0b040fdbc2">How To Configure HDP Stack Repositories for Red
              Hat Satellite
            </Xref>
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="43d025a3-bb9c-412a-8080-ae0b040fdbc2">
        <Title>How To Configure HDP Stack Repositories for Red Hat Satellite</Title>
        <ParaBlock xy:guid="6ca8b0e6-2ec3-4723-a0cd-b2d61538bbef">
          <RichText>To disable the repositories defined in the HDP Stack.repo files:</RichText>
          <List ListMarker="Numeric" xy:guid="2acf4ba9-0fe6-45e7-b3f4-dc9aed9f9d6e">
            <ItemBlock>
              <Item>
                <ItemPara>Before starting the Ambari Server and installing a cluster, on the Ambari Server browse to the
                  Stacks definition directory.
                </ItemPara>
                <RichText>
                  <InLineTypeThis>
                    cd /var/lib/ambari-server/resources/stacks/
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Browse the install hook directory:</ItemPara>
                <RichText>
                  <Emph>
                    For HDP 2.0 or HDP 2.1 Stack
                  </Emph>
                  <InLineTypeThis>cd HDP/2.0.6/hooks/before-INSTALL/templates</InLineTypeThis>
                </RichText>
                <RichText>
                  <Emph>For HDP 1.3 Stack
                  </Emph>
                  <InLineTypeThis>cd HDP/1.3.2/hooks/before-INSTALL/templates</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Modify the.repo template file</ItemPara>
                <RichText>
                  <InLineTypeThis>vi repo_suse_rhel.j2</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Set the enabled property to 0 to disable the repository.</ItemPara>
                <RichText>
                  <InLineTypeThis>enabled=0</InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Save and exit.</ItemPara>
              </Item>
              <Item>
                <ItemPara>Start the Ambari Server and proceed with your install.</ItemPara>
              </Item>
            </ItemBlock>
          </List>
          <RichText>The .repo files will still be generated and distributed during cluster install but the repositories
            defined in the .repo files will not be enabled.
          </RichText>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="650278d4-b0ef-494f-b3de-c4bbe8de9c84">
            <Icon thumbWidth="50" uri="Icons/Important.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="3166cc02-6c9a-4afe-a3db-b8d4a507f480"/>
            <SimpleBlock>
              <RichText>You must configure Red Hat Satellite to define and enable the Stack repositories. Please refer
                to the Red Hat Satellite documentation for more information.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="1b45c7b0-b8f2-40f1-a135-eb1c2ca2c244">
      <Title>Configuring Storm for Supervision</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="b41ce4a7-56b7-4bf7-b6f3-315c24b44875">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="25296ccb-3554-44b1-af55-de3817333fcf">
          <RichText>Ambari administrators should install and configure a process controller to monitor and run Apache
            Storm under supervision. Storm is fail-fast application, meaning that it is designed to fail under certain
            circumstances, such as a runtime exception or a break in network connectivity. Without a watchdog process,
            these events can quickly take down an entire Storm cluster in production. A watchdog process prevents this
            by monitoring for failed Storm processes and restarting them when necessary. This topic describes how to
            configureÂ 
            <InLineCode>supervisord</InLineCode>
            to manage the Storm processes, but you may choose to use another process controller, such asÂ 
            <InLineCode>monit</InLineCode>
            or<InLineCode>daemontools</InLineCode>.
          </RichText>
          <CustomNote xy:guid="d45556c8-b8fb-45e9-a313-ff6613435e36">
            <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="fd158191-bb64-4766-968c-1ef21e21540d"/>
            <SimpleBlock>
              <RichText>Running Storm under supervision is only supported for Nimbus Server and Supervisors.</RichText>
            </SimpleBlock>
          </CustomNote>
          <RichText>
            <Xref InsideTargetRef="803898d1-8f94-4980-9b9f-9b110361a6a3">
            </Xref>
            <Xref InsideTargetRef="803898d1-8f94-4980-9b9f-9b110361a6a3">How To Configure Storm for Supervision</Xref>
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="803898d1-8f94-4980-9b9f-9b110361a6a3">
        <Title>How To Configure Storm for Supervision</Title>
        <ParaBlock xy:guid="1e4e6e6b-752c-41ae-9819-f797879a4199">
          <RichText>To configure Storm for operating under supervision:</RichText>
          <List ListMarker="Numeric" xy:guid="ad8cc3e1-9df1-4899-ad77-957dc9e6b872">
            <ItemBlock>
              <Item>
                <ItemPara>Stop all Storm components.</ItemPara>
                <RichText>
                  Using<InLineMenuSelection>Ambari Web Services &gt; Storm &gt; Service Actions</InLineMenuSelection>,
                  choose<InLineMenuSelection>Stop</InLineMenuSelection>, then wait until stop completes.
                </RichText>
              </Item>
              <Item>
                <ItemPara>Stop Ambari Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    ambari-server stop
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Change Supervisor and Nimbus command scripts in the Stack definition.</ItemPara>
                <RichText>
                  On Ambari Server host, run:
                </RichText>
                <RichText>
                  <InLineTypeThis>
                    sed -ir
                    "s/scripts\/supervisor.py/scripts\/supervisor_prod.py/g"/var/lib/ambari-server/resources/stacks/HDP/2.1/services/STORM/metainfo.xml
                    sed -ir "s/scripts\/nimbus.py/scripts\/nimbus_prod.py/g"
                    /var/lib/ambari-server/resources/stacks/HDP/2.1/services/STORM/metainfo.xml
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Install
                  <InLineCode>supervisord</InLineCode>
                  on all Nimbus and Supervisor hosts.
                </ItemPara>
                <SubList ListMarker="Numeric">
                  <ItemBlock>
                    <Item>
                      <ItemPara>Install EPEL repository.</ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          yum install epel-release -y
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Install supervisor package for<InLineCode>supervisord</InLineCode>.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          yum install supervisor -y
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Enable
                        <InLineCode>supervisord</InLineCode>
                        on autostart.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          chkconfig supervisord on
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                    <Item>
                      <ItemPara>Change
                        <InLineCode>supervisord</InLineCode>
                        configuration file permissions.
                      </ItemPara>
                      <RichText>
                        <InLineTypeThis>
                          chmod 600 /etc/supervisord.conf
                        </InLineTypeThis>
                      </RichText>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Configure
                  <InLineCode>supervisord</InLineCode>
                  to supervise Nimbus Server and Supervisors.
                </ItemPara>
                <RichText>
                  Append the following to
                  <InLineCode>/etc/supervisord.conf</InLineCode>
                  on all Supervisor host and Nimbus hosts accordingly.
                </RichText>
                <RichText>
                  <InLineTypeThis>
                    [program:storm-nimbus]
                    command=env PATH=$PATH:/bin:/usr/bin/:/usr/jdk64/jdk1.7.0_45/bin/ JAVA_HOME=/usr/jdk64/jdk1.7.0_45
                    /usr/hdp/current/storm-nimbus/bin/storm nimbus
                    user=storm
                    autostart=true
                    autorestart=true
                    startsecs=10
                    startretries=999
                    log_stdout=true
                    log_stderr=true
                    logfile=/var/log/storm/nimbus.out
                    logfile_maxbytes=20MB
                    logfile_backups=10
                  </InLineTypeThis>
                </RichText>
                <RichText>
                  <InLineTypeThis>
                    [program:storm-supervisor]
                    command=env PATH=$PATH:/bin:/usr/bin/:/usr/jdk64/jdk1.7.0_45/bin/ JAVA_HOME=/usr/jdk64/jdk1.7.0_45
                    /usr/hdp/current/storm-supervisor/bin/storm supervisor
                    user=storm
                    autostart=true
                    autorestart=true
                    startsecs=10
                    startretries=999
                    log_stdout=true
                    log_stderr=true
                    logfile=/var/log/storm/supervisor.out
                    logfile_maxbytes=20MB
                    logfile_backups=10
                  </InLineTypeThis>
                </RichText>
                <CustomNote xy:guid="b0e21bec-c405-4f79-bacf-01fe2dc65dae">
                  <Icon thumbWidth="50" uri="Icons/Note.png" xy:guid="864c9856-4e6e-4b74-af03-8bf278285409"/>
                  <SimpleBlock>
                    <RichText>
                      Change /usr/jdk64/jdk1.7.0_45 accordingly to the location of the jdk for Ambari in your
                      environment
                    </RichText>
                  </SimpleBlock>
                </CustomNote>
              </Item>
              <Item>
                <ItemPara>Start Ambari Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    ambari-server start
                  </InLineTypeThis>
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:guid="5a7acf88-54f4-41d3-a130-351d83e039fe">
      <Title>Tuning Ambari Performance</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="f4570914-bf31-46cb-a5e2-efd51c2884f4">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="49167f02-ac36-4e1d-9189-d01cfb741693">
          <RichText>For clusters larger than 200 nodes, calculate and set a larger task cache size on the Ambari server.
            Also, enable Nagios macros appropriate for the HDP Stack version.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="86a72931-b8b5-4925-b030-c561bce34a80">
        <Title>How To Tune Ambari Performance</Title>
        <ParaBlock xy:guid="804311c6-4b55-450d-af24-f8826692566a">
          <RichText>For clusters larger than 200 nodes:</RichText>
          <List ListMarker="Numeric" xy:guid="e3e7c908-0b3d-48d9-87a8-e96a5f6254f4">
            <ItemBlock>
              <Item>
                <ItemPara>Calculate the new, larger cache size, using the following relationship:</ItemPara>
                <RichText>
                  <InLineTypeThis>ecCacheSizeValue=60*</InLineTypeThis>
                  <SyntaxArg>&lt;cluster_size&gt;</SyntaxArg>
                  where
                  <SyntaxArg>&lt;cluster_size&gt;</SyntaxArg>
                  is the number of nodes in the cluster.
                </RichText>
              </Item>
              <Item>
                <ItemPara>On the Ambari Server host, in<InLineCode>etc/ambari-server/conf/ambari-properties</InLineCode>
                  , add the following property and value:
                </ItemPara>
                <RichText>
                  <InLineCode>server.ecCacheSize=&lt;ecCacheSizeValue&gt;
                  </InLineCode>where
                  <SyntaxArg>&lt;ecCacheSizeValue&gt;</SyntaxArg>
                  is the value calculated previously, based on the number of nodes in the cluster.
                </RichText>
              </Item>
              <Item>
                <ItemPara>On Ambari Server host, make the following changes:</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    -enable_environment_macros=1
                    +enable_environment_macros=0
                  </InLineTypeThis>
                </RichText>
                <SubList ListMarker="Bullet">
                  <ItemBlock>
                    <Item>
                      <ItemPara>For HDP2, make this change in
                        <InLineCode>
                          /var/lib/ambari-server/resources/stacks/HDP/2.0.6/services/NAGIOS/package/templates/nagios.cfg.j2
                        </InLineCode>
                      </ItemPara>
                    </Item>
                    <Item>
                      <ItemPara>For HDP1, make this change in
                        <InLineCode>
                          /var/lib/ambari-server/resources/stacks/HDP/1.3.2/services/NAGIOS/package/templates/nagios.cfg.j2
                        </InLineCode>
                      </ItemPara>
                    </Item>
                  </ItemBlock>
                </SubList>
              </Item>
              <Item>
                <ItemPara>Restart Ambari Server.</ItemPara>
                <RichText>
                  <InLineTypeThis>
                    ambari-server restart
                  </InLineTypeThis>
                </RichText>
              </Item>
              <Item>
                <ItemPara>Restart Nagios.</ItemPara>
                <RichText>
                  Using<InLineMenuSelection>Ambari Web &gt; Services &gt; Nagios &gt; Service
                  Actions</InLineMenuSelection>, choose<InLineMenuSelection>Restart All</InLineMenuSelection>.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="125ea757-0c6c-4582-894d-d9c88c0c4182">
      <Title>Refreshing YARN Capacity Scheduler</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="bcd442b8-7d26-4e27-91ad-55cce0a2b5fa">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="40285bba-c952-476e-8a37-fdee15615412">
          <RichText>
            After you modify the Capacity Scheduler configuration, YARN supports refreshing the queues without requiring
            you to restart your ResourceManager. The ârefreshâ operation is valid if you have made no destructive
            changes to your configuration. Removing a queue is an example of a destructive change.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:schema-version="Core/Definitions/TopicTypes/Topic.xsd#core-3.9-0"
             xy:guid="6f5372a3-c2b7-42ed-9969-dc2ce0a9950f">
        <Title>How to refresh the YARN Capacity Scheduler</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="3d3c94a4-0649-4bf3-86de-11c8c35ccae1">
          <RichText>This topic describes how to refresh the Capacity Scheduler in cases where you have added or modified
            existing queues.
          </RichText>
        </ParaBlock>
        <ParaBlock xy:guid="e635b129-c7e3-4c66-9344-0e7a9b5dc81e">
          <List ListMarker="Bullet" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="764836e7-e3bb-405e-bf15-4b2e7932fddc">
            <ItemBlock>
              <Item>
                <ItemPara>In Ambari Web, browse to<InLineMenuSelection>Services &gt; YARN &gt;
                  Summary</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Select<InLineMenuSelection>Service Actions</InLineMenuSelection>, then choose
                  <InLineMenuSelection>Refresh YARN Capacity Scheduler</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Confirm you would like to perform this operation.</ItemPara>
                <RichText>
                  The refresh operation is submitted to the YARN ResourceManager.
                </RichText>
              </Item>
            </ItemBlock>
          </List>
          <CustomNote xy:schema-version="Core/Definitions/CustomNote.xsd#core-3.9-0"
                      xy:guid="aaba424d-fbb0-467a-9840-999a83e025cd">
            <Icon thumbWidth="50" uri="Icons/Important.png" xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                  xy:guid="d2e2aef4-f2ba-47df-bc20-5d59693024ac"/>
            <SimpleBlock>
              <RichText>The Refresh operation will fail with the following message: âFailed to re-init queuesâ if you
                attempt to refresh queues in a case where you performed a destructive change, such as removing a queue.
                In cases where you have made destructive changes, you must perform a ResourceManager restart for the
                capacity scheduler change to take effect.
              </RichText>
            </SimpleBlock>
          </CustomNote>
        </ParaBlock>
      </Topic>
    </Lesson>
    <Lesson xy:schema-version="IA/Definitions/IA.xsd#core-3.9-0" xy:guid="4a1e3b4c-8138-4053-895d-e9ce6fb84c2e">
      <Title>Rebalancing HDFS</Title>
      <IntroBlock xy:schema-version="Core/Definitions/SharedComponents.xsd#core-3.9-0"
                  xy:guid="64512603-430c-49d6-8871-87327cef0009">
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="aa5cd1d8-2157-4261-a531-fb3464f917e2">
          <RichText>HDFS provides a âbalancerâ utility to help balance the blocks across DataNodes in the cluster.
          </RichText>
        </ParaBlock>
      </IntroBlock>
      <Topic xy:guid="c6cd67d1-1c07-4505-8c20-b0f597f208f3">
        <Title>How to rebalance HDFS</Title>
        <ParaBlock xy:schema-version="Core/Definitions/Paragraph.xsd#core-3.9-0"
                   xy:guid="d5a79a3c-fb7f-4f72-9a5d-9b34c1df852d">
          <RichText>This topic describes how you can initiate an HDFS rebalance from Ambari.</RichText>
        </ParaBlock>
        <ParaBlock xy:guid="671fe436-f2db-4386-936f-ce8d75ed5550">
          <List ListMarker="Numeric" xy:schema-version="Core/Definitions/List.xsd#core-3.9-0"
                xy:guid="c715b502-b4c7-4079-823b-5d185b03c8fe">
            <ItemBlock>
              <Item>
                <ItemPara>. In Ambari Web, browse to<InLineMenuSelection>Services &gt; HDFS &gt;
                  Summary</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Select<InLineMenuSelection>Service Actions</InLineMenuSelection>, then choose
                  <InLineMenuSelection>Rebalance HDFS</InLineMenuSelection>.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>Enter the Balance Threshold value as a percentage of disk capacity.</ItemPara>
                <Figure xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                        xy:guid="daca1168-b274-41a6-aef7-e8db07c87f74">
                  <MediaObject xy:schema-version="Core/Definitions/Figure.xsd#core-3.9-0"
                               xy:guid="6bee94a6-ed48-48da-9ec3-fb96a72d1f6d">
                    <Renditions>
                      <Web thumbWidth="50" uri="System Admin Guides/Ambari/RebalanceHDFS.png"/>
                    </Renditions>
                  </MediaObject>
                </Figure>
              </Item>
              <Item>
                <ItemPara>Click
                  <InLineMenuSelection>Start</InLineMenuSelection>
                  to begin the rebalance.
                </ItemPara>
              </Item>
              <Item>
                <ItemPara>You can check rebalance progress or cancel a rebalance in process by opening the Background
                  Operations dialog.
                </ItemPara>
              </Item>
            </ItemBlock>
          </List>
        </ParaBlock>
      </Topic>
    </Lesson>
  </Lessons>
  <DesignData xy:schema-version="Core/Definitions/Metadata/DesignData.xsd#core-3.9-0"
              xy:guid="9e71d9b5-c276-4e87-b3ef-bc3166ae8545">
    <LOM xy:schema-version="Core/Definitions/Metadata/LOM.xsd#core-3.9-0"
         xy:guid="5e154f68-7006-450e-a339-d3c35753cdb0">
      <LifeCycle xy:schema-version="Core/Definitions/Metadata/LOM.xsd#core-3.9-0"
                 xy:guid="a9594163-7bc3-4ff0-a78e-93ebea8c68e8">
        <Version xy:schema-version="Core/Definitions/Metadata/LOM.xsd#core-3.9-0"
                 xy:guid="abbb3b36-fdfd-4861-b15c-0ef99723367c">Ambari 1.7.0
        </Version>
        <Status xy:schema-version="Core/Definitions/Metadata/LOM.xsd#core-3.9-0"
                xy:guid="85b1a863-8a96-4060-a7a8-aed911f50600">final
        </Status>
      </LifeCycle>
      <AttributeGroup xy:schema-version="Core/Definitions/Metadata/LOM.xsd#core-3.9-0"
                      xy:guid="e4b27657-df90-410c-86b3-63d8c90aa0a4">
        <Attribute xy:schema-version="Core/Definitions/Metadata/LOM.xsd#core-3.9-0"
                   xy:guid="e215aa8e-2ec9-42a3-b25b-22cb0b2cf8ab">
          <Name>Publication Date</Name>
          <Date>2014-12-02</Date>
        </Attribute>
      </AttributeGroup>
    </LOM>
  </DesignData>
</IA>